---
title: "Understanding International Numbers & Currency"
subTitle: "Localized money explained!"
draft: true
date: 2024-08-28
modified: 2024-09-03
tags: [engineering, internationalization, localization, currency, numbers]
category: HowTo
subCategory: Internationalization
cover: currency-banner-pic.webp
cover_full_width: currency-banner-wide.jpg
cover_mobile: w300_currency-banner-pic.jpg
cover_icon: icon_currency-banner-pic.jpg
---

## Money: Localization (L10n) and Internationalization (i18n)

They aren't just for dominating a game of Scrabble, _localization_ & _internationalization_ refer to the process of making a product **feel at home in a different country.**

<p class="breakout quote">Showing a currency in the wrong local format is a dead give-away: you've put in no effort.<br/>If you can't format a price, how could you handle shipping?</p>

Internationalization is a big topic, covering everything from text translation to date formatting. In this post we'll focus in on a particular subtopic, **formatting numbers and currency.**

Let's explore formatting between 3 Eurozone countries, USA and India:

- `â‚¬1,234,567.89` Ireland ðŸ‡®ðŸ‡ª
- `1.234.567,89 â‚¬` Germany ðŸ‡©ðŸ‡ª
- `1â€¯234â€¯567,89 â‚¬` France ðŸ‡«ðŸ‡·
- `$1,234,567.89` USA ðŸ‡ºðŸ‡¸
- `â‚¹1,234,567.89` India ðŸ‡®ðŸ‡³

Chaos! Right? There are symbols, whitespace and punctuation flying all over! It's amazing the EU can agree on anything! ðŸ˜…


## Key Concepts

Before we dive into solutions, what do we mean by "Numbers are Local"?

### Numbers are Local ðŸ˜ï¸

Every locale ([Country per ISO 3166](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes)) defines rules for formatting numbers.

Number formatting rules include:

- Decimal: comma, period.
- Thousands: comma, period, space.
- Currency symbol position & spacing.

### Currency is Global ðŸŒŽ

A `currency` refers to a specific unit of money. (See [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217#Active_codes_(list_one)) for list.)

- Specifies a symbol: `$`, `â‚¬`, `Â£`, `Â¥`. (Often reused.)
- Always has a 3-letter code: `USD`, `EUR`, `GBP`, `JPY`.
- Can be used/exchanged in "any" country. In theory.
- Converting between currencies requires exchange rate data.
- Value doesn't change based on locale.

### When Locale Matters

Most ecommerce/payment REST APIs deal in `price` + `currencyCode`. Why no locales?

Because backend APIs don't know where the data will be displayed. It's up to the frontend to format numbers and currency correctly based on the provided locale. Locales are (typically) set at the OS level; and browsers make it available via `navigator.language`.

## The Solution

Ok, good news! Modern programming languages have built-in support for this. In JavaScript, we can use the [`Intl`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl) object to format numbers and currencies according to a given locale.

In this guide, we'll get a handle on how to localize numbers in our own apps.

1. [Key Terms](#key-terms)
1. [Formatting Numbers](#formatting-numbers)
1. [Formatting Currency](#formatting-currency)

## Key Terms

- Locale: a [Language](https://www.loc.gov/standards/iso639-2/php/English_list.php) & [Country](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes) pair. ( `en-US` , `en-GB`, `xh-ZA`)
- Currency Code: Three letter codes identify every currency. (`EUR: Euro`, `CAD: Canadian Dollars`, `USD: US Dollars`, `JPY: Japanese Yen`, see [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217#Active_codes_(list_one)))


Every country or territory has 3 ways to refer to it: a two-letter code, a three-letter code, and a numeric code.  (`US`, `USA`, `840`).

> Note: Locales ONLY use two letter country codes.


## Formatting Numbers

Before we get to money, let's talk numbers.

To format a number locally, we'll need a `locale` - a language + country string (`en-US`). Every `locale` defines how to format numbers.

Details like whether commas, periods, or spaces are used as separators. For example, compare several EU/Euro locales:

- Germany: `1.234.567,89`
- Ireland: `1,234,567.89`
- France: `1â€¯234â€¯567,89`

## Formatting Currency

Fortunately, `Intl.NumberFormat` can do more than "numbers," it can handle **currency** when given a `Currency Code` option: (`{ style: 'currency', currency: 'USD' }`)!

Now let's look at formatting across Euro locales:

- Germany: `1.234.567,89 â‚¬`
- Ireland: `â‚¬1,234,567.89`
- France: `1â€¯234â€¯567,89 â‚¬`

<details open>
  <summary>View source: JS currency formatting.</summary>
  <p>

```javascript
const number = 1_234_567.89;

const moneyFormatter = (locale, currency) => // helper function
  new Intl.NumberFormat(locale, { style: 'currency', currency });

const germany = moneyFormatter('de-DE', 'EUR');
const ireland = moneyFormatter('ga-IE', 'EUR');
const france = moneyFormatter('fr-FR', 'EUR');

console.log('Germany: ' + germany.format(number));
console.log('Ireland: ' + ireland.format(number));
console.log('France: ' + france.format(number));
```

  </p>
</details>

## Next Steps

Depending on your particular needs, you may want to explore a few related concepts:

- Best practices with user locale. Detect + allow overrides. (e.g. a country drop down.)
- Persisting whole integers (store cents, not dollars.)
- Money math. (e.g. applying a `20% off` coupon, calculating `subTotal + taxes`, etc.)
- Live exchange rates. (Interbank orders, forex/currency exchanges.)

<p class="breakout quote">Let me know if would like to see a future article on these topics!</p>

## Recommendations

Some libraries can help with these tasks: 

**JavaScript / TypeScript**

- [dinero.js](https://v2.dinerojs.com/) supports money math, exchange rates, formatting, and parsing!

**Rust**

- [rusty_money](https://crates.io/crates/rusty_money) is my preferred Rust library.

**Go**

- [currency](https://github.com/bojanz/currency) is my current Golang choice.

