---
language_name: Spanish

title: Una extraña trampa para acelerar a los equipos de funciones ¡Los ingenieros principales odian esto!
subTitle: Los ingenieros principales no lo aman.
date: 2024-09-29
modificado: 2024-09-30
etiquetas: [ágil, equipos]
categoría: Ingeniería

cover_full_width: wide_danny-howe-98KlbUsOO_w-unsplash.webp
cover: danny-howe-98KlbUsOO_w-unsplash__w300.webp
cover_móvil: danny-howe-98KlbUsOO_w-unsplash__w200.webp
cover_icon: danny-howe-98KlbUsOO_w-unsplash__w200.webp
cover_credit: Foto por <a href="https://unsplash.com/@dannyhowe?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Danny Howe</a> en <a href="https://unsplash.com/photos/red-and-white-neon-light-signage-98KlbUsOO_w?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
---

{/* Agregar elemento html5 de alternancia */}

<details>
<summary>Índice</summary>

- [Pensar en llaves](#pensar-en-llaves)
  - [Diseñar con llaves](#diseñar-con-llaves)
  - [KVs como gráficos y árboles?](#kvs-como-gráficos-y-árboles)
  - [Cuándo usar patrones KV](#cuándo-usar-patrones-kv)
  - [Cuándo evitar los patrones KV](#cuándo-evitar-los-patrones-kv)
  - [Cuándo necesitas más que KV](#cuándo-necesitas-más-que-kv)
- [Pasos siguientes](#pasos-siguientes)
  - [Servicio de hechos - Proyecto de referencia](#servicio-de-hechos---proyecto-de-referencia)
- [Conclusión](#conclusión)
  - [Lectura adicional](#lectura-adicional)

</details>

Cuando se trata de diseñar un nuevo sistema o función, es fácil perderse en el diseño del esquema. En este artículo, compartiré una trampa genial que ha dado sus frutos a lo largo de mi carrera.

<section class="breakout">
  _Prueba_ el almacenamiento de datos más simple posible al diseñar un nuevo sistema o función.
</section>

Con demasiada frecuencia, veo a los equipos alcanzando para SQL o MongoDB como su única opción para el almacenamiento de datos. Claro, nadie está siendo despedido por elegir SQL. Pero ¿qué pasa si te digo que hay una manera más simple, más rápida y más económica para comenzar?

Un almacén de claves-valores (KV) o Key-value store como Redis o S3 podría ser todo lo que necesitas.

No siempre es la elección correcta, pero tal vez **más a menudo de lo que te das cuenta.**

Un almacenamiento simple puede moderadamente acelerar las primeras etapas del desarrollo al reutilizar el código de capa de datos y evitar los costos relacionados con las migraciones de esquema y las alteraciones. Deja que el código se ocupe de los cambios siempre que sea posible. Mejor aún, evita lidiar con los cambios en dos lugares diferentes.

Las ganancias de rendimiento son probables, ya que las búsquedas de claves son altamente optimizadas, y las escrituras pueden beneficiarse de actualizaciones por lotes.

{/* Evita los patrones KV si necesitas JOINs o para consultar por propiedades en tu conjunto de datos. O en casos donde tienes conjuntos de datos infinitamente crecientes o sin límite (Registros, Inscriones, etc.). */}

## Pensar en llaves

Puede resultar extraño diseñar con el patrón KV primero, especialmente si estás acostumbrado a diseñar sistemas con jerarquías de objetos o diagramas de relaciones de entidad.

Probablemente ***has usado*** patrones KV antes. Están en todas partes, desde las configuraciones hasta las URLs, pasando por el Almacén de Objetos S3. Cada vez que tratas los datos a través de un valor de ID único, ¿qué más no es otro patrón KV? (Aunque no necesariamente un Almacén de Claves.)

### Diseñar con llaves

Casi todos los datos _pueden_ ser representados utilizando patrones KV. (De hecho, muchos sistemas de bases de datos superiores se construyen sobre patrones KV inferiores.) Veamos algunos ejemplos:

```markdown
usuario/123 {id: 123, ...}
usuario/123/bloqueo ['usuario/456', 'usuario/789']
usuario/123/grupos ['administrador', 'personal']
usuario/420/amigos ['usuario/456', 'usuario/789']

grupo/administrador {usuario: '*:rw'}
grupo/predeterminado {usuario: '*:r'}

producto/42/descuento/<UUID> {porcentajeDescuento: '10%'}
producto/42/descuento/<UUID> {porcentajeDescuento: '20%', mínimoTotal: 100.0}
```

Puedes haber notado, pero el ID es a menudo una clave en sí mismo! Esta es una patrón común en los almacenes de claves. La clave a menudo es un compuesto del tipo de entidad y el identificador único. (e.g `usuario/123`, `usuario:456`)

### KVs como gráficos y árboles?

Es útil representar estructuras de datos complejas como gráficos o árboles utilizando patrones KV. (Una vez más, las URL REST son un gran ejemplo de esto.)

La jerarquía de claves (`usuario/420 -> usuario/420/amigos`) codifica naturalmente una relación gráfica entre el `usuario` y sus `amigos`.

Esta es una forma rápida y económica de serializar estructuras de datos gráficas. Especialmente si no necesitas la complejidad de un gráfico de bases de datos (como Neo4j).

<figure>
![Gráfico de usuario/123](./KVsCanBeGraphs.webp)
<figcaption>Gráfico de usuario/123</figcaption>
</figure>

### Cuándo usar patrones KV

- Cuando necesitas una escala masiva. (Billones o incluso billones de pares KV.)
- Cuando accedes principalmente a los datos a través de una clave única.
- Cuando necesitas estructuras de datos simples.
- Cuando tienes datos con una estructura jerárquica, gráfica o arbórea.

### Cuándo evitar los patrones KV

No almacenes cosas como comentarios en un solo par KV. Por ejemplo, `post/666 -> {comentarios: [...] demasiado`. En su lugar, podrías usar `post/666/comentarios/1`, o `post/666/comentarios/<UUID>`, etc. O opta por una tabla SQL.

- Cuando necesitas buscar por propiedades (no clave u ID) en tu conjunto de datos.
- Cuando necesitas realizar JOINs entre múltiples entidades.
- Cuando necesitas hacer cumplir relaciones complejas o restricciones.

### Cuándo necesitas más que KV

A medida que evolucionan los requisitos del proyecto, es posible que debas hacer más de lo que un almacén KV puede manejar. En este punto, es posible que desees migrar a una tienda de datos más compleja.

{/* La buena noticia es que puedes comenzar con un patrón KV y evolucionarlo a medida que sea necesario. S3 tiene características


{/* Translated from English to Spanish
Original text length: 7729 characters
Translation API: http://192.168.0.87:1234/v1/chat/completions
Translation model: lmstudio-community/aya-23-8B-GGUF
Translation date: 2024-12-06T06:24:58.939Z */}


