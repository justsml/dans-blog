(function(){function ir(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(u){return void r(u)}s.done?t(l):Promise.resolve(l).then(n,o)}function Ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(l){ir(a,n,o,i,s,"next",l)}function s(l){ir(a,n,o,i,s,"throw",l)}i(void 0)}))}}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(null,arguments)}var sr,Wn=["type"],Gn=Object.defineProperty,C=(e,t,r)=>((n,o,a)=>o in n?Gn(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),Vn=Object.defineProperty,lr=(e,t,r)=>((n,o,a)=>o in n?Vn(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),$=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))($||{}),ur={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},dr={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Qe={};function St(e){if(Qe[e])return Qe[e];var t=(function(d){var c,g=globalThis==null||(c=globalThis.Zone)==null||c.__symbol__==null?void 0:c.__symbol__(d);return g&&globalThis[g]?globalThis[g]:void 0})(e)||globalThis[e],r=t.prototype,n=e in ur?ur[e]:void 0,o=!!(n&&n.every((d=>{var c,g;return!!((g=(c=Object.getOwnPropertyDescriptor(r,d))==null?void 0:c.get)!=null&&g.toString().includes("[native code]"))}))),a=e in dr?dr[e]:void 0,i=!!(a&&a.every((d=>{var c;return typeof r[d]=="function"&&((c=r[d])==null?void 0:c.toString().includes("[native code]"))})));if(o&&i)return Qe[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?Qe[e]=u:t.prototype}catch{return t.prototype}}var wt={};function be(e,t,r){var n,o=e+"."+String(r);if(wt[o])return wt[o].call(t);var a=St(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(wt[o]=i,i.call(t)):t[r]}var Nt={};function cr(e,t,r){var n=e+"."+String(r);if(Nt[n])return Nt[n].bind(t);var o=St(e)[r];return typeof o!="function"?t[r]:(Nt[n]=o,o.bind(t))}var re={childNodes:function(e){return be("Node",e,"childNodes")},parentNode:function(e){return be("Node",e,"parentNode")},parentElement:function(e){return be("Node",e,"parentElement")},textContent:function(e){return be("Node",e,"textContent")},contains:function(e,t){return cr("Node",e,"contains")(t)},getRootNode:function(e){return cr("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?be("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?be("Element",e,"shadowRoot"):null},querySelector:function(e,t){return be("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return be("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return St("MutationObserver").constructor}};function hr(e){return e.nodeType===e.ELEMENT_NODE}function Ve(e){var t=e&&"host"in e&&"mode"in e&&re.host(e)||null;return!!(t&&"shadowRoot"in t&&re.shadowRoot(t)===e)}function He(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function $e(e){try{var t=e.rules||e.cssRules;if(!t)return null;var r=Array.from(t,(o=>pr(o,e.href))).join("");return(n=r).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}catch{return null}var n}function pr(e,t){if((function(a){return"styleSheet"in a})(e)){var r;try{r=$e(e.styleSheet)||(function(a){var{cssText:i}=a;if(i.split('"').length<3)return i;var s=["@import","url("+JSON.stringify(a.href)+")"];return a.layerName===""?s.push("layer"):a.layerName&&s.push("layer("+a.layerName+")"),a.supportsText&&s.push("supports("+a.supportsText+")"),a.media.length&&s.push(a.media.mediaText),s.join(" ")+";"})(e)}catch{r=e.cssText}return e.styleSheet.href?et(r,e.styleSheet.href):r}var n,o=e.cssText;return(function(a){return"selectorText"in a})(e)&&e.selectorText.includes(":")&&(n=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,o=o.replace(n,"$1\\$2")),t?et(o,t):o}function mr(e,t){return Array.from(e.styleSheets).find((r=>r.href===t))}let fr=class{constructor(){lr(this,"idNodeMap",new Map),lr(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;var r=(t=this.getMeta(e))==null?void 0:t.id;return r??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){var t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((r=>this.removeNodeFromMap(r)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){var r=this.getNode(e);if(r){var n=this.nodeMetaMap.get(r);n&&this.nodeMetaMap.set(t,n)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Mt(e){var{element:t,maskInputOptions:r,tagName:n,type:o,value:a,maskInputFn:i}=e,s=a||"",l=o&&ke(o);return(r[n.toLowerCase()]||l&&r[l])&&(s=i?i(s,t):"*".repeat(s.length)),s}function ke(e){return e.toLowerCase()}var gr="__rrweb_original__";function At(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ke(t):null}function vr(e,t){var r,n;try{n=new URL(e,t??window.location.href)}catch{return null}var o=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(r=o?.[1])!==null&&r!==void 0?r:null}var Hn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Pn=/^(?:[a-z+]+:)?\/\//i,zn=/^www\..*/i,Xn=/^(data:)([^,]*),(.*)/i;function et(e,t){return(e||"").replace(Hn,((r,n,o,a,i,s)=>{var l,u=o||i||s,d=n||a||"";if(!u)return r;if(Pn.test(u)||zn.test(u)||Xn.test(u))return"url("+d+u+d+")";if(u[0]==="/")return"url("+d+(((l=t).indexOf("//")>-1?l.split("/").slice(0,3).join("/"):l.split("/")[0]).split("?")[0]+u)+d+")";var c=t.split("/"),g=u.split("/");for(var f of(c.pop(),g))f!=="."&&(f===".."?c.pop():c.push(f));return"url("+d+c.join("/")+d+")"}))}var Ee,yr,Kn=1,jn=new RegExp("[^a-z0-9-_:]"),Pe=-2;function Ir(){return Kn++}var Jn=/^[^ \t\n\r\u000c]+/,Un=/^[, \t\n\r\u000c]+/,br=new WeakMap;function ze(e,t){return t&&t.trim()!==""?kt(e,t):t}function qn(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function kt(e,t){var r=br.get(e);if(r||(r=e.createElement("a"),br.set(e,r)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return r.setAttribute("href",t),r.href}function Cr(e,t,r,n){return n&&(r==="src"||r==="href"&&(t!=="use"||n[0]!=="#")||r==="xlink:href"&&n[0]!=="#"?ze(e,n):r!=="background"||t!=="table"&&t!=="td"&&t!=="th"?r==="srcset"?(function(o,a){if(a.trim()==="")return a;var i=0;function s(f){var A,E=f.exec(a.substring(i));return E?(A=E[0],i+=A.length,A):""}for(var l=[];s(Un),!(i>=a.length);){var u=s(Jn);if(u.slice(-1)===",")u=ze(o,u.substring(0,u.length-1)),l.push(u);else{var d="";u=ze(o,u);for(var c=!1;;){var g=a.charAt(i);if(g===""){l.push((u+d).trim());break}if(c)g===")"&&(c=!1);else{if(g===","){i+=1,l.push((u+d).trim());break}g==="("&&(c=!0)}d+=g,i+=1}}}return l.join(", ")})(e,n):r==="style"?et(n,kt(e)):t==="object"&&r==="data"?ze(e,n):n:ze(e,n))}function Sr(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function tt(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&tt(re.parentNode(e),t,r);for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return!!r&&tt(re.parentNode(e),t,r)}function wr(e,t,r,n){var o;if(hr(e)){if(o=e,!re.childNodes(o).length)return!1}else{if(re.parentElement(e)===null)return!1;o=re.parentElement(e)}try{if(typeof t=="string"){if(n){if(o.closest("."+t))return!0}else if(o.classList.contains(t))return!0}else if(tt(o,t,n))return!0;if(r){if(n){if(o.closest(r))return!0}else if(o.matches(r))return!0}}catch{}return!1}function Qn(e,t){var{doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:i,inlineStylesheet:s,maskInputOptions:l={},maskTextFn:u,maskInputFn:d,dataURLOptions:c={},inlineImages:g,recordCanvas:f,keepIframeSrcFn:A,newlyAddedElement:E=!1}=t,k=(function(m,p){if(p.hasNode(m)){var h=p.getId(m);return h===1?void 0:h}})(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:$.Document,childNodes:[],compatMode:e.compatMode}:{type:$.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:$.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:k};case e.ELEMENT_NODE:return(function(m,p){for(var h,{doc:v,blockClass:b,blockSelector:S,inlineStylesheet:w,maskInputOptions:M={},maskInputFn:T,dataURLOptions:x={},inlineImages:B,recordCanvas:I,keepIframeSrcFn:_,newlyAddedElement:L=!1,rootId:D}=p,O=(function(W,ue,me){try{if(typeof ue=="string"){if(W.classList.contains(ue))return!0}else for(var fe=W.classList.length;fe--;){var Ie=W.classList[fe];if(ue.test(Ie))return!0}if(me)return W.matches(me)}catch{}return!1})(m,b,S),R=(function(W){if(W instanceof HTMLFormElement)return"form";var ue=ke(W.tagName);return jn.test(ue)?"div":ue})(m),N={},P=m.attributes.length,z=0;z<P;z++){var G=m.attributes[z];Sr(R,G.name,G.value)||(N[G.name]=Cr(v,R,ke(G.name),G.value))}if(R==="link"&&w){var y=(function(W){return W?.href})(m);if(y){var Y=mr(v,y);!Y&&y.includes(".css")&&(Y=mr(v,window.location.origin+"/"+y.replace(window.location.href,"")));var ae=null;Y&&(ae=$e(Y)),ae&&(delete N.rel,delete N.href,N._cssText=ae)}}if(R==="style"&&m.sheet&&!(m.innerText||re.textContent(m)||"").trim().length){var ee=$e(m.sheet);ee&&(N._cssText=ee)}if(R==="input"||R==="textarea"||R==="select"){var J=m.value,te=m.checked;N.type!=="radio"&&N.type!=="checkbox"&&N.type!=="submit"&&N.type!=="button"&&J?N.value=Mt({element:m,type:At(m),tagName:R,value:J,maskInputOptions:M,maskInputFn:T}):te&&(N.checked=te)}if(R==="option"&&(m.selected&&!M.select?N.selected=!0:delete N.selected),R==="dialog"&&m.open)try{N.rr_open_mode=m.matches("dialog:modal")?"modal":"non-modal"}catch{N.rr_open_mode="modal",N.ph_rr_could_not_detect_modal=!0}if(R==="canvas"&&I){if(m.__context==="2d")(function(W){var ue=W.getContext("2d");if(!ue)return!0;for(var me=0;me<W.width;me+=50)for(var fe=0;fe<W.height;fe+=50){var Ie=ue.getImageData,Ct=gr in Ie?Ie[gr]:Ie;if(new Uint32Array(Ct.call(ue,me,fe,Math.min(50,W.width-me),Math.min(50,W.height-fe)).data.buffer).some((or=>or!==0)))return!1}return!0})(m)||(N.rr_dataURL=m.toDataURL(x.type,x.quality));else if(!("__context"in m)){var de=m.toDataURL(x.type,x.quality),he=v.createElement("canvas");he.width=m.width,he.height=m.height,de!==he.toDataURL(x.type,x.quality)&&(N.rr_dataURL=de)}}if(R==="img"&&B){Ee||(Ee=v.createElement("canvas"),yr=Ee.getContext("2d"));var U=m,Te=U.currentSrc||U.getAttribute("src")||"<unknown-src>",Ue=U.crossOrigin,ye=()=>{U.removeEventListener("load",ye);try{Ee.width=U.naturalWidth,Ee.height=U.naturalHeight,yr.drawImage(U,0,0),N.rr_dataURL=Ee.toDataURL(x.type,x.quality)}catch(W){if(U.crossOrigin!=="anonymous")return U.crossOrigin="anonymous",void(U.complete&&U.naturalWidth!==0?ye():U.addEventListener("load",ye));console.warn("Cannot inline img src="+Te+"! Error: "+W)}U.crossOrigin==="anonymous"&&(Ue?N.crossOrigin=Ue:U.removeAttribute("crossorigin"))};U.complete&&U.naturalWidth!==0?ye():U.addEventListener("load",ye)}if(R==="audio"||R==="video"){var Z=N;Z.rr_mediaState=m.paused?"paused":"played",Z.rr_mediaCurrentTime=m.currentTime,Z.rr_mediaPlaybackRate=m.playbackRate,Z.rr_mediaMuted=m.muted,Z.rr_mediaLoop=m.loop,Z.rr_mediaVolume=m.volume}if(L||(m.scrollLeft&&(N.rr_scrollLeft=m.scrollLeft),m.scrollTop&&(N.rr_scrollTop=m.scrollTop)),O){var{width:ie,height:F}=m.getBoundingClientRect();N={class:N.class,rr_width:ie+"px",rr_height:F+"px"}}R!=="iframe"||_(N.src)||(m.contentDocument||(N.rr_src=N.src),delete N.src);try{customElements.get(R)&&(h=!0)}catch{}return{type:$.Element,tagName:R,attributes:N,childNodes:[],isSVG:qn(m)||void 0,needBlock:O,rootId:D,isCustom:h}})(e,{doc:r,blockClass:o,blockSelector:a,inlineStylesheet:s,maskInputOptions:l,maskInputFn:d,dataURLOptions:c,inlineImages:g,recordCanvas:f,keepIframeSrcFn:A,newlyAddedElement:E,rootId:k});case e.TEXT_NODE:return(function(m,p){var h,{needsMask:v,maskTextFn:b,rootId:S}=p,w=re.parentNode(m),M=w&&w.tagName,T=re.textContent(m),x=M==="STYLE"||void 0,B=M==="SCRIPT"||void 0;if(x&&T){try{m.nextSibling||m.previousSibling||(h=w.sheet)!=null&&h.cssRules&&(T=$e(w.sheet))}catch(I){console.warn("Cannot get CSS styles from text's parentNode. Error: "+I,m)}T=et(T,kt(p.doc))}return B&&(T="SCRIPT_PLACEHOLDER"),!x&&!B&&T&&v&&(T=b?b(T,re.parentElement(m)):T.replace(/[\S]/g,"*")),{type:$.Text,textContent:T||"",isStyle:x,rootId:S}})(e,{doc:r,needsMask:i,maskTextFn:u,rootId:k});case e.CDATA_SECTION_NODE:return{type:$.CDATA,textContent:"",rootId:k};case e.COMMENT_NODE:return{type:$.Comment,textContent:re.textContent(e)||"",rootId:k};default:return!1}}function j(e){return e==null?"":e.toLowerCase()}function Oe(e,t){var{doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:i,maskTextSelector:s,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:d={},maskTextFn:c,maskInputFn:g,slimDOMOptions:f,dataURLOptions:A={},inlineImages:E=!1,recordCanvas:k=!1,onSerialize:m,onIframeLoad:p,iframeLoadTimeout:h=5e3,onStylesheetLoad:v,stylesheetLoadTimeout:b=5e3,keepIframeSrcFn:S=(()=>!1),newlyAddedElement:w=!1}=t,{needsMask:M}=t,{preserveWhiteSpace:T=!0}=t;M||(M=wr(e,i,s,M===void 0));var x,B=Qn(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:M,inlineStylesheet:u,maskInputOptions:d,maskTextFn:c,maskInputFn:g,dataURLOptions:A,inlineImages:E,recordCanvas:k,keepIframeSrcFn:S,newlyAddedElement:w});if(!B)return console.warn(e,"not serialized"),null;x=n.hasNode(e)?n.getId(e):!(function(y,Y){return!!(Y.comment&&y.type===$.Comment||y.type===$.Element&&(Y.script&&(y.tagName==="script"||y.tagName==="link"&&(y.attributes.rel==="preload"||y.attributes.rel==="modulepreload")&&y.attributes.as==="script"||y.tagName==="link"&&y.attributes.rel==="prefetch"&&typeof y.attributes.href=="string"&&vr(y.attributes.href)==="js")||Y.headFavicon&&(y.tagName==="link"&&y.attributes.rel==="shortcut icon"||y.tagName==="meta"&&(j(y.attributes.name).match(/^msapplication-tile(image|color)$/)||j(y.attributes.name)==="application-name"||j(y.attributes.rel)==="icon"||j(y.attributes.rel)==="apple-touch-icon"||j(y.attributes.rel)==="shortcut icon"))||y.tagName==="meta"&&(Y.headMetaDescKeywords&&j(y.attributes.name).match(/^description|keywords$/)||Y.headMetaSocial&&(j(y.attributes.property).match(/^(og|twitter|fb):/)||j(y.attributes.name).match(/^(og|twitter):/)||j(y.attributes.name)==="pinterest")||Y.headMetaRobots&&(j(y.attributes.name)==="robots"||j(y.attributes.name)==="googlebot"||j(y.attributes.name)==="bingbot")||Y.headMetaHttpEquiv&&y.attributes["http-equiv"]!==void 0||Y.headMetaAuthorship&&(j(y.attributes.name)==="author"||j(y.attributes.name)==="generator"||j(y.attributes.name)==="framework"||j(y.attributes.name)==="publisher"||j(y.attributes.name)==="progid"||j(y.attributes.property).match(/^article:/)||j(y.attributes.property).match(/^product:/))||Y.headMetaVerification&&(j(y.attributes.name)==="google-site-verification"||j(y.attributes.name)==="yandex-verification"||j(y.attributes.name)==="csrf-token"||j(y.attributes.name)==="p:domain_verify"||j(y.attributes.name)==="verify-v1"||j(y.attributes.name)==="verification"||j(y.attributes.name)==="shopify-checkout-api-token"))))})(B,f)&&(T||B.type!==$.Text||B.isStyle||B.textContent.replace(/^\s+|\s+$/gm,"").length)?Ir():Pe;var I=Object.assign(B,{id:x});if(n.add(e,I),x===Pe)return null;m&&m(e);var _=!l;if(I.type===$.Element){_=_&&!I.needBlock,delete I.needBlock;var L=re.shadowRoot(e);L&&He(L)&&(I.isShadowHost=!0)}if((I.type===$.Document||I.type===$.Element)&&_){f.headWhitespace&&I.type===$.Element&&I.tagName==="head"&&(T=!1);var D={doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:M,maskTextClass:i,maskTextSelector:s,skipChild:l,inlineStylesheet:u,maskInputOptions:d,maskTextFn:c,maskInputFn:g,slimDOMOptions:f,dataURLOptions:A,inlineImages:E,recordCanvas:k,preserveWhiteSpace:T,onSerialize:m,onIframeLoad:p,iframeLoadTimeout:h,onStylesheetLoad:v,stylesheetLoadTimeout:b,keepIframeSrcFn:S};if(!(I.type===$.Element&&I.tagName==="textarea"&&I.attributes.value!==void 0))for(var O of Array.from(re.childNodes(e))){var R=Oe(O,D);R&&I.childNodes.push(R)}var N=null;if(hr(e)&&(N=re.shadowRoot(e)))for(var P of Array.from(re.childNodes(N))){var z=Oe(P,D);z&&(He(N)&&(z.isShadow=!0),I.childNodes.push(z))}}var G=re.parentNode(e);return G&&Ve(G)&&He(G)&&(I.isShadow=!0),I.type===$.Element&&I.tagName==="iframe"&&(function(y,Y,ae){var ee=y.contentWindow;if(ee){var J,te=!1;try{J=ee.document.readyState}catch{return}if(J==="complete"){var de="about:blank";if(ee.location.href!==de||y.src===de||y.src==="")return setTimeout(Y,0),y.addEventListener("load",Y);y.addEventListener("load",Y)}else{var he=setTimeout((()=>{te||(Y(),te=!0)}),ae);y.addEventListener("load",(()=>{clearTimeout(he),te=!0,Y()}))}}})(e,(()=>{var y=e.contentDocument;if(y&&p){var Y=Oe(y,{doc:y,mirror:n,blockClass:o,blockSelector:a,needsMask:M,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:c,maskInputFn:g,slimDOMOptions:f,dataURLOptions:A,inlineImages:E,recordCanvas:k,preserveWhiteSpace:T,onSerialize:m,onIframeLoad:p,iframeLoadTimeout:h,onStylesheetLoad:v,stylesheetLoadTimeout:b,keepIframeSrcFn:S});Y&&p(e,Y)}}),h),I.type===$.Element&&I.tagName==="link"&&typeof I.attributes.rel=="string"&&(I.attributes.rel==="stylesheet"||I.attributes.rel==="preload"&&typeof I.attributes.href=="string"&&vr(I.attributes.href)==="css")&&(function(y,Y,ae){var ee,J=!1;try{ee=y.sheet}catch{return}if(!ee){var te=setTimeout((()=>{J||(Y(),J=!0)}),ae);y.addEventListener("load",(()=>{clearTimeout(te),J=!0,Y()}))}})(e,(()=>{if(v){var y=Oe(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:M,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:c,maskInputFn:g,slimDOMOptions:f,dataURLOptions:A,inlineImages:E,recordCanvas:k,preserveWhiteSpace:T,onSerialize:m,onIframeLoad:p,iframeLoadTimeout:h,onStylesheetLoad:v,stylesheetLoadTimeout:b,keepIframeSrcFn:S});y&&v(e,y)}}),b),I}let $n=class Yn{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){for(var t=[],r=this.firstChild;r;)t.push(r),r=r.nextSibling;return t}contains(t){if(!(t instanceof Yn)||t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var Nr={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Mr={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},rt={};function Rt(e){if(rt[e])return rt[e];var t=(function(d){var c,g=globalThis==null||(c=globalThis.Zone)==null||c.__symbol__==null?void 0:c.__symbol__(d);return g&&globalThis[g]?globalThis[g]:void 0})(e)||globalThis[e],r=t.prototype,n=e in Nr?Nr[e]:void 0,o=!!(n&&n.every((d=>{var c,g;return!!((g=(c=Object.getOwnPropertyDescriptor(r,d))==null?void 0:c.get)!=null&&g.toString().includes("[native code]"))}))),a=e in Mr?Mr[e]:void 0,i=!!(a&&a.every((d=>{var c;return typeof r[d]=="function"&&((c=r[d])==null?void 0:c.toString().includes("[native code]"))})));if(o&&i)return rt[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?rt[e]=u:r}catch{return r}}var Tt={};function Ce(e,t,r){var n,o=e+"."+String(r);if(Tt[o])return Tt[o].call(t);var a=Rt(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Tt[o]=i,i.call(t)):t[r]}var Et={};function Ar(e,t,r){var n=e+"."+String(r);if(Et[n])return Et[n].bind(t);var o=Rt(e)[r];return typeof o!="function"?t[r]:(Et[n]=o,o.bind(t))}function kr(){return Rt("MutationObserver").constructor}var V={childNodes:function(e){return Ce("Node",e,"childNodes")},parentNode:function(e){return Ce("Node",e,"parentNode")},parentElement:function(e){return Ce("Node",e,"parentElement")},textContent:function(e){return Ce("Node",e,"textContent")},contains:function(e,t){return Ar("Node",e,"contains")(t)},getRootNode:function(e){return Ar("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Ce("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Ce("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Ce("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Ce("Element",e,"querySelectorAll")(t)},mutationObserver:kr};function ne(e,t,r){r===void 0&&(r=document);var n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}var xe=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Rr={map:{},getId:()=>(console.error(xe),-1),getNode:()=>(console.error(xe),null),removeNodeFromMap(){console.error(xe)},has:()=>(console.error(xe),!1),reset(){console.error(xe)}};function Xe(e,t,r){r===void 0&&(r={});var n=null,o=0;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var l=Date.now();o||r.leading!==!1||(o=l);var u=t-(l-o),d=this;u<=0||u>t?(n&&(clearTimeout(n),n=null),o=l,e.apply(d,i)):n||r.trailing===!1||(n=setTimeout((()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(d,i)}),u))}}function nt(e,t,r,n,o){o===void 0&&(o=window);var a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(i){setTimeout((()=>{r.set.call(this,i)}),0),a&&a.set&&a.set.call(this,i)}}),()=>nt(e,t,a||{},!0)}function Le(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Rr=new Proxy(Rr,{get:(e,t,r)=>(t==="map"&&console.error(xe),Reflect.get(e,t,r))}));var ot=Date.now;function Tr(e){var t,r,n,o,a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:a.documentElement.scrollLeft||a?.body&&((t=V.parentElement(a.body))==null?void 0:t.scrollLeft)||((r=a?.body)==null?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:a?.documentElement.scrollTop||a?.body&&((n=V.parentElement(a.body))==null?void 0:n.scrollTop)||((o=a?.body)==null?void 0:o.scrollTop)||0}}function Er(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Or(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function xr(e){return e?e.nodeType===e.ELEMENT_NODE?e:V.parentElement(e):null}function oe(e,t,r,n){if(!e)return!1;var o=xr(e);if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(tt(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function Ot(e,t,r){return!(e.tagName!=="TITLE"||!r.headTitleMutations)||t.getId(e)===Pe}function Lr(e,t){if(Ve(e))return!1;var r=t.getId(e);if(!t.has(r))return!0;var n=V.parentNode(e);return(!n||n.nodeType!==e.DOCUMENT_NODE)&&(!n||Lr(n,t))}function xt(e){return!!e.changedTouches}function Dr(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Fr(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Lt(e){return!!e&&(e instanceof $n&&"shadowRoot"in e?!!e.shadowRoot:!!V.shadowRoot(e))}/[1-9][0-9]{12}/.test(Date.now().toString())||(ot=()=>new Date().getTime());let eo=class{constructor(){C(this,"id",1),C(this,"styleIDMap",new WeakMap),C(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!==null&&t!==void 0?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){return this.has(e)?this.getId(e):(r=t===void 0?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r);var r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Br(e){var t,r=null;return"getRootNode"in e&&((t=V.getRootNode(e))==null?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&V.host(V.getRootNode(e))&&(r=V.host(V.getRootNode(e))),r}function to(e){var t=e.ownerDocument;if(!t)return!1;var r=(function(n){for(var o,a=n;o=Br(a);)a=o;return a})(e);return V.contains(t,r)}function _r(e){var t=e.ownerDocument;return!!t&&(V.contains(t,e)||to(e))}var K=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(K||{}),H=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(H||{}),se=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(se||{}),ge=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ge||{}),De=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(De||{}),Fe=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Fe||{});function Zr(e){return"__ln"in e}class ro{constructor(){C(this,"length",0),C(this,"head",null),C(this,"tail",null)}get(t){if(t>=this.length)throw new Error("Position outside of list range");for(var r=this.head,n=0;n<t;n++)r=r?.next||null;return r}addNode(t){var r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&Zr(t.previousSibling)){var n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&Zr(t.nextSibling)&&t.nextSibling.__ln.previous){var o=t.nextSibling.__ln.previous;r.previous=o,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,o&&(o.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(t){var r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}var Ke,Yr=(e,t)=>e+"@"+t;class no{constructor(){C(this,"frozen",!1),C(this,"locked",!1),C(this,"texts",[]),C(this,"attributes",[]),C(this,"attributeMap",new WeakMap),C(this,"removes",[]),C(this,"mapRemoves",[]),C(this,"movedMap",{}),C(this,"addedSet",new Set),C(this,"movedSet",new Set),C(this,"droppedSet",new Set),C(this,"mutationCb"),C(this,"blockClass"),C(this,"blockSelector"),C(this,"maskTextClass"),C(this,"maskTextSelector"),C(this,"inlineStylesheet"),C(this,"maskInputOptions"),C(this,"maskTextFn"),C(this,"maskInputFn"),C(this,"keepIframeSrcFn"),C(this,"recordCanvas"),C(this,"inlineImages"),C(this,"slimDOMOptions"),C(this,"dataURLOptions"),C(this,"doc"),C(this,"mirror"),C(this,"iframeManager"),C(this,"stylesheetManager"),C(this,"shadowDomManager"),C(this,"canvasManager"),C(this,"processedNodeManager"),C(this,"unattachedDoc"),C(this,"processMutations",(t=>{t.forEach(this.processMutation),this.emit()})),C(this,"emit",(()=>{if(!this.frozen&&!this.locked){for(var t=[],r=new Set,n=new ro,o=h=>{for(var v=h,b=Pe;b===Pe;)b=(v=v&&v.nextSibling)&&this.mirror.getId(v);return b},a=h=>{var v=V.parentNode(h);if(v&&_r(h)&&v.tagName!=="TEXTAREA"){var b=Ve(v)?this.mirror.getId(Br(h)):this.mirror.getId(v),S=o(h);if(b===-1||S===-1)return n.addNode(h);var w=Oe(h,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:M=>{Dr(M,this.mirror)&&this.iframeManager.addIframe(M),Fr(M,this.mirror)&&this.stylesheetManager.trackLinkElement(M),Lt(h)&&this.shadowDomManager.addShadowRoot(V.shadowRoot(h),this.doc)},onIframeLoad:(M,T)=>{this.iframeManager.attachIframe(M,T),this.shadowDomManager.observeAttachShadow(M)},onStylesheetLoad:(M,T)=>{this.stylesheetManager.attachLinkElement(M,T)}});w&&(t.push({parentId:b,nextId:S,node:w}),r.add(w.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var i of this.movedSet)Wr(this.removes,i,this.mirror)&&!this.movedSet.has(V.parentNode(i))||a(i);for(var s of this.addedSet)Gr(this.droppedSet,s)||Wr(this.removes,s,this.mirror)?Gr(this.movedSet,s)?a(s):this.droppedSet.add(s):a(s);for(var l=null;n.length;){var u=null;if(l){var d=this.mirror.getId(V.parentNode(l.value)),c=o(l.value);d!==-1&&c!==-1&&(u=l)}if(!u)for(var g=n.tail;g;){var f=g;if(g=g.previous,f){var A=this.mirror.getId(V.parentNode(f.value));if(o(f.value)===-1)continue;if(A!==-1){u=f;break}var E=f.value,k=V.parentNode(E);if(k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var m=V.host(k);if(this.mirror.getId(m)!==-1){u=f;break}}}}if(!u){for(;n.head;)n.removeNode(n.head.value);break}l=u.previous,n.removeNode(u.value),a(u.value)}var p={texts:this.texts.map((h=>{var v=h.node,b=V.parentNode(v);return b&&b.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(b),{id:this.mirror.getId(v),value:h.value}})).filter((h=>!r.has(h.id))).filter((h=>this.mirror.has(h.id))),attributes:this.attributes.map((h=>{var{attributes:v}=h;if(typeof v.style=="string"){var b=JSON.stringify(h.styleDiff),S=JSON.stringify(h._unchangedStyles);b.length<v.style.length&&(b+S).split("var(").length===v.style.split("var(").length&&(v.style=h.styleDiff)}return{id:this.mirror.getId(h.node),attributes:v}})).filter((h=>!r.has(h.id))).filter((h=>this.mirror.has(h.id))),removes:this.removes,adds:t};(p.texts.length||p.attributes.length||p.removes.length||p.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(p))}})),C(this,"genTextAreaValueMutation",(t=>{var r=this.attributeMap.get(t);r||(r={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(t,r)),r.attributes.value=Array.from(V.childNodes(t),(n=>V.textContent(n)||"")).join("")})),C(this,"processMutation",(t=>{if(!Ot(t.target,this.mirror,this.slimDOMOptions))switch(t.type){case"characterData":var r=V.textContent(t.target);oe(t.target,this.blockClass,this.blockSelector,!1)||r===t.oldValue||this.texts.push({value:wr(t.target,this.maskTextClass,this.maskTextSelector,!0)&&r?this.maskTextFn?this.maskTextFn(r,xr(t.target)):r.replace(/[\S]/g,"*"):r,node:t.target});break;case"attributes":var n=t.target,o=t.attributeName,a=t.target.getAttribute(o);if(o==="value"){var i=At(n);a=Mt({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:i,value:a,maskInputFn:this.maskInputFn})}if(oe(t.target,this.blockClass,this.blockSelector,!1)||a===t.oldValue)return;var s=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&o==="src"&&!this.keepIframeSrcFn(a)){if(n.contentDocument)return;o="rr_src"}if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),o==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Sr(n.tagName,o))if(s.attributes[o]=Cr(this.doc,ke(n.tagName),ke(o),a),o==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}var l=this.unattachedDoc.createElement("span");for(var u of(t.oldValue&&l.setAttribute("style",t.oldValue),Array.from(n.style))){var d=n.style.getPropertyValue(u),c=n.style.getPropertyPriority(u);d!==l.style.getPropertyValue(u)||c!==l.style.getPropertyPriority(u)?s.styleDiff[u]=c===""?d:[d,c]:s._unchangedStyles[u]=[d,c]}for(var g of Array.from(l.style))n.style.getPropertyValue(g)===""&&(s.styleDiff[g]=!1)}else o==="open"&&n.tagName==="DIALOG"&&(n.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal");break;case"childList":if(oe(t.target,this.blockClass,this.blockSelector,!0))return;if(t.target.tagName==="TEXTAREA")return void this.genTextAreaValueMutation(t.target);t.addedNodes.forEach((f=>this.genAdds(f,t.target))),t.removedNodes.forEach((f=>{var A=this.mirror.getId(f),E=Ve(t.target)?this.mirror.getId(V.host(t.target)):this.mirror.getId(t.target);oe(t.target,this.blockClass,this.blockSelector,!1)||Ot(f,this.mirror,this.slimDOMOptions)||!(function(k,m){return m.getId(k)!==-1})(f,this.mirror)||(this.addedSet.has(f)?(Dt(this.addedSet,f),this.droppedSet.add(f)):this.addedSet.has(t.target)&&A===-1||Lr(t.target,this.mirror)||(this.movedSet.has(f)&&this.movedMap[Yr(A,E)]?Dt(this.movedSet,f):this.removes.push({parentId:E,id:A,isShadow:!(!Ve(t.target)||!He(t.target))||void 0})),this.mapRemoves.push(f))}))}})),C(this,"genAdds",((t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(Ot(t,this.mirror,this.slimDOMOptions))return;this.movedSet.add(t);var n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[Yr(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);oe(t,this.blockClass,this.blockSelector,!1)||(V.childNodes(t).forEach((o=>this.genAdds(o))),Lt(t)&&V.childNodes(V.shadowRoot(t)).forEach((o=>{this.processedNodeManager.add(o,this),this.genAdds(o,t)})))}}))}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((r=>{this[r]=t[r]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Dt(e,t){e.delete(t),V.childNodes(t).forEach((r=>Dt(e,r)))}function Wr(e,t,r){return e.length!==0&&(function(n,o,a){for(var i,s=V.parentNode(o),l=function(){var u=a.getId(s);if(n.some((d=>d.id===u)))return{v:!0};s=V.parentNode(s)};s;)if(i=l())return i.v;return!1})(e,t,r)}function Gr(e,t){return e.size!==0&&Vr(e,t)}function Vr(e,t){var r=V.parentNode(t);return!!r&&(!!e.has(r)||Vr(e,r))}var X=e=>Ke?function(){try{return e(...arguments)}catch(t){if(Ke&&Ke(t)===!0)return;throw t}}:e,Re=[];function je(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Hr(e,t){var r=new no;Re.push(r),r.init(e);var n=new(kr())(X(r.processMutations.bind(r)));return n.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function oo(e){var{mouseInteractionCb:t,doc:r,mirror:n,blockClass:o,blockSelector:a,sampling:i}=e;if(i.mouseInteraction===!1)return()=>{};var s=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,l=[],u=null;return Object.keys(se).filter((d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&s[d]!==!1)).forEach((d=>{var c=ke(d),g=(f=>A=>{var E=je(A);if(!oe(E,o,a,!0)){var k=null,m=f;if("pointerType"in A){switch(A.pointerType){case"mouse":k=ge.Mouse;break;case"touch":k=ge.Touch;break;case"pen":k=ge.Pen}k===ge.Touch?se[f]===se.MouseDown?m="TouchStart":se[f]===se.MouseUp&&(m="TouchEnd"):ge.Pen}else xt(A)&&(k=ge.Touch);k!==null?(u=k,(m.startsWith("Touch")&&k===ge.Touch||m.startsWith("Mouse")&&k===ge.Mouse)&&(k=null)):se[f]===se.Click&&(k=u,u=null);var p=xt(A)?A.changedTouches[0]:A;if(p){var h=n.getId(E),{clientX:v,clientY:b}=p;X(t)(Q({type:se[m],id:h,x:v,y:b},k!==null&&{pointerType:k}))}}})(d);if(window.PointerEvent)switch(se[d]){case se.MouseDown:case se.MouseUp:c=c.replace("mouse","pointer");break;case se.TouchStart:case se.TouchEnd:return}l.push(ne(c,g,r))})),X((()=>{l.forEach((d=>d()))}))}function Pr(e){var{scrollCb:t,doc:r,mirror:n,blockClass:o,blockSelector:a,sampling:i}=e;return ne("scroll",X(Xe(X((s=>{var l=je(s);if(l&&!oe(l,o,a,!0)){var u=n.getId(l);if(l===r&&r.defaultView){var d=Tr(r.defaultView);t({id:u,x:d.left,y:d.top})}else t({id:u,x:l.scrollLeft,y:l.scrollTop})}})),i.scroll||100)),r)}var ao=["INPUT","TEXTAREA","SELECT"],zr=new WeakMap;function at(e){return(function(t,r){if(it("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||it("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||it("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||it("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){var n=Array.from(t.parentRule.cssRules).indexOf(t);r.unshift(n)}else if(t.parentStyleSheet){var o=Array.from(t.parentStyleSheet.cssRules).indexOf(t);r.unshift(o)}return r})(e,[])}function Se(e,t,r){var n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function Xr(e,t){var r,n,o,{mirror:a,stylesheetManager:i}=e,s=null;s=t.nodeName==="#document"?a.getId(t):a.getId(V.host(t));var l=t.nodeName==="#document"?(r=t.defaultView)==null?void 0:r.Document:(o=(n=t.ownerDocument)==null?void 0:n.defaultView)==null?void 0:o.ShadowRoot,u=l?.prototype?Object.getOwnPropertyDescriptor(l?.prototype,"adoptedStyleSheets"):void 0;return s!==null&&s!==-1&&l&&u?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var d;return(d=u.get)==null?void 0:d.call(this)},set(d){var c,g=(c=u.set)==null?void 0:c.call(this,d);if(s!==null&&s!==-1)try{i.adoptStyleSheets(d,s)}catch{}return g}}),X((()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})}))):()=>{}}function io(e,t){t===void 0&&(t={});var r,n=e.doc.defaultView;if(!n)return()=>{};(function(p,h){var{mutationCb:v,mousemoveCb:b,mouseInteractionCb:S,scrollCb:w,viewportResizeCb:M,inputCb:T,mediaInteractionCb:x,styleSheetRuleCb:B,styleDeclarationCb:I,canvasMutationCb:_,fontCb:L,selectionCb:D,customElementCb:O}=p;p.mutationCb=function(){h.mutation&&h.mutation(...arguments),v(...arguments)},p.mousemoveCb=function(){h.mousemove&&h.mousemove(...arguments),b(...arguments)},p.mouseInteractionCb=function(){h.mouseInteraction&&h.mouseInteraction(...arguments),S(...arguments)},p.scrollCb=function(){h.scroll&&h.scroll(...arguments),w(...arguments)},p.viewportResizeCb=function(){h.viewportResize&&h.viewportResize(...arguments),M(...arguments)},p.inputCb=function(){h.input&&h.input(...arguments),T(...arguments)},p.mediaInteractionCb=function(){h.mediaInteaction&&h.mediaInteaction(...arguments),x(...arguments)},p.styleSheetRuleCb=function(){h.styleSheetRule&&h.styleSheetRule(...arguments),B(...arguments)},p.styleDeclarationCb=function(){h.styleDeclaration&&h.styleDeclaration(...arguments),I(...arguments)},p.canvasMutationCb=function(){h.canvasMutation&&h.canvasMutation(...arguments),_(...arguments)},p.fontCb=function(){h.font&&h.font(...arguments),L(...arguments)},p.selectionCb=function(){h.selection&&h.selection(...arguments),D(...arguments)},p.customElementCb=function(){h.customElement&&h.customElement(...arguments),O(...arguments)}})(e,t),e.recordDOM&&(r=Hr(e,e.doc));var o=(function(p){var{mousemoveCb:h,sampling:v,doc:b,mirror:S}=p;if(v.mousemove===!1)return()=>{};var w,M=typeof v.mousemove=="number"?v.mousemove:50,T=typeof v.mousemoveCallback=="number"?v.mousemoveCallback:500,x=[],B=Xe(X((L=>{var D=Date.now()-w;h(x.map((O=>(O.timeOffset-=D,O))),L),x=[],w=null})),T),I=X(Xe(X((L=>{var D=je(L),{clientX:O,clientY:R}=xt(L)?L.changedTouches[0]:L;w||(w=ot()),x.push({x:O,y:R,id:S.getId(D),timeOffset:ot()-w}),B(typeof DragEvent<"u"&&L instanceof DragEvent?H.Drag:L instanceof MouseEvent?H.MouseMove:H.TouchMove)})),M,{trailing:!1})),_=[ne("mousemove",I,b),ne("touchmove",I,b),ne("drag",I,b)];return X((()=>{_.forEach((L=>L()))}))})(e),a=oo(e),i=Pr(e),s=(function(p,h){var{viewportResizeCb:v}=p,{win:b}=h,S=-1,w=-1;return ne("resize",X(Xe(X((()=>{var M=Er(),T=Or();S===M&&w===T||(v({width:Number(T),height:Number(M)}),S=M,w=T)})),200)),b)})(e,{win:n}),l=(function(p){var{inputCb:h,doc:v,mirror:b,blockClass:S,blockSelector:w,ignoreClass:M,ignoreSelector:T,maskInputOptions:x,maskInputFn:B,sampling:I,userTriggeredOnInput:_}=p;function L(z){var G=je(z),y=z.isTrusted,Y=G&&G.tagName;if(G&&Y==="OPTION"&&(G=V.parentElement(G)),G&&Y&&!(ao.indexOf(Y)<0)&&!oe(G,S,w,!0)&&!(G.classList.contains(M)||T&&G.matches(T))){var ae=G.value,ee=!1,J=At(G)||"";J==="radio"||J==="checkbox"?ee=G.checked:(x[Y.toLowerCase()]||x[J])&&(ae=Mt({element:G,maskInputOptions:x,tagName:Y,type:J,value:ae,maskInputFn:B})),D(G,_?{text:ae,isChecked:ee,userTriggered:y}:{text:ae,isChecked:ee});var te=G.name;J==="radio"&&te&&ee&&v.querySelectorAll('input[type="radio"][name="'+te+'"]').forEach((de=>{if(de!==G){var he=de.value;D(de,_?{text:he,isChecked:!ee,userTriggered:!1}:{text:he,isChecked:!ee})}}))}}function D(z,G){var y=zr.get(z);if(!y||y.text!==G.text||y.isChecked!==G.isChecked){zr.set(z,G);var Y=b.getId(z);X(h)(Q({},G,{id:Y}))}}var O=(I.input==="last"?["change"]:["input","change"]).map((z=>ne(z,X(L),v))),R=v.defaultView;if(!R)return()=>{O.forEach((z=>z()))};var N=R.Object.getOwnPropertyDescriptor(R.HTMLInputElement.prototype,"value"),P=[[R.HTMLInputElement.prototype,"value"],[R.HTMLInputElement.prototype,"checked"],[R.HTMLSelectElement.prototype,"value"],[R.HTMLTextAreaElement.prototype,"value"],[R.HTMLSelectElement.prototype,"selectedIndex"],[R.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&O.push(...P.map((z=>nt(z[0],z[1],{set(){X(L)({target:this,isTrusted:!1})}},!1,R)))),X((()=>{O.forEach((z=>z()))}))})(e),u=(function(p){var{mediaInteractionCb:h,blockClass:v,blockSelector:b,mirror:S,sampling:w,doc:M}=p,T=X((B=>Xe(X((I=>{var _=je(I);if(_&&!oe(_,v,b,!0)){var{currentTime:L,volume:D,muted:O,playbackRate:R,loop:N}=_;h({type:B,id:S.getId(_),currentTime:L,volume:D,muted:O,playbackRate:R,loop:N})}})),w.media||500))),x=[ne("play",T(Fe.Play),M),ne("pause",T(Fe.Pause),M),ne("seeked",T(Fe.Seeked),M),ne("volumechange",T(Fe.VolumeChange),M),ne("ratechange",T(Fe.RateChange),M)];return X((()=>{x.forEach((B=>B()))}))})(e),d=()=>{},c=()=>{},g=()=>{},f=()=>{};e.recordDOM&&(d=(function(p,h){var{styleSheetRuleCb:v,mirror:b,stylesheetManager:S}=p,{win:w}=h;if(!w.CSSStyleSheet||!w.CSSStyleSheet.prototype)return()=>{};var M=w.CSSStyleSheet.prototype.insertRule;w.CSSStyleSheet.prototype.insertRule=new Proxy(M,{apply:X(((L,D,O)=>{var[R,N]=O,{id:P,styleId:z}=Se(D,b,S.styleMirror);return(P&&P!==-1||z&&z!==-1)&&v({id:P,styleId:z,adds:[{rule:R,index:N}]}),L.apply(D,O)}))}),w.CSSStyleSheet.prototype.addRule=function(L,D,O){O===void 0&&(O=this.cssRules.length);var R=L+" { "+D+" }";return w.CSSStyleSheet.prototype.insertRule.apply(this,[R,O])};var T,x,B=w.CSSStyleSheet.prototype.deleteRule;w.CSSStyleSheet.prototype.deleteRule=new Proxy(B,{apply:X(((L,D,O)=>{var[R]=O,{id:N,styleId:P}=Se(D,b,S.styleMirror);return(N&&N!==-1||P&&P!==-1)&&v({id:N,styleId:P,removes:[{index:R}]}),L.apply(D,O)}))}),w.CSSStyleSheet.prototype.removeRule=function(L){return w.CSSStyleSheet.prototype.deleteRule.apply(this,[L])},w.CSSStyleSheet.prototype.replace&&(T=w.CSSStyleSheet.prototype.replace,w.CSSStyleSheet.prototype.replace=new Proxy(T,{apply:X(((L,D,O)=>{var[R]=O,{id:N,styleId:P}=Se(D,b,S.styleMirror);return(N&&N!==-1||P&&P!==-1)&&v({id:N,styleId:P,replace:R}),L.apply(D,O)}))})),w.CSSStyleSheet.prototype.replaceSync&&(x=w.CSSStyleSheet.prototype.replaceSync,w.CSSStyleSheet.prototype.replaceSync=new Proxy(x,{apply:X(((L,D,O)=>{var[R]=O,{id:N,styleId:P}=Se(D,b,S.styleMirror);return(N&&N!==-1||P&&P!==-1)&&v({id:N,styleId:P,replaceSync:R}),L.apply(D,O)}))}));var I={};st("CSSGroupingRule")?I.CSSGroupingRule=w.CSSGroupingRule:(st("CSSMediaRule")&&(I.CSSMediaRule=w.CSSMediaRule),st("CSSConditionRule")&&(I.CSSConditionRule=w.CSSConditionRule),st("CSSSupportsRule")&&(I.CSSSupportsRule=w.CSSSupportsRule));var _={};return Object.entries(I).forEach((L=>{var[D,O]=L;_[D]={insertRule:O.prototype.insertRule,deleteRule:O.prototype.deleteRule},O.prototype.insertRule=new Proxy(_[D].insertRule,{apply:X(((R,N,P)=>{var[z,G]=P,{id:y,styleId:Y}=Se(N.parentStyleSheet,b,S.styleMirror);return(y&&y!==-1||Y&&Y!==-1)&&v({id:y,styleId:Y,adds:[{rule:z,index:[...at(N),G||0]}]}),R.apply(N,P)}))}),O.prototype.deleteRule=new Proxy(_[D].deleteRule,{apply:X(((R,N,P)=>{var[z]=P,{id:G,styleId:y}=Se(N.parentStyleSheet,b,S.styleMirror);return(G&&G!==-1||y&&y!==-1)&&v({id:G,styleId:y,removes:[{index:[...at(N),z]}]}),R.apply(N,P)}))})})),X((()=>{w.CSSStyleSheet.prototype.insertRule=M,w.CSSStyleSheet.prototype.deleteRule=B,T&&(w.CSSStyleSheet.prototype.replace=T),x&&(w.CSSStyleSheet.prototype.replaceSync=x),Object.entries(I).forEach((L=>{var[D,O]=L;O.prototype.insertRule=_[D].insertRule,O.prototype.deleteRule=_[D].deleteRule}))}))})(e,{win:n}),c=Xr(e,e.doc),g=(function(p,h){var{styleDeclarationCb:v,mirror:b,ignoreCSSAttributes:S,stylesheetManager:w}=p,{win:M}=h,T=M.CSSStyleDeclaration.prototype.setProperty;M.CSSStyleDeclaration.prototype.setProperty=new Proxy(T,{apply:X(((B,I,_)=>{var L,[D,O,R]=_;if(S.has(D))return T.apply(I,[D,O,R]);var{id:N,styleId:P}=Se((L=I.parentRule)==null?void 0:L.parentStyleSheet,b,w.styleMirror);return(N&&N!==-1||P&&P!==-1)&&v({id:N,styleId:P,set:{property:D,value:O,priority:R},index:at(I.parentRule)}),B.apply(I,_)}))});var x=M.CSSStyleDeclaration.prototype.removeProperty;return M.CSSStyleDeclaration.prototype.removeProperty=new Proxy(x,{apply:X(((B,I,_)=>{var L,[D]=_;if(S.has(D))return x.apply(I,[D]);var{id:O,styleId:R}=Se((L=I.parentRule)==null?void 0:L.parentStyleSheet,b,w.styleMirror);return(O&&O!==-1||R&&R!==-1)&&v({id:O,styleId:R,remove:{property:D},index:at(I.parentRule)}),B.apply(I,_)}))}),X((()=>{M.CSSStyleDeclaration.prototype.setProperty=T,M.CSSStyleDeclaration.prototype.removeProperty=x}))})(e,{win:n}),e.collectFonts&&(f=(function(p){var{fontCb:h,doc:v}=p,b=v.defaultView;if(!b)return()=>{};var S=[],w=new WeakMap,M=b.FontFace;b.FontFace=function(x,B,I){var _=new M(x,B,I);return w.set(_,{family:x,buffer:typeof B!="string",descriptors:I,fontSource:typeof B=="string"?B:JSON.stringify(Array.from(new Uint8Array(B)))}),_};var T=Le(v.fonts,"add",(function(x){return function(B){return setTimeout(X((()=>{var I=w.get(B);I&&(h(I),w.delete(B))})),0),x.apply(this,[B])}}));return S.push((()=>{b.FontFace=M})),S.push(T),X((()=>{S.forEach((x=>x()))}))})(e)));var A=(function(p){var{doc:h,mirror:v,blockClass:b,blockSelector:S,selectionCb:w}=p,M=!0,T=X((()=>{var x=h.getSelection();if(!(!x||M&&x?.isCollapsed)){M=x.isCollapsed||!1;for(var B=[],I=x.rangeCount||0,_=0;_<I;_++){var L=x.getRangeAt(_),{startContainer:D,startOffset:O,endContainer:R,endOffset:N}=L;oe(D,b,S,!0)||oe(R,b,S,!0)||B.push({start:v.getId(D),startOffset:O,end:v.getId(R),endOffset:N})}w({ranges:B})}}));return T(),ne("selectionchange",T)})(e),E=(function(p){var{doc:h,customElementCb:v}=p,b=h.defaultView;return b&&b.customElements?Le(b.customElements,"define",(function(S){return function(w,M,T){try{v({define:{name:w}})}catch{console.warn("Custom element callback failed for "+w)}return S.apply(this,[w,M,T])}})):()=>{}})(e),k=[];for(var m of e.plugins)k.push(m.observer(m.callback,n,m.options));return X((()=>{Re.forEach((p=>p.reset())),r?.disconnect(),o(),a(),i(),s(),l(),u(),d(),c(),g(),f(),A(),E(),k.forEach((p=>p()))}))}function it(e){return window[e]!==void 0}function st(e){return!!(window[e]!==void 0&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Kr{constructor(t){C(this,"iframeIdToRemoteIdMap",new WeakMap),C(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t}getId(t,r,n,o){var a=n||this.getIdToRemoteIdMap(t),i=o||this.getRemoteIdToIdMap(t),s=a.get(r);return s||(s=this.generateIdFn(),a.set(r,s),i.set(s,r)),s}getIds(t,r){var n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map((a=>this.getId(t,a,n,o)))}getRemoteId(t,r,n){var o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;var a=o.get(r);return a||-1}getRemoteIds(t,r){var n=this.getRemoteIdToIdMap(t);return r.map((o=>this.getRemoteId(t,o,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){var r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){var r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class so{constructor(t){C(this,"iframes",new WeakMap),C(this,"crossOriginIframeMap",new WeakMap),C(this,"crossOriginIframeMirror",new Kr(Ir)),C(this,"crossOriginIframeStyleMirror"),C(this,"crossOriginIframeRootIdMap",new WeakMap),C(this,"mirror"),C(this,"mutationCb"),C(this,"wrappedEmit"),C(this,"loadListener"),C(this,"stylesheetManager"),C(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Kr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n,o;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((n=t.contentWindow)==null||n.addEventListener("message",this.handleMessage.bind(this))),(o=this.loadListener)==null||o.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){var r=t;if(r.data.type==="rrweb"&&r.origin===r.data.origin&&t.source){var n=this.crossOriginIframeMap.get(t.source);if(n){var o=this.transformCrossOriginEvent(n,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}}}transformCrossOriginEvent(t,r){var n;switch(r.type){case K.FullSnapshot:this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);var o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:K.IncrementalSnapshot,data:{source:H.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case K.Meta:case K.Load:case K.DomContentLoaded:return!1;case K.Plugin:return r;case K.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case K.IncrementalSnapshot:switch(r.data.source){case H.Mutation:return r.data.adds.forEach((a=>{this.replaceIds(a,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(a.node,t);var i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(a.node,i)})),r.data.removes.forEach((a=>{this.replaceIds(a,t,["parentId","id"])})),r.data.attributes.forEach((a=>{this.replaceIds(a,t,["id"])})),r.data.texts.forEach((a=>{this.replaceIds(a,t,["id"])})),r;case H.Drag:case H.TouchMove:case H.MouseMove:return r.data.positions.forEach((a=>{this.replaceIds(a,t,["id"])})),r;case H.ViewportResize:return!1;case H.MediaInteraction:case H.MouseInteraction:case H.Scroll:case H.CanvasMutation:case H.Input:return this.replaceIds(r.data,t,["id"]),r;case H.StyleSheetRule:case H.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case H.Font:return r;case H.Selection:return r.data.ranges.forEach((a=>{this.replaceIds(a,t,["start","end"])})),r;case H.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)==null||n.forEach((a=>{this.replaceStyleIds(a,t,["styleId"])})),r}}return!1}replace(t,r,n,o){for(var a of o)(Array.isArray(r[a])||typeof r[a]=="number")&&(Array.isArray(r[a])?r[a]=t.getIds(n,r[a]):r[a]=t.getId(n,r[a]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((n=>{this.replaceIdOnNode(n,r)}))}patchRootIdOnNode(t,r){t.type===$.Document||t.rootId||(t.rootId=r),"childNodes"in t&&t.childNodes.forEach((n=>{this.patchRootIdOnNode(n,r)}))}}class lo{constructor(t){C(this,"shadowDoms",new WeakSet),C(this,"mutationCb"),C(this,"scrollCb"),C(this,"bypassOptions"),C(this,"mirror"),C(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(He(t)&&!this.shadowDoms.has(t)){this.shadowDoms.add(t);var n=Hr(Q({},this.bypassOptions,{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Pr(Q({},this.bypassOptions,{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(V.host(t))),this.restoreHandlers.push(Xr({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,r){var n=this;this.restoreHandlers.push(Le(t.prototype,"attachShadow",(function(o){return function(a){var i=o.call(this,a),s=V.shadowRoot(this);return s&&_r(this)&&n.addShadowRoot(s,r),i}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch{}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uo=typeof Uint8Array>"u"?[]:new Uint8Array(256),lt=0;lt<64;lt++)uo[Je.charCodeAt(lt)]=lt;var jr=new Map,Jr=(e,t,r)=>{if(e&&(qr(e,t)||typeof e=="object")){var n=(function(a,i){var s=jr.get(a);return s||(s=new Map,jr.set(a,s)),s.has(i)||s.set(i,[]),s.get(i)})(r,e.constructor.name),o=n.indexOf(e);return o===-1&&(o=n.length,n.push(e)),o}};function ut(e,t,r){if(e instanceof Array)return e.map((a=>ut(a,t,r)));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer)return{rr_type:e.constructor.name,base64:(function(a){var i,s=new Uint8Array(a),l=s.length,u="";for(i=0;i<l;i+=3)u+=Je[s[i]>>2],u+=Je[(3&s[i])<<4|s[i+1]>>4],u+=Je[(15&s[i+1])<<2|s[i+2]>>6],u+=Je[63&s[i+2]];return l%3==2?u=u.substring(0,u.length-1)+"=":l%3==1&&(u=u.substring(0,u.length-2)+"=="),u})(e)};if(e instanceof DataView)return{rr_type:e.constructor.name,args:[ut(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){var n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}return e instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:e.toDataURL()}:e instanceof ImageData?{rr_type:e.constructor.name,args:[ut(e.data,t,r),e.width,e.height]}:qr(e,t)||typeof e=="object"?{rr_type:e.constructor.name,index:Jr(e,t,r)}:e}var Ur=(e,t,r)=>e.map((n=>ut(n,t,r))),qr=(e,t)=>{var r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((n=>typeof t[n]=="function"));return!!r.find((n=>e instanceof t[n]))};function Qr(e,t,r,n){var o=[];try{var a=Le(e.HTMLCanvasElement.prototype,"getContext",(function(i){return function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];if(!oe(this,t,r,!0)){var c=(function(f){return f==="experimental-webgl"?"webgl":f})(s);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(u[0]&&typeof u[0]=="object"){var g=u[0];g.preserveDrawingBuffer||(g.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return i.apply(this,[s,...u])}}));o.push(a)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((i=>i()))}}function $r(e,t,r,n,o,a){var i=[],s=Object.getOwnPropertyNames(e),l=function(d){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))return 0;try{if(typeof e[d]!="function")return 0;var c=Le(e,d,(function(f){return function(){for(var A=arguments.length,E=new Array(A),k=0;k<A;k++)E[k]=arguments[k];var m=f.apply(this,E);if(Jr(m,a,this),"tagName"in this.canvas&&!oe(this.canvas,n,o,!0)){var p=Ur(E,a,this),h={type:t,property:d,args:p};r(this.canvas,h)}return m}}));i.push(c)}catch{var g=nt(e,d,{set(A){r(this.canvas,{type:t,property:d,args:[A],setter:!0})}});i.push(g)}};for(var u of s)l(u);return i}var en,q,dt,Ft,tn="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",rn=typeof window<"u"&&window.Blob&&new Blob([(en=tn,Uint8Array.from(atob(en),(e=>e.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});function co(e){var t;try{if(!(t=rn&&(window.URL||window.webkitURL).createObjectURL(rn)))throw"";var r=new Worker(t,{name:e?.name});return r.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),r}catch{return new Worker("data:text/javascript;base64,"+tn,{name:e?.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class ho{constructor(t){C(this,"pendingCanvasMutations",new Map),C(this,"rafStamps",{latestId:0,invokeId:null}),C(this,"mirror"),C(this,"mutationCb"),C(this,"resetObservers"),C(this,"frozen",!1),C(this,"locked",!1),C(this,"processMutation",((l,u)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(u)}));var{sampling:r="all",win:n,blockClass:o,blockSelector:a,recordCanvas:i,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,i&&r==="all"&&this.initCanvasMutationObserver(n,o,a),i&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,a,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n,o,a){var i=this,s=Qr(r,n,o,!0),l=new Map,u=new co;u.onmessage=A=>{var{id:E}=A.data;if(l.set(E,!1),"base64"in A.data){var{base64:k,type:m,width:p,height:h}=A.data;this.mutationCb({id:E,type:De["2D"],commands:[{property:"clearRect",args:[0,0,p,h]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:k}],type:m}]},0,0]}]})}};var d,c=1e3/t,g=0,f=A=>{var E,k;g&&A-g<c||(g=A,(E=[],k=m=>{m.querySelectorAll("canvas").forEach((p=>{oe(p,n,o,!0)||E.push(p)})),m.querySelectorAll("*").forEach((p=>{p.shadowRoot&&k(p.shadowRoot)}))},k(r.document),E).forEach((function(){var m=Ge((function*(p){var h,v=i.mirror.getId(p);if(!l.get(v)&&p.width!==0&&p.height!==0){if(l.set(v,!0),["webgl","webgl2"].includes(p.__context)){var b=p.getContext(p.__context);((h=b?.getContextAttributes())==null?void 0:h.preserveDrawingBuffer)===!1&&b.clear(b.COLOR_BUFFER_BIT)}var S=p.clientWidth||p.width,w=p.clientHeight||p.height,M=yield createImageBitmap(p,{resizeWidth:S,resizeHeight:w});u.postMessage({id:v,bitmap:M,width:S,height:w,dataURLOptions:a.dataURLOptions},[M])}}));return function(p){return m.apply(this,arguments)}})())),d=requestAnimationFrame(f)};d=requestAnimationFrame(f),this.resetObservers=()=>{s(),cancelAnimationFrame(d)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var o=Qr(t,r,n,!1),a=(function(s,l,u,d){var c=[],g=Object.getOwnPropertyNames(l.CanvasRenderingContext2D.prototype),f=function(E){try{if(typeof l.CanvasRenderingContext2D.prototype[E]!="function")return 1;var k=Le(l.CanvasRenderingContext2D.prototype,E,(function(p){return function(){for(var h=arguments.length,v=new Array(h),b=0;b<h;b++)v[b]=arguments[b];return oe(this.canvas,u,d,!0)||setTimeout((()=>{var S=Ur(v,l,this);s(this.canvas,{type:De["2D"],property:E,args:S})}),0),p.apply(this,v)}}));c.push(k)}catch{var m=nt(l.CanvasRenderingContext2D.prototype,E,{set(h){s(this.canvas,{type:De["2D"],property:E,args:[h],setter:!0})}});c.push(m)}};for(var A of g)f(A);return()=>{c.forEach((E=>E()))}})(this.processMutation.bind(this),t,r,n),i=(function(s,l,u,d){var c=[];return c.push(...$r(l.WebGLRenderingContext.prototype,De.WebGL,s,u,d,l)),l.WebGL2RenderingContext!==void 0&&c.push(...$r(l.WebGL2RenderingContext.prototype,De.WebGL2,s,u,d,l)),()=>{c.forEach((g=>g()))}})(this.processMutation.bind(this),t,r,n);this.resetObservers=()=>{o(),a(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){var t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,r)=>{var n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,r){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(t);if(n&&r!==-1){var o=n.map((i=>{var s=(function(l,u){if(l==null)return{};var d={};for(var c in l)if({}.hasOwnProperty.call(l,c)){if(u.indexOf(c)!==-1)continue;d[c]=l[c]}return d})(i,Wn);return s})),{type:a}=n[0];this.mutationCb({id:r,type:a,commands:o}),this.pendingCanvasMutations.delete(t)}}}}class po{constructor(t){C(this,"trackedLinkElements",new WeakSet),C(this,"mutationCb"),C(this,"adoptedStyleSheetCb"),C(this,"styleMirror",new eo),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){var n=this;if(t.length!==0){var o={id:r,styleIds:[]},a=[],i=function(l){var u;n.styleMirror.has(l)?u=n.styleMirror.getId(l):(u=n.styleMirror.add(l),a.push({styleId:u,rules:Array.from(l.rules||CSSRule,((d,c)=>({rule:pr(d,l.href),index:c})))})),o.styleIds.push(u)};for(var s of t)i(s);a.length>0&&(o.styles=a),this.adoptedStyleSheetCb(o)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class mo{constructor(){C(this,"nodeMap",new WeakMap),C(this,"active",!1)}inOtherBuffer(t,r){var n=this.nodeMap.get(t);return n&&Array.from(n).some((o=>o!==r))}add(t,r){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}destroy(){}}var ct=!1;try{if(Array.from([1],(e=>2*e))[0]!==2){var Bt=document.createElement("iframe");document.body.appendChild(Bt),Array.from=((sr=Bt.contentWindow)==null?void 0:sr.Array.from)||Array.from,document.body.removeChild(Bt)}}catch(e){console.debug("Unable to override Array.from",e)}var nn,Be,pe=new fr;function _e(e){e===void 0&&(e={});var{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:a=null,ignoreClass:i="rr-ignore",ignoreSelector:s=null,maskTextClass:l="rr-mask",maskTextSelector:u=null,inlineStylesheet:d=!0,maskAllInputs:c,maskInputOptions:g,slimDOMOptions:f,maskInputFn:A,maskTextFn:E,hooks:k,packFn:m,sampling:p={},dataURLOptions:h={},mousemoveWait:v,recordDOM:b=!0,recordCanvas:S=!1,recordCrossOriginIframes:w=!1,recordAfter:M=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:T=!1,collectFonts:x=!1,inlineImages:B=!1,plugins:I,keepIframeSrcFn:_=(()=>!1),ignoreCSSAttributes:L=new Set([]),errorHandler:D}=e;Ke=D;var O=!w||window.parent===window,R=!1;if(!O)try{window.parent.document&&(R=!1)}catch{R=!0}if(O&&!t)throw new Error("emit function is required");if(!O&&!R)return()=>{};v!==void 0&&p.mousemove===void 0&&(p.mousemove=v),pe.reset();var N,P=c===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:g!==void 0?g:{password:!0},z=f===!0||f==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:f==="all",headMetaDescKeywords:f==="all",headTitleMutations:f==="all"}:f||{};(function(Z){Z===void 0&&(Z=window),"NodeList"in Z&&!Z.NodeList.prototype.forEach&&(Z.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in Z&&!Z.DOMTokenList.prototype.forEach&&(Z.DOMTokenList.prototype.forEach=Array.prototype.forEach)})();var G=0,y=Z=>{for(var ie of I||[])ie.eventProcessor&&(Z=ie.eventProcessor(Z));return m&&!R&&(Z=m(Z)),Z};q=(Z,ie)=>{var F,W=Z;if(W.timestamp=ot(),!((F=Re[0])!=null&&F.isFrozen())||W.type===K.FullSnapshot||W.type===K.IncrementalSnapshot&&W.data.source===H.Mutation||Re.forEach((Ie=>Ie.unfreeze())),O)t?.(y(W),ie);else if(R){var ue={type:"rrweb",event:y(W),origin:window.location.origin,isCheckout:ie};window.parent.postMessage(ue,"*")}if(W.type===K.FullSnapshot)N=W,G=0;else if(W.type===K.IncrementalSnapshot){if(W.data.source===H.Mutation&&W.data.isAttachIframe)return;G++;var me=n&&G>=n,fe=r&&W.timestamp-N.timestamp>r;(me||fe)&&dt(!0)}};var Y=Z=>{q({type:K.IncrementalSnapshot,data:Q({source:H.Mutation},Z)})},ae=Z=>q({type:K.IncrementalSnapshot,data:Q({source:H.Scroll},Z)}),ee=Z=>q({type:K.IncrementalSnapshot,data:Q({source:H.CanvasMutation},Z)}),J=new po({mutationCb:Y,adoptedStyleSheetCb:Z=>q({type:K.IncrementalSnapshot,data:Q({source:H.AdoptedStyleSheet},Z)})}),te=new so({mirror:pe,mutationCb:Y,stylesheetManager:J,recordCrossOriginIframes:w,wrappedEmit:q});for(var de of I||[])de.getMirror&&de.getMirror({nodeMirror:pe,crossOriginIframeMirror:te.crossOriginIframeMirror,crossOriginIframeStyleMirror:te.crossOriginIframeStyleMirror});var he=new mo;Ft=new ho({recordCanvas:S,mutationCb:ee,win:window,blockClass:o,blockSelector:a,mirror:pe,sampling:p.canvas,dataURLOptions:h});var U=new lo({mutationCb:Y,scrollCb:ae,bypassOptions:{blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:u,inlineStylesheet:d,maskInputOptions:P,dataURLOptions:h,maskTextFn:E,maskInputFn:A,recordCanvas:S,inlineImages:B,sampling:p,slimDOMOptions:z,iframeManager:te,stylesheetManager:J,canvasManager:Ft,keepIframeSrcFn:_,processedNodeManager:he},mirror:pe});dt=function(Z){if(Z===void 0&&(Z=!1),b){q({type:K.Meta,data:{href:window.location.href,width:Or(),height:Er()}},Z),J.reset(),U.init(),Re.forEach((F=>F.lock()));var ie=(function(F,W){var{mirror:ue=new fr,blockClass:me="rr-block",blockSelector:fe=null,maskTextClass:Ie="rr-mask",maskTextSelector:Ct=null,inlineStylesheet:or=!0,inlineImages:Wo=!1,recordCanvas:Go=!1,maskAllInputs:ar=!1,maskTextFn:Vo,maskInputFn:Ho,slimDOM:qe=!1,dataURLOptions:Po,preserveWhiteSpace:zo,onSerialize:Xo,onIframeLoad:Ko,iframeLoadTimeout:jo,onStylesheetLoad:Jo,stylesheetLoadTimeout:Uo,keepIframeSrcFn:qo=(()=>!1)}=W||{};return Oe(F,{doc:F,mirror:ue,blockClass:me,blockSelector:fe,maskTextClass:Ie,maskTextSelector:Ct,skipChild:!1,inlineStylesheet:or,maskInputOptions:ar===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:ar===!1?{password:!0}:ar,maskTextFn:Vo,maskInputFn:Ho,slimDOMOptions:qe===!0||qe==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:qe==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:qe===!1?{}:qe,dataURLOptions:Po,inlineImages:Wo,recordCanvas:Go,preserveWhiteSpace:zo,onSerialize:Xo,onIframeLoad:Ko,iframeLoadTimeout:jo,onStylesheetLoad:Jo,stylesheetLoadTimeout:Uo,keepIframeSrcFn:qo,newlyAddedElement:!1})})(document,{mirror:pe,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:u,inlineStylesheet:d,maskAllInputs:P,maskTextFn:E,maskInputFn:A,slimDOM:z,dataURLOptions:h,recordCanvas:S,inlineImages:B,onSerialize:F=>{Dr(F,pe)&&te.addIframe(F),Fr(F,pe)&&J.trackLinkElement(F),Lt(F)&&U.addShadowRoot(V.shadowRoot(F),document)},onIframeLoad:(F,W)=>{te.attachIframe(F,W),U.observeAttachShadow(F)},onStylesheetLoad:(F,W)=>{J.attachLinkElement(F,W)},keepIframeSrcFn:_});if(!ie)return console.warn("Failed to snapshot the document");q({type:K.FullSnapshot,data:{node:ie,initialOffset:Tr(window)}},Z),Re.forEach((F=>F.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&J.adoptStyleSheets(document.adoptedStyleSheets,pe.getId(document))}};try{var Te=[],Ue=Z=>{var ie;return X(io)({mutationCb:Y,mousemoveCb:(F,W)=>q({type:K.IncrementalSnapshot,data:{source:W,positions:F}}),mouseInteractionCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.MouseInteraction},F)}),scrollCb:ae,viewportResizeCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.ViewportResize},F)}),inputCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.Input},F)}),mediaInteractionCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.MediaInteraction},F)}),styleSheetRuleCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.StyleSheetRule},F)}),styleDeclarationCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.StyleDeclaration},F)}),canvasMutationCb:ee,fontCb:F=>q({type:K.IncrementalSnapshot,data:Q({source:H.Font},F)}),selectionCb:F=>{q({type:K.IncrementalSnapshot,data:Q({source:H.Selection},F)})},customElementCb:F=>{q({type:K.IncrementalSnapshot,data:Q({source:H.CustomElement},F)})},blockClass:o,ignoreClass:i,ignoreSelector:s,maskTextClass:l,maskTextSelector:u,maskInputOptions:P,inlineStylesheet:d,sampling:p,recordDOM:b,recordCanvas:S,inlineImages:B,userTriggeredOnInput:T,collectFonts:x,doc:Z,maskInputFn:A,maskTextFn:E,keepIframeSrcFn:_,blockSelector:a,slimDOMOptions:z,dataURLOptions:h,mirror:pe,iframeManager:te,stylesheetManager:J,shadowDomManager:U,processedNodeManager:he,canvasManager:Ft,ignoreCSSAttributes:L,plugins:((ie=I?.filter((F=>F.observer)))==null?void 0:ie.map((F=>({observer:F.observer,options:F.options,callback:W=>q({type:K.Plugin,data:{plugin:F.name,payload:W}})}))))||[]},k)};te.addLoadListener((Z=>{try{Te.push(Ue(Z.contentDocument))}catch(ie){console.warn(ie)}}));var ye=()=>{dt(),Te.push(Ue(document)),ct=!0};return document.readyState==="interactive"||document.readyState==="complete"?ye():(Te.push(ne("DOMContentLoaded",(()=>{q({type:K.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&ye()}))),Te.push(ne("load",(()=>{q({type:K.Load,data:{}}),M==="load"&&ye()}),window))),()=>{Te.forEach((Z=>Z())),he.destroy(),ct=!1,Ke=void 0}}catch(Z){console.warn(Z)}}_e.addCustomEvent=(e,t)=>{if(!ct)throw new Error("please add custom event after start recording");q({type:K.Custom,data:{tag:e,payload:t}})},_e.freezePage=()=>{Re.forEach((e=>e.freeze()))},_e.takeFullSnapshot=e=>{if(!ct)throw new Error("please take full snapshot after start recording");dt(e)},_e.mirror=pe,(Be=nn||(nn={}))[Be.NotStarted=0]="NotStarted",Be[Be.Running=1]="Running",Be[Be.Stopped=2]="Stopped";var on,fo=Object.defineProperty,ht=(e,t,r)=>((n,o,a)=>o in n?fo(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),go=Object.defineProperty,_t=(e,t,r)=>((n,o,a)=>o in n?go(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),vo=Object.defineProperty,an=(e,t,r)=>((n,o,a)=>o in n?vo(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),sn={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ln={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},pt={};function Zt(e){if(pt[e])return pt[e];var t=globalThis[e],r=t.prototype,n=e in sn?sn[e]:void 0,o=!!(n&&n.every((d=>{var c,g;return!!((g=(c=Object.getOwnPropertyDescriptor(r,d))==null?void 0:c.get)!=null&&g.toString().includes("[native code]"))}))),a=e in ln?ln[e]:void 0,i=!!(a&&a.every((d=>{var c;return typeof r[d]=="function"&&((c=r[d])==null?void 0:c.toString().includes("[native code]"))})));if(o&&i)return pt[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?pt[e]=u:r}catch{return r}}var Yt={};function we(e,t,r){var n,o=e+"."+String(r);if(Yt[o])return Yt[o].call(t);var a=Zt(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Yt[o]=i,i.call(t)):t[r]}var Wt={};function un(e,t,r){var n=e+"."+String(r);if(Wt[n])return Wt[n].bind(t);var o=Zt(e)[r];return typeof o!="function"?t[r]:(Wt[n]=o,o.bind(t))}var mt={childNodes:function(e){return we("Node",e,"childNodes")},parentNode:function(e){return we("Node",e,"parentNode")},parentElement:function(e){return we("Node",e,"parentElement")},textContent:function(e){return we("Node",e,"textContent")},contains:function(e,t){return un("Node",e,"contains")(t)},getRootNode:function(e){return un("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?we("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?we("Element",e,"shadowRoot"):null},querySelector:function(e,t){return we("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return we("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Zt("MutationObserver").constructor}};class yo{constructor(){an(this,"idNodeMap",new Map),an(this,"nodeMetaMap",new WeakMap)}getId(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))==null?void 0:r.id;return n??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){var r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach((n=>this.removeNodeFromMap(n)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)}replace(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Gt(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&Gt(mt.parentNode(e),t,r);for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return!!r&&Gt(mt.parentNode(e),t,r)}class Vt{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){for(var t=[],r=this.firstChild;r;)t.push(r),r=r.nextSibling;return t}contains(t){if(!(t instanceof Vt)||t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var dn={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},cn={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ft={};function Ht(e){if(ft[e])return ft[e];var t=globalThis[e],r=t.prototype,n=e in dn?dn[e]:void 0,o=!!(n&&n.every((d=>{var c,g;return!!((g=(c=Object.getOwnPropertyDescriptor(r,d))==null?void 0:c.get)!=null&&g.toString().includes("[native code]"))}))),a=e in cn?cn[e]:void 0,i=!!(a&&a.every((d=>{var c;return typeof r[d]=="function"&&((c=r[d])==null?void 0:c.toString().includes("[native code]"))})));if(o&&i)return ft[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?ft[e]=u:r}catch{return r}}var Pt={};function Ne(e,t,r){var n,o=e+"."+String(r);if(Pt[o])return Pt[o].call(t);var a=Ht(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Pt[o]=i,i.call(t)):t[r]}var zt={};function hn(e,t,r){var n=e+"."+String(r);if(zt[n])return zt[n].bind(t);var o=Ht(e)[r];return typeof o!="function"?t[r]:(zt[n]=o,o.bind(t))}var ce={childNodes:function(e){return Ne("Node",e,"childNodes")},parentNode:function(e){return Ne("Node",e,"parentNode")},parentElement:function(e){return Ne("Node",e,"parentElement")},textContent:function(e){return Ne("Node",e,"textContent")},contains:function(e,t){return hn("Node",e,"contains")(t)},getRootNode:function(e){return hn("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Ne("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Ne("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Ne("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Ne("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Ht("MutationObserver").constructor}},Ze=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Xt={map:{},getId:()=>(console.error(Ze),-1),getNode:()=>(console.error(Ze),null),removeNodeFromMap(){console.error(Ze)},has:()=>(console.error(Ze),!1),reset(){console.error(Ze)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Xt=new Proxy(Xt,{get:(e,t,r)=>(t==="map"&&console.error(Ze),Reflect.get(e,t,r))}));var pn=Date.now;function mn(e){return e?e.nodeType===e.ELEMENT_NODE?e:ce.parentElement(e):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(pn=()=>new Date().getTime());function fn(e){var t,r=null;return"getRootNode"in e&&((t=ce.getRootNode(e))==null?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ce.host(ce.getRootNode(e))&&(r=ce.host(ce.getRootNode(e))),r}function gn(e){for(var t,r=e;t=fn(r);)r=t;return r}function vn(e){var t=e.ownerDocument;if(!t)return!1;var r=gn(e);return ce.contains(t,r)}for(var Io=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){_t(this,"id",1),_t(this,"styleIDMap",new WeakMap),_t(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!==null&&t!==void 0?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){return this.has(e)?this.getId(e):(r=t===void 0?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r);var r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return Xt},closestElementOfNode:mn,getBaseDimension:function e(t,r){var n,o,a=(o=(n=t.ownerDocument)==null?void 0:n.defaultView)==null?void 0:o.frameElement;if(!a||a===r)return{x:0,y:0,relativeScale:1,absoluteScale:1};var i=a.getBoundingClientRect(),s=e(a,r),l=i.height/a.clientHeight;return{x:i.x*s.relativeScale+s.x,y:i.y*s.relativeScale+s.y,relativeScale:l,absoluteScale:s.absoluteScale*l}},getNestedRule:function e(t,r){var n=t[r[0]];return r.length===1?n:e(n.cssRules[r[1]].cssRules,r.slice(2))},getPositionsAndIndex:function(e){var t=[...e],r=t.pop();return{positions:t,index:r}},getRootShadowHost:gn,getShadowHost:fn,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(e){var t,r,n,o,a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:a.documentElement.scrollLeft||a?.body&&((t=ce.parentElement(a.body))==null?void 0:t.scrollLeft)||((r=a?.body)==null?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:a?.documentElement.scrollTop||a?.body&&((n=ce.parentElement(a.body))==null?void 0:n.scrollTop)||((o=a?.body)==null?void 0:o.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(e){return!!e&&(e instanceof Vt&&"shadowRoot"in e?!!e.shadowRoot:!!ce.shadowRoot(e))},hookSetter:function e(t,r,n,o,a){a===void 0&&(a=window);var i=a.Object.getOwnPropertyDescriptor(t,r);return a.Object.defineProperty(t,r,o?n:{set(s){setTimeout((()=>{n.set.call(this,s)}),0),i&&i.set&&i.set.call(this,s)}}),()=>e(t,r,i||{},!0)},inDom:function(e){var t=e.ownerDocument;return!!t&&(ce.contains(t,e)||vn(e))},isAncestorRemoved:function e(t,r){if(o=(n=t)&&"host"in n&&"mode"in n&&mt.host(n)||null,!!(o&&"shadowRoot"in o&&mt.shadowRoot(o)===n))return!1;var n,o,a=r.getId(t);if(!r.has(a))return!0;var i=ce.parentNode(t);return(!i||i.nodeType!==t.DOCUMENT_NODE)&&(!i||e(i,r))},isBlocked:function(e,t,r,n){if(!e)return!1;var o=mn(e);if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Gt(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))},isIgnored:function(e,t,r){return!(e.tagName!=="TITLE"||!r.headTitleMutations)||t.getId(e)===-2},isSerialized:function(e,t){return t.getId(e)!==-1},isSerializedIframe:function(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))},isSerializedStylesheet:function(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))},iterateResolveTree:function e(t,r){r(t.value);for(var n=t.children.length-1;n>=0;n--)e(t.children[n],r)},legacy_isTouchEvent:function(e){return!!e.changedTouches},get nowTimestamp(){return pn},on:function(e,t,r){r===void 0&&(r=document);var n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)},patch:function(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}},polyfill:function(e){e===void 0&&(e=window),"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(e){var t={},r=(c,g)=>{var f={value:c,parent:g,children:[]};return t[c.node.id]=f,f},n=[];for(var o of e){var{nextId:a,parentId:i}=o;if(a&&a in t){var s=t[a];if(s.parent){var l=s.parent.children.indexOf(s);s.parent.children.splice(l,0,r(o,s.parent))}else{var u=n.indexOf(s);n.splice(u,0,r(o,null))}}else if(i in t){var d=t[i];d.children.push(r(o,d))}else n.push(r(o,null))}return n},shadowHostInDom:vn,throttle:function(e,t,r){r===void 0&&(r={});var n=null,o=0;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var l=Date.now();o||r.leading!==!1||(o=l);var u=t-(l-o),d=this;u<=0||u>t?(n&&(clearTimeout(n),n=null),o=l,e.apply(d,i)):n||r.trailing===!1||(n=setTimeout((()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(d,i)}),u))}},uniqueTextMutations:function(e){for(var t=new Set,r=[],n=e.length;n--;){var o=e[n];t.has(o.id)||(r.push(o),t.add(o.id))}return r}},Symbol.toStringTag,{value:"Module"})),bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Co=typeof Uint8Array>"u"?[]:new Uint8Array(256),gt=0;gt<64;gt++)Co[bo.charCodeAt(gt)]=gt;var yn;typeof window<"u"&&window.Blob&&new Blob([(e=>Uint8Array.from(atob(e),(t=>t.charCodeAt(0))))("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"});try{if(Array.from([1],(e=>2*e))[0]!==2){var Kt=document.createElement("iframe");document.body.appendChild(Kt),Array.from=((on=Kt.contentWindow)==null?void 0:on.Array.from)||Array.from,document.body.removeChild(Kt)}}catch(e){console.debug("Unable to override Array.from",e)}new yo,(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(yn||(yn={}));class Ye{constructor(t){ht(this,"fileName"),ht(this,"functionName"),ht(this,"lineNumber"),ht(this,"columnNumber"),this.fileName=t.fileName||"",this.functionName=t.functionName||"",this.lineNumber=t.lineNumber,this.columnNumber=t.columnNumber}toString(){var t=this.lineNumber||"",r=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+t+":"+r+")":this.fileName+":"+t+":"+r}}var So=/(^|@)\S+:\d+/,In=/^\s*at .*(\S+:\d+|\(native\))/m,wo=/^(eval@)?(\[native code])?$/,jt={parse:function(e){return e?e.stacktrace!==void 0||e["opera#sourceloc"]!==void 0?this.parseOpera(e):e.stack&&e.stack.match(In)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error("Cannot parse given url: "+e);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split(`
`).filter((function(t){return!!t.match(In)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=r.match(/ (\((.+):(\d+):(\d+)\)$)/),o=(r=n?r.replace(n[0],""):r).split(/\s+/).slice(1),a=this.extractLocation(n?n[1]:o.pop()),i=o.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new Ye({functionName:i,fileName:s,lineNumber:a[1],columnNumber:a[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split(`
`).filter((function(t){return!t.match(wo)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new Ye({functionName:t});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),o=n&&n[1]?n[1]:void 0,a=this.extractLocation(t.replace(r,""));return new Ye({functionName:o,fileName:a[0],lineNumber:a[1],columnNumber:a[2]})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(`
`)>-1&&e.message.split(`
`).length>e.stacktrace.split(`
`).length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split(`
`),n=[],o=2,a=r.length;o<a;o+=2){var i=t.exec(r[o]);i&&n.push(new Ye({fileName:i[2],lineNumber:parseFloat(i[1])}))}return n},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split(`
`),n=[],o=0,a=r.length;o<a;o+=2){var i=t.exec(r[o]);i&&n.push(new Ye({functionName:i[3]||void 0,fileName:i[2],lineNumber:parseFloat(i[1])}))}return n},parseOpera11:function(e){return e.stack.split(`
`).filter((function(t){return!!t.match(So)&&!t.match(/^Error created at/)}),this).map((function(t){var r=t.split("@"),n=this.extractLocation(r.pop()),o=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Ye({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}};function No(e){if(!e||!e.outerHTML)return"";for(var t="";e.parentElement;){var r=e.localName;if(!r)break;r=r.toLowerCase();var n=e.parentElement,o=[];if(n.children&&n.children.length>0)for(var a=0;a<n.children.length;a++){var i=n.children[a];i.localName&&i.localName.toLowerCase&&i.localName.toLowerCase()===r&&o.push(i)}o.length>1&&(r+=":eq("+o.indexOf(e)+")"),t=r+(t?">"+t:""),e=n}return t}function Jt(e){return Object.prototype.toString.call(e)==="[object Object]"}function bn(e,t){if(t===0)return!0;var r=Object.keys(e);for(var n of r)if(Jt(e[n])&&bn(e[n],t-1))return!0;return!1}function We(e,t){var r={numOfKeysLimit:50,depthOfLimit:4};Object.assign(r,t);var n=[],o=[];return JSON.stringify(e,(function(a,i){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?o.splice(s,1/0,a):o.push(a),~n.indexOf(i)&&(i=n[0]===i?"[Circular ~]":"[Circular ~."+o.slice(0,n.indexOf(i)).join(".")+"]")}else n.push(i);if(i===null)return i;if(i===void 0)return"undefined";if((function(c){return!!(Jt(c)&&Object.keys(c).length>r.numOfKeysLimit||typeof c=="function"||Jt(c)&&bn(c,r.depthOfLimit))})(i))return(function(c){var g=c.toString();return r.stringLengthLimit&&g.length>r.stringLengthLimit&&(g=g.slice(0,r.stringLengthLimit)+"..."),g})(i);if(typeof i=="bigint")return i.toString()+"n";if(i instanceof Event){var l={};for(var u in i){var d=i[u];Array.isArray(d)?l[u]=No(d.length?d[0]:null):l[u]=d}return l}return i instanceof Node?i instanceof HTMLElement?i?i.outerHTML:"":i.nodeName:i instanceof Error?i.stack?i.stack+`
End of stack for Error object`:i.name+": "+i.message:i}))}var Cn={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Mo(e,t,r){var n,o=r?Object.assign({},Cn,r):Cn,a=o.logger;if(!a)return()=>{};n=typeof a=="string"?t[a]:a;var i=0,s=!1,l=[];if(o.level.includes("error")){var u=f=>{var A=f.message,E=f.error,k=jt.parse(E).map((p=>p.toString())),m=[We(A,o.stringifyOptions)];e({level:"error",trace:k,payload:m})};t.addEventListener("error",u),l.push((()=>{t.removeEventListener("error",u)}));var d=f=>{var A,E;f.reason instanceof Error?E=[We("Uncaught (in promise) "+(A=f.reason).name+": "+A.message,o.stringifyOptions)]:(A=new Error,E=[We("Uncaught (in promise)",o.stringifyOptions),We(f.reason,o.stringifyOptions)]);var k=jt.parse(A).map((m=>m.toString()));e({level:"error",trace:k,payload:E})};t.addEventListener("unhandledrejection",d),l.push((()=>{t.removeEventListener("unhandledrejection",d)}))}for(var c of o.level)l.push(g(n,c));return()=>{l.forEach((f=>f()))};function g(f,A){var E=this;return f[A]?Io.patch(f,A,(k=>function(){for(var m=arguments.length,p=new Array(m),h=0;h<m;h++)p[h]=arguments[h];if(k.apply(E,p),!(A==="assert"&&p[0]||s)){s=!0;try{var v=jt.parse(new Error).map((S=>S.toString())).splice(1),b=(A==="assert"?p.slice(1):p).map((S=>We(S,o.stringifyOptions)));++i<o.lengthThreshold?e({level:A,trace:v,payload:b}):i===o.lengthThreshold&&e({level:"warn",trace:[],payload:[We("The number of log records reached the threshold.")]})}catch(S){k("rrweb logger error:",S,...p)}finally{s=!1}}})):()=>{}}}var Sn=e=>({name:"rrweb/console@1",observer:Mo,options:e}),Ao=Array.isArray,wn=Object.prototype,ko=wn.hasOwnProperty,Ut=wn.toString,vt=Ao||function(e){return Ut.call(e)==="[object Array]"},Ro=e=>typeof e=="function",To=e=>e===Object(e)&&!vt(e),Me=e=>e===void 0,Eo=e=>Ut.call(e)=="[object String]",qt=e=>e===null,Nn=e=>Me(e)||qt(e),Qt=e=>Ut.call(e)==="[object Boolean]",Mn=e=>e instanceof FormData,ve=typeof window<"u"?window:void 0,le=typeof globalThis<"u"?globalThis:ve,An=Array.prototype.forEach,kn=le?.navigator;le?.document,le?.location,le?.fetch,le!=null&&le.XMLHttpRequest&&"withCredentials"in new le.XMLHttpRequest&&le.XMLHttpRequest,le?.AbortController,kn?.userAgent;var Ae=ve??{},Oo=e=>e instanceof Document,Rn=e=>{var t={t:function(r){if(ve&&Ae.POSTHOG_DEBUG&&!Me(ve.console)&&ve.console){for(var n=("__rrweb_original__"in ve.console[r])?ve.console[r].__rrweb_original__:ve.console[r],o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];n(e,...a)}},info:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t.t("log",...n)},warn:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t.t("warn",...n)},error:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t.t("error",...n)},critical:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];console.error(e,...n)},uninitializedWarning:r=>{t.error("You must initialize PostHog before calling "+r)},createLogger:r=>Rn(e+" "+r)};return t},xo=Rn("[PostHog.js]").createLogger,$t={};function Lo(e,t,r){if(!Nn(e)){if(vt(e))return(function(a,i,s){if(vt(a)){if(An&&a.forEach===An)a.forEach(i,s);else if("length"in a&&a.length===+a.length){for(var l=0,u=a.length;l<u;l++)if(l in a&&i.call(s,a[l],l)===$t)return}}})(e,t,r);if(Mn(e)){for(var n of e.entries())if(t.call(r,n[1],n[0])===$t)return}else for(var o in e)if(ko.call(e,o)&&t.call(r,e[o],o)===$t)return}}var Do=function(e,t){var r,n;t===void 0&&(t="&");var o=[];return Lo(e,(function(a,i){Me(a)||Me(i)||i==="undefined"||(r=encodeURIComponent(a instanceof File?a.name:a.toString()),n=encodeURIComponent(i),o[o.length]=n+"="+r)})),o.join(t)};function Tn(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],o=r(n);return Ro(o)&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function er(e,t){var r,n=(function(i){try{return typeof i=="string"?new URL(i).hostname:"url"in i?new URL(i.url).hostname:i.hostname}catch{return null}})(e),o={hostname:n,isHostDenied:!1};if((r=t.payloadHostDenyList)==null||!r.length||n==null||!n.trim().length)return o;for(var a of t.payloadHostDenyList)if(n.endsWith(a))return{hostname:n,isHostDenied:!0};return o}var En={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},On=xo("[Recorder]"),xn=e=>e.entryType==="navigation",tr=e=>e.entryType==="resource";function Fo(e,t,r){if(r.recordInitialRequests){var n=t.performance.getEntries().filter((i=>xn(i)||tr(i)&&r.initiatorTypes.includes(i.initiatorType)));e({requests:n.flatMap((i=>bt({entry:i,method:void 0,status:void 0,networkRequest:{},isInitial:!0}))),isInitial:!0})}var o=new t.PerformanceObserver((i=>{var s=i.getEntries().filter((l=>xn(l)||tr(l)&&r.initiatorTypes.includes(l.initiatorType)&&(u=>!r.recordBody&&!r.recordHeaders||u.initiatorType!=="xmlhttprequest"&&u.initiatorType!=="fetch")(l)));e({requests:s.flatMap((l=>bt({entry:l,method:void 0,status:void 0,networkRequest:{}})))})})),a=PerformanceObserver.supportedEntryTypes.filter((i=>r.performanceEntryTypeToObserve.includes(i)));return o.observe({entryTypes:a}),()=>{o.disconnect()}}function yt(e,t){return!!t&&(Qt(t)||t[e])}function It(e){var{type:t,recordBody:r,headers:n,url:o}=e;function a(s){var l=Object.keys(n).find((d=>d.toLowerCase()==="content-type")),u=l&&n[l];return s.some((d=>u?.includes(d)))}if(!r||(function s(l){try{return typeof l=="string"?l.startsWith("blob:"):l instanceof URL?l.protocol==="blob:":l instanceof Request&&s(l.url)}catch{return!1}})(o))return!1;if(Qt(r))return!0;if(vt(r))return a(r);var i=r[t];return Qt(i)?i:a(i)}function rr(e,t,r,n,o,a){return nr.apply(this,arguments)}function nr(){return nr=Ge((function*(e,t,r,n,o,a){if(a===void 0&&(a=0),a>10)return On.warn("Failed to get performance entry for request",{url:r,initiatorType:t}),null;var i=(function(s,l){for(var u=s.length-1;u>=0;u-=1)if(l(s[u]))return s[u]})(e.performance.getEntriesByName(r),(s=>tr(s)&&s.initiatorType===t&&(Me(n)||s.startTime>=n)&&(Me(o)||s.startTime<=o)));return i||(yield new Promise((s=>setTimeout(s,50*a))),rr(e,t,r,n,o,a+1))})),nr.apply(this,arguments)}function Ln(e){var{body:t,options:r,url:n}=e;if(Nn(t))return null;var{hostname:o,isHostDenied:a}=er(n,r);if(a)return o+" is in deny list";if(Eo(t))return t;if(Oo(t))return t.textContent;if(Mn(t))return Do(t);if(To(t))try{return JSON.stringify(t)}catch{return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(t)}var Bo=e=>!qt(e)&&(e.entryType==="navigation"||e.entryType==="resource");function bt(e){var{entry:t,method:r,status:n,networkRequest:o,isInitial:a,start:i,end:s,url:l,initiatorType:u}=e;i=t?t.startTime:i,s=t?t.responseEnd:s;var d=Math.floor(Date.now()-performance.now()),c=Math.floor(d+(i||0)),g=[Q({},t?t.toJSON():{name:l},{startTime:Me(i)?void 0:Math.round(i),endTime:Me(s)?void 0:Math.round(s),timeOrigin:d,timestamp:c,method:r,initiatorType:u||(t?t.initiatorType:void 0),status:n,requestHeaders:o.requestHeaders,requestBody:o.requestBody,responseHeaders:o.responseHeaders,responseBody:o.responseBody,isInitial:a})];if(Bo(t))for(var f of t.serverTiming||[])g.push({timeOrigin:d,timestamp:c,startTime:Math.round(t.startTime),name:f.name,duration:f.duration,entryType:"serverTiming"});return g}var _o=["video/","audio/"];function Dn(e){return new Promise(((t,r)=>{var n=setTimeout((()=>t("[SessionReplay] Timeout while trying to read body")),500);try{e.clone().text().then((o=>t(o)),(o=>r(o))).finally((()=>clearTimeout(n)))}catch{clearTimeout(n),t("[SessionReplay] Failed to read body")}}))}function Fn(){return(Fn=Ge((function*(e){var{r:t,options:r,url:n}=e,{hostname:o,isHostDenied:a}=er(n,r);return a?Promise.resolve(o+" is in deny list"):Dn(t)}))).apply(this,arguments)}function Bn(){return(Bn=Ge((function*(e){var{r:t,options:r,url:n}=e,o=(function(a){var i,{r:s,options:l,url:u}=a;if(s.headers.get("Transfer-Encoding")==="chunked")return"Chunked Transfer-Encoding is not supported";var d=(i=s.headers.get("Content-Type"))==null?void 0:i.toLowerCase(),c=_o.some((A=>d?.startsWith(A)));if(d&&c)return"Content-Type "+d+" is not supported";var{hostname:g,isHostDenied:f}=er(u,l);return f?g+" is in deny list":null})({r:t,options:r,url:n});return qt(o)?Dn(t):Promise.resolve(o)}))).apply(this,arguments)}function Zo(e,t,r){if(!r.initiatorTypes.includes("fetch"))return()=>{};var n=yt("request",r.recordHeaders),o=yt("response",r.recordHeaders),a=Tn(t,"fetch",(i=>(function(){var s=Ge((function*(l,u){var d,c,g,f=new Request(l,u),A={};try{var E={};f.headers.forEach(((m,p)=>{E[p]=m})),n&&(A.requestHeaders=E),It({type:"request",headers:E,url:l,recordBody:r.recordBody})&&(A.requestBody=yield(function(m){return Fn.apply(this,arguments)})({r:f,options:r,url:l})),c=t.performance.now(),d=yield i(f),g=t.performance.now();var k={};return d.headers.forEach(((m,p)=>{k[p]=m})),o&&(A.responseHeaders=k),It({type:"response",headers:k,url:l,recordBody:r.recordBody})&&(A.responseBody=yield(function(m){return Bn.apply(this,arguments)})({r:d,options:r,url:l})),d}finally{rr(t,"fetch",f.url,c,g).then((m=>{var p,h=bt({entry:m,method:f.method,status:(p=d)==null?void 0:p.status,networkRequest:A,start:c,end:g,url:f.url,initiatorType:"fetch"});e({requests:h})})).catch((()=>{}))}}));return function(l,u){return s.apply(this,arguments)}})()));return()=>{a()}}var _n=null;function Yo(e,t,r){if(!("performance"in t))return()=>{};if(_n)return On.warn("Network observer already initialised, doing nothing"),()=>{};var n=r?Object.assign({},En,r):En,o=l=>{var u=[];l.requests.forEach((d=>{var c=n.maskRequestFn(d);c&&u.push(c)})),u.length>0&&e(Q({},l,{requests:u}))},a=Fo(o,t,n),i=()=>{},s=()=>{};return(n.recordHeaders||n.recordBody)&&(i=(function(l,u,d){if(!d.initiatorTypes.includes("xmlhttprequest"))return()=>{};var c=yt("request",d.recordHeaders),g=yt("response",d.recordHeaders),f=Tn(u.XMLHttpRequest.prototype,"open",(A=>function(E,k,m,p,h){m===void 0&&(m=!0);var v,b,S=this,w=new Request(k),M={},T={},x=S.setRequestHeader.bind(S);S.setRequestHeader=(I,_)=>(T[I]=_,x(I,_)),c&&(M.requestHeaders=T);var B=S.send.bind(S);S.send=I=>(It({type:"request",headers:T,url:k,recordBody:d.recordBody})&&(M.requestBody=Ln({body:I,options:d,url:k})),v=u.performance.now(),B(I)),S.addEventListener("readystatechange",(()=>{if(S.readyState===S.DONE){b=u.performance.now();var I={};S.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((_=>{var L=_.split(": "),D=L.shift(),O=L.join(": ");D&&(I[D]=O)})),g&&(M.responseHeaders=I),It({type:"response",headers:I,url:k,recordBody:d.recordBody})&&(M.responseBody=Ln({body:S.response,options:d,url:k})),rr(u,"xmlhttprequest",w.url,v,b).then((_=>{var L=bt({entry:_,method:E,status:S?.status,networkRequest:M,start:v,end:b,url:k.toString(),initiatorType:"xmlhttprequest"});l({requests:L})})).catch((()=>{}))}})),A.call(S,E,k,m,p,h)}));return()=>{f()}})(o,t,n),s=Zo(o,t,n)),_n=()=>{a(),i(),s()}}var Zn=e=>({name:"rrweb/network@1",observer:Yo,options:e});Ae.__PosthogExtensions__=Ae.__PosthogExtensions__||{},Ae.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:Sn,getRecordNetworkPlugin:Zn},Ae.__PosthogExtensions__.rrweb={record:_e,version:"v2"},Ae.rrweb={record:_e,version:"v2"},Ae.rrwebConsoleRecord={getRecordConsolePlugin:Sn},Ae.getRecordNetworkPlugin=Zn})();
