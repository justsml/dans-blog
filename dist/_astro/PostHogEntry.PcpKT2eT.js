(function(r){function e(i,s){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(g){return Object.getOwnPropertyDescriptor(i,g).enumerable})),l.push.apply(l,c)}return l}function t(i){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?arguments[s]:{};s%2?e(Object(l),!0).forEach(function(c){a(i,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(l,c))})}return i}function n(i,s,l,c,g,_,S){try{var E=i[_](S),x=E.value}catch(T){return void l(T)}E.done?s(x):Promise.resolve(x).then(c,g)}function o(i){return function(){var s=this,l=arguments;return new Promise(function(c,g){var _=i.apply(s,l);function S(x){n(_,c,g,S,E,"next",x)}function E(x){n(_,c,g,S,E,"throw",x)}S(void 0)})}}function a(i,s,l){return s in i?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l,i}function u(i,s){if(i==null)return{};var l,c,g=function(S,E){if(S==null)return{};var x,T,N={},j=Object.keys(S);for(T=0;T<j.length;T++)x=j[T],E.indexOf(x)>=0||(N[x]=S[x]);return N}(i,s);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);for(c=0;c<_.length;c++)l=_[c],s.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(g[l]=i[l])}return g}var p,f=["type"],b=Object.defineProperty,m=(i,s,l)=>((c,g,_)=>g in c?b(c,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):c[g]=_)(i,typeof s!="symbol"?s+"":s,l),v=Object.defineProperty,k=(i,s,l)=>((c,g,_)=>g in c?v(c,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):c[g]=_)(i,typeof s!="symbol"?s+"":s,l),C=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(C||{}),R={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},O={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ne=()=>{try{return!!globalThis.Zone}catch{return!1}},ee={};function z(i){if(ee[i])return ee[i];var s=globalThis[i],l=s.prototype,c=i in R?R[i]:void 0,g=!!(c&&c.every(N=>{var j,ce;return!!((ce=(j=Object.getOwnPropertyDescriptor(l,N))==null?void 0:j.get)!=null&&ce.toString().includes("[native code]"))})),_=i in O?O[i]:void 0,S=!!(_&&_.every(N=>{var j;return typeof l[N]=="function"&&((j=l[N])==null?void 0:j.toString().includes("[native code]"))}));if(g&&S&&!ne())return ee[i]=s.prototype,s.prototype;try{var E=document.createElement("iframe");document.body.appendChild(E);var x=E.contentWindow;if(!x)return s.prototype;var T=x[i].prototype;return document.body.removeChild(E),T?ee[i]=T:s.prototype}catch{return s.prototype}}var fe={};function me(i,s,l){var c,g="".concat(i,".").concat(String(l));if(fe[g])return fe[g].call(s);var _=z(i),S=(c=Object.getOwnPropertyDescriptor(_,l))==null?void 0:c.get;return S?(fe[g]=S,S.call(s)):s[l]}var De={};function lt(i,s,l){var c="".concat(i,".").concat(String(l));if(De[c])return De[c].bind(s);var g=z(i)[l];return typeof g!="function"?s[l]:(De[c]=g,g.bind(s))}var Ie={childNodes:function(i){return me("Node",i,"childNodes")},parentNode:function(i){return me("Node",i,"parentNode")},parentElement:function(i){return me("Node",i,"parentElement")},textContent:function(i){return me("Node",i,"textContent")},contains:function(i,s){return lt("Node",i,"contains")(s)},getRootNode:function(i){return lt("Node",i,"getRootNode")()},host:function(i){return i&&"host"in i?me("ShadowRoot",i,"host"):null},styleSheets:function(i){return i.styleSheets},shadowRoot:function(i){return i&&"shadowRoot"in i?me("Element",i,"shadowRoot"):null},querySelector:function(i,s){return me("Element",i,"querySelector")(s)},querySelectorAll:function(i,s){return me("Element",i,"querySelectorAll")(s)},mutationObserver:function(){return z("MutationObserver").constructor}};function Be(i){return i.nodeType===i.ELEMENT_NODE}function Ge(i){var s=i&&"host"in i&&"mode"in i&&Ie.host(i)||null;return!!(s&&"shadowRoot"in s&&Ie.shadowRoot(s)===i)}function tt(i){return Object.prototype.toString.call(i)==="[object ShadowRoot]"}function _t(i){try{var s=i.rules||i.cssRules;if(!s)return null;var l=Array.from(s,g=>Et(g,i.href)).join("");return(c=l).includes(" background-clip: text;")&&!c.includes(" -webkit-background-clip: text;")&&(c=c.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),c}catch{return null}var c}function Et(i,s){if(function(_){return"styleSheet"in _}(i)){var l;try{l=_t(i.styleSheet)||function(_){var{cssText:S}=_;if(S.split('"').length<3)return S;var E=["@import","url(".concat(JSON.stringify(_.href),")")];return _.layerName===""?E.push("layer"):_.layerName&&E.push("layer(".concat(_.layerName,")")),_.supportsText&&E.push("supports(".concat(_.supportsText,")")),_.media.length&&E.push(_.media.mediaText),E.join(" ")+";"}(i)}catch{l=i.cssText}return i.styleSheet.href?St(l,i.styleSheet.href):l}var c,g=i.cssText;return function(_){return"selectorText"in _}(i)&&i.selectorText.includes(":")&&(c=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,g=g.replace(c,"$1\\$2")),s?St(g,s):g}function xt(i,s){return Array.from(i.styleSheets).find(l=>l.href===s)}let jt=class{constructor(){k(this,"idNodeMap",new Map),k(this,"nodeMetaMap",new WeakMap)}getId(i){var s;if(!i)return-1;var l=(s=this.getMeta(i))==null?void 0:s.id;return l??-1}getNode(i){return this.idNodeMap.get(i)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(i){return this.nodeMetaMap.get(i)||null}removeNodeFromMap(i){var s=this.getId(i);this.idNodeMap.delete(s),i.childNodes&&i.childNodes.forEach(l=>this.removeNodeFromMap(l))}has(i){return this.idNodeMap.has(i)}hasNode(i){return this.nodeMetaMap.has(i)}add(i,s){var l=s.id;this.idNodeMap.set(l,i),this.nodeMetaMap.set(i,s)}replace(i,s){var l=this.getNode(i);if(l){var c=this.nodeMetaMap.get(l);c&&this.nodeMetaMap.set(s,c)}this.idNodeMap.set(i,s)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Pt(i){var{element:s,maskInputOptions:l,tagName:c,type:g,value:_,maskInputFn:S}=i,E=_||"",x=g&&wt(g);return(l[c.toLowerCase()]||x&&l[x])&&(E=S?S(E,s):"*".repeat(E.length)),E}function wt(i){return i.toLowerCase()}var Lt="__rrweb_original__";function Vt(i){var s=i.type;return i.hasAttribute("data-rr-is-password")?"password":s?wt(s):null}function Yt(i,s){var l,c;try{c=new URL(i,s??window.location.href)}catch{return null}var g=c.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(l=g?.[1])!==null&&l!==void 0?l:null}var Ut=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,nn=/^(?:[a-z+]+:)?\/\//i,It=/^www\..*/i,Mt=/^(data:)([^,]*),(.*)/i;function St(i,s){return(i||"").replace(Ut,(l,c,g,_,S,E)=>{var x,T=g||S||E,N=c||_||"";if(!T)return l;if(nn.test(T)||It.test(T)||Mt.test(T))return"url(".concat(N).concat(T).concat(N,")");if(T[0]==="/")return"url(".concat(N).concat((x=s,(x.indexOf("//")>-1?x.split("/").slice(0,3).join("/"):x.split("/")[0]).split("?")[0]+T)).concat(N,")");var j=s.split("/"),ce=T.split("/");for(var K of(j.pop(),ce))K!=="."&&(K===".."?j.pop():j.push(K));return"url(".concat(N).concat(j.join("/")).concat(N,")")})}var Ct,Xt,rn=1,_n=new RegExp("[^a-z0-9-_:]"),yn=-2;function $(){return rn++}var P=/^[^ \t\n\r\u000c]+/,Z=/^[, \t\n\r\u000c]+/,J=new WeakMap;function se(i,s){return s&&s.trim()!==""?Ee(i,s):s}function He(i){return!!(i.tagName==="svg"||i.ownerSVGElement)}function Ee(i,s){var l=J.get(i);if(l||(l=i.createElement("a"),J.set(i,l)),s){if(s.startsWith("blob:")||s.startsWith("data:"))return s}else s="";return l.setAttribute("href",s),l.href}function ut(i,s,l,c){return c&&(l==="src"||l==="href"&&(s!=="use"||c[0]!=="#")||l==="xlink:href"&&c[0]!=="#"?se(i,c):l!=="background"||s!=="table"&&s!=="td"&&s!=="th"?l==="srcset"?function(g,_){if(_.trim()==="")return _;var S=0;function E(K){var ye,xe=K.exec(_.substring(S));return xe?(ye=xe[0],S+=ye.length,ye):""}for(var x=[];E(Z),!(S>=_.length);){var T=E(P);if(T.slice(-1)===",")T=se(g,T.substring(0,T.length-1)),x.push(T);else{var N="";T=se(g,T);for(var j=!1;;){var ce=_.charAt(S);if(ce===""){x.push((T+N).trim());break}if(j)ce===")"&&(j=!1);else{if(ce===","){S+=1,x.push((T+N).trim());break}ce==="("&&(j=!0)}N+=ce,S+=1}}}return x.join(", ")}(i,c):l==="style"?St(c,Ee(i)):s==="object"&&l==="data"?se(i,c):c:se(i,c))}function Ue(i,s,l){return(i==="video"||i==="audio")&&s==="autoplay"}function Rt(i,s,l){if(!i)return!1;if(i.nodeType!==i.ELEMENT_NODE)return!!l&&Rt(Ie.parentNode(i),s,l);for(var c=i.classList.length;c--;){var g=i.classList[c];if(s.test(g))return!0}return!!l&&Rt(Ie.parentNode(i),s,l)}function L(i,s,l,c){var g;if(Be(i)){if(g=i,!Ie.childNodes(g).length)return!1}else{if(Ie.parentElement(i)===null)return!1;g=Ie.parentElement(i)}try{if(typeof s=="string"){if(c){if(g.closest(".".concat(s)))return!0}else if(g.classList.contains(s))return!0}else if(Rt(g,s,c))return!0;if(l){if(c){if(g.closest(l))return!0}else if(g.matches(l))return!0}}catch{}return!1}function ae(i,s){var{doc:l,mirror:c,blockClass:g,blockSelector:_,needsMask:S,inlineStylesheet:E,maskInputOptions:x={},maskTextFn:T,maskInputFn:N,dataURLOptions:j={},inlineImages:ce,recordCanvas:K,keepIframeSrcFn:ye,newlyAddedElement:xe=!1}=s,Se=function(V,q){if(q.hasNode(V)){var H=q.getId(V);return H===1?void 0:H}}(l,c);switch(i.nodeType){case i.DOCUMENT_NODE:return i.compatMode!=="CSS1Compat"?{type:C.Document,childNodes:[],compatMode:i.compatMode}:{type:C.Document,childNodes:[]};case i.DOCUMENT_TYPE_NODE:return{type:C.DocumentType,name:i.name,publicId:i.publicId,systemId:i.systemId,rootId:Se};case i.ELEMENT_NODE:return function(V,q){for(var H,{doc:re,blockClass:he,blockSelector:pe,inlineStylesheet:ge,maskInputOptions:_e={},maskInputFn:ke,dataURLOptions:Re={},inlineImages:je,recordCanvas:le,keepIframeSrcFn:Ve,newlyAddedElement:Fe=!1,rootId:Le}=q,Ne=function(Qe,Sn,qn){try{if(typeof Sn=="string"){if(Qe.classList.contains(Sn))return!0}else for(var $n=Qe.classList.length;$n--;){var Qn=Qe.classList[$n];if(Sn.test(Qn))return!0}if(qn)return Qe.matches(qn)}catch{}return!1}(V,he,pe),Ce=function(Qe){if(Qe instanceof HTMLFormElement)return"form";var Sn=wt(Qe.tagName);return _n.test(Sn)?"div":Sn}(V),ve={},vt=V.attributes.length,mt=0;mt<vt;mt++){var Je=V.attributes[mt];Ue(Ce,Je.name,Je.value)||(ve[Je.name]=ut(re,Ce,wt(Je.name),Je.value))}if(Ce==="link"&&ge){var oe=V.href,ze=xt(re,oe);!ze&&oe.includes(".css")&&(ze=xt(re,window.location.origin+"/"+oe.replace(window.location.href,"")));var pn=null;ze&&(pn=_t(ze)),pn&&(delete ve.rel,delete ve.href,ve._cssText=pn)}if(Ce==="style"&&V.sheet&&!(V.innerText||Ie.textContent(V)||"").trim().length){var Jt=_t(V.sheet);Jt&&(ve._cssText=Jt)}if(Ce==="input"||Ce==="textarea"||Ce==="select"){var Ot=V.value,Kt=V.checked;ve.type!=="radio"&&ve.type!=="checkbox"&&ve.type!=="submit"&&ve.type!=="button"&&Ot?ve.value=Pt({element:V,type:Vt(V),tagName:Ce,value:Ot,maskInputOptions:_e,maskInputFn:ke}):Kt&&(ve.checked=Kt)}if(Ce==="option"&&(V.selected&&!_e.select?ve.selected=!0:delete ve.selected),Ce==="dialog"&&V.open)try{ve.rr_open_mode=V.matches("dialog:modal")?"modal":"non-modal"}catch{ve.rr_open_mode="modal",ve.ph_rr_could_not_detect_modal=!0}if(Ce==="canvas"&&le){if(V.__context==="2d")(function(Qe){var Sn=Qe.getContext("2d");if(!Sn)return!0;for(var qn=0;qn<Qe.width;qn+=50)for(var $n=0;$n<Qe.height;$n+=50){var Qn=Sn.getImageData,lo=Lt in Qn?Qn[Lt]:Qn;if(new Uint32Array(lo.call(Sn,qn,$n,Math.min(50,Qe.width-qn),Math.min(50,Qe.height-$n)).data.buffer).some(hs=>hs!==0))return!1}return!0})(V)||(ve.rr_dataURL=V.toDataURL(Re.type,Re.quality));else if(!("__context"in V)){var Rn=V.toDataURL(Re.type,Re.quality),Pn=re.createElement("canvas");Pn.width=V.width,Pn.height=V.height,Rn!==Pn.toDataURL(Re.type,Re.quality)&&(ve.rr_dataURL=Rn)}}if(Ce==="img"&&je){Ct||(Ct=re.createElement("canvas"),Xt=Ct.getContext("2d"));var Ft=V,Tr=Ft.currentSrc||Ft.getAttribute("src")||"<unknown-src>",Ci=Ft.crossOrigin,Kn=()=>{Ft.removeEventListener("load",Kn);try{Ct.width=Ft.naturalWidth,Ct.height=Ft.naturalHeight,Xt.drawImage(Ft,0,0),ve.rr_dataURL=Ct.toDataURL(Re.type,Re.quality)}catch(Qe){if(Ft.crossOrigin!=="anonymous")return Ft.crossOrigin="anonymous",void(Ft.complete&&Ft.naturalWidth!==0?Kn():Ft.addEventListener("load",Kn));console.warn("Cannot inline img src=".concat(Tr,"! Error: ").concat(Qe))}Ft.crossOrigin==="anonymous"&&(Ci?ve.crossOrigin=Ci:Ft.removeAttribute("crossorigin"))};Ft.complete&&Ft.naturalWidth!==0?Kn():Ft.addEventListener("load",Kn)}if(Ce==="audio"||Ce==="video"){var Ke=ve;Ke.rr_mediaState=V.paused?"paused":"played",Ke.rr_mediaCurrentTime=V.currentTime,Ke.rr_mediaPlaybackRate=V.playbackRate,Ke.rr_mediaMuted=V.muted,Ke.rr_mediaLoop=V.loop,Ke.rr_mediaVolume=V.volume}if(Fe||(V.scrollLeft&&(ve.rr_scrollLeft=V.scrollLeft),V.scrollTop&&(ve.rr_scrollTop=V.scrollTop)),Ne){var{width:gn,height:$e}=V.getBoundingClientRect();ve={class:ve.class,rr_width:"".concat(gn,"px"),rr_height:"".concat($e,"px")}}Ce!=="iframe"||Ve(ve.src)||(V.contentDocument||(ve.rr_src=ve.src),delete ve.src);try{customElements.get(Ce)&&(H=!0)}catch{}return{type:C.Element,tagName:Ce,attributes:ve,childNodes:[],isSVG:He(V)||void 0,needBlock:Ne,rootId:Le,isCustom:H}}(i,{doc:l,blockClass:g,blockSelector:_,inlineStylesheet:E,maskInputOptions:x,maskInputFn:N,dataURLOptions:j,inlineImages:ce,recordCanvas:K,keepIframeSrcFn:ye,newlyAddedElement:xe,rootId:Se});case i.TEXT_NODE:return function(V,q){var H,{needsMask:re,maskTextFn:he,rootId:pe}=q,ge=Ie.parentNode(V),_e=ge&&ge.tagName,ke=Ie.textContent(V),Re=_e==="STYLE"||void 0,je=_e==="SCRIPT"||void 0;if(Re&&ke){try{V.nextSibling||V.previousSibling||(H=ge.sheet)!=null&&H.cssRules&&(ke=_t(ge.sheet))}catch(le){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(le),V)}ke=St(ke,Ee(q.doc))}return je&&(ke="SCRIPT_PLACEHOLDER"),!Re&&!je&&ke&&re&&(ke=he?he(ke,Ie.parentElement(V)):ke.replace(/[\S]/g,"*")),{type:C.Text,textContent:ke||"",isStyle:Re,rootId:pe}}(i,{doc:l,needsMask:S,maskTextFn:T,rootId:Se});case i.CDATA_SECTION_NODE:return{type:C.CDATA,textContent:"",rootId:Se};case i.COMMENT_NODE:return{type:C.Comment,textContent:Ie.textContent(i)||"",rootId:Se};default:return!1}}function U(i){return i==null?"":i.toLowerCase()}function te(i,s){var{doc:l,mirror:c,blockClass:g,blockSelector:_,maskTextClass:S,maskTextSelector:E,skipChild:x=!1,inlineStylesheet:T=!0,maskInputOptions:N={},maskTextFn:j,maskInputFn:ce,slimDOMOptions:K,dataURLOptions:ye={},inlineImages:xe=!1,recordCanvas:Se=!1,onSerialize:V,onIframeLoad:q,iframeLoadTimeout:H=5e3,onStylesheetLoad:re,stylesheetLoadTimeout:he=5e3,keepIframeSrcFn:pe=()=>!1,newlyAddedElement:ge=!1}=s,{needsMask:_e}=s,{preserveWhiteSpace:ke=!0}=s;_e||(_e=L(i,S,E,_e===void 0));var Re,je=ae(i,{doc:l,mirror:c,blockClass:g,blockSelector:_,needsMask:_e,inlineStylesheet:T,maskInputOptions:N,maskTextFn:j,maskInputFn:ce,dataURLOptions:ye,inlineImages:xe,recordCanvas:Se,keepIframeSrcFn:pe,newlyAddedElement:ge});if(!je)return console.warn(i,"not serialized"),null;Re=c.hasNode(i)?c.getId(i):!function(oe,ze){return!!(ze.comment&&oe.type===C.Comment||oe.type===C.Element&&(ze.script&&(oe.tagName==="script"||oe.tagName==="link"&&(oe.attributes.rel==="preload"||oe.attributes.rel==="modulepreload")&&oe.attributes.as==="script"||oe.tagName==="link"&&oe.attributes.rel==="prefetch"&&typeof oe.attributes.href=="string"&&Yt(oe.attributes.href)==="js")||ze.headFavicon&&(oe.tagName==="link"&&oe.attributes.rel==="shortcut icon"||oe.tagName==="meta"&&(U(oe.attributes.name).match(/^msapplication-tile(image|color)$/)||U(oe.attributes.name)==="application-name"||U(oe.attributes.rel)==="icon"||U(oe.attributes.rel)==="apple-touch-icon"||U(oe.attributes.rel)==="shortcut icon"))||oe.tagName==="meta"&&(ze.headMetaDescKeywords&&U(oe.attributes.name).match(/^description|keywords$/)||ze.headMetaSocial&&(U(oe.attributes.property).match(/^(og|twitter|fb):/)||U(oe.attributes.name).match(/^(og|twitter):/)||U(oe.attributes.name)==="pinterest")||ze.headMetaRobots&&(U(oe.attributes.name)==="robots"||U(oe.attributes.name)==="googlebot"||U(oe.attributes.name)==="bingbot")||ze.headMetaHttpEquiv&&oe.attributes["http-equiv"]!==void 0||ze.headMetaAuthorship&&(U(oe.attributes.name)==="author"||U(oe.attributes.name)==="generator"||U(oe.attributes.name)==="framework"||U(oe.attributes.name)==="publisher"||U(oe.attributes.name)==="progid"||U(oe.attributes.property).match(/^article:/)||U(oe.attributes.property).match(/^product:/))||ze.headMetaVerification&&(U(oe.attributes.name)==="google-site-verification"||U(oe.attributes.name)==="yandex-verification"||U(oe.attributes.name)==="csrf-token"||U(oe.attributes.name)==="p:domain_verify"||U(oe.attributes.name)==="verify-v1"||U(oe.attributes.name)==="verification"||U(oe.attributes.name)==="shopify-checkout-api-token"))))}(je,K)&&(ke||je.type!==C.Text||je.isStyle||je.textContent.replace(/^\s+|\s+$/gm,"").length)?$():yn;var le=Object.assign(je,{id:Re});if(c.add(i,le),Re===yn)return null;V&&V(i);var Ve=!x;if(le.type===C.Element){Ve=Ve&&!le.needBlock,delete le.needBlock;var Fe=Ie.shadowRoot(i);Fe&&tt(Fe)&&(le.isShadowHost=!0)}if((le.type===C.Document||le.type===C.Element)&&Ve){K.headWhitespace&&le.type===C.Element&&le.tagName==="head"&&(ke=!1);var Le={doc:l,mirror:c,blockClass:g,blockSelector:_,needsMask:_e,maskTextClass:S,maskTextSelector:E,skipChild:x,inlineStylesheet:T,maskInputOptions:N,maskTextFn:j,maskInputFn:ce,slimDOMOptions:K,dataURLOptions:ye,inlineImages:xe,recordCanvas:Se,preserveWhiteSpace:ke,onSerialize:V,onIframeLoad:q,iframeLoadTimeout:H,onStylesheetLoad:re,stylesheetLoadTimeout:he,keepIframeSrcFn:pe};if(!(le.type===C.Element&&le.tagName==="textarea"&&le.attributes.value!==void 0))for(var Ne of Array.from(Ie.childNodes(i))){var Ce=te(Ne,Le);Ce&&le.childNodes.push(Ce)}var ve=null;if(Be(i)&&(ve=Ie.shadowRoot(i)))for(var vt of Array.from(Ie.childNodes(ve))){var mt=te(vt,Le);mt&&(tt(ve)&&(mt.isShadow=!0),le.childNodes.push(mt))}}var Je=Ie.parentNode(i);return Je&&Ge(Je)&&tt(Je)&&(le.isShadow=!0),le.type===C.Element&&le.tagName==="iframe"&&function(oe,ze,pn){var Jt=oe.contentWindow;if(Jt){var Ot,Kt=!1;try{Ot=Jt.document.readyState}catch{return}if(Ot==="complete"){var Rn="about:blank";if(Jt.location.href!==Rn||oe.src===Rn||oe.src==="")return setTimeout(ze,0),oe.addEventListener("load",ze);oe.addEventListener("load",ze)}else{var Pn=setTimeout(()=>{Kt||(ze(),Kt=!0)},pn);oe.addEventListener("load",()=>{clearTimeout(Pn),Kt=!0,ze()})}}}(i,()=>{var oe=i.contentDocument;if(oe&&q){var ze=te(oe,{doc:oe,mirror:c,blockClass:g,blockSelector:_,needsMask:_e,maskTextClass:S,maskTextSelector:E,skipChild:!1,inlineStylesheet:T,maskInputOptions:N,maskTextFn:j,maskInputFn:ce,slimDOMOptions:K,dataURLOptions:ye,inlineImages:xe,recordCanvas:Se,preserveWhiteSpace:ke,onSerialize:V,onIframeLoad:q,iframeLoadTimeout:H,onStylesheetLoad:re,stylesheetLoadTimeout:he,keepIframeSrcFn:pe});ze&&q(i,ze)}},H),le.type===C.Element&&le.tagName==="link"&&typeof le.attributes.rel=="string"&&(le.attributes.rel==="stylesheet"||le.attributes.rel==="preload"&&typeof le.attributes.href=="string"&&Yt(le.attributes.href)==="css")&&function(oe,ze,pn){var Jt,Ot=!1;try{Jt=oe.sheet}catch{return}if(!Jt){var Kt=setTimeout(()=>{Ot||(ze(),Ot=!0)},pn);oe.addEventListener("load",()=>{clearTimeout(Kt),Ot=!0,ze()})}}(i,()=>{if(re){var oe=te(i,{doc:l,mirror:c,blockClass:g,blockSelector:_,needsMask:_e,maskTextClass:S,maskTextSelector:E,skipChild:!1,inlineStylesheet:T,maskInputOptions:N,maskTextFn:j,maskInputFn:ce,slimDOMOptions:K,dataURLOptions:ye,inlineImages:xe,recordCanvas:Se,preserveWhiteSpace:ke,onSerialize:V,onIframeLoad:q,iframeLoadTimeout:H,onStylesheetLoad:re,stylesheetLoadTimeout:he,keepIframeSrcFn:pe});oe&&re(i,oe)}},he),le}let Q=class ql{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){for(var s=[],l=this.firstChild;l;)s.push(l),l=l.nextSibling;return s}contains(s){if(!(s instanceof ql)||s.ownerDocument!==this.ownerDocument)return!1;if(s===this)return!0;for(;s.parentNode;){if(s.parentNode===this)return!0;s=s.parentNode}return!1}appendChild(s){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(s,l){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(s){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var be={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},we={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Oe={};function We(i){if(Oe[i])return Oe[i];var s=globalThis[i],l=s.prototype,c=i in be?be[i]:void 0,g=!!(c&&c.every(N=>{var j,ce;return!!((ce=(j=Object.getOwnPropertyDescriptor(l,N))==null?void 0:j.get)!=null&&ce.toString().includes("[native code]"))})),_=i in we?we[i]:void 0,S=!!(_&&_.every(N=>{var j;return typeof l[N]=="function"&&((j=l[N])==null?void 0:j.toString().includes("[native code]"))}));if(g&&S&&!ne())return Oe[i]=s.prototype,s.prototype;try{var E=document.createElement("iframe");document.body.appendChild(E);var x=E.contentWindow;if(!x)return s.prototype;var T=x[i].prototype;return document.body.removeChild(E),T?Oe[i]=T:l}catch{return l}}var yt={};function ht(i,s,l){var c,g="".concat(i,".").concat(String(l));if(yt[g])return yt[g].call(s);var _=We(i),S=(c=Object.getOwnPropertyDescriptor(_,l))==null?void 0:c.get;return S?(yt[g]=S,S.call(s)):s[l]}var bt={};function pt(i,s,l){var c="".concat(i,".").concat(String(l));if(bt[c])return bt[c].bind(s);var g=We(i)[l];return typeof g!="function"?s[l]:(bt[c]=g,g.bind(s))}function Nn(){return We("MutationObserver").constructor}var Ze={childNodes:function(i){return ht("Node",i,"childNodes")},parentNode:function(i){return ht("Node",i,"parentNode")},parentElement:function(i){return ht("Node",i,"parentElement")},textContent:function(i){return ht("Node",i,"textContent")},contains:function(i,s){return pt("Node",i,"contains")(s)},getRootNode:function(i){return pt("Node",i,"getRootNode")()},host:function(i){return i&&"host"in i?ht("ShadowRoot",i,"host"):null},styleSheets:function(i){return i.styleSheets},shadowRoot:function(i){return i&&"shadowRoot"in i?ht("Element",i,"shadowRoot"):null},querySelector:function(i,s){return ht("Element",i,"querySelector")(s)},querySelectorAll:function(i,s){return ht("Element",i,"querySelectorAll")(s)},mutationObserver:Nn};function Dt(i,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,c={capture:!0,passive:!0};return l.addEventListener(i,s,c),()=>l.removeEventListener(i,s,c)}var ln=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Yn={map:{},getId:()=>(console.error(ln),-1),getNode:()=>(console.error(ln),null),removeNodeFromMap(){console.error(ln)},has:()=>(console.error(ln),!1),reset(){console.error(ln)}};function ar(i,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=null,g=0;return function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];var x=Date.now();g||l.leading!==!1||(g=x);var T=s-(x-g),N=this;T<=0||T>s?(c&&(clearTimeout(c),c=null),g=x,i.apply(N,S)):c||l.trailing===!1||(c=setTimeout(()=>{g=l.leading===!1?0:Date.now(),c=null,i.apply(N,S)},T))}}function Sr(i,s,l,c){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:window,_=g.Object.getOwnPropertyDescriptor(i,s);return g.Object.defineProperty(i,s,c?l:{set(S){setTimeout(()=>{l.set.call(this,S)},0),_&&_.set&&_.set.call(this,S)}}),()=>Sr(i,s,_||{},!0)}function Xn(i,s,l){try{if(!(s in i))return()=>{};var c=i[s],g=l(c);return typeof g=="function"&&(g.prototype=g.prototype||{},Object.defineProperties(g,{__rrweb_original__:{enumerable:!1,value:c}})),i[s]=g,()=>{i[s]=c}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Yn=new Proxy(Yn,{get:(i,s,l)=>(s==="map"&&console.error(ln),Reflect.get(i,s,l))}));var Cr=Date.now;function di(i){var s,l,c,g,_=i.document;return{left:_.scrollingElement?_.scrollingElement.scrollLeft:i.pageXOffset!==void 0?i.pageXOffset:_.documentElement.scrollLeft||_?.body&&((s=Ze.parentElement(_.body))==null?void 0:s.scrollLeft)||((l=_?.body)==null?void 0:l.scrollLeft)||0,top:_.scrollingElement?_.scrollingElement.scrollTop:i.pageYOffset!==void 0?i.pageYOffset:_?.documentElement.scrollTop||_?.body&&((c=Ze.parentElement(_.body))==null?void 0:c.scrollTop)||((g=_?.body)==null?void 0:g.scrollTop)||0}}function Ir(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function dn(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function kr(i){return i?i.nodeType===i.ELEMENT_NODE?i:Ze.parentElement(i):null}function Gt(i,s,l,c){if(!i)return!1;var g=kr(i);if(!g)return!1;try{if(typeof s=="string"){if(g.classList.contains(s)||c&&g.closest("."+s)!==null)return!0}else if(Rt(g,s,c))return!0}catch{}return!!(l&&(g.matches(l)||c&&g.closest(l)!==null))}function Er(i,s,l){return!(i.tagName!=="TITLE"||!l.headTitleMutations)||s.getId(i)===yn}function lr(i,s){if(Ge(i))return!1;var l=s.getId(i);if(!s.has(l))return!0;var c=Ze.parentNode(i);return(!c||c.nodeType!==i.DOCUMENT_NODE)&&(!c||lr(c,s))}function hi(i){return!!i.changedTouches}function pi(i,s){return!!(i.nodeName==="IFRAME"&&s.getMeta(i))}function gi(i,s){return!!(i.nodeName==="LINK"&&i.nodeType===i.ELEMENT_NODE&&i.getAttribute&&i.getAttribute("rel")==="stylesheet"&&s.getMeta(i))}function fi(i){return!!i&&(i instanceof Q&&"shadowRoot"in i?!!i.shadowRoot:!!Ze.shadowRoot(i))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Cr=()=>new Date().getTime());let Wr=class{constructor(){m(this,"id",1),m(this,"styleIDMap",new WeakMap),m(this,"idStyleMap",new Map)}getId(i){var s;return(s=this.styleIDMap.get(i))!==null&&s!==void 0?s:-1}has(i){return this.styleIDMap.has(i)}add(i,s){return this.has(i)?this.getId(i):(l=s===void 0?this.id++:s,this.styleIDMap.set(i,l),this.idStyleMap.set(l,i),l);var l}getStyle(i){return this.idStyleMap.get(i)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function jr(i){var s,l=null;return"getRootNode"in i&&((s=Ze.getRootNode(i))==null?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Ze.host(Ze.getRootNode(i))&&(l=Ze.host(Ze.getRootNode(i))),l}function ji(i){var s=i.ownerDocument;if(!s)return!1;var l=function(c){for(var g,_=c;g=jr(_);)_=g;return _}(i);return Ze.contains(s,l)}function vi(i){var s=i.ownerDocument;return!!s&&(Ze.contains(s,i)||ji(i))}var gt=(i=>(i[i.DomContentLoaded=0]="DomContentLoaded",i[i.Load=1]="Load",i[i.FullSnapshot=2]="FullSnapshot",i[i.IncrementalSnapshot=3]="IncrementalSnapshot",i[i.Meta=4]="Meta",i[i.Custom=5]="Custom",i[i.Plugin=6]="Plugin",i))(gt||{}),st=(i=>(i[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i))(st||{}),Zt=(i=>(i[i.MouseUp=0]="MouseUp",i[i.MouseDown=1]="MouseDown",i[i.Click=2]="Click",i[i.ContextMenu=3]="ContextMenu",i[i.DblClick=4]="DblClick",i[i.Focus=5]="Focus",i[i.Blur=6]="Blur",i[i.TouchStart=7]="TouchStart",i[i.TouchMove_Departed=8]="TouchMove_Departed",i[i.TouchEnd=9]="TouchEnd",i[i.TouchCancel=10]="TouchCancel",i))(Zt||{}),bn=(i=>(i[i.Mouse=0]="Mouse",i[i.Pen=1]="Pen",i[i.Touch=2]="Touch",i))(bn||{}),ur=(i=>(i[i["2D"]=0]="2D",i[i.WebGL=1]="WebGL",i[i.WebGL2=2]="WebGL2",i))(ur||{}),cr=(i=>(i[i.Play=0]="Play",i[i.Pause=1]="Pause",i[i.Seeked=2]="Seeked",i[i.VolumeChange=3]="VolumeChange",i[i.RateChange=4]="RateChange",i))(cr||{});function Y(i){return"__ln"in i}class Vi{constructor(){m(this,"length",0),m(this,"head",null),m(this,"tail",null)}get(s){if(s>=this.length)throw new Error("Position outside of list range");for(var l=this.head,c=0;c<s;c++)l=l?.next||null;return l}addNode(s){var l={value:s,previous:null,next:null};if(s.__ln=l,s.previousSibling&&Y(s.previousSibling)){var c=s.previousSibling.__ln.next;l.next=c,l.previous=s.previousSibling.__ln,s.previousSibling.__ln.next=l,c&&(c.previous=l)}else if(s.nextSibling&&Y(s.nextSibling)&&s.nextSibling.__ln.previous){var g=s.nextSibling.__ln.previous;l.previous=g,l.next=s.nextSibling.__ln,s.nextSibling.__ln.previous=l,g&&(g.next=l)}else this.head&&(this.head.previous=l),l.next=this.head,this.head=l;l.next===null&&(this.tail=l),this.length++}removeNode(s){var l=s.__ln;this.head&&(l.previous?(l.previous.next=l.next,l.next?l.next.previous=l.previous:this.tail=l.previous):(this.head=l.next,this.head?this.head.previous=null:this.tail=null),s.__ln&&delete s.__ln,this.length--)}}var dr,mi=(i,s)=>"".concat(i,"@").concat(s);class Vo{constructor(){m(this,"frozen",!1),m(this,"locked",!1),m(this,"texts",[]),m(this,"attributes",[]),m(this,"attributeMap",new WeakMap),m(this,"removes",[]),m(this,"mapRemoves",[]),m(this,"movedMap",{}),m(this,"addedSet",new Set),m(this,"movedSet",new Set),m(this,"droppedSet",new Set),m(this,"mutationCb"),m(this,"blockClass"),m(this,"blockSelector"),m(this,"maskTextClass"),m(this,"maskTextSelector"),m(this,"inlineStylesheet"),m(this,"maskInputOptions"),m(this,"maskTextFn"),m(this,"maskInputFn"),m(this,"keepIframeSrcFn"),m(this,"recordCanvas"),m(this,"inlineImages"),m(this,"slimDOMOptions"),m(this,"dataURLOptions"),m(this,"doc"),m(this,"mirror"),m(this,"iframeManager"),m(this,"stylesheetManager"),m(this,"shadowDomManager"),m(this,"canvasManager"),m(this,"processedNodeManager"),m(this,"unattachedDoc"),m(this,"processMutations",s=>{s.forEach(this.processMutation),this.emit()}),m(this,"emit",()=>{if(!this.frozen&&!this.locked){for(var s=[],l=new Set,c=new Vi,g=H=>{for(var re=H,he=yn;he===yn;)he=(re=re&&re.nextSibling)&&this.mirror.getId(re);return he},_=H=>{var re=Ze.parentNode(H);if(re&&vi(H)&&re.tagName!=="TEXTAREA"){var he=Ge(re)?this.mirror.getId(jr(H)):this.mirror.getId(re),pe=g(H);if(he===-1||pe===-1)return c.addNode(H);var ge=te(H,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:_e=>{pi(_e,this.mirror)&&this.iframeManager.addIframe(_e),gi(_e,this.mirror)&&this.stylesheetManager.trackLinkElement(_e),fi(H)&&this.shadowDomManager.addShadowRoot(Ze.shadowRoot(H),this.doc)},onIframeLoad:(_e,ke)=>{this.iframeManager.attachIframe(_e,ke),this.shadowDomManager.observeAttachShadow(_e)},onStylesheetLoad:(_e,ke)=>{this.stylesheetManager.attachLinkElement(_e,ke)}});ge&&(s.push({parentId:he,nextId:pe,node:ge}),l.add(ge.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var S of this.movedSet)Ui(this.removes,S,this.mirror)&&!this.movedSet.has(Ze.parentNode(S))||_(S);for(var E of this.addedSet)Gi(this.droppedSet,E)||Ui(this.removes,E,this.mirror)?Gi(this.movedSet,E)?_(E):this.droppedSet.add(E):_(E);for(var x=null;c.length;){var T=null;if(x){var N=this.mirror.getId(Ze.parentNode(x.value)),j=g(x.value);N!==-1&&j!==-1&&(T=x)}if(!T)for(var ce=c.tail;ce;){var K=ce;if(ce=ce.previous,K){var ye=this.mirror.getId(Ze.parentNode(K.value));if(g(K.value)===-1)continue;if(ye!==-1){T=K;break}var xe=K.value,Se=Ze.parentNode(xe);if(Se&&Se.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var V=Ze.host(Se);if(this.mirror.getId(V)!==-1){T=K;break}}}}if(!T){for(;c.head;)c.removeNode(c.head.value);break}x=T.previous,c.removeNode(T.value),_(T.value)}var q={texts:this.texts.map(H=>{var re=H.node,he=Ze.parentNode(re);return he&&he.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(he),{id:this.mirror.getId(re),value:H.value}}).filter(H=>!l.has(H.id)).filter(H=>this.mirror.has(H.id)),attributes:this.attributes.map(H=>{var{attributes:re}=H;if(typeof re.style=="string"){var he=JSON.stringify(H.styleDiff),pe=JSON.stringify(H._unchangedStyles);he.length<re.style.length&&(he+pe).split("var(").length===re.style.split("var(").length&&(re.style=H.styleDiff)}return{id:this.mirror.getId(H.node),attributes:re}}).filter(H=>!l.has(H.id)).filter(H=>this.mirror.has(H.id)),removes:this.removes,adds:s};(q.texts.length||q.attributes.length||q.removes.length||q.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(q))}}),m(this,"genTextAreaValueMutation",s=>{var l=this.attributeMap.get(s);l||(l={node:s,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l),this.attributeMap.set(s,l)),l.attributes.value=Array.from(Ze.childNodes(s),c=>Ze.textContent(c)||"").join("")}),m(this,"processMutation",s=>{if(!Er(s.target,this.mirror,this.slimDOMOptions))switch(s.type){case"characterData":var l=Ze.textContent(s.target);Gt(s.target,this.blockClass,this.blockSelector,!1)||l===s.oldValue||this.texts.push({value:L(s.target,this.maskTextClass,this.maskTextSelector,!0)&&l?this.maskTextFn?this.maskTextFn(l,kr(s.target)):l.replace(/[\S]/g,"*"):l,node:s.target});break;case"attributes":var c=s.target,g=s.attributeName,_=s.target.getAttribute(g);if(g==="value"){var S=Vt(c);_=Pt({element:c,maskInputOptions:this.maskInputOptions,tagName:c.tagName,type:S,value:_,maskInputFn:this.maskInputFn})}if(Gt(s.target,this.blockClass,this.blockSelector,!1)||_===s.oldValue)return;var E=this.attributeMap.get(s.target);if(c.tagName==="IFRAME"&&g==="src"&&!this.keepIframeSrcFn(_)){if(c.contentDocument)return;g="rr_src"}if(E||(E={node:s.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(E),this.attributeMap.set(s.target,E)),g==="type"&&c.tagName==="INPUT"&&(s.oldValue||"").toLowerCase()==="password"&&c.setAttribute("data-rr-is-password","true"),!Ue(c.tagName,g))if(E.attributes[g]=ut(this.doc,wt(c.tagName),wt(g),_),g==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}var x=this.unattachedDoc.createElement("span");for(var T of(s.oldValue&&x.setAttribute("style",s.oldValue),Array.from(c.style))){var N=c.style.getPropertyValue(T),j=c.style.getPropertyPriority(T);N!==x.style.getPropertyValue(T)||j!==x.style.getPropertyPriority(T)?E.styleDiff[T]=j===""?N:[N,j]:E._unchangedStyles[T]=[N,j]}for(var ce of Array.from(x.style))c.style.getPropertyValue(ce)===""&&(E.styleDiff[ce]=!1)}else g==="open"&&c.tagName==="DIALOG"&&(c.matches("dialog:modal")?E.attributes.rr_open_mode="modal":E.attributes.rr_open_mode="non-modal");break;case"childList":if(Gt(s.target,this.blockClass,this.blockSelector,!0))return;if(s.target.tagName==="TEXTAREA")return void this.genTextAreaValueMutation(s.target);s.addedNodes.forEach(K=>this.genAdds(K,s.target)),s.removedNodes.forEach(K=>{var ye=this.mirror.getId(K),xe=Ge(s.target)?this.mirror.getId(Ze.host(s.target)):this.mirror.getId(s.target);Gt(s.target,this.blockClass,this.blockSelector,!1)||Er(K,this.mirror,this.slimDOMOptions)||!function(Se,V){return V.getId(Se)!==-1}(K,this.mirror)||(this.addedSet.has(K)?(_i(this.addedSet,K),this.droppedSet.add(K)):this.addedSet.has(s.target)&&ye===-1||lr(s.target,this.mirror)||(this.movedSet.has(K)&&this.movedMap[mi(ye,xe)]?_i(this.movedSet,K):this.removes.push({parentId:xe,id:ye,isShadow:!(!Ge(s.target)||!tt(s.target))||void 0})),this.mapRemoves.push(K))})}}),m(this,"genAdds",(s,l)=>{if(!this.processedNodeManager.inOtherBuffer(s,this)&&!this.addedSet.has(s)&&!this.movedSet.has(s)){if(this.mirror.hasNode(s)){if(Er(s,this.mirror,this.slimDOMOptions))return;this.movedSet.add(s);var c=null;l&&this.mirror.hasNode(l)&&(c=this.mirror.getId(l)),c&&c!==-1&&(this.movedMap[mi(this.mirror.getId(s),c)]=!0)}else this.addedSet.add(s),this.droppedSet.delete(s);Gt(s,this.blockClass,this.blockSelector,!1)||(Ze.childNodes(s).forEach(g=>this.genAdds(g)),fi(s)&&Ze.childNodes(Ze.shadowRoot(s)).forEach(g=>{this.processedNodeManager.add(g,this),this.genAdds(g,s)}))}})}init(s){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(l=>{this[l]=s[l]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function _i(i,s){i.delete(s),Ze.childNodes(s).forEach(l=>_i(i,l))}function Ui(i,s,l){return i.length!==0&&function(c,g,_){for(var S=Ze.parentNode(g),E=function(){var T=_.getId(S);if(c.some(N=>N.id===T))return{v:!0};S=Ze.parentNode(S)};S;){var x=E();if(typeof x=="object")return x.v}return!1}(i,s,l)}function Gi(i,s){return i.size!==0&&Zi(i,s)}function Zi(i,s){var l=Ze.parentNode(s);return!!l&&(!!i.has(l)||Zi(i,l))}var ct=i=>dr?function(){try{return i(...arguments)}catch(s){if(dr&&dr(s)===!0)return;throw s}}:i,xn=[];function Vn(i){try{if("composedPath"in i){var s=i.composedPath();if(s.length)return s[0]}else if("path"in i&&i.path.length)return i.path[0]}catch{}return i&&i.target}function yi(i,s){var l=new Vo;xn.push(l),l.init(i);var c=new(Nn())(ct(l.processMutations.bind(l)));return c.observe(s,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),c}function Uo(i){var{mouseInteractionCb:s,doc:l,mirror:c,blockClass:g,blockSelector:_,sampling:S}=i;if(S.mouseInteraction===!1)return()=>{};var E=S.mouseInteraction===!0||S.mouseInteraction===void 0?{}:S.mouseInteraction,x=[],T=null;return Object.keys(Zt).filter(N=>Number.isNaN(Number(N))&&!N.endsWith("_Departed")&&E[N]!==!1).forEach(N=>{var j=wt(N),ce=(K=>ye=>{var xe=Vn(ye);if(!Gt(xe,g,_,!0)){var Se=null,V=K;if("pointerType"in ye){switch(ye.pointerType){case"mouse":Se=bn.Mouse;break;case"touch":Se=bn.Touch;break;case"pen":Se=bn.Pen}Se===bn.Touch?Zt[K]===Zt.MouseDown?V="TouchStart":Zt[K]===Zt.MouseUp&&(V="TouchEnd"):bn.Pen}else hi(ye)&&(Se=bn.Touch);Se!==null?(T=Se,(V.startsWith("Touch")&&Se===bn.Touch||V.startsWith("Mouse")&&Se===bn.Mouse)&&(Se=null)):Zt[K]===Zt.Click&&(Se=T,T=null);var q=hi(ye)?ye.changedTouches[0]:ye;if(q){var H=c.getId(xe),{clientX:re,clientY:he}=q;ct(s)(t({type:Zt[V],id:H,x:re,y:he},Se!==null&&{pointerType:Se}))}}})(N);if(window.PointerEvent)switch(Zt[N]){case Zt.MouseDown:case Zt.MouseUp:j=j.replace("mouse","pointer");break;case Zt.TouchStart:case Zt.TouchEnd:return}x.push(Dt(j,ce,l))}),ct(()=>{x.forEach(N=>N())})}function zi(i){var{scrollCb:s,doc:l,mirror:c,blockClass:g,blockSelector:_,sampling:S}=i;return Dt("scroll",ct(ar(ct(E=>{var x=Vn(E);if(x&&!Gt(x,g,_,!0)){var T=c.getId(x);if(x===l&&l.defaultView){var N=di(l.defaultView);s({id:T,x:N.left,y:N.top})}else s({id:T,x:x.scrollLeft,y:x.scrollTop})}}),S.scroll||100)),l)}var Go=["INPUT","TEXTAREA","SELECT"],Yi=new WeakMap;function Vr(i){return function(s,l){if(Ur("CSSGroupingRule")&&s.parentRule instanceof CSSGroupingRule||Ur("CSSMediaRule")&&s.parentRule instanceof CSSMediaRule||Ur("CSSSupportsRule")&&s.parentRule instanceof CSSSupportsRule||Ur("CSSConditionRule")&&s.parentRule instanceof CSSConditionRule){var c=Array.from(s.parentRule.cssRules).indexOf(s);l.unshift(c)}else if(s.parentStyleSheet){var g=Array.from(s.parentStyleSheet.cssRules).indexOf(s);l.unshift(g)}return l}(i,[])}function Un(i,s,l){var c,g;return i?(i.ownerNode?c=s.getId(i.ownerNode):g=l.getId(i),{styleId:g,id:c}):{}}function bi(i,s){var l,c,g,{mirror:_,stylesheetManager:S}=i,E=null;E=s.nodeName==="#document"?_.getId(s):_.getId(Ze.host(s));var x=s.nodeName==="#document"?(l=s.defaultView)==null?void 0:l.Document:(g=(c=s.ownerDocument)==null?void 0:c.defaultView)==null?void 0:g.ShadowRoot,T=x?.prototype?Object.getOwnPropertyDescriptor(x?.prototype,"adoptedStyleSheets"):void 0;return E!==null&&E!==-1&&x&&T?(Object.defineProperty(s,"adoptedStyleSheets",{configurable:T.configurable,enumerable:T.enumerable,get(){var N;return(N=T.get)==null?void 0:N.call(this)},set(N){var j,ce=(j=T.set)==null?void 0:j.call(this,N);if(E!==null&&E!==-1)try{S.adoptStyleSheets(N,E)}catch{}return ce}}),ct(()=>{Object.defineProperty(s,"adoptedStyleSheets",{configurable:T.configurable,enumerable:T.enumerable,get:T.get,set:T.set})})):()=>{}}function Zo(i){var s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=i.doc.defaultView;if(!c)return()=>{};(function(q,H){var{mutationCb:re,mousemoveCb:he,mouseInteractionCb:pe,scrollCb:ge,viewportResizeCb:_e,inputCb:ke,mediaInteractionCb:Re,styleSheetRuleCb:je,styleDeclarationCb:le,canvasMutationCb:Ve,fontCb:Fe,selectionCb:Le,customElementCb:Ne}=q;q.mutationCb=function(){H.mutation&&H.mutation(...arguments),re(...arguments)},q.mousemoveCb=function(){H.mousemove&&H.mousemove(...arguments),he(...arguments)},q.mouseInteractionCb=function(){H.mouseInteraction&&H.mouseInteraction(...arguments),pe(...arguments)},q.scrollCb=function(){H.scroll&&H.scroll(...arguments),ge(...arguments)},q.viewportResizeCb=function(){H.viewportResize&&H.viewportResize(...arguments),_e(...arguments)},q.inputCb=function(){H.input&&H.input(...arguments),ke(...arguments)},q.mediaInteractionCb=function(){H.mediaInteaction&&H.mediaInteaction(...arguments),Re(...arguments)},q.styleSheetRuleCb=function(){H.styleSheetRule&&H.styleSheetRule(...arguments),je(...arguments)},q.styleDeclarationCb=function(){H.styleDeclaration&&H.styleDeclaration(...arguments),le(...arguments)},q.canvasMutationCb=function(){H.canvasMutation&&H.canvasMutation(...arguments),Ve(...arguments)},q.fontCb=function(){H.font&&H.font(...arguments),Fe(...arguments)},q.selectionCb=function(){H.selection&&H.selection(...arguments),Le(...arguments)},q.customElementCb=function(){H.customElement&&H.customElement(...arguments),Ne(...arguments)}})(i,l),i.recordDOM&&(s=yi(i,i.doc));var g=function(q){var{mousemoveCb:H,sampling:re,doc:he,mirror:pe}=q;if(re.mousemove===!1)return()=>{};var ge,_e=typeof re.mousemove=="number"?re.mousemove:50,ke=typeof re.mousemoveCallback=="number"?re.mousemoveCallback:500,Re=[],je=ar(ct(Fe=>{var Le=Date.now()-ge;H(Re.map(Ne=>(Ne.timeOffset-=Le,Ne)),Fe),Re=[],ge=null}),ke),le=ct(ar(ct(Fe=>{var Le=Vn(Fe),{clientX:Ne,clientY:Ce}=hi(Fe)?Fe.changedTouches[0]:Fe;ge||(ge=Cr()),Re.push({x:Ne,y:Ce,id:pe.getId(Le),timeOffset:Cr()-ge}),je(typeof DragEvent<"u"&&Fe instanceof DragEvent?st.Drag:Fe instanceof MouseEvent?st.MouseMove:st.TouchMove)}),_e,{trailing:!1})),Ve=[Dt("mousemove",le,he),Dt("touchmove",le,he),Dt("drag",le,he)];return ct(()=>{Ve.forEach(Fe=>Fe())})}(i),_=Uo(i),S=zi(i),E=function(q,H){var{viewportResizeCb:re}=q,{win:he}=H,pe=-1,ge=-1;return Dt("resize",ct(ar(ct(()=>{var _e=Ir(),ke=dn();pe===_e&&ge===ke||(re({width:Number(ke),height:Number(_e)}),pe=_e,ge=ke)}),200)),he)}(i,{win:c}),x=function(q){var{inputCb:H,doc:re,mirror:he,blockClass:pe,blockSelector:ge,ignoreClass:_e,ignoreSelector:ke,maskInputOptions:Re,maskInputFn:je,sampling:le,userTriggeredOnInput:Ve}=q;function Fe(mt){var Je=Vn(mt),oe=mt.isTrusted,ze=Je&&Je.tagName;if(Je&&ze==="OPTION"&&(Je=Ze.parentElement(Je)),Je&&ze&&!(Go.indexOf(ze)<0)&&!Gt(Je,pe,ge,!0)&&!(Je.classList.contains(_e)||ke&&Je.matches(ke))){var pn=Je.value,Jt=!1,Ot=Vt(Je)||"";Ot==="radio"||Ot==="checkbox"?Jt=Je.checked:(Re[ze.toLowerCase()]||Re[Ot])&&(pn=Pt({element:Je,maskInputOptions:Re,tagName:ze,type:Ot,value:pn,maskInputFn:je})),Le(Je,Ve?{text:pn,isChecked:Jt,userTriggered:oe}:{text:pn,isChecked:Jt});var Kt=Je.name;Ot==="radio"&&Kt&&Jt&&re.querySelectorAll('input[type="radio"][name="'.concat(Kt,'"]')).forEach(Rn=>{if(Rn!==Je){var Pn=Rn.value;Le(Rn,Ve?{text:Pn,isChecked:!Jt,userTriggered:!1}:{text:Pn,isChecked:!Jt})}})}}function Le(mt,Je){var oe=Yi.get(mt);if(!oe||oe.text!==Je.text||oe.isChecked!==Je.isChecked){Yi.set(mt,Je);var ze=he.getId(mt);ct(H)(t(t({},Je),{},{id:ze}))}}var Ne=(le.input==="last"?["change"]:["input","change"]).map(mt=>Dt(mt,ct(Fe),re)),Ce=re.defaultView;if(!Ce)return()=>{Ne.forEach(mt=>mt())};var ve=Ce.Object.getOwnPropertyDescriptor(Ce.HTMLInputElement.prototype,"value"),vt=[[Ce.HTMLInputElement.prototype,"value"],[Ce.HTMLInputElement.prototype,"checked"],[Ce.HTMLSelectElement.prototype,"value"],[Ce.HTMLTextAreaElement.prototype,"value"],[Ce.HTMLSelectElement.prototype,"selectedIndex"],[Ce.HTMLOptionElement.prototype,"selected"]];return ve&&ve.set&&Ne.push(...vt.map(mt=>Sr(mt[0],mt[1],{set(){ct(Fe)({target:this,isTrusted:!1})}},!1,Ce))),ct(()=>{Ne.forEach(mt=>mt())})}(i),T=function(q){var{mediaInteractionCb:H,blockClass:re,blockSelector:he,mirror:pe,sampling:ge,doc:_e}=q,ke=ct(je=>ar(ct(le=>{var Ve=Vn(le);if(Ve&&!Gt(Ve,re,he,!0)){var{currentTime:Fe,volume:Le,muted:Ne,playbackRate:Ce,loop:ve}=Ve;H({type:je,id:pe.getId(Ve),currentTime:Fe,volume:Le,muted:Ne,playbackRate:Ce,loop:ve})}}),ge.media||500)),Re=[Dt("play",ke(cr.Play),_e),Dt("pause",ke(cr.Pause),_e),Dt("seeked",ke(cr.Seeked),_e),Dt("volumechange",ke(cr.VolumeChange),_e),Dt("ratechange",ke(cr.RateChange),_e)];return ct(()=>{Re.forEach(je=>je())})}(i),N=()=>{},j=()=>{},ce=()=>{},K=()=>{};i.recordDOM&&(N=function(q,H){var{styleSheetRuleCb:re,mirror:he,stylesheetManager:pe}=q,{win:ge}=H;if(!ge.CSSStyleSheet||!ge.CSSStyleSheet.prototype)return()=>{};var _e=ge.CSSStyleSheet.prototype.insertRule;ge.CSSStyleSheet.prototype.insertRule=new Proxy(_e,{apply:ct((Fe,Le,Ne)=>{var[Ce,ve]=Ne,{id:vt,styleId:mt}=Un(Le,he,pe.styleMirror);return(vt&&vt!==-1||mt&&mt!==-1)&&re({id:vt,styleId:mt,adds:[{rule:Ce,index:ve}]}),Fe.apply(Le,Ne)})}),ge.CSSStyleSheet.prototype.addRule=function(Fe,Le){var Ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.cssRules.length,Ce="".concat(Fe," { ").concat(Le," }");return ge.CSSStyleSheet.prototype.insertRule.apply(this,[Ce,Ne])};var ke,Re,je=ge.CSSStyleSheet.prototype.deleteRule;ge.CSSStyleSheet.prototype.deleteRule=new Proxy(je,{apply:ct((Fe,Le,Ne)=>{var[Ce]=Ne,{id:ve,styleId:vt}=Un(Le,he,pe.styleMirror);return(ve&&ve!==-1||vt&&vt!==-1)&&re({id:ve,styleId:vt,removes:[{index:Ce}]}),Fe.apply(Le,Ne)})}),ge.CSSStyleSheet.prototype.removeRule=function(Fe){return ge.CSSStyleSheet.prototype.deleteRule.apply(this,[Fe])},ge.CSSStyleSheet.prototype.replace&&(ke=ge.CSSStyleSheet.prototype.replace,ge.CSSStyleSheet.prototype.replace=new Proxy(ke,{apply:ct((Fe,Le,Ne)=>{var[Ce]=Ne,{id:ve,styleId:vt}=Un(Le,he,pe.styleMirror);return(ve&&ve!==-1||vt&&vt!==-1)&&re({id:ve,styleId:vt,replace:Ce}),Fe.apply(Le,Ne)})})),ge.CSSStyleSheet.prototype.replaceSync&&(Re=ge.CSSStyleSheet.prototype.replaceSync,ge.CSSStyleSheet.prototype.replaceSync=new Proxy(Re,{apply:ct((Fe,Le,Ne)=>{var[Ce]=Ne,{id:ve,styleId:vt}=Un(Le,he,pe.styleMirror);return(ve&&ve!==-1||vt&&vt!==-1)&&re({id:ve,styleId:vt,replaceSync:Ce}),Fe.apply(Le,Ne)})}));var le={};Gr("CSSGroupingRule")?le.CSSGroupingRule=ge.CSSGroupingRule:(Gr("CSSMediaRule")&&(le.CSSMediaRule=ge.CSSMediaRule),Gr("CSSConditionRule")&&(le.CSSConditionRule=ge.CSSConditionRule),Gr("CSSSupportsRule")&&(le.CSSSupportsRule=ge.CSSSupportsRule));var Ve={};return Object.entries(le).forEach(Fe=>{var[Le,Ne]=Fe;Ve[Le]={insertRule:Ne.prototype.insertRule,deleteRule:Ne.prototype.deleteRule},Ne.prototype.insertRule=new Proxy(Ve[Le].insertRule,{apply:ct((Ce,ve,vt)=>{var[mt,Je]=vt,{id:oe,styleId:ze}=Un(ve.parentStyleSheet,he,pe.styleMirror);return(oe&&oe!==-1||ze&&ze!==-1)&&re({id:oe,styleId:ze,adds:[{rule:mt,index:[...Vr(ve),Je||0]}]}),Ce.apply(ve,vt)})}),Ne.prototype.deleteRule=new Proxy(Ve[Le].deleteRule,{apply:ct((Ce,ve,vt)=>{var[mt]=vt,{id:Je,styleId:oe}=Un(ve.parentStyleSheet,he,pe.styleMirror);return(Je&&Je!==-1||oe&&oe!==-1)&&re({id:Je,styleId:oe,removes:[{index:[...Vr(ve),mt]}]}),Ce.apply(ve,vt)})})}),ct(()=>{ge.CSSStyleSheet.prototype.insertRule=_e,ge.CSSStyleSheet.prototype.deleteRule=je,ke&&(ge.CSSStyleSheet.prototype.replace=ke),Re&&(ge.CSSStyleSheet.prototype.replaceSync=Re),Object.entries(le).forEach(Fe=>{var[Le,Ne]=Fe;Ne.prototype.insertRule=Ve[Le].insertRule,Ne.prototype.deleteRule=Ve[Le].deleteRule})})}(i,{win:c}),j=bi(i,i.doc),ce=function(q,H){var{styleDeclarationCb:re,mirror:he,ignoreCSSAttributes:pe,stylesheetManager:ge}=q,{win:_e}=H,ke=_e.CSSStyleDeclaration.prototype.setProperty;_e.CSSStyleDeclaration.prototype.setProperty=new Proxy(ke,{apply:ct((je,le,Ve)=>{var Fe,[Le,Ne,Ce]=Ve;if(pe.has(Le))return ke.apply(le,[Le,Ne,Ce]);var{id:ve,styleId:vt}=Un((Fe=le.parentRule)==null?void 0:Fe.parentStyleSheet,he,ge.styleMirror);return(ve&&ve!==-1||vt&&vt!==-1)&&re({id:ve,styleId:vt,set:{property:Le,value:Ne,priority:Ce},index:Vr(le.parentRule)}),je.apply(le,Ve)})});var Re=_e.CSSStyleDeclaration.prototype.removeProperty;return _e.CSSStyleDeclaration.prototype.removeProperty=new Proxy(Re,{apply:ct((je,le,Ve)=>{var Fe,[Le]=Ve;if(pe.has(Le))return Re.apply(le,[Le]);var{id:Ne,styleId:Ce}=Un((Fe=le.parentRule)==null?void 0:Fe.parentStyleSheet,he,ge.styleMirror);return(Ne&&Ne!==-1||Ce&&Ce!==-1)&&re({id:Ne,styleId:Ce,remove:{property:Le},index:Vr(le.parentRule)}),je.apply(le,Ve)})}),ct(()=>{_e.CSSStyleDeclaration.prototype.setProperty=ke,_e.CSSStyleDeclaration.prototype.removeProperty=Re})}(i,{win:c}),i.collectFonts&&(K=function(q){var{fontCb:H,doc:re}=q,he=re.defaultView;if(!he)return()=>{};var pe=[],ge=new WeakMap,_e=he.FontFace;he.FontFace=function(Re,je,le){var Ve=new _e(Re,je,le);return ge.set(Ve,{family:Re,buffer:typeof je!="string",descriptors:le,fontSource:typeof je=="string"?je:JSON.stringify(Array.from(new Uint8Array(je)))}),Ve};var ke=Xn(re.fonts,"add",function(Re){return function(je){return setTimeout(ct(()=>{var le=ge.get(je);le&&(H(le),ge.delete(je))}),0),Re.apply(this,[je])}});return pe.push(()=>{he.FontFace=_e}),pe.push(ke),ct(()=>{pe.forEach(Re=>Re())})}(i)));var ye=function(q){var{doc:H,mirror:re,blockClass:he,blockSelector:pe,selectionCb:ge}=q,_e=!0,ke=ct(()=>{var Re=H.getSelection();if(!(!Re||_e&&Re?.isCollapsed)){_e=Re.isCollapsed||!1;for(var je=[],le=Re.rangeCount||0,Ve=0;Ve<le;Ve++){var Fe=Re.getRangeAt(Ve),{startContainer:Le,startOffset:Ne,endContainer:Ce,endOffset:ve}=Fe;Gt(Le,he,pe,!0)||Gt(Ce,he,pe,!0)||je.push({start:re.getId(Le),startOffset:Ne,end:re.getId(Ce),endOffset:ve})}ge({ranges:je})}});return ke(),Dt("selectionchange",ke)}(i),xe=function(q){var{doc:H,customElementCb:re}=q,he=H.defaultView;return he&&he.customElements?Xn(he.customElements,"define",function(pe){return function(ge,_e,ke){try{re({define:{name:ge}})}catch{console.warn("Custom element callback failed for ".concat(ge))}return pe.apply(this,[ge,_e,ke])}}):()=>{}}(i),Se=[];for(var V of i.plugins)Se.push(V.observer(V.callback,c,V.options));return ct(()=>{xn.forEach(q=>q.reset()),s?.disconnect(),g(),_(),S(),E(),x(),T(),N(),j(),ce(),K(),ye(),xe(),Se.forEach(q=>q())})}function Ur(i){return window[i]!==void 0}function Gr(i){return!!(window[i]!==void 0&&window[i].prototype&&"insertRule"in window[i].prototype&&"deleteRule"in window[i].prototype)}class Xi{constructor(s){m(this,"iframeIdToRemoteIdMap",new WeakMap),m(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=s}getId(s,l,c,g){var _=c||this.getIdToRemoteIdMap(s),S=g||this.getRemoteIdToIdMap(s),E=_.get(l);return E||(E=this.generateIdFn(),_.set(l,E),S.set(E,l)),E}getIds(s,l){var c=this.getIdToRemoteIdMap(s),g=this.getRemoteIdToIdMap(s);return l.map(_=>this.getId(s,_,c,g))}getRemoteId(s,l,c){var g=c||this.getRemoteIdToIdMap(s);if(typeof l!="number")return l;var _=g.get(l);return _||-1}getRemoteIds(s,l){var c=this.getRemoteIdToIdMap(s);return l.map(g=>this.getRemoteId(s,g,c))}reset(s){if(!s)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(s),this.iframeRemoteIdToIdMap.delete(s)}getIdToRemoteIdMap(s){var l=this.iframeIdToRemoteIdMap.get(s);return l||(l=new Map,this.iframeIdToRemoteIdMap.set(s,l)),l}getRemoteIdToIdMap(s){var l=this.iframeRemoteIdToIdMap.get(s);return l||(l=new Map,this.iframeRemoteIdToIdMap.set(s,l)),l}}class zo{constructor(s){m(this,"iframes",new WeakMap),m(this,"crossOriginIframeMap",new WeakMap),m(this,"crossOriginIframeMirror",new Xi($)),m(this,"crossOriginIframeStyleMirror"),m(this,"crossOriginIframeRootIdMap",new WeakMap),m(this,"mirror"),m(this,"mutationCb"),m(this,"wrappedEmit"),m(this,"loadListener"),m(this,"stylesheetManager"),m(this,"recordCrossOriginIframes"),this.mutationCb=s.mutationCb,this.wrappedEmit=s.wrappedEmit,this.stylesheetManager=s.stylesheetManager,this.recordCrossOriginIframes=s.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Xi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=s.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(s){this.iframes.set(s,!0),s.contentWindow&&this.crossOriginIframeMap.set(s.contentWindow,s)}addLoadListener(s){this.loadListener=s}attachIframe(s,l){var c,g;this.mutationCb({adds:[{parentId:this.mirror.getId(s),nextId:null,node:l}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((c=s.contentWindow)==null||c.addEventListener("message",this.handleMessage.bind(this))),(g=this.loadListener)==null||g.call(this,s),s.contentDocument&&s.contentDocument.adoptedStyleSheets&&s.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(s.contentDocument.adoptedStyleSheets,this.mirror.getId(s.contentDocument))}handleMessage(s){var l=s;if(l.data.type==="rrweb"&&l.origin===l.data.origin&&s.source){var c=this.crossOriginIframeMap.get(s.source);if(c){var g=this.transformCrossOriginEvent(c,l.data.event);g&&this.wrappedEmit(g,l.data.isCheckout)}}}transformCrossOriginEvent(s,l){var c;switch(l.type){case gt.FullSnapshot:this.crossOriginIframeMirror.reset(s),this.crossOriginIframeStyleMirror.reset(s),this.replaceIdOnNode(l.data.node,s);var g=l.data.node.id;return this.crossOriginIframeRootIdMap.set(s,g),this.patchRootIdOnNode(l.data.node,g),{timestamp:l.timestamp,type:gt.IncrementalSnapshot,data:{source:st.Mutation,adds:[{parentId:this.mirror.getId(s),nextId:null,node:l.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case gt.Meta:case gt.Load:case gt.DomContentLoaded:return!1;case gt.Plugin:return l;case gt.Custom:return this.replaceIds(l.data.payload,s,["id","parentId","previousId","nextId"]),l;case gt.IncrementalSnapshot:switch(l.data.source){case st.Mutation:return l.data.adds.forEach(_=>{this.replaceIds(_,s,["parentId","nextId","previousId"]),this.replaceIdOnNode(_.node,s);var S=this.crossOriginIframeRootIdMap.get(s);S&&this.patchRootIdOnNode(_.node,S)}),l.data.removes.forEach(_=>{this.replaceIds(_,s,["parentId","id"])}),l.data.attributes.forEach(_=>{this.replaceIds(_,s,["id"])}),l.data.texts.forEach(_=>{this.replaceIds(_,s,["id"])}),l;case st.Drag:case st.TouchMove:case st.MouseMove:return l.data.positions.forEach(_=>{this.replaceIds(_,s,["id"])}),l;case st.ViewportResize:return!1;case st.MediaInteraction:case st.MouseInteraction:case st.Scroll:case st.CanvasMutation:case st.Input:return this.replaceIds(l.data,s,["id"]),l;case st.StyleSheetRule:case st.StyleDeclaration:return this.replaceIds(l.data,s,["id"]),this.replaceStyleIds(l.data,s,["styleId"]),l;case st.Font:return l;case st.Selection:return l.data.ranges.forEach(_=>{this.replaceIds(_,s,["start","end"])}),l;case st.AdoptedStyleSheet:return this.replaceIds(l.data,s,["id"]),this.replaceStyleIds(l.data,s,["styleIds"]),(c=l.data.styles)==null||c.forEach(_=>{this.replaceStyleIds(_,s,["styleId"])}),l}}return!1}replace(s,l,c,g){for(var _ of g)(Array.isArray(l[_])||typeof l[_]=="number")&&(Array.isArray(l[_])?l[_]=s.getIds(c,l[_]):l[_]=s.getId(c,l[_]));return l}replaceIds(s,l,c){return this.replace(this.crossOriginIframeMirror,s,l,c)}replaceStyleIds(s,l,c){return this.replace(this.crossOriginIframeStyleMirror,s,l,c)}replaceIdOnNode(s,l){this.replaceIds(s,l,["id","rootId"]),"childNodes"in s&&s.childNodes.forEach(c=>{this.replaceIdOnNode(c,l)})}patchRootIdOnNode(s,l){s.type===C.Document||s.rootId||(s.rootId=l),"childNodes"in s&&s.childNodes.forEach(c=>{this.patchRootIdOnNode(c,l)})}}class Yo{constructor(s){m(this,"shadowDoms",new WeakSet),m(this,"mutationCb"),m(this,"scrollCb"),m(this,"bypassOptions"),m(this,"mirror"),m(this,"restoreHandlers",[]),this.mutationCb=s.mutationCb,this.scrollCb=s.scrollCb,this.bypassOptions=s.bypassOptions,this.mirror=s.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(s,l){if(tt(s)&&!this.shadowDoms.has(s)){this.shadowDoms.add(s);var c=yi(t(t({},this.bypassOptions),{},{doc:l,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),s);this.restoreHandlers.push(()=>c.disconnect()),this.restoreHandlers.push(zi(t(t({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:s,mirror:this.mirror}))),setTimeout(()=>{s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(Ze.host(s))),this.restoreHandlers.push(bi({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},s))},0)}}observeAttachShadow(s){s.contentWindow&&s.contentDocument&&this.patchAttachShadow(s.contentWindow.Element,s.contentDocument)}patchAttachShadow(s,l){var c=this;this.restoreHandlers.push(Xn(s.prototype,"attachShadow",function(g){return function(_){var S=g.call(this,_),E=Ze.shadowRoot(this);return E&&vi(this)&&c.addShadowRoot(E,l),S}}))}reset(){this.restoreHandlers.forEach(s=>{try{s()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ji=typeof Uint8Array>"u"?[]:new Uint8Array(256),Tn=0;Tn<64;Tn++)Ji[hr.charCodeAt(Tn)]=Tn;var On=new Map,Ki=(i,s,l)=>{if(i&&(Qi(i,s)||typeof i=="object")){var c=function(_,S){var E=On.get(_);return E||(E=new Map,On.set(_,E)),E.has(S)||E.set(S,[]),E.get(S)}(l,i.constructor.name),g=c.indexOf(i);return g===-1&&(g=c.length,c.push(i)),g}};function xr(i,s,l){if(i instanceof Array)return i.map(_=>xr(_,s,l));if(i===null)return i;if(i instanceof Float32Array||i instanceof Float64Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Int16Array||i instanceof Int8Array||i instanceof Uint8ClampedArray)return{rr_type:i.constructor.name,args:[Object.values(i)]};if(i instanceof ArrayBuffer)return{rr_type:i.constructor.name,base64:function(_){var S,E=new Uint8Array(_),x=E.length,T="";for(S=0;S<x;S+=3)T+=hr[E[S]>>2],T+=hr[(3&E[S])<<4|E[S+1]>>4],T+=hr[(15&E[S+1])<<2|E[S+2]>>6],T+=hr[63&E[S+2]];return x%3==2?T=T.substring(0,T.length-1)+"=":x%3==1&&(T=T.substring(0,T.length-2)+"=="),T}(i)};if(i instanceof DataView)return{rr_type:i.constructor.name,args:[xr(i.buffer,s,l),i.byteOffset,i.byteLength]};if(i instanceof HTMLImageElement){var c=i.constructor.name,{src:g}=i;return{rr_type:c,src:g}}return i instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:i.toDataURL()}:i instanceof ImageData?{rr_type:i.constructor.name,args:[xr(i.data,s,l),i.width,i.height]}:Qi(i,s)||typeof i=="object"?{rr_type:i.constructor.name,index:Ki(i,s,l)}:i}var Zr=(i,s,l)=>i.map(c=>xr(c,s,l)),Qi=(i,s)=>{var l=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(c=>typeof s[c]=="function");return!!l.find(c=>i instanceof s[c])};function eo(i,s,l,c){var g=[];try{var _=Xn(i.HTMLCanvasElement.prototype,"getContext",function(S){return function(E){for(var x=arguments.length,T=new Array(x>1?x-1:0),N=1;N<x;N++)T[N-1]=arguments[N];if(!Gt(this,s,l,!0)){var j=function(K){return K==="experimental-webgl"?"webgl":K}(E);if("__context"in this||(this.__context=j),c&&["webgl","webgl2"].includes(j))if(T[0]&&typeof T[0]=="object"){var ce=T[0];ce.preserveDrawingBuffer||(ce.preserveDrawingBuffer=!0)}else T.splice(0,1,{preserveDrawingBuffer:!0})}return S.apply(this,[E,...T])}});g.push(_)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{g.forEach(S=>S())}}function to(i,s,l,c,g,_){var S=[],E=Object.getOwnPropertyNames(i),x=function(N){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(N))return"continue";try{if(typeof i[N]!="function")return"continue";var j=Xn(i,N,function(K){return function(){for(var ye=arguments.length,xe=new Array(ye),Se=0;Se<ye;Se++)xe[Se]=arguments[Se];var V=K.apply(this,xe);if(Ki(V,_,this),"tagName"in this.canvas&&!Gt(this.canvas,c,g,!0)){var q=Zr(xe,_,this),H={type:s,property:N,args:q};l(this.canvas,H)}return V}});S.push(j)}catch{var ce=Sr(i,N,{set(ye){l(this.canvas,{type:s,property:N,args:[ye],setter:!0})}});S.push(ce)}};for(var T of E)x(T);return S}var h,d,y,w,I="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",A=typeof window<"u"&&window.Blob&&new Blob([(h=I,Uint8Array.from(atob(h),i=>i.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});function D(i){var s;try{if(!(s=A&&(window.URL||window.webkitURL).createObjectURL(A)))throw"";var l=new Worker(s,{name:i?.name});return l.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(s)}),l}catch{return new Worker("data:text/javascript;base64,"+I,{name:i?.name})}finally{s&&(window.URL||window.webkitURL).revokeObjectURL(s)}}class W{constructor(s){m(this,"pendingCanvasMutations",new Map),m(this,"rafStamps",{latestId:0,invokeId:null}),m(this,"mirror"),m(this,"mutationCb"),m(this,"resetObservers"),m(this,"frozen",!1),m(this,"locked",!1),m(this,"processMutation",(x,T)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(x)||this.pendingCanvasMutations.set(x,[]),this.pendingCanvasMutations.get(x).push(T)});var{sampling:l="all",win:c,blockClass:g,blockSelector:_,recordCanvas:S,dataURLOptions:E}=s;this.mutationCb=s.mutationCb,this.mirror=s.mirror,S&&l==="all"&&this.initCanvasMutationObserver(c,g,_),S&&typeof l=="number"&&this.initCanvasFPSObserver(l,c,g,_,{dataURLOptions:E})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(s,l,c,g,_){var S=this,E=eo(l,c,g,!0),x=new Map,T=new D;T.onmessage=ye=>{var{id:xe}=ye.data;if(x.set(xe,!1),"base64"in ye.data){var{base64:Se,type:V,width:q,height:H}=ye.data;this.mutationCb({id:xe,type:ur["2D"],commands:[{property:"clearRect",args:[0,0,q,H]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:Se}],type:V}]},0,0]}]})}};var N,j=1e3/s,ce=0,K=ye=>{var xe,Se;ce&&ye-ce<j||(ce=ye,(xe=[],Se=V=>{V.querySelectorAll("canvas").forEach(q=>{Gt(q,c,g,!0)||xe.push(q)}),V.querySelectorAll("*").forEach(q=>{q.shadowRoot&&Se(q.shadowRoot)})},Se(l.document),xe).forEach(function(){var V=o(function*(q){var H,re=S.mirror.getId(q);if(!x.get(re)&&q.width!==0&&q.height!==0){if(x.set(re,!0),["webgl","webgl2"].includes(q.__context)){var he=q.getContext(q.__context);((H=he?.getContextAttributes())==null?void 0:H.preserveDrawingBuffer)===!1&&he.clear(he.COLOR_BUFFER_BIT)}var pe=q.clientWidth||q.width,ge=q.clientHeight||q.height,_e=yield createImageBitmap(q,{resizeWidth:pe,resizeHeight:ge});T.postMessage({id:re,bitmap:_e,width:pe,height:ge,dataURLOptions:_.dataURLOptions},[_e])}});return function(q){return V.apply(this,arguments)}}())),N=requestAnimationFrame(K)};N=requestAnimationFrame(K),this.resetObservers=()=>{E(),cancelAnimationFrame(N)}}initCanvasMutationObserver(s,l,c){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var g=eo(s,l,c,!1),_=function(E,x,T,N){var j=[],ce=Object.getOwnPropertyNames(x.CanvasRenderingContext2D.prototype),K=function(xe){try{if(typeof x.CanvasRenderingContext2D.prototype[xe]!="function")return"continue";var Se=Xn(x.CanvasRenderingContext2D.prototype,xe,function(q){return function(){for(var H=arguments.length,re=new Array(H),he=0;he<H;he++)re[he]=arguments[he];return Gt(this.canvas,T,N,!0)||setTimeout(()=>{var pe=Zr(re,x,this);E(this.canvas,{type:ur["2D"],property:xe,args:pe})},0),q.apply(this,re)}});j.push(Se)}catch{var V=Sr(x.CanvasRenderingContext2D.prototype,xe,{set(H){E(this.canvas,{type:ur["2D"],property:xe,args:[H],setter:!0})}});j.push(V)}};for(var ye of ce)K(ye);return()=>{j.forEach(xe=>xe())}}(this.processMutation.bind(this),s,l,c),S=function(E,x,T,N){var j=[];return j.push(...to(x.WebGLRenderingContext.prototype,ur.WebGL,E,T,N,x)),x.WebGL2RenderingContext!==void 0&&j.push(...to(x.WebGL2RenderingContext.prototype,ur.WebGL2,E,T,N,x)),()=>{j.forEach(ce=>ce())}}(this.processMutation.bind(this),s,l,c);this.resetObservers=()=>{g(),_(),S()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){var s=l=>{this.rafStamps.latestId=l,requestAnimationFrame(s)};requestAnimationFrame(s)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((s,l)=>{var c=this.mirror.getId(l);this.flushPendingCanvasMutationFor(l,c)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(s,l){if(!this.frozen&&!this.locked){var c=this.pendingCanvasMutations.get(s);if(c&&l!==-1){var g=c.map(S=>u(S,f)),{type:_}=c[0];this.mutationCb({id:l,type:_,commands:g}),this.pendingCanvasMutations.delete(s)}}}}class B{constructor(s){m(this,"trackedLinkElements",new WeakSet),m(this,"mutationCb"),m(this,"adoptedStyleSheetCb"),m(this,"styleMirror",new Wr),this.mutationCb=s.mutationCb,this.adoptedStyleSheetCb=s.adoptedStyleSheetCb}attachLinkElement(s,l){"_cssText"in l.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:l.id,attributes:l.attributes}]}),this.trackLinkElement(s)}trackLinkElement(s){this.trackedLinkElements.has(s)||(this.trackedLinkElements.add(s),this.trackStylesheetInLinkElement(s))}adoptStyleSheets(s,l){var c=this;if(s.length!==0){var g={id:l,styleIds:[]},_=[],S=function(x){var T=void 0;c.styleMirror.has(x)?T=c.styleMirror.getId(x):(T=c.styleMirror.add(x),_.push({styleId:T,rules:Array.from(x.rules||CSSRule,(N,j)=>({rule:Et(N,x.href),index:j}))})),g.styleIds.push(T)};for(var E of s)S(E);_.length>0&&(g.styles=_),this.adoptedStyleSheetCb(g)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(s){}}class G{constructor(){m(this,"nodeMap",new WeakMap),m(this,"active",!1)}inOtherBuffer(s,l){var c=this.nodeMap.get(s);return c&&Array.from(c).some(g=>g!==l)}add(s,l){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(s,(this.nodeMap.get(s)||new Set).add(l))}destroy(){}}var de=!1;try{if(Array.from([1],i=>2*i)[0]!==2){var F=document.createElement("iframe");document.body.appendChild(F),Array.from=((p=F.contentWindow)==null?void 0:p.Array.from)||Array.from,document.body.removeChild(F)}}catch(i){console.debug("Unable to override Array.from",i)}var nt,ue,qe=new jt;function Ye(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{emit:s,checkoutEveryNms:l,checkoutEveryNth:c,blockClass:g="rr-block",blockSelector:_=null,ignoreClass:S="rr-ignore",ignoreSelector:E=null,maskTextClass:x="rr-mask",maskTextSelector:T=null,inlineStylesheet:N=!0,maskAllInputs:j,maskInputOptions:ce,slimDOMOptions:K,maskInputFn:ye,maskTextFn:xe,hooks:Se,packFn:V,sampling:q={},dataURLOptions:H={},mousemoveWait:re,recordDOM:he=!0,recordCanvas:pe=!1,recordCrossOriginIframes:ge=!1,recordAfter:_e=i.recordAfter==="DOMContentLoaded"?i.recordAfter:"load",userTriggeredOnInput:ke=!1,collectFonts:Re=!1,inlineImages:je=!1,plugins:le,keepIframeSrcFn:Ve=()=>!1,ignoreCSSAttributes:Fe=new Set([]),errorHandler:Le}=i;dr=Le;var Ne=!ge||window.parent===window,Ce=!1;if(!Ne)try{window.parent.document&&(Ce=!1)}catch{Ce=!0}if(Ne&&!s)throw new Error("emit function is required");if(!Ne&&!Ce)return()=>{};re!==void 0&&q.mousemove===void 0&&(q.mousemove=re),qe.reset();var ve,vt=j===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:ce!==void 0?ce:{password:!0},mt=K===!0||K==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:K==="all",headMetaDescKeywords:K==="all",headTitleMutations:K==="all"}:K||{};(function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;"NodeList"in Ke&&!Ke.NodeList.prototype.forEach&&(Ke.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in Ke&&!Ke.DOMTokenList.prototype.forEach&&(Ke.DOMTokenList.prototype.forEach=Array.prototype.forEach)})();var Je=0,oe=Ke=>{for(var gn of le||[])gn.eventProcessor&&(Ke=gn.eventProcessor(Ke));return V&&!Ce&&(Ke=V(Ke)),Ke};d=(Ke,gn)=>{var $e,Qe=Ke;if(Qe.timestamp=Cr(),!(($e=xn[0])!=null&&$e.isFrozen())||Qe.type===gt.FullSnapshot||Qe.type===gt.IncrementalSnapshot&&Qe.data.source===st.Mutation||xn.forEach(Qn=>Qn.unfreeze()),Ne)s?.(oe(Qe),gn);else if(Ce){var Sn={type:"rrweb",event:oe(Qe),origin:window.location.origin,isCheckout:gn};window.parent.postMessage(Sn,"*")}if(Qe.type===gt.FullSnapshot)ve=Qe,Je=0;else if(Qe.type===gt.IncrementalSnapshot){if(Qe.data.source===st.Mutation&&Qe.data.isAttachIframe)return;Je++;var qn=c&&Je>=c,$n=l&&Qe.timestamp-ve.timestamp>l;(qn||$n)&&y(!0)}};var ze=Ke=>{d({type:gt.IncrementalSnapshot,data:t({source:st.Mutation},Ke)})},pn=Ke=>d({type:gt.IncrementalSnapshot,data:t({source:st.Scroll},Ke)}),Jt=Ke=>d({type:gt.IncrementalSnapshot,data:t({source:st.CanvasMutation},Ke)}),Ot=new B({mutationCb:ze,adoptedStyleSheetCb:Ke=>d({type:gt.IncrementalSnapshot,data:t({source:st.AdoptedStyleSheet},Ke)})}),Kt=new zo({mirror:qe,mutationCb:ze,stylesheetManager:Ot,recordCrossOriginIframes:ge,wrappedEmit:d});for(var Rn of le||[])Rn.getMirror&&Rn.getMirror({nodeMirror:qe,crossOriginIframeMirror:Kt.crossOriginIframeMirror,crossOriginIframeStyleMirror:Kt.crossOriginIframeStyleMirror});var Pn=new G;w=new W({recordCanvas:pe,mutationCb:Jt,win:window,blockClass:g,blockSelector:_,mirror:qe,sampling:q.canvas,dataURLOptions:H});var Ft=new Yo({mutationCb:ze,scrollCb:pn,bypassOptions:{blockClass:g,blockSelector:_,maskTextClass:x,maskTextSelector:T,inlineStylesheet:N,maskInputOptions:vt,dataURLOptions:H,maskTextFn:xe,maskInputFn:ye,recordCanvas:pe,inlineImages:je,sampling:q,slimDOMOptions:mt,iframeManager:Kt,stylesheetManager:Ot,canvasManager:w,keepIframeSrcFn:Ve,processedNodeManager:Pn},mirror:qe});y=function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(he){d({type:gt.Meta,data:{href:window.location.href,width:dn(),height:Ir()}},Ke),Ot.reset(),Ft.init(),xn.forEach($e=>$e.lock());var gn=function($e,Qe){var{mirror:Sn=new jt,blockClass:qn="rr-block",blockSelector:$n=null,maskTextClass:Qn="rr-mask",maskTextSelector:lo=null,inlineStylesheet:hs=!0,inlineImages:pc=!1,recordCanvas:gc=!1,maskAllInputs:ps=!1,maskTextFn:fc,maskInputFn:vc,slimDOM:Ii=!1,dataURLOptions:mc,preserveWhiteSpace:_c,onSerialize:yc,onIframeLoad:bc,iframeLoadTimeout:wc,onStylesheetLoad:Sc,stylesheetLoadTimeout:Cc,keepIframeSrcFn:Ic=()=>!1}=Qe;return te($e,{doc:$e,mirror:Sn,blockClass:qn,blockSelector:$n,maskTextClass:Qn,maskTextSelector:lo,skipChild:!1,inlineStylesheet:hs,maskInputOptions:ps===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:ps===!1?{password:!0}:ps,maskTextFn:fc,maskInputFn:vc,slimDOMOptions:Ii===!0||Ii==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Ii==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Ii===!1?{}:Ii,dataURLOptions:mc,inlineImages:pc,recordCanvas:gc,preserveWhiteSpace:_c,onSerialize:yc,onIframeLoad:bc,iframeLoadTimeout:wc,onStylesheetLoad:Sc,stylesheetLoadTimeout:Cc,keepIframeSrcFn:Ic,newlyAddedElement:!1})}(document,{mirror:qe,blockClass:g,blockSelector:_,maskTextClass:x,maskTextSelector:T,inlineStylesheet:N,maskAllInputs:vt,maskTextFn:xe,maskInputFn:ye,slimDOM:mt,dataURLOptions:H,recordCanvas:pe,inlineImages:je,onSerialize:$e=>{pi($e,qe)&&Kt.addIframe($e),gi($e,qe)&&Ot.trackLinkElement($e),fi($e)&&Ft.addShadowRoot(Ze.shadowRoot($e),document)},onIframeLoad:($e,Qe)=>{Kt.attachIframe($e,Qe),Ft.observeAttachShadow($e)},onStylesheetLoad:($e,Qe)=>{Ot.attachLinkElement($e,Qe)},keepIframeSrcFn:Ve});if(!gn)return console.warn("Failed to snapshot the document");d({type:gt.FullSnapshot,data:{node:gn,initialOffset:di(window)}},Ke),xn.forEach($e=>$e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ot.adoptStyleSheets(document.adoptedStyleSheets,qe.getId(document))}};try{var Tr=[],Ci=Ke=>{var gn;return ct(Zo)({mutationCb:ze,mousemoveCb:($e,Qe)=>d({type:gt.IncrementalSnapshot,data:{source:Qe,positions:$e}}),mouseInteractionCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.MouseInteraction},$e)}),scrollCb:pn,viewportResizeCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.ViewportResize},$e)}),inputCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.Input},$e)}),mediaInteractionCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.MediaInteraction},$e)}),styleSheetRuleCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.StyleSheetRule},$e)}),styleDeclarationCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.StyleDeclaration},$e)}),canvasMutationCb:Jt,fontCb:$e=>d({type:gt.IncrementalSnapshot,data:t({source:st.Font},$e)}),selectionCb:$e=>{d({type:gt.IncrementalSnapshot,data:t({source:st.Selection},$e)})},customElementCb:$e=>{d({type:gt.IncrementalSnapshot,data:t({source:st.CustomElement},$e)})},blockClass:g,ignoreClass:S,ignoreSelector:E,maskTextClass:x,maskTextSelector:T,maskInputOptions:vt,inlineStylesheet:N,sampling:q,recordDOM:he,recordCanvas:pe,inlineImages:je,userTriggeredOnInput:ke,collectFonts:Re,doc:Ke,maskInputFn:ye,maskTextFn:xe,keepIframeSrcFn:Ve,blockSelector:_,slimDOMOptions:mt,dataURLOptions:H,mirror:qe,iframeManager:Kt,stylesheetManager:Ot,shadowDomManager:Ft,processedNodeManager:Pn,canvasManager:w,ignoreCSSAttributes:Fe,plugins:((gn=le?.filter($e=>$e.observer))==null?void 0:gn.map($e=>({observer:$e.observer,options:$e.options,callback:Qe=>d({type:gt.Plugin,data:{plugin:$e.name,payload:Qe}})})))||[]},Se)};Kt.addLoadListener(Ke=>{try{Tr.push(Ci(Ke.contentDocument))}catch(gn){console.warn(gn)}});var Kn=()=>{y(),Tr.push(Ci(document)),de=!0};return document.readyState==="interactive"||document.readyState==="complete"?Kn():(Tr.push(Dt("DOMContentLoaded",()=>{d({type:gt.DomContentLoaded,data:{}}),_e==="DOMContentLoaded"&&Kn()})),Tr.push(Dt("load",()=>{d({type:gt.Load,data:{}}),_e==="load"&&Kn()},window))),()=>{Tr.forEach(Ke=>Ke()),Pn.destroy(),de=!1,dr=void 0}}catch(Ke){console.warn(Ke)}}Ye.addCustomEvent=(i,s)=>{if(!de)throw new Error("please add custom event after start recording");d({type:gt.Custom,data:{tag:i,payload:s}})},Ye.freezePage=()=>{xn.forEach(i=>i.freeze())},Ye.takeFullSnapshot=i=>{if(!de)throw new Error("please take full snapshot after start recording");y(i)},Ye.mirror=qe,(ue=nt||(nt={}))[ue.NotStarted=0]="NotStarted",ue[ue.Running=1]="Running",ue[ue.Stopped=2]="Stopped";var rt,it=Object.defineProperty,Pe=(i,s,l)=>((c,g,_)=>g in c?it(c,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):c[g]=_)(i,typeof s!="symbol"?s+"":s,l),Bt=Object.defineProperty,Nt=(i,s,l)=>((c,g,_)=>g in c?Bt(c,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):c[g]=_)(i,typeof s!="symbol"?s+"":s,l),dt=Object.defineProperty,Xe=(i,s,l)=>((c,g,_)=>g in c?dt(c,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):c[g]=_)(i,typeof s!="symbol"?s+"":s,l),ft={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Ht={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ot={};function on(i){if(ot[i])return ot[i];var s=globalThis[i],l=s.prototype,c=i in ft?ft[i]:void 0,g=!!(c&&c.every(N=>{var j,ce;return!!((ce=(j=Object.getOwnPropertyDescriptor(l,N))==null?void 0:j.get)!=null&&ce.toString().includes("[native code]"))})),_=i in Ht?Ht[i]:void 0,S=!!(_&&_.every(N=>{var j;return typeof l[N]=="function"&&((j=l[N])==null?void 0:j.toString().includes("[native code]"))}));if(g&&S)return ot[i]=s.prototype,s.prototype;try{var E=document.createElement("iframe");document.body.appendChild(E);var x=E.contentWindow;if(!x)return s.prototype;var T=x[i].prototype;return document.body.removeChild(E),T?ot[i]=T:l}catch{return l}}var hn={};function un(i,s,l){var c,g="".concat(i,".").concat(String(l));if(hn[g])return hn[g].call(s);var _=on(i),S=(c=Object.getOwnPropertyDescriptor(_,l))==null?void 0:c.get;return S?(hn[g]=S,S.call(s)):s[l]}var Mn={};function wi(i,s,l){var c="".concat(i,".").concat(String(l));if(Mn[c])return Mn[c].bind(s);var g=on(i)[l];return typeof g!="function"?s[l]:(Mn[c]=g,g.bind(s))}var pr={childNodes:function(i){return un("Node",i,"childNodes")},parentNode:function(i){return un("Node",i,"parentNode")},parentElement:function(i){return un("Node",i,"parentElement")},textContent:function(i){return un("Node",i,"textContent")},contains:function(i,s){return wi("Node",i,"contains")(s)},getRootNode:function(i){return wi("Node",i,"getRootNode")()},host:function(i){return i&&"host"in i?un("ShadowRoot",i,"host"):null},styleSheets:function(i){return i.styleSheets},shadowRoot:function(i){return i&&"shadowRoot"in i?un("Element",i,"shadowRoot"):null},querySelector:function(i,s){return un("Element",i,"querySelector")(s)},querySelectorAll:function(i,s){return un("Element",i,"querySelectorAll")(s)},mutationObserver:function(){return on("MutationObserver").constructor}};class Si{constructor(){Xe(this,"idNodeMap",new Map),Xe(this,"nodeMetaMap",new WeakMap)}getId(s){var l;if(!s)return-1;var c=(l=this.getMeta(s))==null?void 0:l.id;return c??-1}getNode(s){return this.idNodeMap.get(s)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(s){return this.nodeMetaMap.get(s)||null}removeNodeFromMap(s){var l=this.getId(s);this.idNodeMap.delete(l),s.childNodes&&s.childNodes.forEach(c=>this.removeNodeFromMap(c))}has(s){return this.idNodeMap.has(s)}hasNode(s){return this.nodeMetaMap.has(s)}add(s,l){var c=l.id;this.idNodeMap.set(c,s),this.nodeMetaMap.set(s,l)}replace(s,l){var c=this.getNode(s);if(c){var g=this.nodeMetaMap.get(c);g&&this.nodeMetaMap.set(l,g)}this.idNodeMap.set(s,l)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function zr(i,s,l){if(!i)return!1;if(i.nodeType!==i.ELEMENT_NODE)return!!l&&zr(pr.parentNode(i),s,l);for(var c=i.classList.length;c--;){var g=i.classList[c];if(s.test(g))return!0}return!!l&&zr(pr.parentNode(i),s,l)}class Hn{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){for(var s=[],l=this.firstChild;l;)s.push(l),l=l.nextSibling;return s}contains(s){if(!(s instanceof Hn)||s.ownerDocument!==this.ownerDocument)return!1;if(s===this)return!0;for(;s.parentNode;){if(s.parentNode===this)return!0;s=s.parentNode}return!1}appendChild(s){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(s,l){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(s){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var Yr={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ca={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},no={};function Xo(i){if(no[i])return no[i];var s=globalThis[i],l=s.prototype,c=i in Yr?Yr[i]:void 0,g=!!(c&&c.every(N=>{var j,ce;return!!((ce=(j=Object.getOwnPropertyDescriptor(l,N))==null?void 0:j.get)!=null&&ce.toString().includes("[native code]"))})),_=i in ca?ca[i]:void 0,S=!!(_&&_.every(N=>{var j;return typeof l[N]=="function"&&((j=l[N])==null?void 0:j.toString().includes("[native code]"))}));if(g&&S)return no[i]=s.prototype,s.prototype;try{var E=document.createElement("iframe");document.body.appendChild(E);var x=E.contentWindow;if(!x)return s.prototype;var T=x[i].prototype;return document.body.removeChild(E),T?no[i]=T:l}catch{return l}}var Jo={};function gr(i,s,l){var c,g="".concat(i,".").concat(String(l));if(Jo[g])return Jo[g].call(s);var _=Xo(i),S=(c=Object.getOwnPropertyDescriptor(_,l))==null?void 0:c.get;return S?(Jo[g]=S,S.call(s)):s[l]}var Ko={};function da(i,s,l){var c="".concat(i,".").concat(String(l));if(Ko[c])return Ko[c].bind(s);var g=Xo(i)[l];return typeof g!="function"?s[l]:(Ko[c]=g,g.bind(s))}var Fn={childNodes:function(i){return gr("Node",i,"childNodes")},parentNode:function(i){return gr("Node",i,"parentNode")},parentElement:function(i){return gr("Node",i,"parentElement")},textContent:function(i){return gr("Node",i,"textContent")},contains:function(i,s){return da("Node",i,"contains")(s)},getRootNode:function(i){return da("Node",i,"getRootNode")()},host:function(i){return i&&"host"in i?gr("ShadowRoot",i,"host"):null},styleSheets:function(i){return i.styleSheets},shadowRoot:function(i){return i&&"shadowRoot"in i?gr("Element",i,"shadowRoot"):null},querySelector:function(i,s){return gr("Element",i,"querySelector")(s)},querySelectorAll:function(i,s){return gr("Element",i,"querySelectorAll")(s)},mutationObserver:function(){return Xo("MutationObserver").constructor}},Xr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Qo={map:{},getId:()=>(console.error(Xr),-1),getNode:()=>(console.error(Xr),null),removeNodeFromMap(){console.error(Xr)},has:()=>(console.error(Xr),!1),reset(){console.error(Xr)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Qo=new Proxy(Qo,{get:(i,s,l)=>(s==="map"&&console.error(Xr),Reflect.get(i,s,l))}));var ha=Date.now;function pa(i){return i?i.nodeType===i.ELEMENT_NODE?i:Fn.parentElement(i):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(ha=()=>new Date().getTime());function ga(i){var s,l=null;return"getRootNode"in i&&((s=Fn.getRootNode(i))==null?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Fn.host(Fn.getRootNode(i))&&(l=Fn.host(Fn.getRootNode(i))),l}function fa(i){for(var s,l=i;s=ga(l);)l=s;return l}function va(i){var s=i.ownerDocument;if(!s)return!1;var l=fa(i);return Fn.contains(s,l)}for(var Gu=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){Nt(this,"id",1),Nt(this,"styleIDMap",new WeakMap),Nt(this,"idStyleMap",new Map)}getId(i){var s;return(s=this.styleIDMap.get(i))!==null&&s!==void 0?s:-1}has(i){return this.styleIDMap.has(i)}add(i,s){return this.has(i)?this.getId(i):(l=s===void 0?this.id++:s,this.styleIDMap.set(i,l),this.idStyleMap.set(l,i),l);var l}getStyle(i){return this.idStyleMap.get(i)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return Qo},closestElementOfNode:pa,getBaseDimension:function i(s,l){var c,g,_=(g=(c=s.ownerDocument)==null?void 0:c.defaultView)==null?void 0:g.frameElement;if(!_||_===l)return{x:0,y:0,relativeScale:1,absoluteScale:1};var S=_.getBoundingClientRect(),E=i(_,l),x=S.height/_.clientHeight;return{x:S.x*E.relativeScale+E.x,y:S.y*E.relativeScale+E.y,relativeScale:x,absoluteScale:E.absoluteScale*x}},getNestedRule:function i(s,l){var c=s[l[0]];return l.length===1?c:i(c.cssRules[l[1]].cssRules,l.slice(2))},getPositionsAndIndex:function(i){var s=[...i],l=s.pop();return{positions:s,index:l}},getRootShadowHost:fa,getShadowHost:ga,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(i){var s,l,c,g,_=i.document;return{left:_.scrollingElement?_.scrollingElement.scrollLeft:i.pageXOffset!==void 0?i.pageXOffset:_.documentElement.scrollLeft||_?.body&&((s=Fn.parentElement(_.body))==null?void 0:s.scrollLeft)||((l=_?.body)==null?void 0:l.scrollLeft)||0,top:_.scrollingElement?_.scrollingElement.scrollTop:i.pageYOffset!==void 0?i.pageYOffset:_?.documentElement.scrollTop||_?.body&&((c=Fn.parentElement(_.body))==null?void 0:c.scrollTop)||((g=_?.body)==null?void 0:g.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(i){return!!i&&(i instanceof Hn&&"shadowRoot"in i?!!i.shadowRoot:!!Fn.shadowRoot(i))},hookSetter:function i(s,l,c,g){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:window,S=_.Object.getOwnPropertyDescriptor(s,l);return _.Object.defineProperty(s,l,g?c:{set(E){setTimeout(()=>{c.set.call(this,E)},0),S&&S.set&&S.set.call(this,E)}}),()=>i(s,l,S||{},!0)},inDom:function(i){var s=i.ownerDocument;return!!s&&(Fn.contains(s,i)||va(i))},isAncestorRemoved:function i(s,l){if(g=(c=s)&&"host"in c&&"mode"in c&&pr.host(c)||null,!!(g&&"shadowRoot"in g&&pr.shadowRoot(g)===c))return!1;var c,g,_=l.getId(s);if(!l.has(_))return!0;var S=Fn.parentNode(s);return(!S||S.nodeType!==s.DOCUMENT_NODE)&&(!S||i(S,l))},isBlocked:function(i,s,l,c){if(!i)return!1;var g=pa(i);if(!g)return!1;try{if(typeof s=="string"){if(g.classList.contains(s)||c&&g.closest("."+s)!==null)return!0}else if(zr(g,s,c))return!0}catch{}return!!(l&&(g.matches(l)||c&&g.closest(l)!==null))},isIgnored:function(i,s,l){return!(i.tagName!=="TITLE"||!l.headTitleMutations)||s.getId(i)===-2},isSerialized:function(i,s){return s.getId(i)!==-1},isSerializedIframe:function(i,s){return!!(i.nodeName==="IFRAME"&&s.getMeta(i))},isSerializedStylesheet:function(i,s){return!!(i.nodeName==="LINK"&&i.nodeType===i.ELEMENT_NODE&&i.getAttribute&&i.getAttribute("rel")==="stylesheet"&&s.getMeta(i))},iterateResolveTree:function i(s,l){l(s.value);for(var c=s.children.length-1;c>=0;c--)i(s.children[c],l)},legacy_isTouchEvent:function(i){return!!i.changedTouches},get nowTimestamp(){return ha},on:function(i,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,c={capture:!0,passive:!0};return l.addEventListener(i,s,c),()=>l.removeEventListener(i,s,c)},patch:function(i,s,l){try{if(!(s in i))return()=>{};var c=i[s],g=l(c);return typeof g=="function"&&(g.prototype=g.prototype||{},Object.defineProperties(g,{__rrweb_original__:{enumerable:!1,value:c}})),i[s]=g,()=>{i[s]=c}}catch{return()=>{}}},polyfill:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;"NodeList"in i&&!i.NodeList.prototype.forEach&&(i.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in i&&!i.DOMTokenList.prototype.forEach&&(i.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(i){var s={},l=(j,ce)=>{var K={value:j,parent:ce,children:[]};return s[j.node.id]=K,K},c=[];for(var g of i){var{nextId:_,parentId:S}=g;if(_&&_ in s){var E=s[_];if(E.parent){var x=E.parent.children.indexOf(E);E.parent.children.splice(x,0,l(g,E.parent))}else{var T=c.indexOf(E);c.splice(T,0,l(g,null))}}else if(S in s){var N=s[S];N.children.push(l(g,N))}else c.push(l(g,null))}return c},shadowHostInDom:va,throttle:function(i,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=null,g=0;return function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];var x=Date.now();g||l.leading!==!1||(g=x);var T=s-(x-g),N=this;T<=0||T>s?(c&&(clearTimeout(c),c=null),g=x,i.apply(N,S)):c||l.trailing===!1||(c=setTimeout(()=>{g=l.leading===!1?0:Date.now(),c=null,i.apply(N,S)},T))}},uniqueTextMutations:function(i){for(var s=new Set,l=[],c=i.length;c--;){var g=i[c];s.has(g.id)||(l.push(g),s.add(g.id))}return l}},Symbol.toStringTag,{value:"Module"})),Zu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zu=typeof Uint8Array>"u"?[]:new Uint8Array(256),ro=0;ro<64;ro++)zu[Zu.charCodeAt(ro)]=ro;var ma;typeof window<"u"&&window.Blob&&new Blob([(i=>Uint8Array.from(atob(i),s=>s.charCodeAt(0)))("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"});try{if(Array.from([1],i=>2*i)[0]!==2){var es=document.createElement("iframe");document.body.appendChild(es),Array.from=((rt=es.contentWindow)==null?void 0:rt.Array.from)||Array.from,document.body.removeChild(es)}}catch(i){console.debug("Unable to override Array.from",i)}new Si,function(i){i[i.NotStarted=0]="NotStarted",i[i.Running=1]="Running",i[i.Stopped=2]="Stopped"}(ma||(ma={}));class Jr{constructor(s){Pe(this,"fileName"),Pe(this,"functionName"),Pe(this,"lineNumber"),Pe(this,"columnNumber"),this.fileName=s.fileName||"",this.functionName=s.functionName||"",this.lineNumber=s.lineNumber,this.columnNumber=s.columnNumber}toString(){var s=this.lineNumber||"",l=this.columnNumber||"";return this.functionName?"".concat(this.functionName," (").concat(this.fileName,":").concat(s,":").concat(l,")"):"".concat(this.fileName,":").concat(s,":").concat(l)}}var Yu=/(^|@)\S+:\d+/,_a=/^\s*at .*(\S+:\d+|\(native\))/m,Xu=/^(eval@)?(\[native code])?$/,ts={parse:function(i){return i?i.stacktrace!==void 0||i["opera#sourceloc"]!==void 0?this.parseOpera(i):i.stack&&i.stack.match(_a)?this.parseV8OrIE(i):i.stack?this.parseFFOrSafari(i):(console.warn("[console-record-plugin]: Failed to parse error object:",i),[]):[]},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i.replace(/[()]/g,""));if(!s)throw new Error("Cannot parse given url: ".concat(i));return[s[1],s[2]||void 0,s[3]||void 0]},parseV8OrIE:function(i){return i.stack.split(`
`).filter(function(s){return!!s.match(_a)},this).map(function(s){s.indexOf("(eval ")>-1&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var l=s.replace(/^\s+/,"").replace(/\(eval code/g,"("),c=l.match(/ (\((.+):(\d+):(\d+)\)$)/),g=(l=c?l.replace(c[0],""):l).split(/\s+/).slice(1),_=this.extractLocation(c?c[1]:g.pop()),S=g.join(" ")||void 0,E=["eval","<anonymous>"].indexOf(_[0])>-1?void 0:_[0];return new Jr({functionName:S,fileName:E,lineNumber:_[1],columnNumber:_[2]})},this)},parseFFOrSafari:function(i){return i.stack.split(`
`).filter(function(s){return!s.match(Xu)},this).map(function(s){if(s.indexOf(" > eval")>-1&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),s.indexOf("@")===-1&&s.indexOf(":")===-1)return new Jr({functionName:s});var l=/((.*".+"[^@]*)?[^@]*)(?:@)/,c=s.match(l),g=c&&c[1]?c[1]:void 0,_=this.extractLocation(s.replace(l,""));return new Jr({functionName:g,fileName:_[0],lineNumber:_[1],columnNumber:_[2]})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf(`
`)>-1&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,l=i.message.split(`
`),c=[],g=2,_=l.length;g<_;g+=2){var S=s.exec(l[g]);S&&c.push(new Jr({fileName:S[2],lineNumber:parseFloat(S[1])}))}return c},parseOpera10:function(i){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=i.stacktrace.split(`
`),c=[],g=0,_=l.length;g<_;g+=2){var S=s.exec(l[g]);S&&c.push(new Jr({functionName:S[3]||void 0,fileName:S[2],lineNumber:parseFloat(S[1])}))}return c},parseOpera11:function(i){return i.stack.split(`
`).filter(function(s){return!!s.match(Yu)&&!s.match(/^Error created at/)},this).map(function(s){var l=s.split("@"),c=this.extractLocation(l.pop()),g=(l.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Jr({functionName:g,fileName:c[0],lineNumber:c[1],columnNumber:c[2]})},this)}};function Ju(i){if(!i||!i.outerHTML)return"";for(var s="";i.parentElement;){var l=i.localName;if(!l)break;l=l.toLowerCase();var c=i.parentElement,g=[];if(c.children&&c.children.length>0)for(var _=0;_<c.children.length;_++){var S=c.children[_];S.localName&&S.localName.toLowerCase&&S.localName.toLowerCase()===l&&g.push(S)}g.length>1&&(l+=":eq(".concat(g.indexOf(i),")")),s=l+(s?">"+s:""),i=c}return s}function ns(i){return Object.prototype.toString.call(i)==="[object Object]"}function ya(i,s){if(s===0)return!0;var l=Object.keys(i);for(var c of l)if(ns(i[c])&&ya(i[c],s-1))return!0;return!1}function Kr(i,s){var l={numOfKeysLimit:50,depthOfLimit:4};Object.assign(l,s);var c=[],g=[];return JSON.stringify(i,function(_,S){if(c.length>0){var E=c.indexOf(this);~E?c.splice(E+1):c.push(this),~E?g.splice(E,1/0,_):g.push(_),~c.indexOf(S)&&(S=c[0]===S?"[Circular ~]":"[Circular ~."+g.slice(0,c.indexOf(S)).join(".")+"]")}else c.push(S);if(S===null)return S;if(S===void 0)return"undefined";if(function(j){return!!(ns(j)&&Object.keys(j).length>l.numOfKeysLimit||typeof j=="function"||ns(j)&&ya(j,l.depthOfLimit))}(S))return function(j){var ce=j.toString();return l.stringLengthLimit&&ce.length>l.stringLengthLimit&&(ce="".concat(ce.slice(0,l.stringLengthLimit),"...")),ce}(S);if(typeof S=="bigint")return S.toString()+"n";if(S instanceof Event){var x={};for(var T in S){var N=S[T];Array.isArray(N)?x[T]=Ju(N.length?N[0]:null):x[T]=N}return x}return S instanceof Node?S instanceof HTMLElement?S?S.outerHTML:"":S.nodeName:S instanceof Error?S.stack?S.stack+`
End of stack for Error object`:S.name+": "+S.message:S})}var ba={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Ku(i,s,l){var c,g=l?Object.assign({},ba,l):ba,_=g.logger;if(!_)return()=>{};c=typeof _=="string"?s[_]:_;var S=0,E=!1,x=[];if(g.level.includes("error")){var T=K=>{var ye=K.message,xe=K.error,Se=ts.parse(xe).map(q=>q.toString()),V=[Kr(ye,g.stringifyOptions)];i({level:"error",trace:Se,payload:V})};s.addEventListener("error",T),x.push(()=>{s.removeEventListener("error",T)});var N=K=>{var ye,xe;K.reason instanceof Error?(ye=K.reason,xe=[Kr("Uncaught (in promise) ".concat(ye.name,": ").concat(ye.message),g.stringifyOptions)]):(ye=new Error,xe=[Kr("Uncaught (in promise)",g.stringifyOptions),Kr(K.reason,g.stringifyOptions)]);var Se=ts.parse(ye).map(V=>V.toString());i({level:"error",trace:Se,payload:xe})};s.addEventListener("unhandledrejection",N),x.push(()=>{s.removeEventListener("unhandledrejection",N)})}for(var j of g.level)x.push(ce(c,j));return()=>{x.forEach(K=>K())};function ce(K,ye){var xe=this;return K[ye]?Gu.patch(K,ye,Se=>function(){for(var V=arguments.length,q=new Array(V),H=0;H<V;H++)q[H]=arguments[H];if(Se.apply(xe,q),!(ye==="assert"&&q[0]||E)){E=!0;try{var re=ts.parse(new Error).map(pe=>pe.toString()).splice(1),he=(ye==="assert"?q.slice(1):q).map(pe=>Kr(pe,g.stringifyOptions));++S<g.lengthThreshold?i({level:ye,trace:re,payload:he}):S===g.lengthThreshold&&i({level:"warn",trace:[],payload:[Kr("The number of log records reached the threshold.")]})}catch(pe){Se("rrweb logger error:",pe,...q)}finally{E=!1}}}):()=>{}}}var wa=i=>({name:"rrweb/console@1",observer:Ku,options:i}),Jn=typeof window<"u"?window:void 0,wn=typeof globalThis<"u"?globalThis:Jn,Sa=Array.prototype.forEach,Ca=wn?.navigator;wn?.document,wn?.location,wn?.fetch,wn!=null&&wn.XMLHttpRequest&&"withCredentials"in new wn.XMLHttpRequest&&wn.XMLHttpRequest,wn?.AbortController,Ca?.userAgent;var Ia,fr=Jn??{};(function(i){i.GZipJS="gzip-js",i.Base64="base64"})(Ia||(Ia={}));var Qu=Array.isArray,ka=Object.prototype,ec=ka.hasOwnProperty,rs=ka.toString,io=Qu||function(i){return rs.call(i)==="[object Array]"},tc=i=>typeof i=="function",nc=i=>i===Object(i)&&!io(i),vr=i=>i===void 0,rc=i=>rs.call(i)=="[object String]",is=i=>i===null,Ea=i=>vr(i)||is(i),os=i=>rs.call(i)==="[object Boolean]",ic=i=>i instanceof Document,xa=i=>i instanceof FormData,Ta=i=>{var s={_log:function(l){if(Jn&&fr.POSTHOG_DEBUG&&!vr(Jn.console)&&Jn.console){for(var c=("__rrweb_original__"in Jn.console[l])?Jn.console[l].__rrweb_original__:Jn.console[l],g=arguments.length,_=new Array(g>1?g-1:0),S=1;S<g;S++)_[S-1]=arguments[S];c(i,..._)}},info:function(){for(var l=arguments.length,c=new Array(l),g=0;g<l;g++)c[g]=arguments[g];s._log("log",...c)},warn:function(){for(var l=arguments.length,c=new Array(l),g=0;g<l;g++)c[g]=arguments[g];s._log("warn",...c)},error:function(){for(var l=arguments.length,c=new Array(l),g=0;g<l;g++)c[g]=arguments[g];s._log("error",...c)},critical:function(){for(var l=arguments.length,c=new Array(l),g=0;g<l;g++)c[g]=arguments[g];console.error(i,...c)},uninitializedWarning:l=>{s.error("You must initialize PostHog before calling ".concat(l))},createLogger:l=>Ta("".concat(i," ").concat(l))};return s},oc=Ta("[PostHog.js]").createLogger,ss={};function sc(i,s,l){if(!Ea(i)){if(io(i))return function(_,S,E){if(io(_)){if(Sa&&_.forEach===Sa)_.forEach(S,E);else if("length"in _&&_.length===+_.length){for(var x=0,T=_.length;x<T;x++)if(x in _&&S.call(E,_[x],x)===ss)return}}}(i,s,l);if(xa(i)){for(var c of i.entries())if(s.call(l,c[1],c[0])===ss)return}else for(var g in i)if(ec.call(i,g)&&s.call(l,i[g],g)===ss)return}}var ac=function(i){var s,l,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",g=[];return sc(i,function(_,S){vr(_)||vr(S)||S==="undefined"||(s=encodeURIComponent(_ instanceof File?_.name:_.toString()),l=encodeURIComponent(S),g[g.length]=l+"="+s)}),g.join(c)},Ma={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:i=>i,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]};function Ra(i,s,l){try{if(!(s in i))return()=>{};var c=i[s],g=l(c);return tc(g)&&(g.prototype=g.prototype||{},Object.defineProperties(g,{__posthog_wrapped__:{enumerable:!1,value:!0}})),i[s]=g,()=>{i[s]=c}}catch{return()=>{}}}function as(i,s){var l,c=function(S){try{return typeof S=="string"?new URL(S).hostname:"url"in S?new URL(S.url).hostname:S.hostname}catch{return null}}(i),g={hostname:c,isHostDenied:!1};if((l=s.payloadHostDenyList)===null||l===void 0||!l.length||c==null||!c.trim().length)return g;for(var _ of s.payloadHostDenyList)if(c.endsWith(_))return{hostname:c,isHostDenied:!0};return g}var Aa=oc("[Recorder]"),Na=i=>i.entryType==="navigation",ls=i=>i.entryType==="resource";function Oa(i,s){for(var l=i.length-1;l>=0;l-=1)if(s(i[l]))return i[l]}function lc(i,s,l){if(l.recordInitialRequests){var c=s.performance.getEntries().filter(S=>Na(S)||ls(S)&&l.initiatorTypes.includes(S.initiatorType));i({requests:c.flatMap(S=>ao({entry:S,method:void 0,status:void 0,networkRequest:{},isInitial:!0})),isInitial:!0})}var g=new s.PerformanceObserver(S=>{var E=S.getEntries().filter(x=>Na(x)||ls(x)&&l.initiatorTypes.includes(x.initiatorType)&&(T=>!l.recordBody&&!l.recordHeaders||T.initiatorType!=="xmlhttprequest"&&T.initiatorType!=="fetch")(x));i({requests:E.flatMap(x=>ao({entry:x,method:void 0,status:void 0,networkRequest:{}}))})}),_=PerformanceObserver.supportedEntryTypes.filter(S=>l.performanceEntryTypeToObserve.includes(S));return g.observe({entryTypes:_}),()=>{g.disconnect()}}function oo(i,s){return!!s&&(os(s)||s[i])}function so(i){var{type:s,recordBody:l,headers:c}=i;function g(S){var E=Object.keys(c).find(T=>T.toLowerCase()==="content-type"),x=E&&c[E];return S.some(T=>x?.includes(T))}if(!l)return!1;if(os(l))return!0;if(io(l))return g(l);var _=l[s];return os(_)?_:g(_)}function us(i,s,l,c,g){return cs.apply(this,arguments)}function cs(){return cs=o(function*(i,s,l,c,g){var _=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(_>10)return Aa.warn("Failed to get performance entry for request",{url:l,initiatorType:s}),null;var S=Oa(i.performance.getEntriesByName(l),E=>ls(E)&&E.initiatorType===s&&(vr(c)||E.startTime>=c)&&(vr(g)||E.startTime<=g));return S||(yield new Promise(E=>setTimeout(E,50*_)),us(i,s,l,c,g,_+1))}),cs.apply(this,arguments)}function Fa(i){var{body:s,options:l,url:c}=i;if(Ea(s))return null;var{hostname:g,isHostDenied:_}=as(c,l);if(_)return g+" is in deny list";if(rc(s))return s;if(ic(s))return s.textContent;if(xa(s))return ac(s);if(nc(s))try{return JSON.stringify(s)}catch{return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(s)}var uc=i=>!is(i)&&(i.entryType==="navigation"||i.entryType==="resource");function ao(i){var{entry:s,method:l,status:c,networkRequest:g,isInitial:_,start:S,end:E,url:x,initiatorType:T}=i;S=s?s.startTime:S,E=s?s.responseEnd:E;var N=Math.floor(Date.now()-performance.now()),j=Math.floor(N+(S||0)),ce=[t(t({},s?s.toJSON():{name:x}),{},{startTime:vr(S)?void 0:Math.round(S),endTime:vr(E)?void 0:Math.round(E),timeOrigin:N,timestamp:j,method:l,initiatorType:T||(s?s.initiatorType:void 0),status:c,requestHeaders:g.requestHeaders,requestBody:g.requestBody,responseHeaders:g.responseHeaders,responseBody:g.responseBody,isInitial:_})];if(uc(s))for(var K of s.serverTiming||[])ce.push({timeOrigin:N,timestamp:j,startTime:Math.round(s.startTime),name:K.name,duration:K.duration,entryType:"serverTiming"});return ce}var cc=["video/","audio/"];function Pa(i){return new Promise((s,l)=>{var c=setTimeout(()=>s("[SessionReplay] Timeout while trying to read body"),500);try{i.clone().text().then(g=>s(g),g=>l(g)).finally(()=>clearTimeout(c))}catch{clearTimeout(c),s("[SessionReplay] Failed to read body")}})}function La(){return(La=o(function*(i){var{r:s,options:l,url:c}=i,{hostname:g,isHostDenied:_}=as(c,l);return _?Promise.resolve(g+" is in deny list"):Pa(s)})).apply(this,arguments)}function Da(){return(Da=o(function*(i){var{r:s,options:l,url:c}=i,g=function(_){var S,{r:E,options:x,url:T}=_;if(E.headers.get("Transfer-Encoding")==="chunked")return"Chunked Transfer-Encoding is not supported";var N=(S=E.headers.get("Content-Type"))===null||S===void 0?void 0:S.toLowerCase(),j=cc.some(ye=>N?.startsWith(ye));if(N&&j)return"Content-Type ".concat(N," is not supported");var{hostname:ce,isHostDenied:K}=as(T,x);return K?ce+" is in deny list":null}({r:s,options:l,url:c});return is(g)?Pa(s):Promise.resolve(g)})).apply(this,arguments)}function dc(i,s,l){if(!l.initiatorTypes.includes("fetch"))return()=>{};var c=oo("request",l.recordHeaders),g=oo("response",l.recordHeaders),_=Ra(s,"fetch",S=>function(){var E=o(function*(x,T){var N,j,ce,K=new Request(x,T),ye={};try{var xe={};K.headers.forEach((V,q)=>{xe[q]=V}),c&&(ye.requestHeaders=xe),so({type:"request",headers:xe,url:x,recordBody:l.recordBody})&&(ye.requestBody=yield function(V){return La.apply(this,arguments)}({r:K,options:l,url:x})),j=s.performance.now(),N=yield S(K),ce=s.performance.now();var Se={};return N.headers.forEach((V,q)=>{Se[q]=V}),g&&(ye.responseHeaders=Se),so({type:"response",headers:Se,url:x,recordBody:l.recordBody})&&(ye.responseBody=yield function(V){return Da.apply(this,arguments)}({r:N,options:l,url:x})),N}finally{us(s,"fetch",K.url,j,ce).then(V=>{var q,H=ao({entry:V,method:K.method,status:(q=N)===null||q===void 0?void 0:q.status,networkRequest:ye,start:j,end:ce,url:K.url,initiatorType:"fetch"});i({requests:H})}).catch(()=>{})}});return function(x,T){return E.apply(this,arguments)}}());return()=>{_()}}var Ba=null;function hc(i,s,l){if(!("performance"in s))return()=>{};if(Ba)return Aa.warn("Network observer already initialised, doing nothing"),()=>{};var c=l?Object.assign({},Ma,l):Ma,g=x=>{var T=[];x.requests.forEach(N=>{var j=c.maskRequestFn(N);j&&T.push(j)}),T.length>0&&i(t(t({},x),{},{requests:T}))},_=lc(g,s,c),S=()=>{},E=()=>{};return(c.recordHeaders||c.recordBody)&&(S=function(x,T,N){if(!N.initiatorTypes.includes("xmlhttprequest"))return()=>{};var j=oo("request",N.recordHeaders),ce=oo("response",N.recordHeaders),K=Ra(T.XMLHttpRequest.prototype,"open",ye=>function(xe,Se){var V,q,H=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],re=arguments.length>3?arguments[3]:void 0,he=arguments.length>4?arguments[4]:void 0,pe=this,ge=new Request(Se),_e={},ke={},Re=pe.setRequestHeader.bind(pe);pe.setRequestHeader=(le,Ve)=>(ke[le]=Ve,Re(le,Ve)),j&&(_e.requestHeaders=ke);var je=pe.send.bind(pe);pe.send=le=>(so({type:"request",headers:ke,url:Se,recordBody:N.recordBody})&&(_e.requestBody=Fa({body:le,options:N,url:Se})),V=T.performance.now(),je(le)),pe.addEventListener("readystatechange",()=>{if(pe.readyState===pe.DONE){q=T.performance.now();var le={};pe.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(Ve=>{var Fe=Ve.split(": "),Le=Fe.shift(),Ne=Fe.join(": ");Le&&(le[Le]=Ne)}),ce&&(_e.responseHeaders=le),so({type:"response",headers:le,url:Se,recordBody:N.recordBody})&&(_e.responseBody=Fa({body:pe.response,options:N,url:Se})),us(T,"xmlhttprequest",ge.url,V,q).then(Ve=>{var Fe=ao({entry:Ve,method:xe,status:pe?.status,networkRequest:_e,start:V,end:q,url:Se.toString(),initiatorType:"xmlhttprequest"});x({requests:Fe})}).catch(()=>{})}}),ye.call(pe,xe,Se,H,re,he)});return()=>{K()}}(g,s,c),E=dc(g,s,c)),Ba=()=>{_(),S(),E()}}var Ha="rrweb/network@1",ds=i=>({name:Ha,observer:hc,options:i});fr.__PosthogExtensions__=fr.__PosthogExtensions__||{},fr.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:wa,getRecordNetworkPlugin:ds},fr.__PosthogExtensions__.rrweb={record:Ye,version:"v2"},fr.rrweb={record:Ye,version:"v2"},fr.rrwebConsoleRecord={getRecordConsolePlugin:wa},fr.getRecordNetworkPlugin=ds,r.NETWORK_PLUGIN_NAME=Ha,r.default=Ye,r.findLast=Oa,r.getRecordNetworkPlugin=ds,Object.defineProperty(r,"__esModule",{value:!0})})({});(function(){function r(h,d){var y=Object.keys(h);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(h);d&&(w=w.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),y.push.apply(y,w)}return y}function e(h){for(var d=1;d<arguments.length;d++){var y=arguments[d]!=null?arguments[d]:{};d%2?r(Object(y),!0).forEach(function(w){t(h,w,y[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(y)):r(Object(y)).forEach(function(w){Object.defineProperty(h,w,Object.getOwnPropertyDescriptor(y,w))})}return h}function t(h,d,y){return d in h?Object.defineProperty(h,d,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[d]=y,h}var n,o,a;(function(h){h.Popover="popover",h.API="api",h.Widget="widget"})(n||(n={})),function(h){h.Open="open",h.MultipleChoice="multiple_choice",h.SingleChoice="single_choice",h.Rating="rating",h.Link="link"}(o||(o={})),function(h){h.NextQuestion="next_question",h.End="end",h.ResponseBased="response_based",h.SpecificQuestion="specific_question"}(a||(a={}));var u=typeof window<"u"?window:void 0,p=typeof globalThis<"u"?globalThis:u,f=p?.navigator,b=p?.document;p?.location,p?.fetch,p!=null&&p.XMLHttpRequest&&"withCredentials"in new p.XMLHttpRequest&&p.XMLHttpRequest,p?.AbortController,f?.userAgent;var m,v,k,C,R,O,ne,ee,z=u??{},fe={},me=[],De=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,lt=Array.isArray;function Ie(h,d){for(var y in d)h[y]=d[y];return h}function Be(h){var d=h.parentNode;d&&d.removeChild(h)}function Ge(h,d,y){var w,I,A,D={};for(A in d)A=="key"?w=d[A]:A=="ref"?I=d[A]:D[A]=d[A];if(arguments.length>2&&(D.children=arguments.length>3?m.call(arguments,2):y),typeof h=="function"&&h.defaultProps!=null)for(A in h.defaultProps)D[A]===void 0&&(D[A]=h.defaultProps[A]);return tt(h,D,w,I,null)}function tt(h,d,y,w,I){var A={type:h,props:d,key:y,ref:w,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:I??++k,__i:-1,__u:0};return I==null&&v.vnode!=null&&v.vnode(A),A}function _t(h){return h.children}function Et(h,d){this.props=h,this.context=d}function xt(h,d){if(d==null)return h.__?xt(h.__,h.__i+1):null;for(var y;d<h.__k.length;d++)if((y=h.__k[d])!=null&&y.__e!=null)return y.__e;return typeof h.type=="function"?xt(h):null}function jt(h){var d,y;if((h=h.__)!=null&&h.__c!=null){for(h.__e=h.__c.base=null,d=0;d<h.__k.length;d++)if((y=h.__k[d])!=null&&y.__e!=null){h.__e=h.__c.base=y.__e;break}return jt(h)}}function Pt(h){(!h.__d&&(h.__d=!0)&&C.push(h)&&!wt.__r++||R!==v.debounceRendering)&&((R=v.debounceRendering)||O)(wt)}function wt(){var h,d,y,w,I,A,D,W,B;for(C.sort(ne);h=C.shift();)h.__d&&(d=C.length,w=void 0,A=(I=(y=h).__v).__e,W=[],B=[],(D=y.__P)&&((w=Ie({},I)).__v=I.__v+1,v.vnode&&v.vnode(w),St(D,w,I,y.__n,D.ownerSVGElement!==void 0,32&I.__u?[A]:null,W,A??xt(I),!!(32&I.__u),B),w.__.__k[w.__i]=w,Ct(W,w,B),w.__e!=A&&jt(w)),C.length>d&&C.sort(ne));wt.__r=0}function Lt(h,d,y,w,I,A,D,W,B,G,de){var F,nt,ue,qe,Ye,rt=w&&w.__k||me,it=d.length;for(y.__d=B,function(Pe,Bt,Nt){var dt,Xe,ft,Ht,ot,on=Bt.length,hn=Nt.length,un=hn,Mn=0;for(Pe.__k=[],dt=0;dt<on;dt++)(Xe=Pe.__k[dt]=(Xe=Bt[dt])==null||typeof Xe=="boolean"||typeof Xe=="function"?null:typeof Xe=="string"||typeof Xe=="number"||typeof Xe=="bigint"||Xe.constructor==String?tt(null,Xe,null,null,Xe):lt(Xe)?tt(_t,{children:Xe},null,null,null):Xe.constructor===void 0&&Xe.__b>0?tt(Xe.type,Xe.props,Xe.key,Xe.ref?Xe.ref:null,Xe.__v):Xe)!=null?(Xe.__=Pe,Xe.__b=Pe.__b+1,ot=Yt(Xe,Nt,Ht=dt+Mn,un),Xe.__i=ot,ft=null,ot!==-1&&(un--,(ft=Nt[ot])&&(ft.__u|=131072)),ft==null||ft.__v===null?(ot==-1&&Mn--,typeof Xe.type!="function"&&(Xe.__u|=65536)):ot!==Ht&&(ot===Ht+1?Mn++:ot>Ht?un>on-Ht?Mn+=ot-Ht:Mn--:Mn=ot<Ht&&ot==Ht-1?ot-Ht:0,ot!==dt+Mn&&(Xe.__u|=65536))):(ft=Nt[dt])&&ft.key==null&&ft.__e&&(ft.__e==Pe.__d&&(Pe.__d=xt(ft)),_n(ft,ft,!1),Nt[dt]=null,un--);if(un)for(dt=0;dt<hn;dt++)(ft=Nt[dt])!=null&&!(131072&ft.__u)&&(ft.__e==Pe.__d&&(Pe.__d=xt(ft)),_n(ft,ft))}(y,d,rt),B=y.__d,F=0;F<it;F++)(ue=y.__k[F])!=null&&typeof ue!="boolean"&&typeof ue!="function"&&(nt=ue.__i===-1?fe:rt[ue.__i]||fe,ue.__i=F,St(h,ue,nt,I,A,D,W,B,G,de),qe=ue.__e,ue.ref&&nt.ref!=ue.ref&&(nt.ref&&rn(nt.ref,null,ue),de.push(ue.ref,ue.__c||qe,ue)),Ye==null&&qe!=null&&(Ye=qe),65536&ue.__u||nt.__k===ue.__k?B=Vt(ue,B,h):typeof ue.type=="function"&&ue.__d!==void 0?B=ue.__d:qe&&(B=qe.nextSibling),ue.__d=void 0,ue.__u&=-196609);y.__d=B,y.__e=Ye}function Vt(h,d,y){var w,I;if(typeof h.type=="function"){for(w=h.__k,I=0;w&&I<w.length;I++)w[I]&&(w[I].__=h,d=Vt(w[I],d,y));return d}return h.__e!=d&&(y.insertBefore(h.__e,d||null),d=h.__e),d&&d.nextSibling}function Yt(h,d,y,w){var I=h.key,A=h.type,D=y-1,W=y+1,B=d[y];if(B===null||B&&I==B.key&&A===B.type)return y;if(w>(B!=null&&!(131072&B.__u)?1:0))for(;D>=0||W<d.length;){if(D>=0){if((B=d[D])&&!(131072&B.__u)&&I==B.key&&A===B.type)return D;D--}if(W<d.length){if((B=d[W])&&!(131072&B.__u)&&I==B.key&&A===B.type)return W;W++}}return-1}function Ut(h,d,y){d[0]==="-"?h.setProperty(d,y??""):h[d]=y==null?"":typeof y!="number"||De.test(d)?y:y+"px"}function nn(h,d,y,w,I){var A;e:if(d==="style")if(typeof y=="string")h.style.cssText=y;else{if(typeof w=="string"&&(h.style.cssText=w=""),w)for(d in w)y&&d in y||Ut(h.style,d,"");if(y)for(d in y)w&&y[d]===w[d]||Ut(h.style,d,y[d])}else if(d[0]==="o"&&d[1]==="n")A=d!==(d=d.replace(/(PointerCapture)$|Capture$/,"$1")),d=d.toLowerCase()in h?d.toLowerCase().slice(2):d.slice(2),h.l||(h.l={}),h.l[d+A]=y,y?w?y.u=w.u:(y.u=Date.now(),h.addEventListener(d,A?Mt:It,A)):h.removeEventListener(d,A?Mt:It,A);else{if(I)d=d.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(d!=="width"&&d!=="height"&&d!=="href"&&d!=="list"&&d!=="form"&&d!=="tabIndex"&&d!=="download"&&d!=="rowSpan"&&d!=="colSpan"&&d!=="role"&&d in h)try{h[d]=y??"";break e}catch{}typeof y=="function"||(y==null||y===!1&&d[4]!=="-"?h.removeAttribute(d):h.setAttribute(d,y))}}function It(h){var d=this.l[h.type+!1];if(h.t){if(h.t<=d.u)return}else h.t=Date.now();return d(v.event?v.event(h):h)}function Mt(h){return this.l[h.type+!0](v.event?v.event(h):h)}function St(h,d,y,w,I,A,D,W,B,G){var de,F,nt,ue,qe,Ye,rt,it,Pe,Bt,Nt,dt,Xe,ft,Ht,ot=d.type;if(d.constructor!==void 0)return null;128&y.__u&&(B=!!(32&y.__u),A=[W=d.__e=y.__e]),(de=v.__b)&&de(d);e:if(typeof ot=="function")try{if(it=d.props,Pe=(de=ot.contextType)&&w[de.__c],Bt=de?Pe?Pe.props.value:de.__:w,y.__c?rt=(F=d.__c=y.__c).__=F.__E:("prototype"in ot&&ot.prototype.render?d.__c=F=new ot(it,Bt):(d.__c=F=new Et(it,Bt),F.constructor=ot,F.render=yn),Pe&&Pe.sub(F),F.props=it,F.state||(F.state={}),F.context=Bt,F.__n=w,nt=F.__d=!0,F.__h=[],F._sb=[]),F.__s==null&&(F.__s=F.state),ot.getDerivedStateFromProps!=null&&(F.__s==F.state&&(F.__s=Ie({},F.__s)),Ie(F.__s,ot.getDerivedStateFromProps(it,F.__s))),ue=F.props,qe=F.state,F.__v=d,nt)ot.getDerivedStateFromProps==null&&F.componentWillMount!=null&&F.componentWillMount(),F.componentDidMount!=null&&F.__h.push(F.componentDidMount);else{if(ot.getDerivedStateFromProps==null&&it!==ue&&F.componentWillReceiveProps!=null&&F.componentWillReceiveProps(it,Bt),!F.__e&&(F.shouldComponentUpdate!=null&&F.shouldComponentUpdate(it,F.__s,Bt)===!1||d.__v===y.__v)){for(d.__v!==y.__v&&(F.props=it,F.state=F.__s,F.__d=!1),d.__e=y.__e,d.__k=y.__k,d.__k.forEach(function(on){on&&(on.__=d)}),Nt=0;Nt<F._sb.length;Nt++)F.__h.push(F._sb[Nt]);F._sb=[],F.__h.length&&D.push(F);break e}F.componentWillUpdate!=null&&F.componentWillUpdate(it,F.__s,Bt),F.componentDidUpdate!=null&&F.__h.push(function(){F.componentDidUpdate(ue,qe,Ye)})}if(F.context=Bt,F.props=it,F.__P=h,F.__e=!1,dt=v.__r,Xe=0,"prototype"in ot&&ot.prototype.render){for(F.state=F.__s,F.__d=!1,dt&&dt(d),de=F.render(F.props,F.state,F.context),ft=0;ft<F._sb.length;ft++)F.__h.push(F._sb[ft]);F._sb=[]}else do F.__d=!1,dt&&dt(d),de=F.render(F.props,F.state,F.context),F.state=F.__s;while(F.__d&&++Xe<25);F.state=F.__s,F.getChildContext!=null&&(w=Ie(Ie({},w),F.getChildContext())),nt||F.getSnapshotBeforeUpdate==null||(Ye=F.getSnapshotBeforeUpdate(ue,qe)),Lt(h,lt(Ht=de!=null&&de.type===_t&&de.key==null?de.props.children:de)?Ht:[Ht],d,y,w,I,A,D,W,B,G),F.base=d.__e,d.__u&=-161,F.__h.length&&D.push(F),rt&&(F.__E=F.__=null)}catch(on){d.__v=null,B||A!=null?(d.__e=W,d.__u|=B?160:32,A[A.indexOf(W)]=null):(d.__e=y.__e,d.__k=y.__k),v.__e(on,d,y)}else A==null&&d.__v===y.__v?(d.__k=y.__k,d.__e=y.__e):d.__e=Xt(y.__e,d,y,w,I,A,D,B,G);(de=v.diffed)&&de(d)}function Ct(h,d,y){d.__d=void 0;for(var w=0;w<y.length;w++)rn(y[w],y[++w],y[++w]);v.__c&&v.__c(d,h),h.some(function(I){try{h=I.__h,I.__h=[],h.some(function(A){A.call(I)})}catch(A){v.__e(A,I.__v)}})}function Xt(h,d,y,w,I,A,D,W,B){var G,de,F,nt,ue,qe,Ye,rt=y.props,it=d.props,Pe=d.type;if(Pe==="svg"&&(I=!0),A!=null){for(G=0;G<A.length;G++)if((ue=A[G])&&"setAttribute"in ue==!!Pe&&(Pe?ue.localName===Pe:ue.nodeType===3)){h=ue,A[G]=null;break}}if(h==null){if(Pe===null)return document.createTextNode(it);h=I?document.createElementNS("http://www.w3.org/2000/svg",Pe):document.createElement(Pe,it.is&&it),A=null,W=!1}if(Pe===null)rt===it||W&&h.data===it||(h.data=it);else{if(A=A&&m.call(h.childNodes),rt=y.props||fe,!W&&A!=null)for(rt={},G=0;G<h.attributes.length;G++)rt[(ue=h.attributes[G]).name]=ue.value;for(G in rt)ue=rt[G],G=="children"||(G=="dangerouslySetInnerHTML"?F=ue:G==="key"||G in it||nn(h,G,null,ue,I));for(G in it)ue=it[G],G=="children"?nt=ue:G=="dangerouslySetInnerHTML"?de=ue:G=="value"?qe=ue:G=="checked"?Ye=ue:G==="key"||W&&typeof ue!="function"||rt[G]===ue||nn(h,G,ue,rt[G],I);if(de)W||F&&(de.__html===F.__html||de.__html===h.innerHTML)||(h.innerHTML=de.__html),d.__k=[];else if(F&&(h.innerHTML=""),Lt(h,lt(nt)?nt:[nt],d,y,w,I&&Pe!=="foreignObject",A,D,A?A[0]:y.__k&&xt(y,0),W,B),A!=null)for(G=A.length;G--;)A[G]!=null&&Be(A[G]);W||(G="value",qe!==void 0&&(qe!==h[G]||Pe==="progress"&&!qe||Pe==="option"&&qe!==rt[G])&&nn(h,G,qe,rt[G],!1),G="checked",Ye!==void 0&&Ye!==h[G]&&nn(h,G,Ye,rt[G],!1))}return h}function rn(h,d,y){try{typeof h=="function"?h(d):h.current=d}catch(w){v.__e(w,y)}}function _n(h,d,y){var w,I;if(v.unmount&&v.unmount(h),(w=h.ref)&&(w.current&&w.current!==h.__e||rn(w,null,d)),(w=h.__c)!=null){if(w.componentWillUnmount)try{w.componentWillUnmount()}catch(A){v.__e(A,d)}w.base=w.__P=null,h.__c=void 0}if(w=h.__k)for(I=0;I<w.length;I++)w[I]&&_n(w[I],d,y||typeof h.type!="function");y||h.__e==null||Be(h.__e),h.__=h.__e=h.__d=void 0}function yn(h,d,y){return this.constructor(h,y)}function $(h,d,y){var w,I,A,D;v.__&&v.__(h,d),I=(w=typeof y=="function")?null:d.__k,A=[],D=[],St(d,h=d.__k=Ge(_t,null,[h]),I||fe,fe,d.ownerSVGElement!==void 0,I?null:d.firstChild?m.call(d.childNodes):null,A,I?I.__e:d.firstChild,w,D),Ct(A,h,D)}function P(h,d,y){var w,I,A,D,W=Ie({},h.props);for(A in h.type&&h.type.defaultProps&&(D=h.type.defaultProps),d)A=="key"?w=d[A]:A=="ref"?I=d[A]:W[A]=d[A]===void 0&&D!==void 0?D[A]:d[A];return arguments.length>2&&(W.children=arguments.length>3?m.call(arguments,2):y),tt(h.type,W,w||h.key,I||h.ref,null)}m=me.slice,v={__e:function(h,d,y,w){for(var I,A,D;d=d.__;)if((I=d.__c)&&!I.__)try{if((A=I.constructor)&&A.getDerivedStateFromError!=null&&(I.setState(A.getDerivedStateFromError(h)),D=I.__d),I.componentDidCatch!=null&&(I.componentDidCatch(h,w||{}),D=I.__d),D)return I.__E=I}catch(W){h=W}throw h}},k=0,Et.prototype.setState=function(h,d){var y;y=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ie({},this.state),typeof h=="function"&&(h=h(Ie({},y),this.props)),h&&Ie(y,h),h!=null&&this.__v&&(d&&this._sb.push(d),Pt(this))},Et.prototype.forceUpdate=function(h){this.__v&&(this.__e=!0,h&&this.__h.push(h),Pt(this))},Et.prototype.render=_t,C=[],O=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ne=function(h,d){return h.__v.__b-d.__v.__b},wt.__r=0,ee=0;var Z=u,J=b,se="seenSurvey_",He=h=>`
          .survey-form, .thank-you-message {
              position: fixed;
              margin: 0px;
              bottom: 0px;
              color: black;
              font-weight: normal;
              font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              text-align: left;
              max-width: `.concat(parseInt(h?.maxWidth||"300"),`px;
              width: 100%;
              z-index: `).concat(parseInt(h?.zIndex||"99999"),`;
              border: 1.5px solid `).concat(h?.borderColor||"#c9c6c6",`;
              border-bottom: 0px;
              `).concat({left:"left: 30px;",right:"right: 30px;",center:`
            left: 50%;
            transform: translateX(-50%);
          `}[h?.position||"right"]||"right: 30px;",`
              flex-direction: column;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
              border-top-left-radius: 10px;
              border-top-right-radius: 10px;
              box-shadow: -6px 0 16px -8px rgb(0 0 0 / 8%), -9px 0 28px 0 rgb(0 0 0 / 5%), -12px 0 48px 16px rgb(0 0 0 / 3%);
          }
          
          .survey-box, .thank-you-message-container {
              padding: 20px 25px 10px;
              display: flex;
              flex-direction: column;
              border-radius: 10px;
          }

          .thank-you-message {
              text-align: center;
          }

          .form-submit[disabled] {
              opacity: 0.6;
              filter: grayscale(50%);
              cursor: not-allowed;
          }
          .survey-form textarea {
              color: #2d2d2d;
              font-size: 14px;
              font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              background: white;
              color: black;
              outline: none;
              padding-left: 10px;
              padding-right: 10px;
              padding-top: 10px;
              border-radius: 6px;
              border-color: `).concat(h?.borderColor||"#c9c6c6",`;
              margin-top: 14px;
              width: 100%;
              box-sizing: border-box;
          }
          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) textarea {
              margin-top: 0;
          }
          .form-submit {
              box-sizing: border-box;
              margin: 0;
              font-family: inherit;
              overflow: visible;
              text-transform: none;
              position: relative;
              display: inline-block;
              font-weight: 700;
              white-space: nowrap;
              text-align: center;
              border: 1.5px solid transparent;
              cursor: pointer;
              user-select: none;
              touch-action: manipulation;
              padding: 12px;
              font-size: 14px;
              border-radius: 6px;
              outline: 0;
              background: `).concat(h?.submitButtonColor||"black",` !important;
              text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
              box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
              width: 100%;
          }
          .form-cancel {
              display: flex;
              float: right;
              border: none;
              background: none;
              cursor: pointer;
          }
          .cancel-btn-wrapper {
              position: absolute;
              width: 35px;
              height: 35px;
              border-radius: 100%;
              top: 0;
              right: 0;
              transform: translate(50%, -50%);
              background: white;
              border: 1.5px solid `).concat(h?.borderColor||"#c9c6c6",`;
              display: flex;
              justify-content: center;
              align-items: center;
          }
          .bolded { font-weight: 600; }
          .buttons {
              display: flex;
              justify-content: center;
          }
          .footer-branding {
              font-size: 11px;
              margin-top: 10px;
              text-align: center;
              display: flex;
              justify-content: center;
              gap: 4px;
              align-items: center;
              font-weight: 500;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
              text-decoration: none;
              backgroundColor: `).concat(h?.backgroundColor||"#eeeded",`;
              color: `).concat(ut(h?.backgroundColor||"#eeeded"),`;
          }
          .survey-question {
              font-weight: 500;
              font-size: 14px;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
          }
          .question-textarea-wrapper {
              display: flex;
              flex-direction: column;
          }
          .survey-question-description {
              font-size: 13px;
              padding-top: 5px;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
          }
          .ratings-number {
              font-size: 16px;
              font-weight: 600;
              padding: 8px 0px;
              border: none;
          }
          .ratings-number:hover {
              cursor: pointer;
          }
          .rating-options {
              margin-top: 14px;
          }
          .rating-options-number {
              display: grid;
              border-radius: 6px;
              overflow: hidden;
              border: 1.5px solid `).concat(h?.borderColor||"#c9c6c6",`;
          }
          .rating-options-number > .ratings-number {
              border-right: 1px solid `).concat(h?.borderColor||"#c9c6c6",`;
          }
          .rating-options-number > .ratings-number:last-of-type {
              border-right: 0px;
          }
          .rating-options-number .rating-active {
              background: `).concat(h?.ratingButtonActiveColor||"black",`;
          }
          .rating-options-emoji {
              display: flex;
              justify-content: space-between;
          }
          .ratings-emoji {
              font-size: 16px;
              background-color: transparent;
              border: none;
              padding: 0px;
          }
          .ratings-emoji:hover {
              cursor: pointer;
          }
          .ratings-emoji.rating-active svg {
              fill: `).concat(h?.ratingButtonActiveColor||"black",`;
          }
          .emoji-svg {
              fill: '#939393';
          }
          .rating-text {
              display: flex;
              flex-direction: row;
              font-size: 11px;
              justify-content: space-between;
              margin-top: 6px;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
              opacity: .60;
          }
          .multiple-choice-options {
              margin-top: 13px;
              font-size: 14px;
          }
          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) .multiple-choice-options {
              margin-top: 0;
          }
          .multiple-choice-options .choice-option {
              display: flex;
              align-items: center;
              gap: 4px;
              font-size: 13px;
              cursor: pointer;
              margin-bottom: 5px;
              position: relative;
          }
          .multiple-choice-options > .choice-option:last-of-type {
              margin-bottom: 0px;
          }
          .multiple-choice-options input {
              cursor: pointer;
              position: absolute;
              opacity: 0;
          }
          .choice-check {
              position: absolute;
              right: 10px;
              background: white;
          }
          .choice-check svg {
              display: none;
          }
          .multiple-choice-options .choice-option:hover .choice-check svg {
              display: inline-block;
              opacity: .25;
          }
          .multiple-choice-options input:checked + label + .choice-check svg {
              display: inline-block;
              opacity: 100% !important;
          }
          .multiple-choice-options input:checked + label {
              font-weight: bold;
              border: 1.5px solid rgba(0,0,0);
          }
          .multiple-choice-options input:checked + label input {
              font-weight: bold;
          }
          .multiple-choice-options label {
              width: 100%;
              cursor: pointer;
              padding: 10px;
              border: 1.5px solid rgba(0,0,0,.25);
              border-radius: 4px;
              background: white;
          }
          .multiple-choice-options .choice-option-open label {
              padding-right: 30px;
              display: flex;
              flex-wrap: wrap;
              gap: 8px;
              max-width: 100%;
          }
          .multiple-choice-options .choice-option-open label span {
              width: 100%;
          }
          .multiple-choice-options .choice-option-open input:disabled + label {
              opacity: 0.6;
          }
          .multiple-choice-options .choice-option-open label input {
              position: relative;
              opacity: 1;
              flex-grow: 1;
              border: 0;
              outline: 0;
          }
          .thank-you-message-body {
              margin-top: 6px;
              font-size: 14px;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
          }
          .thank-you-message-header {
              margin: 10px 0px 0px;
              background: `).concat(h?.backgroundColor||"#eeeded",`;
          }
          .thank-you-message-container .form-submit {
              margin-top: 20px;
              margin-bottom: 10px;
          }
          .thank-you-message-countdown {
              margin-left: 6px;
          }
          .bottom-section {
              margin-top: 14px;
          }
          `);function Ee(h){if(h[0]==="#"){var d=h.replace(/^#/,"");return"rgb("+parseInt(d.slice(0,2),16)+","+parseInt(d.slice(2,4),16)+","+parseInt(d.slice(4,6),16)+")"}return"rgb(255, 255, 255)"}function ut(){var h,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rt;d[0]==="#"&&(h=Ee(d)),d.startsWith("rgb")&&(h=d);var y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[d.toLowerCase()];if(y&&(h=Ee(y)),!h)return"black";var w=h.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(w){var I=parseInt(w[1]),A=parseInt(w[2]),D=parseInt(w[3]);return Math.sqrt(I*I*.299+A*A*.587+D*D*.114)>127.5?"black":"white"}return"black"}var Ue={backgroundColor:"#eeeded",submitButtonColor:"black",submitButtonTextColor:"white",ratingButtonColor:"white",ratingButtonActiveColor:"black",borderColor:"#c9c6c6",placeholder:"Start typing...",whiteLabel:!1,displayThankYouMessage:!0,thankYouMessageHeader:"Thank you for your feedback!",position:"right"},Rt="#eeeded",L=function(){var h,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=arguments.length>1?arguments[1]:void 0,w=arguments.length>2?arguments[2]:void 0;w&&(localStorage.setItem(we(y),"true"),w.capture("survey sent",e(e({$survey_name:y.name,$survey_id:y.id,$survey_iteration:y.current_iteration,$survey_iteration_start_date:y.current_iteration_start_date,$survey_questions:y.questions.map(I=>I.question),sessionRecordingUrl:(h=w.get_session_replay_url)===null||h===void 0?void 0:h.call(w)},d),{},{$set:{[Oe(y,"responded")]:!0}})),Z.dispatchEvent(new Event("PHSurveySent")))},ae=(h,d,y)=>{var w;!y&&d&&(d.capture("survey dismissed",{$survey_name:h.name,$survey_id:h.id,$survey_iteration:h.current_iteration,$survey_iteration_start_date:h.current_iteration_start_date,sessionRecordingUrl:(w=d.get_session_replay_url)===null||w===void 0?void 0:w.call(d),$set:{[Oe(h,"dismissed")]:!0}}),localStorage.setItem(we(h),"true"),Z.dispatchEvent(new Event("PHSurveyClosed")))},U=h=>h.map(d=>({sort:Math.floor(10*Math.random()),value:d})).sort((d,y)=>d.sort-y.sort).map(d=>d.value),te=(h,d)=>h.length===d.length&&h.every((y,w)=>y===d[w])?d.reverse():d,Q=h=>(h.questions.forEach((d,y)=>{d.originalQuestionIndex=y}),h.appearance&&h.appearance.shuffleQuestions?te(h.questions,U(h.questions)):h.questions),be=h=>{var d,y;return!((d=h.conditions)===null||d===void 0||(y=d.events)===null||y===void 0||!y.repeatedActivation||!(w=>{var I,A,D,W,B,G;return((I=w.conditions)===null||I===void 0||(A=I.events)===null||A===void 0||(D=A.values)===null||D===void 0?void 0:D.length)!=null&&((W=w.conditions)===null||W===void 0||(B=W.events)===null||B===void 0||(G=B.values)===null||G===void 0?void 0:G.length)>0})(h))},we=h=>{var d="".concat(se).concat(h.id);return h.current_iteration&&h.current_iteration>0&&(d="".concat(se).concat(h.id,"_").concat(h.current_iteration)),d},Oe=(h,d)=>{var y="$survey_".concat(d,"/").concat(h.id);return h.current_iteration&&h.current_iteration>0&&(y="$survey_".concat(d,"/").concat(h.id,"/").concat(h.current_iteration)),y},We=function(h,d){var y={__c:d="__cC"+ee++,__:h,Consumer:function(w,I){return w.children(I)},Provider:function(w){var I,A;return this.getChildContext||(I=[],(A={})[d]=this,this.getChildContext=function(){return A},this.shouldComponentUpdate=function(D){this.props.value!==D.value&&I.some(function(W){W.__e=!0,Pt(W)})},this.sub=function(D){I.push(D);var W=D.componentWillUnmount;D.componentWillUnmount=function(){I.splice(I.indexOf(D),1),W&&W.call(D)}}),w.children}};return y.Provider.__=y.Consumer.contextType=y}({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0}),yt=h=>{var{component:d,children:y,renderAsHtml:w,style:I}=h;return P(d,w?{dangerouslySetInnerHTML:{__html:y},style:I}:{children:y,style:I})},ht=b,bt,pt,Nn,Ze,Dt=0,ln=[],Yn=[],ar=v.__b,Sr=v.__r,Xn=v.diffed,Cr=v.__c,di=v.unmount;function Ir(h,d){v.__h&&v.__h(pt,h,Dt||d),Dt=0;var y=pt.__H||(pt.__H={__:[],__h:[]});return h>=y.__.length&&y.__.push({__V:Yn}),y.__[h]}function dn(h){return Dt=1,function(d,y,w){var I=Ir(bt++,2);if(I.t=d,!I.__c&&(I.__=[vi(void 0,y),function(B){var G=I.__N?I.__N[0]:I.__[0],de=I.t(G,B);G!==de&&(I.__N=[de,I.__[1]],I.__c.setState({}))}],I.__c=pt,!pt.u)){var A=function(B,G,de){if(!I.__c.__H)return!0;var F=I.__c.__H.__.filter(function(ue){return ue.__c});if(F.every(function(ue){return!ue.__N}))return!D||D.call(this,B,G,de);var nt=!1;return F.forEach(function(ue){if(ue.__N){var qe=ue.__[0];ue.__=ue.__N,ue.__N=void 0,qe!==ue.__[0]&&(nt=!0)}}),!(!nt&&I.__c.props===B)&&(!D||D.call(this,B,G,de))};pt.u=!0;var D=pt.shouldComponentUpdate,W=pt.componentWillUpdate;pt.componentWillUpdate=function(B,G,de){if(this.__e){var F=D;D=void 0,A(B,G,de),D=F}W&&W.call(this,B,G,de)},pt.shouldComponentUpdate=A}return I.__N||I.__}(vi,h)}function kr(h,d){var y=Ir(bt++,3);!v.__s&&ji(y.__H,d)&&(y.__=h,y.i=d,pt.__H.__h.push(y))}function Gt(h){return Dt=5,Er(function(){return{current:h}},[])}function Er(h,d){var y=Ir(bt++,7);return ji(y.__H,d)?(y.__V=h(),y.i=d,y.__h=h,y.__V):y.__}function lr(h){var d=pt.context[h.__c],y=Ir(bt++,9);return y.c=h,d?(y.__==null&&(y.__=!0,d.sub(pt)),d.props.value):h.__}function hi(){for(var h;h=ln.shift();)if(h.__P&&h.__H)try{h.__H.__h.forEach(Wr),h.__H.__h.forEach(jr),h.__H.__h=[]}catch(d){h.__H.__h=[],v.__e(d,h.__v)}}v.__b=function(h){pt=null,ar&&ar(h)},v.__r=function(h){Sr&&Sr(h),bt=0;var d=(pt=h.__c).__H;d&&(Nn===pt?(d.__h=[],pt.__h=[],d.__.forEach(function(y){y.__N&&(y.__=y.__N),y.__V=Yn,y.__N=y.i=void 0})):(d.__h.forEach(Wr),d.__h.forEach(jr),d.__h=[],bt=0)),Nn=pt},v.diffed=function(h){Xn&&Xn(h);var d=h.__c;d&&d.__H&&(d.__H.__h.length&&(ln.push(d)!==1&&Ze===v.requestAnimationFrame||((Ze=v.requestAnimationFrame)||fi)(hi)),d.__H.__.forEach(function(y){y.i&&(y.__H=y.i),y.__V!==Yn&&(y.__=y.__V),y.i=void 0,y.__V=Yn})),Nn=pt=null},v.__c=function(h,d){d.some(function(y){try{y.__h.forEach(Wr),y.__h=y.__h.filter(function(w){return!w.__||jr(w)})}catch(w){d.some(function(I){I.__h&&(I.__h=[])}),d=[],v.__e(w,y.__v)}}),Cr&&Cr(h,d)},v.unmount=function(h){di&&di(h);var d,y=h.__c;y&&y.__H&&(y.__H.__.forEach(function(w){try{Wr(w)}catch(I){d=I}}),y.__H=void 0,d&&v.__e(d,y.__v))};var pi,gi=typeof requestAnimationFrame=="function";function fi(h){var d,y=function(){clearTimeout(w),gi&&cancelAnimationFrame(d),setTimeout(h)},w=setTimeout(y,100);gi&&(d=requestAnimationFrame(y))}function Wr(h){var d=pt,y=h.__c;typeof y=="function"&&(h.__c=void 0,y()),pt=d}function jr(h){var d=pt;h.__c=h.__(),pt=d}function ji(h,d){return!h||h.length!==d.length||d.some(function(y,w){return y!==h[w]})}function vi(h,d){return typeof d=="function"?d(h):d}(function(h){h.GZipJS="gzip-js",h.Base64="base64"})(pi||(pi={}));var gt=Array.isArray,st=Object.prototype.toString,Zt=gt||function(h){return st.call(h)==="[object Array]"},bn=h=>h===null,ur=h=>st.call(h)=="[object Number]",cr=0;function Y(h,d,y,w,I,A){var D,W,B={};for(W in d)W=="ref"?D=d[W]:B[W]=d[W];var G={type:h,props:B,key:y,ref:D,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--cr,__i:-1,__u:0,__source:I,__self:A};if(typeof h=="function"&&(D=h.defaultProps))for(W in D)B[W]===void 0&&(B[W]=D[W]);return v.vnode&&v.vnode(G),G}var Vi=Y("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Y("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),dr=Y("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Y("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),mi=Y("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Y("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Vo=Y("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Y("path",{d:"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z"})}),_i=Y("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Y("path",{d:"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Ui=Y("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z",fill:"black"})}),Gi=Y("svg",{width:"77",height:"14",viewBox:"0 0 77 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Y("g",{"clip-path":"url(#clip0_2415_6911)",children:[Y("mask",{id:"mask0_2415_6911",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"77",height:"14",children:Y("path",{d:"M0.5 0H76.5V14H0.5V0Z",fill:"white"})}),Y("g",{mask:"url(#mask0_2415_6911)",children:[Y("path",{d:"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z",fill:"#1D4AFF"}),Y("path",{d:"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z",fill:"#F9BD2B"}),Y("path",{d:"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z",fill:"currentColor"}),Y("path",{d:"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z",fill:"#1D4AFF"}),Y("path",{d:"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z",fill:"#F54E00"}),Y("path",{d:"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z",fill:"currentColor"})]})]}),Y("defs",{children:Y("clipPath",{id:"clip0_2415_6911",children:Y("rect",{width:"76",height:"14",fill:"white",transform:"translate(0.5)"})})})]}),Zi=Y("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Y("path",{d:"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z",fill:"currentColor"})});function ct(){return Y("a",{href:"https://posthog.com",target:"_blank",rel:"noopener",className:"footer-branding",children:["Survey by ",Gi]})}function xn(h){var{text:d,submitDisabled:y,appearance:w,onSubmit:I,link:A}=h,{isPreviewMode:D,isPopup:W}=lr(We),B=w.submitButtonTextColor||ut(w.submitButtonColor||Ue.submitButtonColor);return Y("div",{className:"bottom-section",children:[Y("div",{className:"buttons",children:Y("button",{className:"form-submit",disabled:y&&!D,type:"button",style:W?{color:B}:{},onClick:()=>{D||(A&&u?.open(A),I())},children:d})}),!w.whiteLabel&&Y(ct,{})]})}function Vn(h){var{question:d,description:y,descriptionContentType:w,backgroundColor:I,forceDisableHtml:A}=h,{isPopup:D}=lr(We);return Y("div",{style:D?{backgroundColor:I||Ue.backgroundColor}:{},children:[Y("div",{className:"survey-question",children:d}),y&&yt({component:Ge("div",{className:"survey-question-description"}),children:y,renderAsHtml:!A&&w!=="text"})]})}function yi(h){var{onClick:d}=h,{isPreviewMode:y}=lr(We);return Y("div",{className:"cancel-btn-wrapper",onClick:d,disabled:y,children:Y("button",{className:"form-cancel",onClick:d,disabled:y,children:Ui})})}function Uo(h){var{header:d,description:y,contentType:w,forceDisableHtml:I,appearance:A,onClose:D,styleOverrides:W}=h,B=ut(A.backgroundColor||Ue.backgroundColor),{isPopup:G}=lr(We);return Y(_t,{children:Y("div",{className:"thank-you-message",style:e({},W),children:Y("div",{className:"thank-you-message-container",children:[G&&Y(yi,{onClick:()=>D()}),Y("h3",{className:"thank-you-message-header",style:{color:B},children:d}),y&&yt({component:Ge("div",{className:"thank-you-message-body"}),children:y,renderAsHtml:!I&&w!=="text",style:{color:B}}),G&&Y(xn,{text:A.thankYouMessageCloseButtonText||"Close",submitDisabled:!1,appearance:A,onSubmit:()=>D()})]})})})}function zi(h){var d,y=Gt(null),[w,I]=dn((d=h.defaultTextColor)!==null&&d!==void 0?d:"black");return kr(()=>{if(y.current){var A=function(D){var W=Z.getComputedStyle(D).backgroundColor;if(W==="rgba(0, 0, 0, 0)")return"black";var B=W.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(!B)return"black";var G=parseInt(B[1]),de=parseInt(B[2]),F=parseInt(B[3]);return Math.sqrt(G*G*.299+de*de*.587+F*F*.114)>127.5?"black":"white"}(y.current);I(A)}},[h.appearance,h.forceUpdate]),{ref:y,textColor:w}}function Go(h){var{question:d,forceDisableHtml:y,appearance:w,onSubmit:I}=h,A=Gt(null),[D,W]=dn("");return Y("div",{ref:A,children:[Y(Vn,{question:d.question,description:d.description,descriptionContentType:d.descriptionContentType,backgroundColor:w.backgroundColor,forceDisableHtml:y}),Y("textarea",{rows:4,placeholder:w?.placeholder,onInput:B=>W(B.currentTarget.value)}),Y(xn,{text:d.buttonText||"Submit",submitDisabled:!D&&!d.optional,appearance:w,onSubmit:()=>I(D)})]})}function Yi(h){var{question:d,forceDisableHtml:y,appearance:w,onSubmit:I}=h;return Y(_t,{children:[Y(Vn,{question:d.question,description:d.description,descriptionContentType:d.descriptionContentType,forceDisableHtml:y}),Y(xn,{text:d.buttonText||"Submit",submitDisabled:!1,link:d.link,appearance:w,onSubmit:()=>I("link clicked")})]})}function Vr(h){var{question:d,forceDisableHtml:y,displayQuestionIndex:w,appearance:I,onSubmit:A}=h,D=d.scale,W=d.scale===10?0:1,[B,G]=dn(null);return Y(_t,{children:[Y(Vn,{question:d.question,description:d.description,descriptionContentType:d.descriptionContentType,forceDisableHtml:y,backgroundColor:I.backgroundColor}),Y("div",{className:"rating-section",children:[Y("div",{className:"rating-options",children:[d.display==="emoji"&&Y("div",{className:"rating-options-emoji",children:(d.scale===3?Zo:Ur).map((de,F)=>{var nt=F+1===B;return Y("button",{className:"ratings-emoji question-".concat(w,"-rating-").concat(F," ").concat(nt?"rating-active":null),value:F+1,type:"button",onClick:()=>{G(F+1)},style:{fill:nt?I.ratingButtonActiveColor:I.ratingButtonColor,borderColor:I.borderColor},children:de},F)})}),d.display==="number"&&Y("div",{className:"rating-options-number",style:{gridTemplateColumns:"repeat(".concat(D-W+1,", minmax(0, 1fr))")},children:Yo(d.scale).map((de,F)=>Y(Un,{displayQuestionIndex:w,active:B===de,appearance:I,num:de,setActiveNumber:nt=>{G(nt)}},F))})]}),Y("div",{className:"rating-text",children:[Y("div",{children:d.lowerBoundLabel}),Y("div",{children:d.upperBoundLabel})]})]}),Y(xn,{text:d.buttonText||I?.submitButtonText||"Submit",submitDisabled:bn(B)&&!d.optional,appearance:I,onSubmit:()=>A(B)})]})}function Un(h){var{num:d,active:y,displayQuestionIndex:w,appearance:I,setActiveNumber:A}=h,{textColor:D,ref:W}=zi({appearance:I,defaultTextColor:"black",forceUpdate:y});return Y("button",{ref:W,className:"ratings-number question-".concat(w,"-rating-").concat(d," ").concat(y?"rating-active":null),type:"button",onClick:()=>{A(d)},style:{color:D,backgroundColor:y?I.ratingButtonActiveColor:I.ratingButtonColor,borderColor:I.borderColor},children:d})}function bi(h){var{question:d,forceDisableHtml:y,displayQuestionIndex:w,appearance:I,onSubmit:A}=h,D=Gt(null),W=Er(()=>(Ye=>{if(!Ye.shuffleOptions)return Ye.choices;var rt=Ye.choices,it="";Ye.hasOpenChoice&&(it=rt.pop());var Pe=te(rt,U(rt));return Ye.hasOpenChoice&&(Ye.choices.push(it),Pe.push(it)),Pe})(d),[d]),[B,G]=dn(d.type===o.MultipleChoice?[]:null),[de,F]=dn(!1),[nt,ue]=dn(""),qe=d.type===o.SingleChoice?"radio":"checkbox";return Y("div",{ref:D,children:[Y(Vn,{question:d.question,description:d.description,descriptionContentType:d.descriptionContentType,forceDisableHtml:y,backgroundColor:I.backgroundColor}),Y("div",{className:"multiple-choice-options",children:W.map((Ye,rt)=>{var it="choice-option",Pe=Ye,Bt=Ye;return d.hasOpenChoice&&rt===d.choices.length-1&&(it+=" choice-option-open"),Y("div",{className:it,children:[Y("input",{type:qe,id:"surveyQuestion".concat(w,"Choice").concat(rt),name:"question".concat(w),value:Pe,disabled:!Pe,onInput:()=>d.hasOpenChoice&&rt===d.choices.length-1?F(!de):d.type===o.SingleChoice?G(Pe):d.type===o.MultipleChoice&&Zt(B)?B.includes(Pe)?G(B.filter(Nt=>Nt!==Pe)):G([...B,Pe]):void 0}),Y("label",{htmlFor:"surveyQuestion".concat(w,"Choice").concat(rt),style:{color:"black"},children:d.hasOpenChoice&&rt===d.choices.length-1?Y(_t,{children:[Y("span",{children:[Bt,":"]}),Y("input",{type:"text",id:"surveyQuestion".concat(w,"Choice").concat(rt,"Open"),name:"question".concat(w),onInput:Nt=>{var dt=Nt.currentTarget.value;return d.type===o.SingleChoice?G(dt):d.type===o.MultipleChoice&&Zt(B)?ue(dt):void 0}})]}):Bt}),Y("span",{className:"choice-check",style:{color:"black"},children:Zi})]})})}),Y(xn,{text:d.buttonText||"Submit",submitDisabled:(bn(B)||Zt(B)&&!de&&B.length===0||Zt(B)&&de&&!nt&&B.length===0&&!d.optional)&&!d.optional,appearance:I,onSubmit:()=>{de&&d.type===o.MultipleChoice?Zt(B)&&A([...B,nt]):A(B)}})]})}var Zo=[mi,dr,Vi],Ur=[Vo,mi,dr,Vi,_i],Gr=[1,2,3,4,5],Xi=[1,2,3,4,5,6,7],zo=[0,1,2,3,4,5,6,7,8,9,10];function Yo(h){switch(h){case 5:default:return Gr;case 7:return Xi;case 10:return zo}}var hr=h=>{var d={_log:function(y){if(u&&z.POSTHOG_DEBUG&&!(W=>W===void 0)(u.console)&&u.console){for(var w=("__rrweb_original__"in u.console[y])?u.console[y].__rrweb_original__:u.console[y],I=arguments.length,A=new Array(I>1?I-1:0),D=1;D<I;D++)A[D-1]=arguments[D];w(h,...A)}},info:function(){for(var y=arguments.length,w=new Array(y),I=0;I<y;I++)w[I]=arguments[I];d._log("log",...w)},warn:function(){for(var y=arguments.length,w=new Array(y),I=0;I<y;I++)w[I]=arguments[I];d._log("warn",...w)},error:function(){for(var y=arguments.length,w=new Array(y),I=0;I<y;I++)w[I]=arguments[I];d._log("error",...w)},critical:function(){for(var y=arguments.length,w=new Array(y),I=0;I<y;I++)w[I]=arguments[I];console.error(h,...w)},uninitializedWarning:y=>{d.error("You must initialize PostHog before calling ".concat(y))},createLogger:y=>hr("".concat(h," ").concat(y))};return d},Ji=(0,hr("[PostHog.js]").createLogger)("[Surveys]"),Tn=u,On=b;class Ki{constructor(d){var y=this;t(this,"canShowNextEventBasedSurvey",()=>{var w,I=On.querySelectorAll("div[class^=PostHogSurvey]");return!(I.length>0)||((w=I[I.length-1].shadowRoot)===null||w===void 0?void 0:w.childElementCount)===1}),t(this,"handlePopoverSurvey",w=>{var I,A=(I=w.conditions)===null||I===void 0?void 0:I.seenSurveyWaitPeriodInDays,D=localStorage.getItem("lastSeenSurveyDate");if(A&&D){var W=new Date,B=Math.abs(W.getTime()-new Date(D).getTime());if(Math.ceil(B/864e5)<A)return}var G=(F=>!!localStorage.getItem(we(F))&&!be(F))(w);if(!G){this.addSurveyToFocus(w.id);var de=((F,nt,ue)=>{var qe=J.createElement("div");qe.className="PostHogSurvey".concat(nt);var Ye=qe.attachShadow({mode:"open"});if(F){var rt=Object.assign(J.createElement("style"),{innerText:F});Ye.appendChild(rt)}return J.body.appendChild(qe),Ye})(He(w?.appearance),w.id);$(Y(Zr,{posthog:this.posthog,survey:w,removeSurveyFromFocus:this.removeSurveyFromFocus,isPopup:!0},"popover-survey"),de)}}),t(this,"handleWidget",w=>{var I=function(D){var W,B=ht.createElement("div");B.className="PostHogWidget".concat(D.id);var G,de=B.attachShadow({mode:"open"}),F=(G=(W=D.appearance)===null||W===void 0?void 0:W.widgetColor,`
        .ph-survey-widget-tab {
            position: fixed;
            top: 50%;
            right: 0;
            background: `.concat(G||"#e0a045",`;
            color: white;
            transform: rotate(-90deg) translate(0, -100%);
            transform-origin: right top;
            min-width: 40px;
            padding: 8px 12px;
            font-weight: 500;
            border-radius: 3px 3px 0 0;
            text-align: center;
            cursor: pointer;
            z-index: 9999999;
        }
        .ph-survey-widget-tab:hover {
            padding-bottom: 13px;
        }
        .ph-survey-widget-button {
            position: fixed;
        }
    `));return de.append(Object.assign(ht.createElement("style"),{innerText:F})),ht.body.appendChild(B),de}(w),A=He(w.appearance);I.appendChild(Object.assign(On.createElement("style"),{innerText:A})),$(Y(eo,{posthog:this.posthog,survey:w,removeSurveyFromFocus:this.removeSurveyFromFocus},"feedback-survey"),I)}),t(this,"handleWidgetSelector",w=>{var I,A=((I=w.appearance)===null||I===void 0?void 0:I.widgetSelector)&&On.querySelector(w.appearance.widgetSelector);if(A){if(On.querySelectorAll(".PostHogWidget".concat(w.id)).length===0)this.handleWidget(w);else if(On.querySelectorAll(".PostHogWidget".concat(w.id)).length===1&&!A.getAttribute("PHWidgetSurveyClickListener")){var D,W,B=(D=On.querySelector(".PostHogWidget".concat(w.id)))===null||D===void 0||(W=D.shadowRoot)===null||W===void 0?void 0:W.querySelector(".survey-form");A.addEventListener("click",()=>{B&&(B.style.display=B.style.display==="none"?"block":"none",B.addEventListener("PHSurveyClosed",()=>{this.removeSurveyFromFocus(w.id),B.style.display="none"}))}),A.setAttribute("PHWidgetSurveyClickListener","true")}}}),t(this,"canRenderSurvey",w=>{var I={visible:!1};return w.end_date?(I.disabledReason="survey was completed on ".concat(w.end_date),I):w.type!=n.Popover?(I.disabledReason="Only Popover survey types can be rendered",I):!w.linked_flag_key||this.posthog.featureFlags.isFeatureEnabled(w.linked_flag_key)?!w.targeting_flag_key||this.posthog.featureFlags.isFeatureEnabled(w.targeting_flag_key)?!w.internal_targeting_flag_key||this.posthog.featureFlags.isFeatureEnabled(w.internal_targeting_flag_key)?(I.visible=!0,I):(I.disabledReason="internal targeting feature flag ".concat(w.internal_targeting_flag_key," is false"),I):(I.disabledReason="targeting feature flag ".concat(w.targeting_flag_key," is false"),I):(I.disabledReason="linked feature flag ".concat(w.linked_flag_key," is false"),I)}),t(this,"renderSurvey",(w,I)=>{$(Y(Zr,{posthog:this.posthog,survey:w,removeSurveyFromFocus:this.removeSurveyFromFocus,isPopup:!1},"popover-survey"),I)}),t(this,"callSurveysAndEvaluateDisplayLogic",function(){var w,I=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(w=y.posthog)===null||w===void 0||w.getActiveMatchingSurveys(A=>{var D=A.filter(W=>W.type!=="api");y.sortSurveysByAppearanceDelay(D).forEach(W=>{if(bn(y.surveyInFocus)){var B,G,de;W.type===n.Widget&&(((B=W.appearance)===null||B===void 0?void 0:B.widgetType)==="tab"&&On.querySelectorAll(".PostHogWidget".concat(W.id)).length===0&&y.handleWidget(W),((G=W.appearance)===null||G===void 0?void 0:G.widgetType)==="selector"&&(de=W.appearance)!==null&&de!==void 0&&de.widgetSelector&&y.handleWidgetSelector(W)),W.type===n.Popover&&y.canShowNextEventBasedSurvey()&&y.handlePopoverSurvey(W)}})},I)}),t(this,"addSurveyToFocus",w=>{bn(this.surveyInFocus)||Ji.error("Survey ".concat([...this.surveyInFocus]," already in focus. Cannot add survey ").concat(w,".")),this.surveyInFocus=w}),t(this,"removeSurveyFromFocus",w=>{this.surveyInFocus!==w&&Ji.error("Survey ".concat(w," is not in focus. Cannot remove survey ").concat(w,".")),this.surveyInFocus=null}),this.posthog=d,this.surveyInFocus=null}sortSurveysByAppearanceDelay(d){return d.sort((y,w)=>{var I,A;return(((I=y.appearance)===null||I===void 0?void 0:I.surveyPopupDelaySeconds)||0)-(((A=w.appearance)===null||A===void 0?void 0:A.surveyPopupDelaySeconds)||0)})}getTestAPI(){return{addSurveyToFocus:this.addSurveyToFocus,removeSurveyFromFocus:this.removeSurveyFromFocus,surveyInFocus:this.surveyInFocus,canShowNextEventBasedSurvey:this.canShowNextEventBasedSurvey,handleWidget:this.handleWidget,handlePopoverSurvey:this.handlePopoverSurvey,handleWidgetSelector:this.handleWidgetSelector,sortSurveysByAppearanceDelay:this.sortSurveysByAppearanceDelay}}}function xr(h){if(On&&Tn){var d=new Ki(h);return d.callSurveysAndEvaluateDisplayLogic(!0),setInterval(()=>{d.callSurveysAndEvaluateDisplayLogic(!1)},1e3),d}}function Zr(h){var d,y,w,I,A,D,{survey:W,forceDisableHtml:B,posthog:G,style:de,previewPageIndex:F,removeSurveyFromFocus:nt,isPopup:ue}=h,qe=Number.isInteger(F),Ye=(d=W.appearance)!==null&&d!==void 0&&d.surveyPopupDelaySeconds?1e3*W.appearance.surveyPopupDelaySeconds:0,{isPopupVisible:rt,isSurveySent:it,setIsPopupVisible:Pe}=function(dt,Xe,ft,Ht,ot){var[on,hn]=dn(Ht||ft===0),[un,Mn]=dn(!1);return kr(()=>{if(!Ht&&Xe){var wi,pr=()=>{ot(dt.id),hn(!1)},Si=()=>{var Hn,Yr;(Hn=dt.appearance)!==null&&Hn!==void 0&&Hn.displayThankYouMessage?(Mn(!0),ot(dt.id),(Yr=dt.appearance)!==null&&Yr!==void 0&&Yr.autoDisappear&&setTimeout(()=>{hn(!1)},5e3)):(ot(dt.id),hn(!1))},zr=()=>{var Hn;hn(!0),Tn.dispatchEvent(new Event("PHSurveyShown")),Xe.capture("survey shown",{$survey_name:dt.name,$survey_id:dt.id,$survey_iteration:dt.current_iteration,$survey_iteration_start_date:dt.current_iteration_start_date,sessionRecordingUrl:(Hn=Xe.get_session_replay_url)===null||Hn===void 0?void 0:Hn.call(Xe)}),localStorage.setItem("lastSeenSurveyDate",new Date().toISOString())};return Tn.addEventListener("PHSurveyClosed",pr),Tn.addEventListener("PHSurveySent",Si),ft>0?(wi=setTimeout(()=>{zr()},ft),()=>{clearTimeout(wi),Tn.removeEventListener("PHSurveyClosed",pr),Tn.removeEventListener("PHSurveySent",Si)}):(zr(),()=>{Tn.removeEventListener("PHSurveyClosed",pr),Tn.removeEventListener("PHSurveySent",Si)})}},[]),{isPopupVisible:on,isSurveySent:un,setIsPopupVisible:hn}}(W,G,Ye,qe,nt),Bt=it||F===W.questions.length,Nt=(y=de)!==null&&y!==void 0&&y.left&&ur((w=de)===null||w===void 0?void 0:w.left)?{left:de.left-40}:{};return qe&&((de=de||{}).left="unset",de.right="unset",de.transform="unset"),rt?Y(We.Provider,{value:{isPreviewMode:qe,previewPageIndex:F,handleCloseSurveyPopup:()=>ae(W,G,qe),isPopup:ue||!1},children:Bt?Y(Uo,{header:((I=W.appearance)===null||I===void 0?void 0:I.thankYouMessageHeader)||"Thank you!",description:((A=W.appearance)===null||A===void 0?void 0:A.thankYouMessageDescription)||"",forceDisableHtml:!!B,contentType:(D=W.appearance)===null||D===void 0?void 0:D.thankYouMessageDescriptionContentType,appearance:W.appearance||Ue,styleOverrides:e(e({},de),Nt),onClose:()=>Pe(!1)}):Y(Qi,{survey:W,forceDisableHtml:!!B,posthog:G,styleOverrides:de})}):Y(_t,{})}function Qi(h){var d,y,{survey:w,forceDisableHtml:I,posthog:A,styleOverrides:D}=h,W=ut(((d=w.appearance)===null||d===void 0?void 0:d.backgroundColor)||Ue.backgroundColor),[B,G]=dn({}),{isPreviewMode:de,previewPageIndex:F,handleCloseSurveyPopup:nt,isPopup:ue}=lr(We),[qe,Ye]=dn(F||0),rt=Er(()=>Q(w),[w]);return kr(()=>{Ye(F??0)},[F]),Y("form",{className:"survey-form",style:ue?e({color:W,borderColor:(y=w.appearance)===null||y===void 0?void 0:y.borderColor},D):{},children:rt.map((it,Pe)=>{var Bt,{originalQuestionIndex:Nt}=it;return(de?qe===Nt:qe===Pe)&&Y("div",{className:"survey-box",style:ue?{backgroundColor:((Bt=w.appearance)===null||Bt===void 0?void 0:Bt.backgroundColor)||Ue.backgroundColor}:{},children:[ue&&Y(yi,{onClick:()=>nt()}),to({question:it,forceDisableHtml:I,displayQuestionIndex:Pe,appearance:w.appearance||Ue,onSubmit:dt=>(Xe=>{var{res:ft,originalQuestionIndex:Ht,displayQuestionIndex:ot}=Xe;if(A){var on=Ht===0?"$survey_response":"$survey_response_".concat(Ht);if(G(e(e({},B),{},{[on]:ft})),A.getNextSurveyStep){var hn=A.getNextSurveyStep(w,ot,ft);hn===a.End?L(e(e({},B),{},{[on]:ft}),w,A):Ye(hn)}else ot===w.questions.length-1?L(e(e({},B),{},{[on]:ft}),w,A):Ye(ot+1)}})({res:dt,originalQuestionIndex:Nt,displayQuestionIndex:Pe})})]})})})}function eo(h){var d,y,{survey:w,forceDisableHtml:I,posthog:A,readOnly:D,removeSurveyFromFocus:W}=h,[B,G]=dn(!1),[de,F]=dn({}),nt=Gt(null);return kr(()=>{var ue,qe;if(!D&&A){if(((ue=w.appearance)===null||ue===void 0?void 0:ue.widgetType)==="tab"&&nt.current){var Ye,rt=nt.current.getBoundingClientRect(),it={top:"50%",left:parseInt("".concat(rt.right-360)),bottom:"auto",borderRadius:10,borderBottom:"1.5px solid ".concat(((Ye=w.appearance)===null||Ye===void 0?void 0:Ye.borderColor)||"#c9c6c6")};F(it)}if(((qe=w.appearance)===null||qe===void 0?void 0:qe.widgetType)==="selector"){var Pe=On.querySelector(w.appearance.widgetSelector||"");Pe?.addEventListener("click",()=>{G(!B)}),Pe?.setAttribute("PHWidgetSurveyClickListener","true")}}},[]),Y(_t,{children:[((d=w.appearance)===null||d===void 0?void 0:d.widgetType)==="tab"&&Y("div",{className:"ph-survey-widget-tab",ref:nt,onClick:()=>!D&&G(!B),style:{color:ut(w.appearance.widgetColor)},children:[Y("div",{className:"ph-survey-widget-tab-icon"}),((y=w.appearance)===null||y===void 0?void 0:y.widgetLabel)||""]}),B&&Y(Zr,{posthog:A,survey:w,forceDisableHtml:I,style:de,removeSurveyFromFocus:W,isPopup:!0},"feedback-widget-survey")]})}var to=h=>{var{question:d,forceDisableHtml:y,displayQuestionIndex:w,appearance:I,onSubmit:A}=h,D={[o.Open]:Go,[o.Link]:Yi,[o.Rating]:Vr,[o.SingleChoice]:bi,[o.MultipleChoice]:bi},W={question:d,forceDisableHtml:y,appearance:I,onSubmit:A},B={[o.Open]:{},[o.Link]:{},[o.Rating]:{displayQuestionIndex:w},[o.SingleChoice]:{displayQuestionIndex:w},[o.MultipleChoice]:{displayQuestionIndex:w}},G=D[d.type],de=e(e({},W),B[d.type]);return Y(G,e({},de))};z.__PosthogExtensions__=z.__PosthogExtensions__||{},z.__PosthogExtensions__.canActivateRepeatedly=be,z.__PosthogExtensions__.generateSurveys=xr,z.extendPostHogWithSurveys=xr})();(function(){function r($,P){var Z=Object.keys($);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols($);P&&(J=J.filter(function(se){return Object.getOwnPropertyDescriptor($,se).enumerable})),Z.push.apply(Z,J)}return Z}function e($){for(var P=1;P<arguments.length;P++){var Z=arguments[P]!=null?arguments[P]:{};P%2?r(Object(Z),!0).forEach(function(J){t($,J,Z[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Z)):r(Object(Z)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(Z,J))})}return $}function t($,P,Z){return P in $?Object.defineProperty($,P,{value:Z,enumerable:!0,configurable:!0,writable:!0}):$[P]=Z,$}var n=typeof window<"u"?window:void 0,o=typeof globalThis<"u"?globalThis:n,a=o?.navigator;o?.document,o?.location,o?.fetch,o!=null&&o.XMLHttpRequest&&"withCredentials"in new o.XMLHttpRequest&&o.XMLHttpRequest,o?.AbortController,a?.userAgent;var u,p=n??{};(function($){$.GZipJS="gzip-js",$.Base64="base64"})(u||(u={}));var f=["fatal","error","warning","log","info","debug"],b=Array.isArray,m=Object.prototype.toString,v=b||function($){return m.call($)==="[object Array]"},k=$=>typeof $=="function",C=$=>$===Object($)&&!v($),R=$=>$===void 0,O=$=>m.call($)=="[object String]",ne=$=>O($)&&$.trim().length===0,ee=$=>$===null;function z($){return!R(Event)&&fe($,Event)}function fe($,P){try{return $ instanceof P}catch{return!1}}function me($){return ee($)||!C($)&&!k($)}function De($,P){return Object.prototype.toString.call($)==="[object ".concat(P,"]")}function lt($){return De($,"DOMError")}var Ie=/\(error: (.*)\)/,Be=50,Ge="?";function tt($,P,Z,J){var se={platform:"web:javascript",filename:$,function:P==="<anonymous>"?Ge:P,in_app:!0};return R(Z)||(se.lineno=Z),R(J)||(se.colno=J),se}var _t=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Et=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,xt=/\((\S*)(?::(\d+))(?::(\d+))\)/,jt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,wt=function(){for(var $=arguments.length,P=new Array($),Z=0;Z<$;Z++)P[Z]=arguments[Z];var J=P.sort((se,He)=>se[0]-He[0]).map(se=>se[1]);return function(se){for(var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ee=[],ut=se.split(`
`),Ue=He;Ue<ut.length;Ue++){var Rt=ut[Ue];if(!(Rt.length>1024)){var L=Ie.test(Rt)?Rt.replace(Ie,"$1"):Rt;if(!L.match(/\S*Error: /)){for(var ae of J){var U=ae(L);if(U){Ee.push(U);break}}if(Ee.length>=Be)break}}}return function(te){if(!te.length)return[];var Q=Array.from(te);return Q.reverse(),Q.slice(0,Be).map(be=>e(e({},be),{},{filename:be.filename||Lt(Q).filename,function:be.function||Ge}))}(Ee)}}([30,$=>{var P=_t.exec($);if(P){var[,Z,J,se]=P;return tt(Z,Ge,+J,+se)}var He=Et.exec($);if(He){if(He[2]&&He[2].indexOf("eval")===0){var Ee=xt.exec(He[2]);Ee&&(He[2]=Ee[1],He[3]=Ee[2],He[4]=Ee[3])}var[ut,Ue]=Vt(He[1]||Ge,He[2]);return tt(Ue,ut,He[3]?+He[3]:void 0,He[4]?+He[4]:void 0)}}],[50,$=>{var P=jt.exec($);if(P){if(P[3]&&P[3].indexOf(" > eval")>-1){var Z=Pt.exec(P[3]);Z&&(P[1]=P[1]||"eval",P[3]=Z[1],P[4]=Z[2],P[5]="")}var J=P[3],se=P[1]||Ge;return[se,J]=Vt(se,J),tt(J,se,P[4]?+P[4]:void 0,P[5]?+P[5]:void 0)}}]);function Lt($){return $[$.length-1]||{}}var Vt=($,P)=>{var Z=$.indexOf("safari-extension")!==-1,J=$.indexOf("safari-web-extension")!==-1;return Z||J?[$.indexOf("@")!==-1?$.split("@")[0]:Ge,Z?"safari-extension:".concat(P):"safari-web-extension:".concat(P)]:[$,P]},Yt=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Ut($){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Z=$.stacktrace||$.stack||"",J=function(He){return He&&nn.test(He.message)?1:0}($);try{var se=wt(Z,J);return se.slice(0,se.length-P)}catch{}return[]}var nn=/Minified React error #\d+;/i;function It($,P){var Z,J,se=Ut($),He=(Z=P?.handled)===null||Z===void 0||Z,Ee=(J=P?.synthetic)!==null&&J!==void 0&&J;return{$exception_list:[{type:P!=null&&P.overrideExceptionType?P.overrideExceptionType:$.name,value:P!=null&&P.overrideExceptionMessage?P.overrideExceptionMessage:function(ut){var Ue=ut.message;return Ue.error&&typeof Ue.error.message=="string"?Ue.error.message:Ue}($),stacktrace:{frames:se,type:"raw"},mechanism:{handled:He,synthetic:Ee}}],$exception_level:"error"}}function Mt($,P){var Z,J,se,He=(Z=P?.handled)===null||Z===void 0||Z,Ee=(J=P?.synthetic)===null||J===void 0||J,ut={type:P!=null&&P.overrideExceptionType?P.overrideExceptionType:(se=P?.defaultExceptionType)!==null&&se!==void 0?se:"Error",value:P!=null&&P.overrideExceptionMessage?P.overrideExceptionMessage:$||P?.defaultExceptionMessage,mechanism:{handled:He,synthetic:Ee}};if(P!=null&&P.syntheticException){var Ue=Ut(P.syntheticException,1);Ue.length&&(ut.stacktrace={frames:Ue,type:"raw"})}return{$exception_list:[ut],$exception_level:"error"}}function St($,P){var Z,J,se,He=(Z=P?.handled)===null||Z===void 0||Z,Ee=(J=P?.synthetic)===null||J===void 0||J,ut=P!=null&&P.overrideExceptionType?P.overrideExceptionType:z($)?$.constructor.name:"Error",Ue=P!=null&&P.overrideExceptionMessage?P.overrideExceptionMessage:"Non-Error ".concat("exception"," captured with keys: ",function(ae){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:40,te=Object.keys(ae);if(te.sort(),!te.length)return"[object has no keys]";for(var Q=te.length;Q>0;Q--){var be=te.slice(0,Q).join(", ");if(!(be.length>U))return Q===te.length||be.length<=U?be:"".concat(be.slice(0,U),"...")}return""}($)),Rt={type:ut,value:Ue,mechanism:{handled:He,synthetic:Ee}};if(P!=null&&P.syntheticException){var L=Ut(P?.syntheticException,1);L.length&&(Rt.stacktrace={frames:L,type:"raw"})}return{$exception_list:[Rt],$exception_level:(se=$.level,O(se)&&!ne(se)&&f.indexOf(se)>=0?$.level:"error")}}function Ct($,P){var[Z,J,se,He,Ee]=$,ut={$exception_list:[]},Ue=Ee||Z;if(lt(Ue)||function(we){return De(we,"DOMException")}(Ue)){var Rt=Ue;if(function(we){return"stack"in we}(Ue))ut=It(Ue,P);else{var L=Rt.name||(lt(Rt)?"DOMError":"DOMException"),ae=Rt.message?"".concat(L,": ").concat(Rt.message):L,U=lt(Rt)?"DOMError":"DOMException";ut=Mt(ae,e(e({},P),{},{overrideExceptionType:U,defaultExceptionMessage:ae}))}return"code"in Rt&&(ut.$exception_DOMException_code="".concat(Rt.code)),ut}if(function(we){return De(we,"ErrorEvent")}(Ue)&&Ue.error)return It(Ue.error,P);if(function(we){switch(Object.prototype.toString.call(we)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return fe(we,Error)}}(Ue))return It(Ue,P);if(function(we){return De(we,"Object")}(Ue)||z(Ue))return St(Ue,P);if(R(Ee)&&O(Z)){var te="Error",Q=Z,be=Z.match(Yt);return be&&(te=be[1],Q=be[2]),Mt(Q,e(e({},P),{},{overrideExceptionType:te,defaultExceptionMessage:Q}))}return Mt(Ue,P)}function Xt($){var[P]=$,Z=function(J){if(me(J))return J;try{if("reason"in J)return J.reason;if("detail"in J&&"reason"in J.detail)return J.detail.reason}catch{}return J}(P);return me(Z)?Mt("Non-Error promise rejection captured with value: ".concat(String(Z)),{handled:!1,synthetic:!1,overrideExceptionType:"UnhandledRejection"}):Ct([Z],{handled:!1,overrideExceptionType:"UnhandledRejection",defaultExceptionMessage:String(Z)})}var rn=$=>{var P={_log:function(Z){if(n&&p.POSTHOG_DEBUG&&!R(n.console)&&n.console){for(var J=("__rrweb_original__"in n.console[Z])?n.console[Z].__rrweb_original__:n.console[Z],se=arguments.length,He=new Array(se>1?se-1:0),Ee=1;Ee<se;Ee++)He[Ee-1]=arguments[Ee];J($,...He)}},info:function(){for(var Z=arguments.length,J=new Array(Z),se=0;se<Z;se++)J[se]=arguments[se];P._log("log",...J)},warn:function(){for(var Z=arguments.length,J=new Array(Z),se=0;se<Z;se++)J[se]=arguments[se];P._log("warn",...J)},error:function(){for(var Z=arguments.length,J=new Array(Z),se=0;se<Z;se++)J[se]=arguments[se];P._log("error",...J)},critical:function(){for(var Z=arguments.length,J=new Array(Z),se=0;se<Z;se++)J[se]=arguments[se];console.error($,...J)},uninitializedWarning:Z=>{P.error("You must initialize PostHog before calling ".concat(Z))},createLogger:Z=>rn("".concat($," ").concat(Z))};return P},_n=(0,rn("[PostHog.js]").createLogger)("[ExceptionAutocapture]"),yn={wrapOnError:$=>{var P=n;P||_n.info("window not available, cannot wrap onerror");var Z=P.onerror;return P.onerror=function(){for(var J,se=arguments.length,He=new Array(se),Ee=0;Ee<se;Ee++)He[Ee]=arguments[Ee];var ut=Ct(He);return $(ut),(J=Z?.(...He))!==null&&J!==void 0&&J},P.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var J;(J=P.onerror)===null||J===void 0||delete J.__POSTHOG_INSTRUMENTED__,P.onerror=Z}},wrapUnhandledRejection:$=>{var P=n;P||_n.info("window not available, cannot wrap onUnhandledRejection");var Z=P.onunhandledrejection;return P.onunhandledrejection=function(){for(var J,se=arguments.length,He=new Array(se),Ee=0;Ee<se;Ee++)He[Ee]=arguments[Ee];var ut=Xt(He);return $(ut),(J=Z?.apply(P,He))!==null&&J!==void 0&&J},P.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var J;(J=P.onunhandledrejection)===null||J===void 0||delete J.__POSTHOG_INSTRUMENTED__,P.onunhandledrejection=Z}}};p.__PosthogExtensions__=p.__PosthogExtensions__||{},p.__PosthogExtensions__.errorWrappingFunctions=yn,p.__PosthogExtensions__.parseErrorAsProperties=Ct,p.posthogErrorWrappingFunctions=yn,p.parseErrorAsProperties=Ct})();(function(){function r(b,m,v,k,C,R,O){try{var ne=b[R](O),ee=ne.value}catch(z){return void v(z)}ne.done?m(ee):Promise.resolve(ee).then(k,C)}var e=typeof window<"u"?window:void 0,t=typeof globalThis<"u"?globalThis:e,n=t?.navigator;t?.document,t?.location,t?.fetch,t!=null&&t.XMLHttpRequest&&"withCredentials"in new t.XMLHttpRequest&&t.XMLHttpRequest,t?.AbortController,n?.userAgent;var o,a=e??{};(function(b){b.GZipJS="gzip-js",b.Base64="base64"})(o||(o={}));function u(b,m,v){try{if(!(m in b))return()=>{};var k=b[m],C=v(k);return typeof C=="function"&&(C.prototype=C.prototype||{},Object.defineProperties(C,{__posthog_wrapped__:{enumerable:!1,value:!0}})),b[m]=C,()=>{b[m]=k}}catch{return()=>{}}}var p=(b,m)=>{if(b){var{sessionId:v,windowId:k}=b.checkAndGetSessionAndWindowId(!0);m.headers.set("X-POSTHOG-SESSION-ID",v),m.headers.set("X-POSTHOG-WINDOW-ID",k)}};a.__PosthogExtensions__=a.__PosthogExtensions__||{};var f={_patchFetch:b=>u(e,"fetch",m=>function(){var v,k=(v=function*(C,R){var O=new Request(C,R);return p(b,O),m(O)},function(){var C=this,R=arguments;return new Promise(function(O,ne){var ee=v.apply(C,R);function z(me){r(ee,O,ne,z,fe,"next",me)}function fe(me){r(ee,O,ne,z,fe,"throw",me)}z(void 0)})});return function(C,R){return k.apply(this,arguments)}}()),_patchXHR:b=>u(e.XMLHttpRequest.prototype,"open",m=>function(v,k){var C=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],R=arguments.length>3?arguments[3]:void 0,O=arguments.length>4?arguments[4]:void 0,ne=new Request(k);return p(b,ne),m.call(this,v,ne.url,C,R,O)})};a.__PosthogExtensions__.tracingHeadersPatchFns=f,a.postHogTracingHeadersPatchFns=f})();(function(){var r,e,t,n=function(){var L=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(L&&L.responseStart>0&&L.responseStart<performance.now())return L},o=function(L){if(document.readyState==="loading")return"loading";var ae=n();if(ae){if(L<ae.domInteractive)return"loading";if(ae.domContentLoadedEventStart===0||L<ae.domContentLoadedEventStart)return"dom-interactive";if(ae.domComplete===0||L<ae.domComplete)return"dom-content-loaded"}return"complete"},a=function(L){var ae=L.nodeName;return L.nodeType===1?ae.toLowerCase():ae.toUpperCase().replace(/^#/,"")},u=function(L,ae){var U="";try{for(;L&&L.nodeType!==9;){var te=L,Q=te.id?"#"+te.id:a(te)+(te.classList&&te.classList.value&&te.classList.value.trim()&&te.classList.value.trim().length?"."+te.classList.value.trim().replace(/\s+/g,"."):"");if(U.length+Q.length>(ae||100)-1)return U||Q;if(U=U?Q+">"+U:Q,te.id)break;L=te.parentNode}}catch{}return U},p=-1,f=function(){return p},b=function(L){addEventListener("pageshow",function(ae){ae.persisted&&(p=ae.timeStamp,L(ae))},!0)},m=function(){var L=n();return L&&L.activationStart||0},v=function(L,ae){var U=n(),te="navigate";return f()>=0?te="back-forward-cache":U&&(document.prerendering||m()>0?te="prerender":document.wasDiscarded?te="restore":U.type&&(te=U.type.replace(/_/g,"-"))),{name:L,value:ae===void 0?-1:ae,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:te}},k=function(L,ae,U){try{if(PerformanceObserver.supportedEntryTypes.includes(L)){var te=new PerformanceObserver(function(Q){Promise.resolve().then(function(){ae(Q.getEntries())})});return te.observe(Object.assign({type:L,buffered:!0},U||{})),te}}catch{}},C=function(L,ae,U,te){var Q,be;return function(we){ae.value>=0&&(we||te)&&((be=ae.value-(Q||0))||Q===void 0)&&(Q=ae.value,ae.delta=be,ae.rating=function(Oe,We){return Oe>We[1]?"poor":Oe>We[0]?"needs-improvement":"good"}(ae.value,U),L(ae))}},R=function(L){requestAnimationFrame(function(){return requestAnimationFrame(function(){return L()})})},O=function(L){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&L()})},ne=function(L){var ae=!1;return function(){ae||(L(),ae=!0)}},ee=-1,z=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},fe=function(L){document.visibilityState==="hidden"&&ee>-1&&(ee=L.type==="visibilitychange"?L.timeStamp:0,De())},me=function(){addEventListener("visibilitychange",fe,!0),addEventListener("prerenderingchange",fe,!0)},De=function(){removeEventListener("visibilitychange",fe,!0),removeEventListener("prerenderingchange",fe,!0)},lt=function(){return ee<0&&(ee=z(),me(),b(function(){setTimeout(function(){ee=z(),me()},0)})),{get firstHiddenTime(){return ee}}},Ie=function(L){document.prerendering?addEventListener("prerenderingchange",function(){return L()},!0):L()},Be=[1800,3e3],Ge=function(L,ae){ae=ae||{},Ie(function(){var U,te=lt(),Q=v("FCP"),be=k("paint",function(we){we.forEach(function(Oe){Oe.name==="first-contentful-paint"&&(be.disconnect(),Oe.startTime<te.firstHiddenTime&&(Q.value=Math.max(Oe.startTime-m(),0),Q.entries.push(Oe),U(!0)))})});be&&(U=C(L,Q,Be,ae.reportAllChanges),b(function(we){Q=v("FCP"),U=C(L,Q,Be,ae.reportAllChanges),R(function(){Q.value=performance.now()-we.timeStamp,U(!0)})}))})},tt=[.1,.25],_t=0,Et=1/0,xt=0,jt=function(L){L.forEach(function(ae){ae.interactionId&&(Et=Math.min(Et,ae.interactionId),xt=Math.max(xt,ae.interactionId),_t=xt?(xt-Et)/7+1:0)})},Pt=function(){"interactionCount"in performance||r||(r=k("event",jt,{type:"event",buffered:!0,durationThreshold:0}))},wt=[],Lt=new Map,Vt=0,Yt=function(){return(r?_t:performance.interactionCount||0)-Vt},Ut=[],nn=function(L){if(Ut.forEach(function(Q){return Q(L)}),L.interactionId||L.entryType==="first-input"){var ae=wt[wt.length-1],U=Lt.get(L.interactionId);if(U||wt.length<10||L.duration>ae.latency){if(U)L.duration>U.latency?(U.entries=[L],U.latency=L.duration):L.duration===U.latency&&L.startTime===U.entries[0].startTime&&U.entries.push(L);else{var te={id:L.interactionId,latency:L.duration,entries:[L]};Lt.set(te.id,te),wt.push(te)}wt.sort(function(Q,be){return be.latency-Q.latency}),wt.length>10&&wt.splice(10).forEach(function(Q){return Lt.delete(Q.id)})}}},It=function(L){var ae=self.requestIdleCallback||self.setTimeout,U=-1;return L=ne(L),document.visibilityState==="hidden"?L():(U=ae(L),O(L)),U},Mt=[200,500],St=[],Ct=[],Xt=new WeakMap,rn=new Map,_n=-1,yn=function(L){St=St.concat(L),$()},$=function(){_n<0&&(_n=It(P))},P=function(){rn.size>10&&rn.forEach(function(Oe,We){Lt.has(We)||rn.delete(We)});var L=wt.map(function(Oe){return Xt.get(Oe.entries[0])}),ae=Ct.length-50;Ct=Ct.filter(function(Oe,We){return We>=ae||L.includes(Oe)});for(var U=new Set,te=0;te<Ct.length;te++){var Q=Ct[te];Z(Q.startTime,Q.processingEnd).forEach(function(Oe){U.add(Oe)})}for(var be=0;be<50;be++){var we=St[St.length-1-be];if(!we||we.startTime<t)break;U.add(we)}St=Array.from(U),_n=-1};Ut.push(function(L){L.interactionId&&L.target&&!rn.has(L.interactionId)&&rn.set(L.interactionId,L.target)},function(L){var ae,U=L.startTime+L.duration;t=Math.max(t,L.processingEnd);for(var te=Ct.length-1;te>=0;te--){var Q=Ct[te];if(Math.abs(U-Q.renderTime)<=8){(ae=Q).startTime=Math.min(L.startTime,ae.startTime),ae.processingStart=Math.min(L.processingStart,ae.processingStart),ae.processingEnd=Math.max(L.processingEnd,ae.processingEnd),ae.entries.push(L);break}}ae||(ae={startTime:L.startTime,processingStart:L.processingStart,processingEnd:L.processingEnd,renderTime:U,entries:[L]},Ct.push(ae)),(L.interactionId||L.entryType==="first-input")&&Xt.set(L,ae),$()});var Z=function(L,ae){for(var U,te=[],Q=0;U=St[Q];Q++)if(!(U.startTime+U.duration<L)){if(U.startTime>ae)break;te.push(U)}return te},J=[2500,4e3],se={},He=typeof window<"u"?window:void 0,Ee=typeof globalThis<"u"?globalThis:He,ut=Ee?.navigator;Ee?.document,Ee?.location,Ee?.fetch,Ee!=null&&Ee.XMLHttpRequest&&"withCredentials"in new Ee.XMLHttpRequest&&Ee.XMLHttpRequest,Ee?.AbortController,ut?.userAgent;var Ue=He??{},Rt={onLCP:function(L,ae){(function(U,te){te=te||{},Ie(function(){var Q,be=lt(),we=v("LCP"),Oe=function(ht){te.reportAllChanges||(ht=ht.slice(-1)),ht.forEach(function(bt){bt.startTime<be.firstHiddenTime&&(we.value=Math.max(bt.startTime-m(),0),we.entries=[bt],Q())})},We=k("largest-contentful-paint",Oe);if(We){Q=C(U,we,J,te.reportAllChanges);var yt=ne(function(){se[we.id]||(Oe(We.takeRecords()),We.disconnect(),se[we.id]=!0,Q(!0))});["keydown","click"].forEach(function(ht){addEventListener(ht,function(){return It(yt)},!0)}),O(yt),b(function(ht){we=v("LCP"),Q=C(U,we,J,te.reportAllChanges),R(function(){we.value=performance.now()-ht.timeStamp,se[we.id]=!0,Q(!0)})})}})})(function(U){var te=function(Q){var be={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:Q.value};if(Q.entries.length){var we=n();if(we){var Oe=we.activationStart||0,We=Q.entries[Q.entries.length-1],yt=We.url&&performance.getEntriesByType("resource").filter(function(Ze){return Ze.name===We.url})[0],ht=Math.max(0,we.responseStart-Oe),bt=Math.max(ht,yt?(yt.requestStart||yt.startTime)-Oe:0),pt=Math.max(bt,yt?yt.responseEnd-Oe:0),Nn=Math.max(pt,We.startTime-Oe);be={element:u(We.element),timeToFirstByte:ht,resourceLoadDelay:bt-ht,resourceLoadDuration:pt-bt,elementRenderDelay:Nn-pt,navigationEntry:we,lcpEntry:We},We.url&&(be.url=We.url),yt&&(be.lcpResourceEntry=yt)}}return Object.assign(Q,{attribution:be})}(U);L(te)},ae)},onCLS:function(L,ae){(function(U,te){te=te||{},Ge(ne(function(){var Q,be=v("CLS",0),we=0,Oe=[],We=function(ht){ht.forEach(function(bt){if(!bt.hadRecentInput){var pt=Oe[0],Nn=Oe[Oe.length-1];we&&bt.startTime-Nn.startTime<1e3&&bt.startTime-pt.startTime<5e3?(we+=bt.value,Oe.push(bt)):(we=bt.value,Oe=[bt])}}),we>be.value&&(be.value=we,be.entries=Oe,Q())},yt=k("layout-shift",We);yt&&(Q=C(U,be,tt,te.reportAllChanges),O(function(){We(yt.takeRecords()),Q(!0)}),b(function(){we=0,be=v("CLS",0),Q=C(U,be,tt,te.reportAllChanges),R(function(){return Q()})}),setTimeout(Q,0))}))})(function(U){var te=function(Q){var be,we={};if(Q.entries.length){var Oe=Q.entries.reduce(function(yt,ht){return yt&&yt.value>ht.value?yt:ht});if(Oe&&Oe.sources&&Oe.sources.length){var We=(be=Oe.sources).find(function(yt){return yt.node&&yt.node.nodeType===1})||be[0];We&&(we={largestShiftTarget:u(We.node),largestShiftTime:Oe.startTime,largestShiftValue:Oe.value,largestShiftSource:We,largestShiftEntry:Oe,loadState:o(Oe.startTime)})}}return Object.assign(Q,{attribution:we})}(U);L(te)},ae)},onFCP:function(L,ae){Ge(function(U){var te=function(Q){var be={timeToFirstByte:0,firstByteToFCP:Q.value,loadState:o(f())};if(Q.entries.length){var we=n(),Oe=Q.entries[Q.entries.length-1];if(we){var We=we.activationStart||0,yt=Math.max(0,we.responseStart-We);be={timeToFirstByte:yt,firstByteToFCP:Q.value-yt,loadState:o(Q.entries[0].startTime),navigationEntry:we,fcpEntry:Oe}}}return Object.assign(Q,{attribution:be})}(U);L(te)},ae)},onINP:function(L,ae){e||(e=k("long-animation-frame",yn)),function(U,te){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(te=te||{},Ie(function(){var Q;Pt();var be,we=v("INP"),Oe=function(yt){It(function(){yt.forEach(nn);var ht,bt=(ht=Math.min(wt.length-1,Math.floor(Yt()/50)),wt[ht]);bt&&bt.latency!==we.value&&(we.value=bt.latency,we.entries=bt.entries,be())})},We=k("event",Oe,{durationThreshold:(Q=te.durationThreshold)!==null&&Q!==void 0?Q:40});be=C(U,we,Mt,te.reportAllChanges),We&&(We.observe({type:"first-input",buffered:!0}),O(function(){Oe(We.takeRecords()),be(!0)}),b(function(){Vt=0,wt.length=0,Lt.clear(),we=v("INP"),be=C(U,we,Mt,te.reportAllChanges)}))}))}(function(U){var te=function(Q){var be=Q.entries[0],we=Xt.get(be),Oe=be.processingStart,We=we.processingEnd,yt=we.entries.sort(function(ln,Yn){return ln.processingStart-Yn.processingStart}),ht=Z(be.startTime,We),bt=Q.entries.find(function(ln){return ln.target}),pt=bt&&bt.target||rn.get(be.interactionId),Nn=[be.startTime+be.duration,We].concat(ht.map(function(ln){return ln.startTime+ln.duration})),Ze=Math.max.apply(Math,Nn),Dt={interactionTarget:u(pt),interactionTargetElement:pt,interactionType:be.name.startsWith("key")?"keyboard":"pointer",interactionTime:be.startTime,nextPaintTime:Ze,processedEventEntries:yt,longAnimationFrameEntries:ht,inputDelay:Oe-be.startTime,processingDuration:We-Oe,presentationDelay:Math.max(Ze-We,0),loadState:o(be.startTime)};return Object.assign(Q,{attribution:Dt})}(U);L(te)},ae)}};Ue.__PosthogExtensions__=Ue.__PosthogExtensions__||{},Ue.__PosthogExtensions__.postHogWebVitalsCallbacks=Rt,Ue.postHogWebVitalsCallbacks=Rt})();function qa(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function X(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qa(Object(t),!0).forEach(function(n){ie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qa(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ie(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $l(r,e){if(r==null)return{};var t,n,o=function(u,p){if(u==null)return{};var f,b,m={},v=Object.keys(u);for(b=0;b<v.length;b++)f=v[b],p.indexOf(f)>=0||(m[f]=u[f]);return m}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}var Gn,ir={DEBUG:!1,LIB_VERSION:"1.203.2"},M=typeof window<"u"?window:void 0,In=typeof globalThis<"u"?globalThis:M,Wl=Array.prototype,$a=Wl.forEach,Wa=Wl.indexOf,An=In?.navigator,Te=In?.document,Cn=In?.location,Es=In?.fetch,xs=In!=null&&In.XMLHttpRequest&&"withCredentials"in new In.XMLHttpRequest?In.XMLHttpRequest:void 0,ja=In?.AbortController,tn=An?.userAgent,et=M??{},gs="$copy_autocapture",kc=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(r){r.GZipJS="gzip-js",r.Base64="base64"})(Gn||(Gn={}));function at(r,e){return r.indexOf(e)!==-1}var Ho=function(r){return r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},Ts=function(r){return r.replace(/^\$/,"")},Ec=Array.isArray,jl=Object.prototype,Vl=jl.hasOwnProperty,qo=jl.toString,zt=Ec||function(r){return qo.call(r)==="[object Array]"},Ln=r=>typeof r=="function",Wt=r=>r===Object(r)&&!zt(r),ei=r=>{if(Wt(r)){for(var e in r)if(Vl.call(r,e))return!1;return!0}return!1},Me=r=>r===void 0,an=r=>qo.call(r)=="[object String]",Va=r=>an(r)&&r.trim().length===0,wr=r=>r===null,Tt=r=>Me(r)||wr(r),vn=r=>qo.call(r)=="[object Number]",Br=r=>qo.call(r)==="[object Boolean]",xc=r=>r instanceof FormData,Tc=r=>at(kc,r),Ul=r=>{var e={_log:function(t){if(M&&(ir.DEBUG||et.POSTHOG_DEBUG)&&!Me(M.console)&&M.console){for(var n=("__rrweb_original__"in M.console[t])?M.console[t].__rrweb_original__:M.console[t],o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];n(r,...a)}},info:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e._log("log",...n)},warn:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e._log("warn",...n)},error:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e._log("error",...n)},critical:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];console.error(r,...n)},uninitializedWarning:t=>{e.error("You must initialize PostHog before calling ".concat(t))},createLogger:t=>Ul("".concat(r," ").concat(t))};return e},Ae=Ul("[PostHog.js]"),En=Ae.createLogger,Io={};function ni(r,e,t){if(zt(r)){if($a&&r.forEach===$a)r.forEach(e,t);else if("length"in r&&r.length===+r.length){for(var n=0,o=r.length;n<o;n++)if(n in r&&e.call(t,r[n],n)===Io)return}}}function kt(r,e,t){if(!Tt(r)){if(zt(r))return ni(r,e,t);if(xc(r)){for(var n of r.entries())if(e.call(t,n[1],n[0])===Io)return}else for(var o in r)if(Vl.call(r,o)&&e.call(t,r[o],o)===Io)return}}var mn=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return ni(t,function(o){for(var a in o)o[a]!==void 0&&(r[a]=o[a])}),r};function wo(r){for(var e=Object.keys(r),t=e.length,n=new Array(t);t--;)n[t]=[e[t],r[e[t]]];return n}var Ua=function(r){try{return r()}catch{return}},Mc=function(r){return function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,t)}catch(o){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(o)}}},ko=function(r){var e={};return kt(r,function(t,n){an(t)&&t.length>0&&(e[n]=t)}),e};function Rc(r,e){return t=r,n=a=>an(a)&&!wr(e)?a.slice(0,e):a,o=new Set,function a(u,p){return u!==Object(u)?n?n(u,p):u:o.has(u)?void 0:(o.add(u),zt(u)?(f=[],ni(u,b=>{f.push(a(b))})):(f={},kt(u,(b,m)=>{o.has(b)||(f[m]=a(b,m))})),f);var f}(t);var t,n,o}var or=function(){function r(e){return e&&(e.preventDefault=r.preventDefault,e.stopPropagation=r.stopPropagation),e}return r.preventDefault=function(){this.returnValue=!1},r.stopPropagation=function(){this.cancelBubble=!0},function(e,t,n,o,a){if(e)if(e.addEventListener&&!o)e.addEventListener(t,n,!!a);else{var u="on"+t,p=e[u];e[u]=function(f,b,m){return function(v){if(v=v||r(M?.event)){var k,C=!0;Ln(m)&&(k=m(v));var R=b.call(f,v);return k!==!1&&R!==!1||(C=!1),C}}}(e,n,p)}else Ae.error("No valid element provided to register_event")}}();function Gl(r,e){for(var t=0;t<r.length;t++)if(e(r[t]))return r[t]}var Zl="$people_distinct_id",Mi="__alias",Ri="__timers",Ga="$autocapture_disabled_server_side",Ms="$heatmaps_enabled_server_side",Za="$exception_capture_enabled_server_side",za="$web_vitals_enabled_server_side",zl="$dead_clicks_enabled_server_side",Ya="$web_vitals_allowed_metrics",Rs="$session_recording_enabled_server_side",Xa="$console_log_recording_enabled_server_side",Ja="$session_recording_network_payload_capture",Ka="$session_recording_canvas_recording",Qa="$replay_sample_rate",el="$replay_minimum_duration",tl="$replay_script_config",Eo="$sesid",Ai="$session_is_sampled",fs="$session_recording_url_trigger_activated_session",vs="$session_recording_event_trigger_activated_session",ti="$enabled_feature_flags",So="$early_access_features",Ni="$stored_person_properties",Pr="$stored_group_properties",As="$surveys",uo="$surveys_activated",xo="$flag_call_reported",tr="$user_state",Ns="$client_session_props",Os="$capture_rate_limit",Fs="$initial_campaign_params",Ps="$initial_referrer_info",Ls="$initial_person_info",To="$epp",Yl="__POSTHOG_TOOLBAR__",nl="$posthog_cklsh",Ac=[Zl,Mi,"__cmpns",Ri,Rs,Ms,Eo,ti,tr,So,Pr,Ni,As,xo,Ns,Os,Fs,Ps,To],co=En("[FeatureFlags]"),ms="$active_feature_flags",ho="$override_feature_flags",rl="$feature_flag_payloads",il=r=>{var e={};for(var[t,n]of wo(r||{}))n&&(e[t]=n);return e};class Nc{constructor(e){ie(this,"_override_warning",!1),ie(this,"_hasLoadedFlags",!1),ie(this,"_requestInFlight",!1),ie(this,"_reloadingDisabled",!1),ie(this,"_additionalReloadRequested",!1),ie(this,"_decideCalled",!1),ie(this,"_flagsLoadedFromRemote",!1),this.instance=e,this.featureFlagEventHandlers=[]}decide(){if(this.instance.config.__preview_remote_config)this._decideCalled=!0;else{var e=!this._reloadDebouncer&&(this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load);this._callDecideEndpoint({disableFlags:e})}}get hasLoadedFlags(){return this._hasLoadedFlags}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(ti),t=this.instance.get_property(ho);if(!t)return e||{};for(var n=mn({},e),o=Object.keys(t),a=0;a<o.length;a++)n[o[a]]=t[o[a]];return this._override_warning||(co.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}getFlagPayloads(){return this.instance.get_property(rl)||{}}reloadFeatureFlags(){this._reloadingDisabled||this.instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout(()=>{this._callDecideEndpoint()},5))}clearDebouncer(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0}ensureFlagsLoaded(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this._reloadingDisabled=e}_callDecideEndpoint(e){if(this.clearDebouncer(),!this.instance.config.advanced_disable_decide)if(this._requestInFlight)this._additionalReloadRequested=!0;else{var t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:this.instance.get_property(Ni),group_properties:this.instance.get_property(Pr)};(e!=null&&e.disableFlags||this.instance.config.advanced_disable_feature_flags)&&(t.disable_flags=!0),this._requestInFlight=!0,this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:Gn.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:n=>{var o,a,u=!0;n.statusCode===200&&(this.$anon_distinct_id=void 0,u=!1),this._requestInFlight=!1,this._decideCalled||(this._decideCalled=!0,this.instance._onRemoteConfig((a=n.json)!==null&&a!==void 0?a:{})),t.disable_flags||(this._flagsLoadedFromRemote=!u,this.receivedFeatureFlags((o=n.json)!==null&&o!==void 0?o:{},u),this._additionalReloadRequested&&(this._additionalReloadRequested=!1,this._callDecideEndpoint()))}})}}getFeatureFlag(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var n,o,a,u,p,f=this.getFlagVariants()[e],b="".concat(f),m=this.instance.get_property(xo)||{};return(t.send_event||!("send_event"in t))&&(!(e in m)||!m[e].includes(b))&&(zt(m[e])?m[e].push(b):m[e]=[b],(n=this.instance.persistence)===null||n===void 0||n.register({[xo]:m}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:f,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_bootstrapped_response:((o=this.instance.config.bootstrap)===null||o===void 0||(a=o.featureFlags)===null||a===void 0?void 0:a[e])||null,$feature_flag_bootstrapped_payload:((u=this.instance.config.bootstrap)===null||u===void 0||(p=u.featureFlagPayloads)===null||p===void 0?void 0:p[e])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote})),f}co.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);co.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this.instance.persistence){this._hasLoadedFlags=!0;var n=this.getFlagVariants(),o=this.getFlagPayloads();(function(a,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=a.featureFlags,m=a.featureFlagPayloads;if(b)if(zt(b)){var v={};if(b)for(var k=0;k<b.length;k++)v[b[k]]=!0;u&&u.register({[ms]:b,[ti]:v})}else{var C=b,R=m;a.errorsWhileComputingFlags&&(C=X(X({},p),C),R=X(X({},f),R)),u&&u.register({[ms]:Object.keys(il(C)),[ti]:C||{},[rl]:R||{}})}})(e,this.instance.persistence,n,o),this._fireFeatureFlagsCallbacks(t)}}override(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return co.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=t,e===!1)this.instance.persistence.unregister(ho);else if(zt(e)){for(var n={},o=0;o<e.length;o++)n[e[o]]=!0;this.instance.persistence.register({[ho]:n})}else this.instance.persistence.register({[ho]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._hasLoadedFlags){var{flags:t,flagVariants:n}=this._prepareFeatureFlagsForCallbacks();e(t,n)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var n,o=(this.instance.get_property(So)||[]).find(f=>f.flagKey===e),a={["$feature_enrollment/".concat(e)]:t},u={$feature_flag:e,$feature_enrollment:t,$set:a};o&&(u.$early_access_feature_name=o.name),this.instance.capture("$feature_enrollment_update",u),this.setPersonPropertiesForFlags(a,!1);var p=X(X({},this.getFlagVariants()),{},{[e]:t});(n=this.instance.persistence)===null||n===void 0||n.register({[ms]:Object.keys(il(p)),[ti]:p}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.instance.get_property(So);if(n&&!t)return e(n);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:o=>{var a;if(o.json){var u=o.json.earlyAccessFeatures;return(a=this.instance.persistence)===null||a===void 0||a.register({[So]:u}),e(u)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(n=>t[n]),flagVariants:Object.keys(t).filter(n=>t[n]).reduce((n,o)=>(n[o]=t[o],n),{})}}_fireFeatureFlagsCallbacks(e){var{flags:t,flagVariants:n}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(o=>o(t,n,{errorsLoading:e}))}setPersonPropertiesForFlags(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.instance.get_property(Ni)||{};this.instance.register({[Ni]:X(X({},n),e)}),t&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(Ni)}setGroupPropertiesForFlags(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.instance.get_property(Pr)||{};Object.keys(n).length!==0&&Object.keys(n).forEach(o=>{n[o]=X(X({},n[o]),e[o]),delete e[o]}),this.instance.register({[Pr]:X(X({},n),e)}),t&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this.instance.get_property(Pr)||{};this.instance.register({[Pr]:X(X({},t),{},{[e]:{}})})}else this.instance.unregister(Pr)}}Math.trunc||(Math.trunc=function(r){return r<0?Math.ceil(r):Math.floor(r)}),Number.isInteger||(Number.isInteger=function(r){return vn(r)&&isFinite(r)&&Math.floor(r)===r});var ol="0123456789abcdef";class Mo{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,n,o){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(o)||e<0||t<0||n<0||o<0||e>0xffffffffffff||t>4095||n>1073741823||o>4294967295)throw new RangeError("invalid field value");var a=new Uint8Array(16);return a[0]=e/Math.pow(2,40),a[1]=e/Math.pow(2,32),a[2]=e/Math.pow(2,24),a[3]=e/Math.pow(2,16),a[4]=e/Math.pow(2,8),a[5]=e,a[6]=112|t>>>8,a[7]=t,a[8]=128|n>>>24,a[9]=n>>>16,a[10]=n>>>8,a[11]=n,a[12]=o>>>24,a[13]=o>>>16,a[14]=o>>>8,a[15]=o,new Mo(a)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+ol.charAt(this.bytes[t]>>>4)+ol.charAt(15&this.bytes[t]),t!==3&&t!==5&&t!==7&&t!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Mo(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(n!==0)return Math.sign(n)}return 0}}class Oc{constructor(){ie(this,"timestamp",0),ie(this,"counter",0),ie(this,"random",new Fc)}generate(){var e=this.generateOrAbort();if(Me(e)){this.timestamp=0;var t=this.generateOrAbort();if(Me(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Mo.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}var sl,Xl=r=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<r.length;e++)r[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return r};M&&!Me(M.crypto)&&crypto.getRandomValues&&(Xl=r=>crypto.getRandomValues(r));class Fc{constructor(){ie(this,"buffer",new Uint32Array(8)),ie(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(Xl(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}var _r=()=>Pc().toString(),Pc=()=>(sl||(sl=new Oc)).generate(),Lc="Thu, 01 Jan 1970 00:00:00 GMT",ki="",Dc=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Bc(r,e){if(e){var t=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te;if(ki)return ki;if(!a||["localhost","127.0.0.1"].includes(o))return"";for(var u=o.split("."),p=Math.min(u.length,8),f="dmn_chk_"+_r(),b=new RegExp("(^|;)\\s*"+f+"=1");!ki&&p--;){var m=u.slice(p).join("."),v=f+"=1;domain=."+m;a.cookie=v,b.test(a.cookie)&&(a.cookie=v+";expires="+Lc,ki=m)}return ki}(r);if(!t){var n=(o=>{var a=o.match(Dc);return a?a[0]:""})(r);n!==t&&Ae.info("Warning: cookie subdomain discovery mismatch",n,t),t=n}return t?"; domain=."+t:""}return""}var sr={is_supported:()=>!!Te,error:function(r){Ae.error("cookieStore error: "+r)},get:function(r){if(Te){try{for(var e=r+"=",t=Te.cookie.split(";").filter(a=>a.length),n=0;n<t.length;n++){for(var o=t[n];o.charAt(0)==" ";)o=o.substring(1,o.length);if(o.indexOf(e)===0)return decodeURIComponent(o.substring(e.length,o.length))}}catch{}return null}},parse:function(r){var e;try{e=JSON.parse(sr.get(r))||{}}catch{}return e},set:function(r,e,t,n,o){if(Te)try{var a="",u="",p=Bc(Te.location.hostname,n);if(t){var f=new Date;f.setTime(f.getTime()+24*t*60*60*1e3),a="; expires="+f.toUTCString()}o&&(u="; secure");var b=r+"="+encodeURIComponent(JSON.stringify(e))+a+"; SameSite=Lax; path=/"+p+u;return b.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+b.length),Te.cookie=b,b}catch{return}},remove:function(r,e){try{sr.set(r,"",-1,e)}catch{return}}},_s=null,Qt={is_supported:function(){if(!wr(_s))return _s;var r=!0;if(Me(M))r=!1;else try{var e="__mplssupport__";Qt.set(e,"xyz"),Qt.get(e)!=='"xyz"'&&(r=!1),Qt.remove(e)}catch{r=!1}return r||Ae.error("localStorage unsupported; falling back to cookie store"),_s=r,r},error:function(r){Ae.error("localStorage error: "+r)},get:function(r){try{return M?.localStorage.getItem(r)}catch(e){Qt.error(e)}return null},parse:function(r){try{return JSON.parse(Qt.get(r))||{}}catch{}return null},set:function(r,e){try{M?.localStorage.setItem(r,JSON.stringify(e))}catch(t){Qt.error(t)}},remove:function(r){try{M?.localStorage.removeItem(r)}catch(e){Qt.error(e)}}},Hc=["distinct_id",Eo,Ai,To,Ls],po=X(X({},Qt),{},{parse:function(r){try{var e={};try{e=sr.parse(r)||{}}catch{}var t=mn(e,JSON.parse(Qt.get(r)||"{}"));return Qt.set(r,t),t}catch{}return null},set:function(r,e,t,n,o,a){try{Qt.set(r,e,void 0,void 0,a);var u={};Hc.forEach(p=>{e[p]&&(u[p]=e[p])}),Object.keys(u).length&&sr.set(r,u,t,n,o,a)}catch(p){Qt.error(p)}},remove:function(r,e){try{M?.localStorage.removeItem(r),sr.remove(r,e)}catch(t){Qt.error(t)}}}),go={},qc={is_supported:function(){return!0},error:function(r){Ae.error("memoryStorage error: "+r)},get:function(r){return go[r]||null},parse:function(r){return go[r]||null},set:function(r,e){go[r]=e},remove:function(r){delete go[r]}},Mr=null,sn={is_supported:function(){if(!wr(Mr))return Mr;if(Mr=!0,Me(M))Mr=!1;else try{var r="__support__";sn.set(r,"xyz"),sn.get(r)!=='"xyz"'&&(Mr=!1),sn.remove(r)}catch{Mr=!1}return Mr},error:function(r){Ae.error("sessionStorage error: ",r)},get:function(r){try{return M?.sessionStorage.getItem(r)}catch(e){sn.error(e)}return null},parse:function(r){try{return JSON.parse(sn.get(r))||null}catch{}return null},set:function(r,e){try{M?.sessionStorage.setItem(r,JSON.stringify(e))}catch(t){sn.error(t)}},remove:function(r){try{M?.sessionStorage.removeItem(r)}catch(e){sn.error(e)}}},$c=["localhost","127.0.0.1"],ri=r=>{var e=Te?.createElement("a");return Me(e)?null:(e.href=r,e)},si=function(r,e){return!!function(t){try{new RegExp(t)}catch{return!1}return!0}(e)&&new RegExp(e).test(r)},Wc=function(r){var e,t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",o=[];return kt(r,function(a,u){Me(a)||Me(u)||u==="undefined"||(e=encodeURIComponent((p=>p instanceof File)(a)?a.name:a.toString()),t=encodeURIComponent(u),o[o.length]=t+"="+e)}),o.join(n)},Ro=function(r,e){for(var t,n=((r.split("#")[0]||"").split("?")[1]||"").split("&"),o=0;o<n.length;o++){var a=n[o].split("=");if(a[0]===e){t=a;break}}if(!zt(t)||t.length<2)return"";var u=t[1];try{u=decodeURIComponent(u)}catch{Ae.error("Skipping decoding for malformed query param: "+u)}return u.replace(/\+/g," ")},Ao=function(r,e){var t=r.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null},Dn="Mobile",No="iOS",Zn="Android",Bi="Tablet",Jl=Zn+" "+Bi,Kl="iPad",Ql="Apple",eu=Ql+" Watch",Hi="Safari",ai="BlackBerry",tu="Samsung",nu=tu+"Browser",ru=tu+" Internet",qr="Chrome",jc=qr+" OS",iu=qr+" "+No,ea="Internet Explorer",ou=ea+" "+Dn,ta="Opera",Vc=ta+" Mini",na="Edge",su="Microsoft "+na,ii="Firefox",au=ii+" "+No,qi="Nintendo",$i="PlayStation",oi="Xbox",lu=Zn+" "+Dn,uu=Dn+" "+Hi,Oi="Windows",Ds=Oi+" Phone",al="Nokia",Bs="Ouya",cu="Generic",Uc=cu+" "+Dn.toLowerCase(),du=cu+" "+Bi.toLowerCase(),Hs="Konqueror",fn="(\\d+(\\.\\d+)?)",ys=new RegExp("Version/"+fn),Gc=new RegExp(oi,"i"),Zc=new RegExp($i+" \\w+","i"),zc=new RegExp(qi+" \\w+","i"),ra=new RegExp(ai+"|PlayBook|BB10","i"),Yc={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Xc=(r,e)=>e&&at(e,Ql)||function(t){return at(t,Hi)&&!at(t,qr)&&!at(t,Zn)}(r),ll=function(r,e){return e=e||"",at(r," OPR/")&&at(r,"Mini")?Vc:at(r," OPR/")?ta:ra.test(r)?ai:at(r,"IE"+Dn)||at(r,"WPDesktop")?ou:at(r,nu)?ru:at(r,na)||at(r,"Edg/")?su:at(r,"FBIOS")?"Facebook "+Dn:at(r,"UCWEB")||at(r,"UCBrowser")?"UC Browser":at(r,"CriOS")?iu:at(r,"CrMo")||at(r,qr)?qr:at(r,Zn)&&at(r,Hi)?lu:at(r,"FxiOS")?au:at(r.toLowerCase(),Hs.toLowerCase())?Hs:Xc(r,e)?at(r,Dn)?uu:Hi:at(r,ii)?ii:at(r,"MSIE")||at(r,"Trident/")?ea:at(r,"Gecko")?ii:""},Jc={[ou]:[new RegExp("rv:"+fn)],[su]:[new RegExp(na+"?\\/"+fn)],[qr]:[new RegExp("("+qr+"|CrMo)\\/"+fn)],[iu]:[new RegExp("CriOS\\/"+fn)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+fn)],[Hi]:[ys],[uu]:[ys],[ta]:[new RegExp("(Opera|OPR)\\/"+fn)],[ii]:[new RegExp(ii+"\\/"+fn)],[au]:[new RegExp("FxiOS\\/"+fn)],[Hs]:[new RegExp("Konqueror[:/]?"+fn,"i")],[ai]:[new RegExp(ai+" "+fn),ys],[lu]:[new RegExp("android\\s"+fn,"i")],[ru]:[new RegExp(nu+"\\/"+fn)],[ea]:[new RegExp("(rv:|MSIE )"+fn)],Mozilla:[new RegExp("rv:"+fn)]},ul=[[new RegExp(oi+"; "+oi+" (.*?)[);]","i"),r=>[oi,r&&r[1]||""]],[new RegExp(qi,"i"),[qi,""]],[new RegExp($i,"i"),[$i,""]],[ra,[ai,""]],[new RegExp(Oi,"i"),(r,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Ds,""];if(new RegExp(Dn).test(e)&&!/IEMobile\b/.test(e))return[Oi+" "+Dn,""];var t=/Windows NT ([0-9.]+)/i.exec(e);if(t&&t[1]){var n=t[1],o=Yc[n]||"";return/arm/i.test(e)&&(o="RT"),[Oi,o]}return[Oi,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,r=>{if(r&&r[3]){var e=[r[3],r[4],r[5]||"0"];return[No,e.join(".")]}return[No,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,r=>{var e="";return r&&r.length>=3&&(e=Me(r[2])?r[3]:r[2]),["watchOS",e]}],[new RegExp("("+Zn+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Zn+")","i"),r=>{if(r&&r[2]){var e=[r[2],r[3],r[4]||"0"];return[Zn,e.join(".")]}return[Zn,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,r=>{var e=["Mac OS X",""];if(r&&r[1]){var t=[r[1],r[2],r[3]||"0"];e[1]=t.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[jc,""]],[/Linux|debian/i,["Linux",""]]],cl=function(r){return zc.test(r)?qi:Zc.test(r)?$i:Gc.test(r)?oi:new RegExp(Bs,"i").test(r)?Bs:new RegExp("("+Ds+"|WPDesktop)","i").test(r)?Ds:/iPad/.test(r)?Kl:/iPod/.test(r)?"iPod Touch":/iPhone/.test(r)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(r)?eu:ra.test(r)?ai:/(kobo)\s(ereader|touch)/i.test(r)?"Kobo":new RegExp(al,"i").test(r)?al:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(r)||/(kf[a-z]+)( bui|\)).+silk\//i.test(r)?"Kindle Fire":/(Android|ZTE)/i.test(r)?!new RegExp(Dn).test(r)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(r)?/pixel[\daxl ]{1,6}/i.test(r)&&!/pixel c/i.test(r)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(r)||/lmy47v/i.test(r)&&!/QTAQZ3/i.test(r)?Zn:Jl:Zn:new RegExp("(pda|"+Dn+")","i").test(r)?Uc:new RegExp(Bi,"i").test(r)&&!new RegExp(Bi+" pc","i").test(r)?du:""},fo="https?://(.*)",Kc=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],qt={campaignParams:function(r){return Te?this._campaignParamsFromUrl(Te.URL,r):{}},_campaignParamsFromUrl:function(r,e){var t=Kc.concat(e||[]),n={};return kt(t,function(o){var a=Ro(r,o);n[o]=a||null}),n},_searchEngine:function(r){return r?r.search(fo+"google.([^/?]*)")===0?"google":r.search(fo+"bing.com")===0?"bing":r.search(fo+"yahoo.com")===0?"yahoo":r.search(fo+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(r){var e=qt._searchEngine(r),t=e!="yahoo"?"q":"p",n={};if(!wr(e)){n.$search_engine=e;var o=Te?Ro(Te.referrer,t):"";o.length&&(n.ph_keyword=o)}return n},searchInfo:function(){var r=Te?.referrer;return r?this._searchInfoFromReferrer(r):{}},browser:ll,browserVersion:function(r,e){var t=ll(r,e),n=Jc[t];if(Me(n))return null;for(var o=0;o<n.length;o++){var a=n[o],u=r.match(a);if(u)return parseFloat(u[u.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},browserLanguagePrefix:function(){var r=this.browserLanguage();return typeof r=="string"?r.split("-")[0]:void 0},os:function(r){for(var e=0;e<ul.length;e++){var[t,n]=ul[e],o=t.exec(r),a=o&&(Ln(n)?n(o,r):n);if(a)return a}return["",""]},device:cl,deviceType:function(r){var e=cl(r);return e===Kl||e===Jl||e==="Kobo"||e==="Kindle Fire"||e===du?Bi:e===qi||e===oi||e===$i||e===Bs?"Console":e===eu?"Wearable":e?Dn:"Desktop"},referrer:function(){return Te?.referrer||"$direct"},referringDomain:function(){var r;return Te!=null&&Te.referrer&&((r=ri(Te.referrer))===null||r===void 0?void 0:r.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:Cn?.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(r){var e,{r:t,u:n}=r,o={$initial_referrer:t,$initial_referring_domain:t==null?void 0:t=="$direct"?"$direct":(e=ri(t))===null||e===void 0?void 0:e.host};if(n){o.$initial_current_url=n;var a=ri(n);o.$initial_host=a?.host,o.$initial_pathname=a?.pathname,kt(this._campaignParamsFromUrl(n),function(u,p){o["$initial_"+Ts(p)]=u})}return t&&kt(this._searchInfoFromReferrer(t),function(u,p){o["$initial_"+Ts(p)]=u}),o},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},timezoneOffset:function(){try{return new Date().getTimezoneOffset()}catch{return}},properties:function(){if(!tn)return{};var[r,e]=qt.os(tn);return mn(ko({$os:r,$os_version:e,$browser:qt.browser(tn,navigator.vendor),$device:qt.device(tn),$device_type:qt.deviceType(tn),$timezone:qt.timezone(),$timezone_offset:qt.timezoneOffset()}),{$current_url:Cn?.href,$host:Cn?.host,$pathname:Cn?.pathname,$raw_user_agent:tn.length>1e3?tn.substring(0,997)+"...":tn,$browser_version:qt.browserVersion(tn,navigator.vendor),$browser_language:qt.browserLanguage(),$browser_language_prefix:qt.browserLanguagePrefix(),$screen_height:M?.screen.height,$screen_width:M?.screen.width,$viewport_height:M?.innerHeight,$viewport_width:M?.innerWidth,$lib:"web",$lib_version:ir.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!tn)return{};var[r,e]=qt.os(tn);return mn(ko({$os:r,$os_version:e,$browser:qt.browser(tn,navigator.vendor)}),{$browser_version:qt.browserVersion(tn,navigator.vendor)})}},Qc=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class bs{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(t=>{var n="";return t.token&&(n=t.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),t.persistence_name?"ph_"+t.persistence_name:"ph_"+n+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,X({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){Qc.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return t==="localstorage"&&Qt.is_supported()?Qt:t==="localstorage+cookie"&&po.is_supported()?po:t==="sessionstorage"&&sn.is_supported()?sn:t==="memory"?qc:t==="cookie"?sr:po.is_supported()?po:sr}properties(){var e={};return kt(this.props,function(t,n){if(n===ti&&Wt(t))for(var o=Object.keys(t),a=0;a<o.length;a++)e["$feature/".concat(o[a])]=t[o[a]];else p=n,f=!1,(wr(u=Ac)?f:Wa&&u.indexOf===Wa?u.indexOf(p)!=-1:(kt(u,function(b){if(f||(f=b===p))return Io}),f))||(e[n]=t);var u,p,f}),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=mn({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,t,n){if(Wt(e)){Me(t)&&(t="None"),this.expire_days=Me(n)?this.default_expiry:n;var o=!1;if(kt(e,(a,u)=>{this.props.hasOwnProperty(u)&&this.props[u]!==t||(this.props[u]=a,o=!0)}),o)return this.save(),!0}return!1}register(e,t){if(Wt(e)){this.expire_days=Me(t)?this.default_expiry:t;var n=!1;if(kt(e,(o,a)=>{e.hasOwnProperty(a)&&this.props[a]!==o&&(this.props[a]=o,n=!0)}),n)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=qt.campaignParams(this.config.custom_campaign_params);ei(ko(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(qt.searchInfo())}update_referrer_info(){this.register_once(qt.referrerInfo(),void 0)}set_initial_person_info(){this.props[Fs]||this.props[Ps]||this.register_once({[Ls]:qt.initialPersonInfo()},void 0)}get_referrer_info(){return ko({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};kt([Ps,Fs],o=>{var a=this.props[o];a&&kt(a,function(u,p){e["$initial_"+Ts(p)]=u})});var t=this.props[Ls];if(t){var n=qt.initialPersonPropsFromInfo(t);mn(e,n)}return e}safe_merge(e){return kt(this.props,function(t,n){n in e||(e[n]=t)}),e}update_config(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.buildStorage(e),o=this.props;this.clear(),this.storage=n,this.props=o,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,t){var n=this.props[Ri]||{};n[e]=t,this.props[Ri]=n,this.save()}remove_event_timer(e){var t=(this.props[Ri]||{})[e];return Me(t)||(delete this.props[Ri][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}function Oo(r){var e,t;return((e=JSON.stringify(r,(t=[],function(n,o){if(Wt(o)){for(;t.length>0&&t[t.length-1]!==this;)t.pop();return t.includes(o)?"[Circular]":(t.push(o),o)}return o})))===null||e===void 0?void 0:e.length)||0}function qs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(r.size>=e&&r.data.length>1){var t=Math.floor(r.data.length/2),n=r.data.slice(0,t),o=r.data.slice(t);return[qs({size:Oo(n),data:n,sessionId:r.sessionId,windowId:r.windowId}),qs({size:Oo(o),data:o,sessionId:r.sessionId,windowId:r.windowId})].flatMap(a=>a)}return[r]}var nr=(r=>(r[r.DomContentLoaded=0]="DomContentLoaded",r[r.Load=1]="Load",r[r.FullSnapshot=2]="FullSnapshot",r[r.IncrementalSnapshot=3]="IncrementalSnapshot",r[r.Meta=4]="Meta",r[r.Custom=5]="Custom",r[r.Plugin=6]="Plugin",r))(nr||{}),jn=(r=>(r[r.Mutation=0]="Mutation",r[r.MouseMove=1]="MouseMove",r[r.MouseInteraction=2]="MouseInteraction",r[r.Scroll=3]="Scroll",r[r.ViewportResize=4]="ViewportResize",r[r.Input=5]="Input",r[r.TouchMove=6]="TouchMove",r[r.MediaInteraction=7]="MediaInteraction",r[r.StyleSheetRule=8]="StyleSheetRule",r[r.CanvasMutation=9]="CanvasMutation",r[r.Font=10]="Font",r[r.Log=11]="Log",r[r.Drag=12]="Drag",r[r.StyleDeclaration=13]="StyleDeclaration",r[r.Selection=14]="Selection",r[r.AdoptedStyleSheet=15]="AdoptedStyleSheet",r[r.CustomElement=16]="CustomElement",r))(jn||{});function dl(r){var e;return r instanceof Element&&(r.id===Yl||!((e=r.closest)===null||e===void 0||!e.call(r,".toolbar-global-fade-container")))}function $o(r){return!!r&&r.nodeType===1}function br(r,e){return!!r&&!!r.tagName&&r.tagName.toLowerCase()===e.toLowerCase()}function hu(r){return!!r&&r.nodeType===3}function pu(r){return!!r&&r.nodeType===11}function ia(r){return r?Ho(r).split(/\s+/):[]}function hl(r){var e=M?.location.href;return!!(e&&r&&r.some(t=>e.match(t)))}function Fo(r){var e="";switch(typeof r.className){case"string":e=r.className;break;case"object":e=(r.className&&"baseVal"in r.className?r.className.baseVal:null)||r.getAttribute("class")||"";break;default:e=""}return ia(e)}function gu(r){return Tt(r)?null:Ho(r).split(/(\s+)/).filter(e=>li(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Wo(r){var e="";return Ws(r)&&!mu(r)&&r.childNodes&&r.childNodes.length&&kt(r.childNodes,function(t){var n;hu(t)&&t.textContent&&(e+=(n=gu(t.textContent))!==null&&n!==void 0?n:"")}),Ho(e)}function fu(r){return Me(r.target)?r.srcElement||null:(e=r.target)!==null&&e!==void 0&&e.shadowRoot?r.composedPath()[0]||null:r.target||null;var e}var $s=["a","button","form","input","select","textarea","label"];function vu(r){var e=r.parentNode;return!(!e||!$o(e))&&e}function ed(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!M||!r||br(r,"html")||!$o(r)||t!=null&&t.url_allowlist&&!hl(t.url_allowlist)||t!=null&&t.url_ignorelist&&hl(t.url_ignorelist))return!1;if(t!=null&&t.dom_event_allowlist){var a=t.dom_event_allowlist;if(a&&!a.some(C=>e.type===C))return!1}for(var u=!1,p=[r],f=!0,b=r;b.parentNode&&!br(b,"body");)if(pu(b.parentNode))p.push(b.parentNode.host),b=b.parentNode.host;else{if(!(f=vu(b)))break;if(n||$s.indexOf(f.tagName.toLowerCase())>-1)u=!0;else{var m=M.getComputedStyle(f);m&&m.getPropertyValue("cursor")==="pointer"&&(u=!0)}p.push(f),b=f}if(!function(C,R){var O=R?.element_allowlist;if(Me(O))return!0;var ne=function(fe){if(O.some(me=>fe.tagName.toLowerCase()===me))return{v:!0}};for(var ee of C){var z=ne(ee);if(typeof z=="object")return z.v}return!1}(p,t)||!function(C,R){var O=R?.css_selector_allowlist;if(Me(O))return!0;var ne=function(fe){if(O.some(me=>fe.matches(me)))return{v:!0}};for(var ee of C){var z=ne(ee);if(typeof z=="object")return z.v}return!1}(p,t))return!1;var v=M.getComputedStyle(r);if(v&&v.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var k=r.tagName.toLowerCase();switch(k){case"html":return!1;case"form":return(o||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(o||["change","click"]).indexOf(e.type)>=0;default:return u?(o||["click"]).indexOf(e.type)>=0:(o||["click"]).indexOf(e.type)>=0&&($s.indexOf(k)>-1||r.getAttribute("contenteditable")==="true")}}function Ws(r){for(var e=r;e.parentNode&&!br(e,"body");e=e.parentNode){var t=Fo(e);if(at(t,"ph-sensitive")||at(t,"ph-no-capture"))return!1}if(at(Fo(r),"ph-include"))return!0;var n=r.type||"";if(an(n))switch(n.toLowerCase()){case"hidden":case"password":return!1}var o=r.name||r.id||"";return!(an(o)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(o.replace(/[^a-zA-Z0-9]/g,"")))}function mu(r){return!!(br(r,"input")&&!["button","checkbox","submit","reset"].includes(r.type)||br(r,"select")||br(r,"textarea")||r.getAttribute("contenteditable")==="true")}var _u="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",td=new RegExp("^(?:".concat(_u,")$")),nd=new RegExp(_u),yu="\\d{3}-?\\d{2}-?\\d{4}",rd=new RegExp("^(".concat(yu,")$")),id=new RegExp("(".concat(yu,")"));function li(r){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(Tt(r)||an(r)&&(r=Ho(r),(e?td:nd).test((r||"").replace(/[- ]/g,""))||(e?rd:id).test(r)))}function bu(r){var e=Wo(r);return li(e="".concat(e," ").concat(wu(r)).trim())?e:""}function wu(r){var e="";return r&&r.childNodes&&r.childNodes.length&&kt(r.childNodes,function(t){var n;if(t&&((n=t.tagName)===null||n===void 0?void 0:n.toLowerCase())==="span")try{var o=Wo(t);e="".concat(e," ").concat(o).trim(),t.childNodes&&t.childNodes.length&&(e="".concat(e," ").concat(wu(t)).trim())}catch(a){Ae.error("[AutoCapture]",a)}}),e}function od(r){return function(e){var t=e.map(n=>{var o,a,u="";if(n.tag_name&&(u+=n.tag_name),n.attr_class)for(var p of(n.attr_class.sort(),n.attr_class))u+=".".concat(p.replace(/"/g,""));var f=X(X(X(X({},n.text?{text:n.text}:{}),{},{"nth-child":(o=n.nth_child)!==null&&o!==void 0?o:0,"nth-of-type":(a=n.nth_of_type)!==null&&a!==void 0?a:0},n.href?{href:n.href}:{}),n.attr_id?{attr_id:n.attr_id}:{}),n.attributes),b={};return wo(f).sort((m,v)=>{var[k]=m,[C]=v;return k.localeCompare(C)}).forEach(m=>{var[v,k]=m;return b[pl(v.toString())]=pl(k.toString())}),u+=":",u+=wo(f).map(m=>{var[v,k]=m;return"".concat(v,'="').concat(k,'"')}).join("")});return t.join(";")}(function(e){return e.map(t=>{var n,o,a={text:(n=t.$el_text)===null||n===void 0?void 0:n.slice(0,400),tag_name:t.tag_name,href:(o=t.attr__href)===null||o===void 0?void 0:o.slice(0,2048),attr_class:sd(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return wo(t).filter(u=>{var[p]=u;return p.indexOf("attr__")===0}).forEach(u=>{var[p,f]=u;return a.attributes[p]=f}),a})}(r))}function pl(r){return r.replace(/"|\\"/g,'\\"')}function sd(r){var e=r.attr__class;return e?zt(e)?e:ia(e):void 0}var js="[SessionRecording]",Vs="redacted",vo={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:r=>r,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},ad=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],ld=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],ud=["/s/","/e/","/i/"];function gl(r,e,t,n){if(Tt(r))return r;var o=e?.["content-length"]||function(a){return new Blob([a]).size}(r);return an(o)&&(o=parseInt(o)),o>t?js+" ".concat(n," body too large to record (").concat(o," bytes)"):r}function fl(r,e){if(Tt(r))return r;var t=r;return li(t,!1)||(t=js+" "+e+" body "+Vs),kt(ld,n=>{var o,a;(o=t)!==null&&o!==void 0&&o.length&&((a=t)===null||a===void 0?void 0:a.indexOf(n))!==-1&&(t=js+" "+e+" body "+Vs+" as might contain: "+n)}),t}var cd=(r,e)=>{var t,n,o,a={payloadSizeLimitBytes:vo.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...vo.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...vo.payloadHostDenyList]},u=r.session_recording.recordHeaders!==!1&&e.recordHeaders,p=r.session_recording.recordBody!==!1&&e.recordBody,f=r.capture_performance!==!1&&e.recordPerformance,b=(t=a,o=Math.min(1e6,(n=t.payloadSizeLimitBytes)!==null&&n!==void 0?n:1e6),k=>(k!=null&&k.requestBody&&(k.requestBody=gl(k.requestBody,k.requestHeaders,o,"Request")),k!=null&&k.responseBody&&(k.responseBody=gl(k.responseBody,k.responseHeaders,o,"Response")),k)),m=k=>{return b(((O,ne)=>{var ee,z=ri(O.name),fe=ne.indexOf("http")===0?(ee=ri(ne))===null||ee===void 0?void 0:ee.pathname:ne;fe==="/"&&(fe="");var me=z?.pathname.replace(fe||"","");if(!(z&&me&&ud.some(De=>me.indexOf(De)===0)))return O})((R=(C=k).requestHeaders,Tt(R)||kt(Object.keys(R??{}),O=>{ad.includes(O.toLowerCase())&&(R[O]=Vs)}),C),r.api_host));var C,R},v=Ln(r.session_recording.maskNetworkRequestFn);return v&&Ln(r.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),v&&(r.session_recording.maskCapturedNetworkRequestFn=k=>{var C=r.session_recording.maskNetworkRequestFn({url:k.name});return X(X({},k),{},{name:C?.url})}),a.maskRequestFn=Ln(r.session_recording.maskCapturedNetworkRequestFn)?k=>{var C,R,O,ne=m(k);return ne&&(C=(R=(O=r.session_recording).maskCapturedNetworkRequestFn)===null||R===void 0?void 0:R.call(O,ne))!==null&&C!==void 0?C:void 0}:k=>function(C){if(!Me(C))return C.requestBody=fl(C.requestBody,"Request"),C.responseBody=fl(C.responseBody,"Response"),C}(m(k)),X(X(X({},vo),a),{},{recordHeaders:u,recordBody:p,recordPerformance:f,recordInitialRequests:f})};function zn(r,e,t,n,o){return e>t&&(Ae.warn("min cannot be greater than max."),e=t),vn(r)?r>t?(n&&Ae.warn(n+" cannot be  greater than max: "+t+". Using max value instead."),t):r<e?(n&&Ae.warn(n+" cannot be less than min: "+e+". Using min value instead."),e):r:(n&&Ae.warn(n+" must be a number. using max or fallback. max: "+t+", fallback: "+o),zn(o||t,e,t,n))}class dd{constructor(e){var t,n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ie(this,"bucketSize",100),ie(this,"refillRate",10),ie(this,"mutationBuckets",{}),ie(this,"loggedTracker",{}),ie(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(a=>{this.mutationBuckets[a]=this.mutationBuckets[a]+this.refillRate,this.mutationBuckets[a]>=this.bucketSize&&delete this.mutationBuckets[a]})}),ie(this,"getNodeOrRelevantParent",a=>{var u=this.rrweb.mirror.getNode(a);if(u?.nodeName!=="svg"&&u instanceof Element){var p=u.closest("svg");if(p)return[this.rrweb.mirror.getId(p),p]}return[a,u]}),ie(this,"numberOfChanges",a=>{var u,p,f,b,m,v,k,C;return((u=(p=a.removes)===null||p===void 0?void 0:p.length)!==null&&u!==void 0?u:0)+((f=(b=a.attributes)===null||b===void 0?void 0:b.length)!==null&&f!==void 0?f:0)+((m=(v=a.texts)===null||v===void 0?void 0:v.length)!==null&&m!==void 0?m:0)+((k=(C=a.adds)===null||C===void 0?void 0:C.length)!==null&&k!==void 0?k:0)}),ie(this,"throttleMutations",a=>{if(a.type!==3||a.data.source!==0)return a;var u=a.data,p=this.numberOfChanges(u);u.attributes&&(u.attributes=u.attributes.filter(b=>{var m,v,k,[C,R]=this.getNodeOrRelevantParent(b.id);return this.mutationBuckets[C]===0?!1:(this.mutationBuckets[C]=(m=this.mutationBuckets[C])!==null&&m!==void 0?m:this.bucketSize,this.mutationBuckets[C]=Math.max(this.mutationBuckets[C]-1,0),this.mutationBuckets[C]===0&&(this.loggedTracker[C]||(this.loggedTracker[C]=!0,(v=(k=this.options).onBlockedNode)===null||v===void 0||v.call(k,C,R))),b)}));var f=this.numberOfChanges(u);return f!==0||p===f?a:void 0}),this.rrweb=e,this.options=o,this.refillRate=zn((t=this.options.refillRate)!==null&&t!==void 0?t:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=zn((n=this.options.bucketSize)!==null&&n!==void 0?n:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Bn=Uint8Array,kn=Uint16Array,ui=Uint32Array,oa=new Bn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sa=new Bn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vl=new Bn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Su=function(r,e){for(var t=new kn(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];var o=new ui(t[30]);for(n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)o[a]=a-t[n]<<5|n;return[t,o]},Cu=Su(oa,2),hd=Cu[0],Us=Cu[1];hd[28]=258,Us[258]=28;for(var ml=Su(sa,0)[1],Iu=new kn(32768),At=0;At<32768;++At){var Rr=(43690&At)>>>1|(21845&At)<<1;Rr=(61680&(Rr=(52428&Rr)>>>2|(13107&Rr)<<2))>>>4|(3855&Rr)<<4,Iu[At]=((65280&Rr)>>>8|(255&Rr)<<8)>>>1}var Pi=function(r,e,t){for(var n=r.length,o=0,a=new kn(e);o<n;++o)++a[r[o]-1];var u,p=new kn(e);for(o=0;o<e;++o)p[o]=p[o-1]+a[o-1]<<1;for(u=new kn(n),o=0;o<n;++o)u[o]=Iu[p[r[o]-1]++]>>>15-r[o];return u},$r=new Bn(288);for(At=0;At<144;++At)$r[At]=8;for(At=144;At<256;++At)$r[At]=9;for(At=256;At<280;++At)$r[At]=7;for(At=280;At<288;++At)$r[At]=8;var Po=new Bn(32);for(At=0;At<32;++At)Po[At]=5;var pd=Pi($r,9),gd=Pi(Po,5),ku=function(r){return(r/8>>0)+(7&r&&1)},Eu=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof kn?kn:r instanceof ui?ui:Bn)(t-e);return n.set(r.subarray(e,t)),n},er=function(r,e,t){t<<=7&e;var n=e/8>>0;r[n]|=t,r[n+1]|=t>>>8},Ei=function(r,e,t){t<<=7&e;var n=e/8>>0;r[n]|=t,r[n+1]|=t>>>8,r[n+2]|=t>>>16},ws=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var o=t.length,a=t.slice();if(!o)return[new Bn(0),0];if(o==1){var u=new Bn(t[0].s+1);return u[t[0].s]=1,[u,1]}t.sort(function(De,lt){return De.f-lt.f}),t.push({s:-1,f:25001});var p=t[0],f=t[1],b=0,m=1,v=2;for(t[0]={s:-1,f:p.f+f.f,l:p,r:f};m!=o-1;)p=t[t[b].f<t[v].f?b++:v++],f=t[b!=m&&t[b].f<t[v].f?b++:v++],t[m++]={s:-1,f:p.f+f.f,l:p,r:f};var k=a[0].s;for(n=1;n<o;++n)a[n].s>k&&(k=a[n].s);var C=new kn(k+1),R=Gs(t[m-1],C,0);if(R>e){n=0;var O=0,ne=R-e,ee=1<<ne;for(a.sort(function(De,lt){return C[lt.s]-C[De.s]||De.f-lt.f});n<o;++n){var z=a[n].s;if(!(C[z]>e))break;O+=ee-(1<<R-C[z]),C[z]=e}for(O>>>=ne;O>0;){var fe=a[n].s;C[fe]<e?O-=1<<e-C[fe]++-1:++n}for(;n>=0&&O;--n){var me=a[n].s;C[me]==e&&(--C[me],++O)}R=e}return[new Bn(C),R]},Gs=function(r,e,t){return r.s==-1?Math.max(Gs(r.l,e,t+1),Gs(r.r,e,t+1)):e[r.s]=t},_l=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new kn(++e),n=0,o=r[0],a=1,u=function(f){t[n++]=f},p=1;p<=e;++p)if(r[p]==o&&p!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)u(32754);a>2&&(u(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(u(o),--a;a>6;a-=6)u(8304);a>2&&(u(a-3<<5|8208),a=0)}for(;a--;)u(o);a=1,o=r[p]}return[t.subarray(0,n),e]},xi=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Zs=function(r,e,t){var n=t.length,o=ku(e+2);r[o]=255&n,r[o+1]=n>>>8,r[o+2]=255^r[o],r[o+3]=255^r[o+1];for(var a=0;a<n;++a)r[o+a+4]=t[a];return 8*(o+4+n)},yl=function(r,e,t,n,o,a,u,p,f,b,m){er(e,m++,t),++o[256];for(var v=ws(o,15),k=v[0],C=v[1],R=ws(a,15),O=R[0],ne=R[1],ee=_l(k),z=ee[0],fe=ee[1],me=_l(O),De=me[0],lt=me[1],Ie=new kn(19),Be=0;Be<z.length;++Be)Ie[31&z[Be]]++;for(Be=0;Be<De.length;++Be)Ie[31&De[Be]]++;for(var Ge=ws(Ie,7),tt=Ge[0],_t=Ge[1],Et=19;Et>4&&!tt[vl[Et-1]];--Et);var xt,jt,Pt,wt,Lt=b+5<<3,Vt=xi(o,$r)+xi(a,Po)+u,Yt=xi(o,k)+xi(a,O)+u+14+3*Et+xi(Ie,tt)+(2*Ie[16]+3*Ie[17]+7*Ie[18]);if(Lt<=Vt&&Lt<=Yt)return Zs(e,m,r.subarray(f,f+b));if(er(e,m,1+(Yt<Vt)),m+=2,Yt<Vt){xt=Pi(k,C),jt=k,Pt=Pi(O,ne),wt=O;var Ut=Pi(tt,_t);for(er(e,m,fe-257),er(e,m+5,lt-1),er(e,m+10,Et-4),m+=14,Be=0;Be<Et;++Be)er(e,m+3*Be,tt[vl[Be]]);m+=3*Et;for(var nn=[z,De],It=0;It<2;++It){var Mt=nn[It];for(Be=0;Be<Mt.length;++Be){var St=31&Mt[Be];er(e,m,Ut[St]),m+=tt[St],St>15&&(er(e,m,Mt[Be]>>>5&127),m+=Mt[Be]>>>12)}}}else xt=pd,jt=$r,Pt=gd,wt=Po;for(Be=0;Be<p;++Be)if(n[Be]>255){St=n[Be]>>>18&31,Ei(e,m,xt[St+257]),m+=jt[St+257],St>7&&(er(e,m,n[Be]>>>23&31),m+=oa[St]);var Ct=31&n[Be];Ei(e,m,Pt[Ct]),m+=wt[Ct],Ct>3&&(Ei(e,m,n[Be]>>>5&8191),m+=sa[Ct])}else Ei(e,m,xt[n[Be]]),m+=jt[n[Be]];return Ei(e,m,xt[256]),m+jt[256]},fd=new ui([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vd=function(){for(var r=new ui(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(1&t&&3988292384)^t>>>1;r[e]=t}return r}(),md=function(){var r=4294967295;return{p:function(e){for(var t=r,n=0;n<e.length;++n)t=vd[255&t^e[n]]^t>>>8;r=t},d:function(){return 4294967295^r}}},_d=function(r,e,t,n,o){return function(a,u,p,f,b,m){var v=a.length,k=new Bn(f+v+5*(1+Math.floor(v/7e3))+b),C=k.subarray(f,k.length-b),R=0;if(!u||v<8)for(var O=0;O<=v;O+=65535){var ne=O+65535;ne<v?R=Zs(C,R,a.subarray(O,ne)):(C[O]=m,R=Zs(C,R,a.subarray(O,v)))}else{for(var ee=fd[u-1],z=ee>>>13,fe=8191&ee,me=(1<<p)-1,De=new kn(32768),lt=new kn(me+1),Ie=Math.ceil(p/3),Be=2*Ie,Ge=function(ut){return(a[ut]^a[ut+1]<<Ie^a[ut+2]<<Be)&me},tt=new ui(25e3),_t=new kn(288),Et=new kn(32),xt=0,jt=0,Pt=(O=0,0),wt=0,Lt=0;O<v;++O){var Vt=Ge(O),Yt=32767&O,Ut=lt[Vt];if(De[Yt]=Ut,lt[Vt]=Yt,wt<=O){var nn=v-O;if((xt>7e3||Pt>24576)&&nn>423){R=yl(a,C,0,tt,_t,Et,jt,Pt,Lt,O-Lt,R),Pt=xt=jt=0,Lt=O;for(var It=0;It<286;++It)_t[It]=0;for(It=0;It<30;++It)Et[It]=0}var Mt=2,St=0,Ct=fe,Xt=Yt-Ut&32767;if(nn>2&&Vt==Ge(O-Xt))for(var rn=Math.min(z,nn)-1,_n=Math.min(32767,O),yn=Math.min(258,nn);Xt<=_n&&--Ct&&Yt!=Ut;){if(a[O+Mt]==a[O+Mt-Xt]){for(var $=0;$<yn&&a[O+$]==a[O+$-Xt];++$);if($>Mt){if(Mt=$,St=Xt,$>rn)break;var P=Math.min(Xt,$-2),Z=0;for(It=0;It<P;++It){var J=O-Xt+It+32768&32767,se=J-De[J]+32768&32767;se>Z&&(Z=se,Ut=J)}}}Xt+=(Yt=Ut)-(Ut=De[Yt])+32768&32767}if(St){tt[Pt++]=268435456|Us[Mt]<<18|ml[St];var He=31&Us[Mt],Ee=31&ml[St];jt+=oa[He]+sa[Ee],++_t[257+He],++Et[Ee],wt=O+Mt,++xt}else tt[Pt++]=a[O],++_t[a[O]]}}R=yl(a,C,m,tt,_t,Et,jt,Pt,Lt,O-Lt,R)}return Eu(k,0,f+ku(R)+b)}(r,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+e.mem,t,n,!o)},zs=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},yd=function(r,e){var t=e.filename;if(r[0]=31,r[1]=139,r[2]=8,r[8]=e.level<2?4:e.level==9?2:0,r[9]=3,e.mtime!=0&&zs(r,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){r[3]=8;for(var n=0;n<=t.length;++n)r[n+10]=t.charCodeAt(n)}},bd=function(r){return 10+(r.filename&&r.filename.length+1||0)};function xu(r,e){e===void 0&&(e={});var t=md(),n=r.length;t.p(r);var o=_d(r,e,bd(e),8),a=o.length;return yd(o,e),zs(o,a-8,t.d()),zs(o,a-4,n),o}function Tu(r,e){var t=r.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(r);for(var n=new Bn(r.length+(r.length>>>1)),o=0,a=function(b){n[o++]=b},u=0;u<t;++u){if(o+5>n.length){var p=new Bn(o+8+(t-u<<1));p.set(n),n=p}var f=r.charCodeAt(u);f<128||e?a(f):f<2048?(a(192|f>>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&r.charCodeAt(++u))>>>18),a(128|f>>>12&63),a(128|f>>>6&63),a(128|63&f)):(a(224|f>>>12),a(128|f>>>6&63),a(128|63&f))}return Eu(n,0,o)}var Fi="[SessionRecording]",cn=En(Fi),wd=3e5,Sd=[jn.MouseMove,jn.MouseInteraction,jn.Scroll,jn.ViewportResize,jn.Input,jn.TouchMove,jn.MediaInteraction,jn.Drag],bl=r=>({rrwebMethod:r,enqueuedAt:Date.now(),attempt:1});function Ar(r){return function(e,t){for(var n="",o=0;o<e.length;){var a=e[o++];n+=String.fromCharCode(a)}return n}(xu(Tu(JSON.stringify(r))))}function wl(r){return r.type===nr.Custom&&r.data.tag==="sessionIdle"}function Sl(r,e){return e.some(t=>t.matching==="regex"&&new RegExp(t.url).test(r))}class Cd{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,t;return et==null||(e=et.__PosthogExtensions__)===null||e===void 0||(t=e.rrweb)===null||t===void 0?void 0:t.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(Fi+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,t;return this.triggerStatus==="trigger_pending"?6e4:(e=(t=this.instance.config.session_recording)===null||t===void 0?void 0:t.full_snapshot_interval_millis)!==null&&e!==void 0?e:wd}get isSampled(){var e=this.instance.get_property(Ai);return Br(e)?e:null}get sessionDuration(){var e,t,n=(e=this.buffer)===null||e===void 0?void 0:e.data[((t=this.buffer)===null||t===void 0?void 0:t.data.length)-1],{sessionStartTimestamp:o}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return n?n.timestamp-o:null}get isRecordingEnabled(){var e=!!this.instance.get_property(Rs),t=!this.instance.config.disable_session_recording;return M&&e&&t}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(Xa),t=this.instance.config.enable_recording_console_log;return t??e}get canvasRecording(){var e,t,n,o,a,u,p=this.instance.config.session_recording.captureCanvas,f=this.instance.get_property(Ka),b=(e=(t=p?.recordCanvas)!==null&&t!==void 0?t:f?.enabled)!==null&&e!==void 0&&e,m=(n=(o=p?.canvasFps)!==null&&o!==void 0?o:f?.fps)!==null&&n!==void 0?n:0,v=(a=(u=p?.canvasQuality)!==null&&u!==void 0?u:f?.quality)!==null&&a!==void 0?a:0;return{enabled:b,fps:zn(m,0,12,"canvas recording fps"),quality:zn(v,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,t,n=this.instance.get_property(Ja),o={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(t=this.instance.config.session_recording)===null||t===void 0?void 0:t.recordBody},a=o?.recordHeaders||n?.recordHeaders,u=o?.recordBody||n?.recordBody,p=Wt(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,f=!!(Br(p)?p:n?.capturePerformance);return a||u||f?{recordHeaders:a,recordBody:u,recordPerformance:f}:void 0}get sampleRate(){var e=this.instance.get_property(Qa);return vn(e)?e:null}get minimumDuration(){var e=this.instance.get_property(el);return vn(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?this._urlBlocked?"paused":Tt(this._linkedFlag)||this._linkedFlagSeen?this.triggerStatus==="trigger_pending"?"buffering":Br(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return this._urlTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(fs))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return this._eventTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(vs))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e=this.eventTriggerStatus==="trigger_activated"||this.urlTriggerStatus==="trigger_activated",t=this.eventTriggerStatus==="trigger_pending"||this.urlTriggerStatus==="trigger_pending";return e?"trigger_activated":t?"trigger_pending":"trigger_disabled"}constructor(e){if(ie(this,"queuedRRWebEvents",[]),ie(this,"isIdle",!1),ie(this,"_linkedFlagSeen",!1),ie(this,"_lastActivityTimestamp",Date.now()),ie(this,"_linkedFlag",null),ie(this,"_removePageViewCaptureHook",void 0),ie(this,"_onSessionIdListener",void 0),ie(this,"_persistDecideOnSessionListener",void 0),ie(this,"_samplingSessionListener",void 0),ie(this,"_urlTriggers",[]),ie(this,"_urlBlocklist",[]),ie(this,"_urlBlocked",!1),ie(this,"_eventTriggers",[]),ie(this,"_removeEventTriggerCaptureHook",void 0),ie(this,"_forceAllowLocalhostNetworkCapture",!1),ie(this,"_onBeforeUnload",()=>{this._flushBuffer()}),ie(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),ie(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),ie(this,"_onVisibilityChange",()=>{if(Te!=null&&Te.visibilityState){var o="window "+Te.visibilityState;this._tryAddCustomEvent(o,{})}}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw cn.error("started without valid sessionManager"),new Error(Fi+" started without valid sessionManager. This is a bug.");if(this.instance.config.__preview_experimental_cookieless_mode)throw new Error(Fi+" cannot be used with __preview_experimental_cookieless_mode.");var{sessionId:t,windowId:n}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=t,this.windowId=n,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&cn.warn("session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),M?.addEventListener("beforeunload",this._onBeforeUnload),M?.addEventListener("offline",this._onOffline),M?.addEventListener("online",this._onOnline),M?.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),Tt(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance.on("eventCaptured",t=>{try{if(t.event==="$pageview"){var n=t!=null&&t.properties.$current_url?this._maskUrl(t?.properties.$current_url):"";if(!n)return;this._tryAddCustomEvent("$pageview",{href:n})}}catch(o){cn.error("Could not add $pageview to rrweb session",o)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((t,n,o)=>{var a,u,p,f;o&&(this._tryAddCustomEvent("$session_id_change",{sessionId:t,windowId:n,changeReason:o}),(a=this.instance)===null||a===void 0||(u=a.persistence)===null||u===void 0||u.unregister(vs),(p=this.instance)===null||p===void 0||(f=p.persistence)===null||f===void 0||f.unregister(fs))}))):this.stopRecording()}stopRecording(){var e,t,n,o;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,M?.removeEventListener("beforeunload",this._onBeforeUnload),M?.removeEventListener("offline",this._onOffline),M?.removeEventListener("online",this._onOnline),M?.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),(e=this._removePageViewCaptureHook)===null||e===void 0||e.call(this),this._removePageViewCaptureHook=void 0,(t=this._removeEventTriggerCaptureHook)===null||t===void 0||t.call(this),this._removeEventTriggerCaptureHook=void 0,(n=this._onSessionIdListener)===null||n===void 0||n.call(this),this._onSessionIdListener=void 0,(o=this._samplingSessionListener)===null||o===void 0||o.call(this),this._samplingSessionListener=void 0,cn.info("stopped"))}makeSamplingDecision(e){var t,n=this.sessionId!==e,o=this.sampleRate;if(vn(o)){var a,u=this.isSampled,p=n||!Br(u);p?a=Math.random()<o:a=u,p&&(a?this._reportStarted("sampled"):cn.warn("Sample rate (".concat(o,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:o,isSampled:a})),(t=this.instance.persistence)===null||t===void 0||t.register({[Ai]:a})}else{var f;(f=this.instance.persistence)===null||f===void 0||f.register({[Ai]:null})}}onRemoteConfig(e){var t,n,o,a,u,p;if(this._tryAddCustomEvent("$remote_config_received",e),this._persistRemoteConfig(e),this._linkedFlag=((t=e.sessionRecording)===null||t===void 0?void 0:t.linkedFlag)||null,(n=e.sessionRecording)!==null&&n!==void 0&&n.endpoint&&(this._endpoint=(p=e.sessionRecording)===null||p===void 0?void 0:p.endpoint),this._setupSampling(),!Tt(this._linkedFlag)&&!this._linkedFlagSeen){var f=an(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,b=an(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((m,v)=>{var k=Wt(v)&&f in v,C=b?v[f]===b:k;C&&this._reportStarted("linked_flag_matched",{linkedFlag:f,linkedVariant:b}),this._linkedFlagSeen=C})}(o=e.sessionRecording)!==null&&o!==void 0&&o.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),(a=e.sessionRecording)!==null&&a!==void 0&&a.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),(u=e.sessionRecording)!==null&&u!==void 0&&u.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){vn(this.sampleRate)&&Tt(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistRemoteConfig(e){if(this.instance.persistence){var t,n=this.instance.persistence,o=()=>{var a,u,p,f,b,m,v,k,C=(a=e.sessionRecording)===null||a===void 0?void 0:a.sampleRate,R=Tt(C)?null:parseFloat(C),O=(u=e.sessionRecording)===null||u===void 0?void 0:u.minimumDurationMilliseconds;n.register({[Rs]:!!e.sessionRecording,[Xa]:(p=e.sessionRecording)===null||p===void 0?void 0:p.consoleLogRecordingEnabled,[Ja]:X({capturePerformance:e.capturePerformance},(f=e.sessionRecording)===null||f===void 0?void 0:f.networkPayloadCapture),[Ka]:{enabled:(b=e.sessionRecording)===null||b===void 0?void 0:b.recordCanvas,fps:(m=e.sessionRecording)===null||m===void 0?void 0:m.canvasFps,quality:(v=e.sessionRecording)===null||v===void 0?void 0:v.canvasQuality},[Qa]:R,[el]:Me(O)?null:O,[tl]:(k=e.sessionRecording)===null||k===void 0?void 0:k.scriptConfig})};o(),(t=this._persistDecideOnSessionListener)===null||t===void 0||t.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(o)}}log(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(t=this.instance.sessionRecording)===null||t===void 0||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!Me(Object.assign)&&!Me(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var t,n;this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():(t=et.__PosthogExtensions__)===null||t===void 0||(n=t.loadExternalDependency)===null||n===void 0||n.call(t,this.instance,this.scriptName,o=>{if(o)return cn.error("could not load recorder",o);this._onScriptLoaded()}),cn.info("starting"),this.status==="active"&&this._reportStarted(e||"recording_initialized")}}get scriptName(){var e,t,n;return((e=this.instance)===null||e===void 0||(t=e.persistence)===null||t===void 0||(n=t.get_property(tl))===null||n===void 0?void 0:n.script)||"recorder"}isInteractiveEvent(e){var t;return e.type===3&&Sd.indexOf((t=e.data)===null||t===void 0?void 0:t.source)!==-1}_updateWindowAndSessionIds(e){var t=this.isInteractiveEvent(e);t||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),!this.isIdle){var{windowId:o,sessionId:a}=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),u=this.sessionId!==a,p=this.windowId!==o;this.windowId=o,this.sessionId=a,u||p?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):n&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(t){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):cn.warn("could not emit queued rrweb event.",t,e),!1}}_tryAddCustomEvent(e,t){return this._tryRRWebMethod(bl(()=>this.rrwebRecord.addCustomEvent(e,t)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(bl(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e,t={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},n=this.instance.config.session_recording;for(var[o,a]of Object.entries(n||{}))o in t&&(o==="maskInputOptions"?t.maskInputOptions=X({password:!0},a):t[o]=a);if(this.canvasRecording&&this.canvasRecording.enabled&&(t.recordCanvas=!0,t.sampling={canvas:this.canvasRecording.fps},t.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new dd(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(p,f)=>{var b="Too many mutations on node '".concat(p,"'. Rate limiting. This could be due to SVG animations or something similar");cn.info(b,{node:f}),this.log(Fi+" "+b,"warn")}});var u=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(X({emit:p=>{this.onRRwebEmit(p)},plugins:u},t)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:t,activePlugins:u.map(p=>p?.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else cn.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,t,n,o,a=[],u=(e=et.__PosthogExtensions__)===null||e===void 0||(t=e.rrwebPlugins)===null||t===void 0?void 0:t.getRecordConsolePlugin;u&&this.isConsoleLogCaptureEnabled&&a.push(u());var p=(n=et.__PosthogExtensions__)===null||n===void 0||(o=n.rrwebPlugins)===null||o===void 0?void 0:o.getRecordNetworkPlugin;return this.networkPayloadCapture&&Ln(p)&&(!$c.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?a.push(p(cd(this.instance.config,this.networkPayloadCapture))):cn.info("NetworkCapture not started because we are on localhost.")),a}onRRwebEmit(e){var t;if(this._processQueuedEvents(),e&&Wt(e)){if(e.type===nr.Meta){var n=this._maskUrl(e.data.href);if(this._lastHref=n,!n)return;e.data.href=n}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),this.status!=="paused"||function(v){return v.type===nr.Custom&&v.data.tag==="recording paused"}(e)){e.type===nr.FullSnapshot&&this._scheduleFullSnapshot(),e.type===nr.FullSnapshot&&this.triggerStatus==="trigger_pending"&&this.clearBuffer();var o=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(o){var a=function(v){var k=v;if(k&&Wt(k)&&k.type===6&&Wt(k.data)&&k.data.plugin==="rrweb/console@1"){k.data.payload.payload.length>10&&(k.data.payload.payload=k.data.payload.payload.slice(0,10),k.data.payload.payload.push("...[truncated]"));for(var C=[],R=0;R<k.data.payload.payload.length;R++)k.data.payload.payload[R]&&k.data.payload.payload[R].length>2e3?C.push(k.data.payload.payload[R].slice(0,2e3)+"...[truncated]"):C.push(k.data.payload.payload[R]);return k.data.payload.payload=C,v}return v}(o);if(this._updateWindowAndSessionIds(a),!this.isIdle||wl(a)){if(wl(a)){var u=a.data.payload;if(u){var p=u.lastActivityTimestamp,f=u.threshold;a.timestamp=p+f}}var b=(t=this.instance.config.session_recording.compress_events)===null||t===void 0||t?function(v){if(Oo(v)<1024)return v;try{if(v.type===nr.FullSnapshot)return X(X({},v),{},{data:Ar(v.data),cv:"2024-10"});if(v.type===nr.IncrementalSnapshot&&v.data.source===jn.Mutation)return X(X({},v),{},{cv:"2024-10",data:X(X({},v.data),{},{texts:Ar(v.data.texts),attributes:Ar(v.data.attributes),removes:Ar(v.data.removes),adds:Ar(v.data.adds)})});if(v.type===nr.IncrementalSnapshot&&v.data.source===jn.StyleSheetRule)return X(X({},v),{},{cv:"2024-10",data:X(X({},v.data),{},{adds:Ar(v.data.adds),removes:Ar(v.data.removes)})})}catch(k){cn.error("could not compress event - will use uncompressed event",k)}return v}(a):a,m={$snapshot_bytes:Oo(b),$snapshot_data:b,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(m):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&M){var e=this._maskUrl(M.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(t=>{Date.now()-t.enqueuedAt<=2e3&&this._tryRRWebMethod(t)})}}_maskUrl(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n,o={url:e};return(n=o=t.maskNetworkRequestFn(o))===null||n===void 0?void 0:n.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,t=this.sessionDuration,n=vn(t)&&t>=0,o=vn(e)&&n&&t<e;return this.status==="buffering"||this.status==="paused"||o?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&qs(this.buffer).forEach(a=>{this._captureSnapshot({$snapshot_bytes:a.size,$snapshot_data:a.data,$session_id:a.sessionId,$window_id:a.windowId,$lib:"web",$lib_version:ir.LIB_VERSION})}),this.clearBuffer())}_captureSnapshotBuffered(e){var t,n=2+(((t=this.buffer)===null||t===void 0?void 0:t.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+n>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(M!==void 0&&M.location.href){var e=M.location.href,t=this.status==="paused",n=Sl(e,this._urlBlocklist);n&&!t?this._pauseRecording():!n&&t&&this._resumeRecording(),Sl(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var t,n;this.triggerStatus==="trigger_pending"&&((t=this.instance)===null||t===void 0||(n=t.persistence)===null||n===void 0||n.register({[e==="url"?fs:vs]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){this.status!=="paused"&&(this._urlBlocked=!0,clearInterval(this._fullSnapshotTimer),cn.info("recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){this.status==="paused"&&(this._urlBlocked=!1,this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),cn.info("recording resumed"))}_addEventTriggerListener(){this._eventTriggers.length!==0&&Tt(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(t){cn.error("Could not activate event trigger",t)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;(e=this.instance.persistence)===null||e===void 0||e.register({[Ai]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,t){this.instance.register_for_session({$session_recording_start_reason:e}),cn.info(e.replace("_"," "),t),at(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,t)}}var Nr=En("[RemoteConfig]");class Id{constructor(e){this.instance=e}get remoteConfig(){var e,t;return(e=et._POSTHOG_REMOTE_CONFIG)===null||e===void 0||(t=e[this.instance.config.token])===null||t===void 0?void 0:t.config}_loadRemoteConfigJs(e){var t,n,o;(t=et.__PosthogExtensions__)!==null&&t!==void 0&&t.loadExternalDependency?(n=et.__PosthogExtensions__)===null||n===void 0||(o=n.loadExternalDependency)===null||o===void 0||o.call(n,this.instance,"remote-config",()=>e(this.remoteConfig)):(Nr.error("PostHog Extensions not found. Cannot load remote config."),e())}_loadRemoteConfigJSON(e){this.instance._send_request({method:"GET",url:this.instance.requestRouter.endpointFor("assets","/array/".concat(this.instance.config.token,"/config")),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return Nr.info("Using preloaded remote config",this.remoteConfig),void this.onRemoteConfig(this.remoteConfig);if(this.instance.config.advanced_disable_decide)return void Nr.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs(e=>{if(!e)return Nr.info("No config found after loading remote JS config. Falling back to JSON."),void this._loadRemoteConfigJSON(t=>{this.onRemoteConfig(t)});this.onRemoteConfig(e)})}catch(e){Nr.error("Error loading remote config",e)}}onRemoteConfig(e){e?this.instance.config.__preview_remote_config?(this.instance._onRemoteConfig(e),e.hasFeatureFlags!==!1&&this.instance.featureFlags.ensureFlagsLoaded()):Nr.info("__preview_remote_config is disabled. Logging config instead",e):Nr.error("Failed to fetch remote config from PostHog.")}}var rr,kd=M!=null&&M.location?Ao(M.location.hash,"__posthog")||Ao(location.hash,"state"):null,Cl="_postHogToolbarParams";(function(r){r[r.UNINITIALIZED=0]="UNINITIALIZED",r[r.LOADING=1]="LOADING",r[r.LOADED=2]="LOADED"})(rr||(rr={}));class Ed{constructor(e){this.instance=e}setToolbarState(e){et.ph_toolbar_state=e}getToolbarState(){var e;return(e=et.ph_toolbar_state)!==null&&e!==void 0?e:rr.UNINITIALIZED}maybeLoadToolbar(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!M||!Te)return!1;n=(e=n)!==null&&e!==void 0?e:M.location,a=(t=a)!==null&&t!==void 0?t:M.history;try{if(!o){try{M.localStorage.setItem("test","test"),M.localStorage.removeItem("test")}catch{return!1}o=M?.localStorage}var u,p=kd||Ao(n.hash,"__posthog")||Ao(n.hash,"state"),f=p?Ua(()=>JSON.parse(atob(decodeURIComponent(p))))||Ua(()=>JSON.parse(decodeURIComponent(p))):null;return f&&f.action==="ph_authorize"?((u=f).source="url",u&&Object.keys(u).length>0&&(f.desiredHash?n.hash=f.desiredHash:a?a.replaceState(a.state,"",n.pathname+n.search):n.hash="")):((u=JSON.parse(o.getItem(Cl)||"{}")).source="localstorage",delete u.userIntent),!(!u.token||this.instance.config.token!==u.token)&&(this.loadToolbar(u),!0)}catch{return!1}}_callLoadToolbar(e){(et.ph_load_toolbar||et.ph_load_editor)(e,this.instance)}loadToolbar(e){var t=!(Te==null||!Te.getElementById(Yl));if(!M||t)return!1;var n=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,o=X(X({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(M.localStorage.setItem(Cl,JSON.stringify(X(X({},o),{},{source:void 0}))),this.getToolbarState()===rr.LOADED)this._callLoadToolbar(o);else if(this.getToolbarState()===rr.UNINITIALIZED){var a,u;this.setToolbarState(rr.LOADING),(a=et.__PosthogExtensions__)===null||a===void 0||(u=a.loadExternalDependency)===null||u===void 0||u.call(a,this.instance,"toolbar",p=>{if(p)return Ae.error("[Toolbar] Failed to load",p),void this.setToolbarState(rr.UNINITIALIZED);this.setToolbarState(rr.LOADED),this._callLoadToolbar(o)}),or(M,"turbolinks:load",()=>{this.setToolbarState(rr.UNINITIALIZED),this.loadToolbar(o)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}class xd{constructor(e){ie(this,"isPaused",!0),ie(this,"queue",[]),ie(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},t=Object.values(e),n=[...t.filter(o=>o.url.indexOf("/e")===0),...t.filter(o=>o.url.indexOf("/e")!==0)];n.map(o=>{this.sendRequest(X(X({},o),{},{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){var t=this.formatQueue(),n=function(a){var u=t[a],p=new Date().getTime();u.data&&zt(u.data)&&kt(u.data,f=>{f.offset=Math.abs(f.timestamp-p),delete f.timestamp}),e.sendRequest(u)};for(var o in t)n(o)}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return kt(this.queue,t=>{var n,o=t,a=(o?o.batchKey:null)||o.url;Me(e[a])&&(e[a]=X(X({},o),{},{data:[]})),(n=e[a].data)===null||n===void 0||n.push(o.data)}),this.queue=[],e}}var Td=function(r){var e,t,n,o,a="";for(e=t=0,n=(r=(r+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,o=0;o<n;o++){var u=r.charCodeAt(o),p=null;u<128?t++:p=u>127&&u<2048?String.fromCharCode(u>>6|192,63&u|128):String.fromCharCode(u>>12|224,u>>6&63|128,63&u|128),wr(p)||(t>e&&(a+=r.substring(e,t)),a+=p,e=t=o+1)}return t>e&&(a+=r.substring(e,r.length)),a},Md=!!xs||!!Es,Il="text/plain",Lo=(r,e)=>{var[t,n]=r.split("?"),o=X({},e);n?.split("&").forEach(u=>{var[p]=u.split("=");delete o[p]});var a=Wc(o);return a=a?(n?n+"&":"")+a:n,"".concat(t,"?").concat(a)},mo=(r,e)=>JSON.stringify(r,(t,n)=>typeof n=="bigint"?n.toString():n,e),Ss=r=>{var{data:e,compression:t}=r;if(e){if(t===Gn.GZipJS){var n=xu(Tu(mo(e)),{mtime:0}),o=new Blob([n],{type:Il});return{contentType:Il,body:o,estimatedSize:o.size}}if(t===Gn.Base64){var a=function(f){var b,m,v,k,C,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",O=0,ne=0,ee="",z=[];if(!f)return f;f=Td(f);do b=(C=f.charCodeAt(O++)<<16|f.charCodeAt(O++)<<8|f.charCodeAt(O++))>>18&63,m=C>>12&63,v=C>>6&63,k=63&C,z[ne++]=R.charAt(b)+R.charAt(m)+R.charAt(v)+R.charAt(k);while(O<f.length);switch(ee=z.join(""),f.length%3){case 1:ee=ee.slice(0,-2)+"==";break;case 2:ee=ee.slice(0,-1)+"="}return ee}(mo(e)),u=(f=>"data="+encodeURIComponent(typeof f=="string"?f:mo(f)))(a);return{contentType:"application/x-www-form-urlencoded",body:u,estimatedSize:new Blob([u]).size}}var p=mo(e);return{contentType:"application/json",body:p,estimatedSize:new Blob([p]).size}}},Li=[];Es&&Li.push({transport:"fetch",method:r=>{var e,t,{contentType:n,body:o,estimatedSize:a}=(e=Ss(r))!==null&&e!==void 0?e:{},u=new Headers;kt(r.headers,function(m,v){u.append(v,m)}),n&&u.append("Content-Type",n);var p=r.url,f=null;if(ja){var b=new ja;f={signal:b.signal,timeout:setTimeout(()=>b.abort(),r.timeout)}}Es(p,X({method:r?.method||"GET",headers:u,keepalive:r.method==="POST"&&(a||0)<52428.8,body:o,signal:(t=f)===null||t===void 0?void 0:t.signal},r.fetchOptions)).then(m=>m.text().then(v=>{var k,C={statusCode:m.status,text:v};if(m.status===200)try{C.json=JSON.parse(v)}catch(R){Ae.error(R)}(k=r.callback)===null||k===void 0||k.call(r,C)})).catch(m=>{var v;Ae.error(m),(v=r.callback)===null||v===void 0||v.call(r,{statusCode:0,text:m})}).finally(()=>f?clearTimeout(f.timeout):null)}}),xs&&Li.push({transport:"XHR",method:r=>{var e,t=new xs;t.open(r.method||"GET",r.url,!0);var{contentType:n,body:o}=(e=Ss(r))!==null&&e!==void 0?e:{};kt(r.headers,function(a,u){t.setRequestHeader(u,a)}),n&&t.setRequestHeader("Content-Type",n),r.timeout&&(t.timeout=r.timeout),t.withCredentials=!0,t.onreadystatechange=()=>{if(t.readyState===4){var a,u={statusCode:t.status,text:t.responseText};if(t.status===200)try{u.json=JSON.parse(t.responseText)}catch{}(a=r.callback)===null||a===void 0||a.call(r,u)}},t.send(o)}}),An!=null&&An.sendBeacon&&Li.push({transport:"sendBeacon",method:r=>{var e=Lo(r.url,{beacon:"1"});try{var t,{contentType:n,body:o}=(t=Ss(r))!==null&&t!==void 0?t:{},a=typeof o=="string"?new Blob([o],{type:n}):o;An.sendBeacon(e,a)}catch{}}});var Rd=["retriesPerformedSoFar"];class Ad{constructor(e){ie(this,"isPolling",!1),ie(this,"pollIntervalMs",3e3),ie(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!Me(M)&&"onLine"in M.navigator&&(this.areWeOnline=M.navigator.onLine,M.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),M.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){var{retriesPerformedSoFar:t}=e,n=$l(e,Rd);vn(t)&&t>0&&(n.url=Lo(n.url,{retry_count:t})),this.instance._send_request(X(X({},n),{},{callback:o=>{var a;o.statusCode!==200&&(o.statusCode<400||o.statusCode>=500)&&(t??0)<10?this.enqueue(X({retriesPerformedSoFar:t},n)):(a=n.callback)===null||a===void 0||a.call(n,o)}}))}enqueue(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n=function(u){var p=3e3*Math.pow(2,u),f=p/2,b=Math.min(18e5,p),m=(Math.random()-.5)*(b-f);return Math.ceil(b+m)}(t),o=Date.now()+n;this.queue.push({retryAt:o,requestOptions:e});var a="Enqueued failed request for retry in ".concat(n);navigator.onLine||(a+=" (Browser is offline)"),Ae.warn(a),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){var e=Date.now(),t=[],n=this.queue.filter(a=>a.retryAt<e||(t.push(a),!1));if(this.queue=t,n.length>0)for(var{requestOptions:o}of n)this.retriableRequest(o)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(X(X({},e),{},{transport:"sendBeacon"}))}catch(t){Ae.error(t)}this.queue=[]}}var Hr,kl=En("[SessionId]");class Nd{constructor(e,t,n){var o;if(ie(this,"_sessionIdChangedHandlers",[]),!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.config=e.config,this.persistence=e.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=t||_r,this._windowIdGenerator=n||_r;var a=this.config.persistence_name||this.config.token,u=this.config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*zn(u,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.resetIdleTimer(),this._window_id_storage_key="ph_"+a+"_window_id",this._primary_window_exists_storage_key="ph_"+a+"_primary_window_exists",this._canUseSessionStorage()){var p=sn.parse(this._window_id_storage_key),f=sn.parse(this._primary_window_exists_storage_key);p&&!f?this._windowId=p:sn.remove(this._window_id_storage_key),sn.set(this._primary_window_exists_storage_key,!0)}if((o=this.config.bootstrap)!==null&&o!==void 0&&o.sessionID)try{var b=(m=>{var v=m.replace(/-/g,"");if(v.length!==32)throw new Error("Not a valid UUID");if(v[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(v.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),b)}catch(m){kl.error("Invalid sessionID in bootstrap",m)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Me(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(t=>t!==e)}}_canUseSessionStorage(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&sn.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&sn.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?sn.parse(this._window_id_storage_key):null}_setSessionId(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register({[Eo]:[t,e,n]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Eo];return zt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){M?.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&sn.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.config.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var n=t||new Date().getTime(),[o,a,u]=this._getSessionId(),p=this._getWindowId(),f=vn(u)&&u>0&&Math.abs(n-u)>864e5,b=!1,m=!a,v=!e&&Math.abs(n-o)>this.sessionTimeoutMs;m||v||f?(a=this._sessionIdGenerator(),p=this._windowIdGenerator(),kl.info("new session ID generated",{sessionId:a,windowId:p,changeReason:{noSessionId:m,activityTimeout:v,sessionPastMaximumLength:f}}),u=n,b=!0):p||(p=this._windowIdGenerator(),b=!0);var k=o===0||!e||f?n:o,C=u===0?new Date().getTime():u;return this._setWindowId(p),this._setSessionId(a,k,C),e||this.resetIdleTimer(),b&&this._sessionIdChangedHandlers.forEach(R=>R(a,p,b?{noSessionId:m,activityTimeout:v,sessionPastMaximumLength:f}:void 0)),{sessionId:a,windowId:p,sessionStartTimestamp:C,changeReason:b?{noSessionId:m,activityTimeout:v,sessionPastMaximumLength:f}:void 0,lastActivityTimestamp:o}}resetIdleTimer(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}(function(r){r.US="us",r.EU="eu",r.CUSTOM="custom"})(Hr||(Hr={}));var El="i.posthog.com";class Od{constructor(e){ie(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,t=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace(".".concat(El),".posthog.com")),t==="https://app.posthog.com"?"https://us.posthog.com":t}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=Hr.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=Hr.EU:this._regionCache[this.apiHost]=Hr.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t&&(t=t[0]==="/"?t:"/".concat(t)),e==="ui")return this.uiHost+t;if(this.region===Hr.CUSTOM)return this.apiHost+t;var n=El+t;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(n);case"api":return"https://".concat(this.region,".").concat(n)}}}var Mu="posthog-js";function Ru(r){var{organization:e,projectId:t,prefix:n,severityAllowList:o=["error"]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=>{var u,p,f,b,m;if(!(o==="*"||o.includes(a.level))||!r.__loaded)return a;a.tags||(a.tags={});var v=r.requestRouter.endpointFor("ui","/project/".concat(r.config.token,"/person/").concat(r.get_distinct_id()));a.tags["PostHog Person URL"]=v,r.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=r.get_session_replay_url({withTimestamp:!0}));var k=((u=a.exception)===null||u===void 0?void 0:u.values)||[];k.map(R=>{R.stacktrace&&(R.stacktrace.type="raw")});var C={$exception_message:((p=k[0])===null||p===void 0?void 0:p.value)||a.message,$exception_type:(f=k[0])===null||f===void 0?void 0:f.type,$exception_personURL:v,$exception_level:a.level,$exception_list:k,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((b=k[0])===null||b===void 0?void 0:b.value)||a.message,$sentry_exception_type:(m=k[0])===null||m===void 0?void 0:m.type,$sentry_tags:a.tags};return e&&t&&(C.$sentry_url=(n||"https://sentry.io/organizations/")+e+"/issues/?project="+t+"&query="+a.event_id),r.exceptions.sendExceptionEvent(C),a}}class Fd{constructor(e,t,n,o,a){this.name=Mu,this.setupOnce=function(u){u(Ru(e,{organization:t,projectId:n,prefix:o,severityAllowList:a}))}}}var xl,Do,Wn,Cs=En("[SegmentIntegration]");function Pd(r,e){var t=r.config.segment;if(!t)return e();(function(n,o){var a=n.config.segment;if(!a)return o();var u=f=>{var b=()=>f.anonymousId()||_r();n.config.get_device_id=b,f.id()&&(n.register({distinct_id:f.id(),$device_id:b()}),n.persistence.set_property(tr,"identified")),o()},p=a.user();"then"in p&&Ln(p.then)?p.then(f=>u(f)):u(p)})(r,()=>{t.register((n=>{Promise&&Promise.resolve||Cs.warn("This browser does not have Promise support, and can not use the segment integration");var o=(a,u)=>{var p;if(!u)return a;a.event.userId||a.event.anonymousId===n.get_distinct_id()||(Cs.info("No userId set, resetting PostHog"),n.reset()),a.event.userId&&a.event.userId!==n.get_distinct_id()&&(Cs.info("UserId set, identifying with PostHog"),n.identify(a.event.userId));var f=n._calculate_event_properties(u,(p=a.event.properties)!==null&&p!==void 0?p:{},new Date);return a.event.properties=Object.assign({},f,a.event.properties),a};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:a=>o(a,a.event.event),page:a=>o(a,"$pageview"),identify:a=>o(a,"$identify"),screen:a=>o(a,"$screen")}})(r)).then(()=>{e()})})}class Ld{constructor(e){this._instance=e}doPageView(e){var t,n=this._previousPageViewProperties(e);return this._currentPath=(t=M?.location.pathname)!==null&&t!==void 0?t:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,n}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){var t=this._currentPath,n=this._prevPageviewTimestamp,o=this._instance.scrollManager.getContext();if(!n)return{};var a={};if(o){var{maxScrollHeight:u,lastScrollY:p,maxScrollY:f,maxContentHeight:b,lastContentY:m,maxContentY:v}=o;Me(u)||Me(p)||Me(f)||Me(b)||Me(m)||Me(v)||(u=Math.ceil(u),p=Math.ceil(p),f=Math.ceil(f),b=Math.ceil(b),m=Math.ceil(m),v=Math.ceil(v),a={$prev_pageview_last_scroll:p,$prev_pageview_last_scroll_percentage:u<=1?1:zn(p/u,0,1),$prev_pageview_max_scroll:f,$prev_pageview_max_scroll_percentage:u<=1?1:zn(f/u,0,1),$prev_pageview_last_content:m,$prev_pageview_last_content_percentage:b<=1?1:zn(m/b,0,1),$prev_pageview_max_content:v,$prev_pageview_max_content_percentage:b<=1?1:zn(v/b,0,1)})}return t&&(a.$prev_pageview_pathname=t),n&&(a.$prev_pageview_duration=(e.getTime()-n.getTime())/1e3),a}}(function(r){r.Popover="popover",r.API="api",r.Widget="widget"})(xl||(xl={})),function(r){r.Open="open",r.MultipleChoice="multiple_choice",r.SingleChoice="single_choice",r.Rating="rating",r.Link="link"}(Do||(Do={})),function(r){r.NextQuestion="next_question",r.End="end",r.ResponseBased="response_based",r.SpecificQuestion="specific_question"}(Wn||(Wn={}));class Au{constructor(){ie(this,"events",{}),this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter(n=>n!==t)}}emit(e,t){for(var n of this.events[e]||[])n(t);for(var o of this.events["*"]||[])o(e,t)}}class Lr{constructor(e){ie(this,"_debugEventEmitter",new Au),ie(this,"checkStep",(t,n)=>this.checkStepEvent(t,n)&&this.checkStepUrl(t,n)&&this.checkStepElement(t,n)),ie(this,"checkStepEvent",(t,n)=>n==null||!n.event||t?.event===n?.event),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!Me((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var t;(t=this.instance)===null||t===void 0||t._addCaptureHook((n,o)=>{this.on(n,o)})}}register(e){var t,n;if(!Me((t=this.instance)===null||t===void 0?void 0:t._addCaptureHook)&&(e.forEach(u=>{var p,f;(p=this.actionRegistry)===null||p===void 0||p.add(u),(f=u.steps)===null||f===void 0||f.forEach(b=>{var m;(m=this.actionEvents)===null||m===void 0||m.add(b?.event||"")})}),(n=this.instance)!==null&&n!==void 0&&n.autocapture)){var o,a=new Set;e.forEach(u=>{var p;(p=u.steps)===null||p===void 0||p.forEach(f=>{f!=null&&f.selector&&a.add(f?.selector)})}),(o=this.instance)===null||o===void 0||o.autocapture.setElementSelectors(a)}}on(e,t){var n;t!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(t?.event))&&this.actionRegistry&&((n=this.actionRegistry)===null||n===void 0?void 0:n.size)>0&&this.actionRegistry.forEach(o=>{this.checkAction(t,o)&&this._debugEventEmitter.emit("actionCaptured",o.name)})}_addActionHook(e){this.onAction("actionCaptured",t=>e(t))}checkAction(e,t){if(t?.steps==null)return!1;for(var n of t.steps)if(this.checkStep(e,n))return!0;return!1}onAction(e,t){return this._debugEventEmitter.on(e,t)}checkStepUrl(e,t){if(t!=null&&t.url){var n,o=e==null||(n=e.properties)===null||n===void 0?void 0:n.$current_url;if(!o||typeof o!="string"||!Lr.matchString(o,t?.url,t?.url_matching||"contains"))return!1}return!0}static matchString(e,t,n){switch(n){case"regex":return!!M&&si(e,t);case"exact":return t===e;case"contains":var o=Lr.escapeStringRegexp(t).replace(/_/g,".").replace(/%/g,".*");return si(e,o);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,t){if((t!=null&&t.href||t!=null&&t.tag_name||t!=null&&t.text)&&!this.getElementsList(e).some(a=>!(t!=null&&t.href&&!Lr.matchString(a.href||"",t?.href,t?.href_matching||"exact"))&&(t==null||!t.tag_name||a.tag_name===t?.tag_name)&&!(t!=null&&t.text&&!Lr.matchString(a.text||"",t?.text,t?.text_matching||"exact")&&!Lr.matchString(a.$el_text||"",t?.text,t?.text_matching||"exact"))))return!1;if(t!=null&&t.selector){var n,o=e==null||(n=e.properties)===null||n===void 0?void 0:n.$element_selectors;if(!o||!o.includes(t?.selector))return!1}return!0}getElementsList(e){return e?.properties.$elements==null?[]:e?.properties.$elements}}class Wi{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var t;Me((t=this.instance)===null||t===void 0?void 0:t._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var t=e.filter(n=>{var o,a,u,p;return((o=n.conditions)===null||o===void 0?void 0:o.actions)&&((a=n.conditions)===null||a===void 0||(u=a.actions)===null||u===void 0||(p=u.values)===null||p===void 0?void 0:p.length)>0});t.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new Lr(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(n=>{this.onAction(n)})),t.forEach(n=>{var o,a,u,p,f,b,m,v,k,C;n.conditions&&(o=n.conditions)!==null&&o!==void 0&&o.actions&&(a=n.conditions)!==null&&a!==void 0&&(u=a.actions)!==null&&u!==void 0&&u.values&&((p=n.conditions)===null||p===void 0||(f=p.actions)===null||f===void 0||(b=f.values)===null||b===void 0?void 0:b.length)>0&&((m=this.actionMatcher)===null||m===void 0||m.register(n.conditions.actions.values),(v=n.conditions)===null||v===void 0||(k=v.actions)===null||k===void 0||(C=k.values)===null||C===void 0||C.forEach(R=>{if(R&&R.name){var O=this.actionToSurveys.get(R.name);O&&O.push(n.id),this.actionToSurveys.set(R.name,O||[n.id])}}))}))}setupEventBasedSurveys(e){var t;e.filter(n=>{var o,a,u,p;return((o=n.conditions)===null||o===void 0?void 0:o.events)&&((a=n.conditions)===null||a===void 0||(u=a.events)===null||u===void 0||(p=u.values)===null||p===void 0?void 0:p.length)>0}).length!==0&&((t=this.instance)===null||t===void 0||t._addCaptureHook((n,o)=>{this.onEvent(n,o)}),e.forEach(n=>{var o,a,u;(o=n.conditions)===null||o===void 0||(a=o.events)===null||a===void 0||(u=a.values)===null||u===void 0||u.forEach(p=>{if(p&&p.name){var f=this.eventToSurveys.get(p.name);f&&f.push(n.id),this.eventToSurveys.set(p.name,f||[n.id])}})}))}onEvent(e,t){var n,o,a=((n=this.instance)===null||n===void 0||(o=n.persistence)===null||o===void 0?void 0:o.props[uo])||[];if(Wi.SURVEY_SHOWN_EVENT_NAME==e&&t&&a.length>0){var u,p=t==null||(u=t.properties)===null||u===void 0?void 0:u.$survey_id;if(p){var f=a.indexOf(p);f>=0&&(a.splice(f,1),this._updateActivatedSurveys(a))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(a.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var t,n,o=((t=this.instance)===null||t===void 0||(n=t.persistence)===null||n===void 0?void 0:n.props[uo])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(o.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var t,n;(t=this.instance)===null||t===void 0||(n=t.persistence)===null||n===void 0||n.register({[uo]:[...new Set(e)]})}getSurveys(){var e,t,n=(e=this.instance)===null||e===void 0||(t=e.persistence)===null||t===void 0?void 0:t.props[uo];return n||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}ie(Wi,"SURVEY_SHOWN_EVENT_NAME","survey shown");var Nu,$t,Ou,Dr,Tl,Fu,Ys,Pu,Xs={},Lu=[],Dd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,aa=Array.isArray;function yr(r,e){for(var t in e)r[t]=e[t];return r}function Du(r){var e=r.parentNode;e&&e.removeChild(r)}function Is(r,e,t,n,o){var a={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Ou,__i:-1,__u:0};return o==null&&$t.vnode!=null&&$t.vnode(a),a}function la(r){return r.children}function Co(r,e){this.props=r,this.context=e}function ci(r,e){if(e==null)return r.__?ci(r.__,r.__i+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?ci(r):null}function Bu(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return Bu(r)}}function Js(r){(!r.__d&&(r.__d=!0)&&Dr.push(r)&&!Bo.__r++||Tl!==$t.debounceRendering)&&((Tl=$t.debounceRendering)||Fu)(Bo)}function Bo(){var r,e,t,n,o,a,u,p,f;for(Dr.sort(Ys);r=Dr.shift();)r.__d&&(e=Dr.length,n=void 0,a=(o=(t=r).__v).__e,p=[],f=[],(u=t.__P)&&((n=yr({},o)).__v=o.__v+1,$t.vnode&&$t.vnode(n),$u(u,n,o,t.__n,u.ownerSVGElement!==void 0,32&o.__u?[a]:null,p,a??ci(o),!!(32&o.__u),f),n.__.__k[n.__i]=n,qd(p,n,f),n.__e!=a&&Bu(n)),Dr.length>e&&Dr.sort(Ys));Bo.__r=0}function Hu(r,e,t,n,o,a,u,p,f,b,m){var v,k,C,R,O,ne=n&&n.__k||Lu,ee=e.length;for(t.__d=f,Bd(t,e,ne),f=t.__d,v=0;v<ee;v++)(C=t.__k[v])!=null&&typeof C!="boolean"&&typeof C!="function"&&(k=C.__i===-1?Xs:ne[C.__i]||Xs,C.__i=v,$u(r,C,k,o,a,u,p,f,b,m),R=C.__e,C.ref&&k.ref!=C.ref&&(k.ref&&ua(k.ref,null,C),m.push(C.ref,C.__c||R,C)),O==null&&R!=null&&(O=R),65536&C.__u||k.__k===C.__k?f=qu(C,f,r):typeof C.type=="function"&&C.__d!==void 0?f=C.__d:R&&(f=R.nextSibling),C.__d=void 0,C.__u&=-196609);t.__d=f,t.__e=O}function Bd(r,e,t){var n,o,a,u,p,f=e.length,b=t.length,m=b,v=0;for(r.__k=[],n=0;n<f;n++)(o=r.__k[n]=(o=e[n])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Is(null,o,null,null,o):aa(o)?Is(la,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Is(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=r,o.__b=r.__b+1,p=Hd(o,t,u=n+v,m),o.__i=p,a=null,p!==-1&&(m--,(a=t[p])&&(a.__u|=131072)),a==null||a.__v===null?(p==-1&&v--,typeof o.type!="function"&&(o.__u|=65536)):p!==u&&(p===u+1?v++:p>u?m>f-u?v+=p-u:v--:v=p<u&&p==u-1?p-u:0,p!==n+v&&(o.__u|=65536))):(a=t[n])&&a.key==null&&a.__e&&(a.__e==r.__d&&(r.__d=ci(a)),Ks(a,a,!1),t[n]=null,m--);if(m)for(n=0;n<b;n++)(a=t[n])!=null&&!(131072&a.__u)&&(a.__e==r.__d&&(r.__d=ci(a)),Ks(a,a))}function qu(r,e,t){var n,o;if(typeof r.type=="function"){for(n=r.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=r,e=qu(n[o],e,t));return e}return r.__e!=e&&(t.insertBefore(r.__e,e||null),e=r.__e),e&&e.nextSibling}function Hd(r,e,t,n){var o=r.key,a=r.type,u=t-1,p=t+1,f=e[t];if(f===null||f&&o==f.key&&a===f.type)return t;if(n>(f!=null&&!(131072&f.__u)?1:0))for(;u>=0||p<e.length;){if(u>=0){if((f=e[u])&&!(131072&f.__u)&&o==f.key&&a===f.type)return u;u--}if(p<e.length){if((f=e[p])&&!(131072&f.__u)&&o==f.key&&a===f.type)return p;p++}}return-1}function Ml(r,e,t){e[0]==="-"?r.setProperty(e,t??""):r[e]=t==null?"":typeof t!="number"||Dd.test(e)?t:t+"px"}function _o(r,e,t,n,o){var a;e:if(e==="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||Ml(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||Ml(r.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")a=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in r?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+a]=t,t?n?t.u=n.u:(t.u=Date.now(),r.addEventListener(e,a?Al:Rl,a)):r.removeEventListener(e,a?Al:Rl,a);else{if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?r.removeAttribute(e):r.setAttribute(e,t))}}function Rl(r){var e=this.l[r.type+!1];if(r.t){if(r.t<=e.u)return}else r.t=Date.now();return e($t.event?$t.event(r):r)}function Al(r){return this.l[r.type+!0]($t.event?$t.event(r):r)}function $u(r,e,t,n,o,a,u,p,f,b){var m,v,k,C,R,O,ne,ee,z,fe,me,De,lt,Ie,Be,Ge=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(f=!!(32&t.__u),a=[p=e.__e=t.__e]),(m=$t.__b)&&m(e);e:if(typeof Ge=="function")try{if(ee=e.props,z=(m=Ge.contextType)&&n[m.__c],fe=m?z?z.props.value:m.__:n,t.__c?ne=(v=e.__c=t.__c).__=v.__E:("prototype"in Ge&&Ge.prototype.render?e.__c=v=new Ge(ee,fe):(e.__c=v=new Co(ee,fe),v.constructor=Ge,v.render=Wd),z&&z.sub(v),v.props=ee,v.state||(v.state={}),v.context=fe,v.__n=n,k=v.__d=!0,v.__h=[],v._sb=[]),v.__s==null&&(v.__s=v.state),Ge.getDerivedStateFromProps!=null&&(v.__s==v.state&&(v.__s=yr({},v.__s)),yr(v.__s,Ge.getDerivedStateFromProps(ee,v.__s))),C=v.props,R=v.state,v.__v=e,k)Ge.getDerivedStateFromProps==null&&v.componentWillMount!=null&&v.componentWillMount(),v.componentDidMount!=null&&v.__h.push(v.componentDidMount);else{if(Ge.getDerivedStateFromProps==null&&ee!==C&&v.componentWillReceiveProps!=null&&v.componentWillReceiveProps(ee,fe),!v.__e&&(v.shouldComponentUpdate!=null&&v.shouldComponentUpdate(ee,v.__s,fe)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(v.props=ee,v.state=v.__s,v.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(tt){tt&&(tt.__=e)}),me=0;me<v._sb.length;me++)v.__h.push(v._sb[me]);v._sb=[],v.__h.length&&u.push(v);break e}v.componentWillUpdate!=null&&v.componentWillUpdate(ee,v.__s,fe),v.componentDidUpdate!=null&&v.__h.push(function(){v.componentDidUpdate(C,R,O)})}if(v.context=fe,v.props=ee,v.__P=r,v.__e=!1,De=$t.__r,lt=0,"prototype"in Ge&&Ge.prototype.render){for(v.state=v.__s,v.__d=!1,De&&De(e),m=v.render(v.props,v.state,v.context),Ie=0;Ie<v._sb.length;Ie++)v.__h.push(v._sb[Ie]);v._sb=[]}else do v.__d=!1,De&&De(e),m=v.render(v.props,v.state,v.context),v.state=v.__s;while(v.__d&&++lt<25);v.state=v.__s,v.getChildContext!=null&&(n=yr(yr({},n),v.getChildContext())),k||v.getSnapshotBeforeUpdate==null||(O=v.getSnapshotBeforeUpdate(C,R)),Hu(r,aa(Be=m!=null&&m.type===la&&m.key==null?m.props.children:m)?Be:[Be],e,t,n,o,a,u,p,f,b),v.base=e.__e,e.__u&=-161,v.__h.length&&u.push(v),ne&&(v.__E=v.__=null)}catch(tt){e.__v=null,f||a!=null?(e.__e=p,e.__u|=f?160:32,a[a.indexOf(p)]=null):(e.__e=t.__e,e.__k=t.__k),$t.__e(tt,e,t)}else a==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=$d(t.__e,e,t,n,o,a,u,f,b);(m=$t.diffed)&&m(e)}function qd(r,e,t){e.__d=void 0;for(var n=0;n<t.length;n++)ua(t[n],t[++n],t[++n]);$t.__c&&$t.__c(e,r),r.some(function(o){try{r=o.__h,o.__h=[],r.some(function(a){a.call(o)})}catch(a){$t.__e(a,o.__v)}})}function $d(r,e,t,n,o,a,u,p,f){var b,m,v,k,C,R,O,ne=t.props,ee=e.props,z=e.type;if(z==="svg"&&(o=!0),a!=null){for(b=0;b<a.length;b++)if((C=a[b])&&"setAttribute"in C==!!z&&(z?C.localName===z:C.nodeType===3)){r=C,a[b]=null;break}}if(r==null){if(z===null)return document.createTextNode(ee);r=o?document.createElementNS("http://www.w3.org/2000/svg",z):document.createElement(z,ee.is&&ee),a=null,p=!1}if(z===null)ne===ee||p&&r.data===ee||(r.data=ee);else{if(a=a&&Nu.call(r.childNodes),ne=t.props||Xs,!p&&a!=null)for(ne={},b=0;b<r.attributes.length;b++)ne[(C=r.attributes[b]).name]=C.value;for(b in ne)C=ne[b],b=="children"||(b=="dangerouslySetInnerHTML"?v=C:b==="key"||b in ee||_o(r,b,null,C,o));for(b in ee)C=ee[b],b=="children"?k=C:b=="dangerouslySetInnerHTML"?m=C:b=="value"?R=C:b=="checked"?O=C:b==="key"||p&&typeof C!="function"||ne[b]===C||_o(r,b,C,ne[b],o);if(m)p||v&&(m.__html===v.__html||m.__html===r.innerHTML)||(r.innerHTML=m.__html),e.__k=[];else if(v&&(r.innerHTML=""),Hu(r,aa(k)?k:[k],e,t,n,o&&z!=="foreignObject",a,u,a?a[0]:t.__k&&ci(t,0),p,f),a!=null)for(b=a.length;b--;)a[b]!=null&&Du(a[b]);p||(b="value",R!==void 0&&(R!==r[b]||z==="progress"&&!R||z==="option"&&R!==ne[b])&&_o(r,b,R,ne[b],!1),b="checked",O!==void 0&&O!==r[b]&&_o(r,b,O,ne[b],!1))}return r}function ua(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){$t.__e(n,t)}}function Ks(r,e,t){var n,o;if($t.unmount&&$t.unmount(r),(n=r.ref)&&(n.current&&n.current!==r.__e||ua(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){$t.__e(a,e)}n.base=n.__P=null,r.__c=void 0}if(n=r.__k)for(o=0;o<n.length;o++)n[o]&&Ks(n[o],e,t||typeof r.type!="function");t||r.__e==null||Du(r.__e),r.__=r.__e=r.__d=void 0}function Wd(r,e,t){return this.constructor(r,t)}Nu=Lu.slice,$t={__e:function(r,e,t,n){for(var o,a,u;e=e.__;)if((o=e.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(r)),u=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(r,n||{}),u=o.__d),u)return o.__E=o}catch(p){r=p}throw r}},Ou=0,Co.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=yr({},this.state),typeof r=="function"&&(r=r(yr({},t),this.props)),r&&yr(t,r),r!=null&&this.__v&&(e&&this._sb.push(e),Js(this))},Co.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Js(this))},Co.prototype.render=la,Dr=[],Fu=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ys=function(r,e){return r.__v.__b-e.__v.__b},Bo.__r=0,Pu=0;(function(r,e){var t={__c:e="__cC"+Pu++,__:r,Consumer:function(n,o){return n.children(o)},Provider:function(n){var o,a;return this.getChildContext||(o=[],(a={})[e]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(u){this.props.value!==u.value&&o.some(function(p){p.__e=!0,Js(p)})},this.sub=function(u){o.push(u);var p=u.componentWillUnmount;u.componentWillUnmount=function(){o.splice(o.indexOf(u),1),p&&p.call(u)}}),n.children}};t.Provider.__=t.Consumer.contextType=t})({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0});var Ti=En("[Surveys]"),jd={icontains:r=>!!M&&M.location.href.toLowerCase().indexOf(r.toLowerCase())>-1,not_icontains:r=>!!M&&M.location.href.toLowerCase().indexOf(r.toLowerCase())===-1,regex:r=>!!M&&si(M.location.href,r),not_regex:r=>!!M&&!si(M.location.href,r),exact:r=>M?.location.href===r,is_not:r=>M?.location.href!==r};class Vd{constructor(e){this.instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var t=[],n=0;n<localStorage.length;n++){var o=localStorage.key(n);o!=null&&o.startsWith("seenSurvey_")&&t.push(o)}return t})();e.forEach(t=>localStorage.removeItem(t))}loadIfEnabled(){var e,t,n,o=et==null||(e=et.__PosthogExtensions__)===null||e===void 0?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||o||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new Wi(this.instance)),(t=et.__PosthogExtensions__)===null||t===void 0||(n=t.loadExternalDependency)===null||n===void 0||n.call(t,this.instance,"surveys",a=>{var u,p;if(a)return Ti.error("Could not load surveys script",a);this._surveyManager=(u=et.__PosthogExtensions__)===null||u===void 0||(p=u.generateSurveys)===null||p===void 0?void 0:p.call(u,this.instance)}))}getSurveys(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new Wi(this.instance));var n=this.instance.get_property(As);if(n&&!t)return e(n);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",callback:o=>{var a;if(o.statusCode!==200||!o.json)return e([]);var u,p=o.json.surveys||[],f=p.filter(b=>{var m,v,k,C,R,O,ne,ee,z,fe,me,De;return((m=b.conditions)===null||m===void 0?void 0:m.events)&&((v=b.conditions)===null||v===void 0||(k=v.events)===null||k===void 0?void 0:k.values)&&((C=b.conditions)===null||C===void 0||(R=C.events)===null||R===void 0||(O=R.values)===null||O===void 0?void 0:O.length)>0||((ne=b.conditions)===null||ne===void 0?void 0:ne.actions)&&((ee=b.conditions)===null||ee===void 0||(z=ee.actions)===null||z===void 0?void 0:z.values)&&((fe=b.conditions)===null||fe===void 0||(me=fe.actions)===null||me===void 0||(De=me.values)===null||De===void 0?void 0:De.length)>0});return f.length>0&&((u=this._surveyEventReceiver)===null||u===void 0||u.register(f)),(a=this.instance.persistence)===null||a===void 0||a.register({[As]:p}),e(p)}})}getActiveMatchingSurveys(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(n=>{var o,a=n.filter(f=>!(!f.start_date||f.end_date)).filter(f=>{var b,m,v,k;if(!f.conditions)return!0;var C=(b=f.conditions)===null||b===void 0||!b.url||jd[(m=(v=f.conditions)===null||v===void 0?void 0:v.urlMatchType)!==null&&m!==void 0?m:"icontains"](f.conditions.url),R=(k=f.conditions)===null||k===void 0||!k.selector||Te?.querySelector(f.conditions.selector);return C&&R}),u=(o=this._surveyEventReceiver)===null||o===void 0?void 0:o.getSurveys(),p=a.filter(f=>{var b,m,v,k,C,R,O,ne,ee,z,fe;if(!(f.linked_flag_key||f.targeting_flag_key||f.internal_targeting_flag_key||(b=f.feature_flag_keys)!==null&&b!==void 0&&b.length))return!0;var me=!f.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(f.linked_flag_key),De=!f.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(f.targeting_flag_key),lt=((m=f.conditions)===null||m===void 0?void 0:m.events)&&((v=f.conditions)===null||v===void 0||(k=v.events)===null||k===void 0?void 0:k.values)&&((C=f.conditions)===null||C===void 0||(R=C.events)===null||R===void 0?void 0:R.values.length)>0,Ie=((O=f.conditions)===null||O===void 0?void 0:O.actions)&&((ne=f.conditions)===null||ne===void 0||(ee=ne.actions)===null||ee===void 0?void 0:ee.values)&&((z=f.conditions)===null||z===void 0||(fe=z.actions)===null||fe===void 0?void 0:fe.values.length)>0,Be=!lt&&!Ie||u?.includes(f.id),Ge=this._canActivateRepeatedly(f),tt=!(f.internal_targeting_flag_key&&!Ge)||this.instance.featureFlags.isFeatureEnabled(f.internal_targeting_flag_key),_t=this.checkFlags(f);return me&&De&&tt&&Be&&_t});return e(p)},t)}checkFlags(e){var t;return(t=e.feature_flag_keys)===null||t===void 0||!t.length||e.feature_flag_keys.every(n=>{var{key:o,value:a}=n;return!o||!a||this.instance.featureFlags.isFeatureEnabled(a)})}getNextSurveyStep(e,t,n){var o,a=e.questions[t],u=t+1;if((o=a.branching)===null||o===void 0||!o.type)return t===e.questions.length-1?Wn.End:u;if(a.branching.type===Wn.End)return Wn.End;if(a.branching.type===Wn.SpecificQuestion){if(Number.isInteger(a.branching.index))return a.branching.index}else if(a.branching.type===Wn.ResponseBased){if(a.type===Do.SingleChoice){var p,f,b=a.choices.indexOf("".concat(n));if((p=a.branching)!==null&&p!==void 0&&(f=p.responseValues)!==null&&f!==void 0&&f.hasOwnProperty(b)){var m=a.branching.responseValues[b];return Number.isInteger(m)?m:m===Wn.End?Wn.End:u}}else if(a.type===Do.Rating){var v,k;if(typeof n!="number"||!Number.isInteger(n))throw new Error("The response type must be an integer");var C=function(O,ne){if(ne===3){if(O<1||O>3)throw new Error("The response must be in range 1-3");return O===1?"negative":O===2?"neutral":"positive"}if(ne===5){if(O<1||O>5)throw new Error("The response must be in range 1-5");return O<=2?"negative":O===3?"neutral":"positive"}if(ne===7){if(O<1||O>7)throw new Error("The response must be in range 1-7");return O<=3?"negative":O===4?"neutral":"positive"}if(ne===10){if(O<0||O>10)throw new Error("The response must be in range 0-10");return O<=6?"detractors":O<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(n,a.scale);if((v=a.branching)!==null&&v!==void 0&&(k=v.responseValues)!==null&&k!==void 0&&k.hasOwnProperty(C)){var R=a.branching.responseValues[C];return Number.isInteger(R)?R:R===Wn.End?Wn.End:u}}return u}return Ti.warn("Falling back to next question index due to unexpected branching type"),u}_canActivateRepeatedly(e){var t;return Tt((t=et.__PosthogExtensions__)===null||t===void 0?void 0:t.canActivateRepeatedly)?(Ti.warn("init was not called"),!1):et.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){Tt(this._surveyManager)?Ti.warn("init was not called"):this.getSurveys(t=>{var n=t.filter(o=>o.id===e)[0];this._surveyManager.canRenderSurvey(n)})}renderSurvey(e,t){Tt(this._surveyManager)?Ti.warn("init was not called"):this.getSurveys(n=>{var o=n.filter(a=>a.id===e)[0];this._surveyManager.renderSurvey(o,Te?.querySelector(t))})}}var Nl=En("[RateLimiter]");class Ud{constructor(e){var t,n;ie(this,"serverLimits",{}),ie(this,"lastEventRateLimited",!1),ie(this,"checkForLimiting",o=>{var a=o.text;if(a&&a.length)try{(JSON.parse(a).quota_limited||[]).forEach(u=>{Nl.info("".concat(u||"events"," is quota limited.")),this.serverLimits[u]=new Date().getTime()+6e4})}catch(u){return void Nl.warn('could not rate limit - continuing. Error: "'.concat(u?.message,'"'),{text:a})}}),this.instance=e,this.captureEventsPerSecond=((t=e.config.rate_limiting)===null||t===void 0?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,t,n,o=arguments.length>0&&arguments[0]!==void 0&&arguments[0],a=new Date().getTime(),u=(e=(t=this.instance.persistence)===null||t===void 0?void 0:t.get_property(Os))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:a};u.tokens+=(a-u.last)/1e3*this.captureEventsPerSecond,u.last=a,u.tokens>this.captureEventsBurstLimit&&(u.tokens=this.captureEventsBurstLimit);var p=u.tokens<1;return p||o||(u.tokens=Math.max(0,u.tokens-1)),!p||this.lastEventRateLimited||o||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=p,(n=this.instance.persistence)===null||n===void 0||n.set_property(Os,u),{isRateLimited:p,remainingTokens:u.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return t!==!1&&new Date().getTime()<t}}var Gd=()=>X({initialPathName:Cn?.pathname||"",referringDomain:qt.referringDomain()},qt.campaignParams());class Zd{constructor(e,t,n){ie(this,"_onSessionIdCallback",o=>{var a=this._getStoredProps();if(!a||a.sessionId!==o){var u={sessionId:o,props:this._sessionSourceParamGenerator()};this._persistence.register({[Ns]:u})}}),this._sessionIdManager=e,this._persistence=t,this._sessionSourceParamGenerator=n||Gd,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[Ns]}getSessionProps(){var e,t=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}var zd=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],Ol=function(r,e){if(!r)return!1;var t=r.toLowerCase();return zd.concat(e||[]).some(n=>{var o=n.toLowerCase();return t.indexOf(o)!==-1})},Wu=function(r,e){if(!r)return!1;var t=r.userAgent;if(t&&Ol(t,e))return!0;try{var n=r?.userAgentData;if(n!=null&&n.brands&&n.brands.some(o=>Ol(o?.brand,e)))return!0}catch{}return!!r.webdriver};class ju{constructor(){this.clicks=[]}isRageClick(e,t,n){var o=this.clicks[this.clicks.length-1];if(o&&Math.abs(e-o.x)+Math.abs(t-o.y)<30&&n-o.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}var yo=En("[Dead Clicks]"),Yd=()=>!0,Xd=r=>{var e,t=!((e=r.instance.persistence)===null||e===void 0||!e.get_property(zl)),n=r.instance.config.capture_dead_clicks;return Br(n)?n:t};class Vu{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,t,n){this.instance=e,this.isEnabled=t,this.onCapture=n,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[zl]:e?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var t,n,o;(t=et.__PosthogExtensions__)!==null&&t!==void 0&&t.initDeadClicksAutocapture&&e(),(n=et.__PosthogExtensions__)===null||n===void 0||(o=n.loadExternalDependency)===null||o===void 0||o.call(n,this.instance,"dead-clicks-autocapture",a=>{a?yo.error("failed to load script",a):e()})}start(){var e;if(Te){if(!this._lazyLoadedDeadClicksAutocapture&&(e=et.__PosthogExtensions__)!==null&&e!==void 0&&e.initDeadClicksAutocapture){var t=Wt(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=et.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this._lazyLoadedDeadClicksAutocapture.start(Te),yo.info("starting...")}}else yo.error("`document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,yo.info("stopping..."))}}var Jd=En("[Heatmaps]");function Fl(r){return Wt(r)&&"clientX"in r&&"clientY"in r&&vn(r.clientX)&&vn(r.clientY)}class Kd{constructor(e){var t;ie(this,"rageclicks",new ju),ie(this,"_enabledServerSide",!1),ie(this,"_initialized",!1),ie(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((t=this.instance.persistence)===null||t===void 0||!t.props[Ms]),M?.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){var e=5e3;return Wt(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Me(this.instance.config.capture_heatmaps)?Me(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;Jd.info("starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,t;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),(t=this.deadClicksCapture)===null||t===void 0||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Ms]:t}),this._enabledServerSide=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){M&&Te&&(or(Te,"click",e=>this._onClick(e||M?.event),!1,!0),or(Te,"mousemove",e=>this._onMouseMove(e||M?.event),!1,!0),this.deadClicksCapture=new Vu(this.instance,Yd,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,t){var n=this.instance.scrollManager.scrollY(),o=this.instance.scrollManager.scrollX(),a=this.instance.scrollManager.scrollElement(),u=function(p,f,b){for(var m=p;m&&$o(m)&&!br(m,"body");){if(m===b)return!1;if(at(f,M?.getComputedStyle(m).position))return!0;m=vu(m)}return!1}(fu(e),["fixed","sticky"],a);return{x:e.clientX+(u?0:o),y:e.clientY+(u?0:n),target_fixed:u,type:t}}_onClick(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click";if(!dl(e.target)&&Fl(e)){var o=this._getProperties(e,n);(t=this.rageclicks)!==null&&t!==void 0&&t.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(X(X({},o),{},{type:"rageclick"})),this._capture(o)}}_onMouseMove(e){!dl(e.target)&&Fl(e)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(M){var t=M.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}}flush(){this.buffer&&!ei(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Qd{constructor(e){ie(this,"_updateScrollData",()=>{var t,n,o,a;this.context||(this.context={});var u=this.scrollElement(),p=this.scrollY(),f=u?Math.max(0,u.scrollHeight-u.clientHeight):0,b=p+(u?.clientHeight||0),m=u?.scrollHeight||0;this.context.lastScrollY=Math.ceil(p),this.context.maxScrollY=Math.max(p,(t=this.context.maxScrollY)!==null&&t!==void 0?t:0),this.context.maxScrollHeight=Math.max(f,(n=this.context.maxScrollHeight)!==null&&n!==void 0?n:0),this.context.lastContentY=b,this.context.maxContentY=Math.max(b,(o=this.context.maxContentY)!==null&&o!==void 0?o:0),this.context.maxContentHeight=Math.max(m,(a=this.context.maxContentHeight)!==null&&a!==void 0?a:0)}),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){M?.addEventListener("scroll",this._updateScrollData,!0),M?.addEventListener("scrollend",this._updateScrollData,!0),M?.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return M?.document.documentElement;var e=zt(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var t of e){var n=M?.document.querySelector(t);if(n)return n}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return M&&(M.scrollY||M.pageYOffset||M.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return M&&(M.scrollX||M.pageXOffset||M.document.documentElement.scrollLeft)||0}}var Pl=En("[AutoCapture]");function ks(r,e){return e.length>r?e.slice(0,r)+"...":e}function eh(r){if(r.previousElementSibling)return r.previousElementSibling;var e=r;do e=e.previousSibling;while(e&&!$o(e));return e}function th(r,e,t,n){var o=r.tagName.toLowerCase(),a={tag_name:o};$s.indexOf(o)>-1&&!t&&(o.toLowerCase()==="a"||o.toLowerCase()==="button"?a.$el_text=ks(1024,bu(r)):a.$el_text=ks(1024,Wo(r)));var u=Fo(r);u.length>0&&(a.classes=u.filter(function(m){return m!==""})),kt(r.attributes,function(m){var v;if((!mu(r)||["name","id","class","aria-label"].indexOf(m.name)!==-1)&&(n==null||!n.includes(m.name))&&!e&&li(m.value)&&(v=m.name,!an(v)||v.substring(0,10)!=="_ngcontent"&&v.substring(0,7)!=="_nghost")){var k=m.value;m.name==="class"&&(k=ia(k).join(" ")),a["attr__"+m.name]=ks(1024,k)}});for(var p=1,f=1,b=r;b=eh(b);)p++,b.tagName===r.tagName&&f++;return a.nth_child=p,a.nth_of_type=f,a}function nh(r,e){for(var t,n,{e:o,maskAllElementAttributes:a,maskAllText:u,elementAttributeIgnoreList:p,elementsChainAsString:f}=e,b=[r],m=r;m.parentNode&&!br(m,"body");)pu(m.parentNode)?(b.push(m.parentNode.host),m=m.parentNode.host):(b.push(m.parentNode),m=m.parentNode);var v,k=[],C={},R=!1,O=!1;if(kt(b,me=>{var De=Ws(me);me.tagName.toLowerCase()==="a"&&(R=me.getAttribute("href"),R=De&&R&&li(R)&&R),at(Fo(me),"ph-no-capture")&&(O=!0),k.push(th(me,a,u,p));var lt=function(Ie){if(!Ws(Ie))return{};var Be={};return kt(Ie.attributes,function(Ge){if(Ge.name&&Ge.name.indexOf("data-ph-capture-attribute")===0){var tt=Ge.name.replace("data-ph-capture-attribute-",""),_t=Ge.value;tt&&_t&&li(_t)&&(Be[tt]=_t)}}),Be}(me);mn(C,lt)}),O)return{props:{},explicitNoCapture:O};if(u||(r.tagName.toLowerCase()==="a"||r.tagName.toLowerCase()==="button"?k[0].$el_text=bu(r):k[0].$el_text=Wo(r)),R){var ne,ee;k[0].attr__href=R;var z=(ne=ri(R))===null||ne===void 0?void 0:ne.host,fe=M==null||(ee=M.location)===null||ee===void 0?void 0:ee.host;z&&fe&&z!==fe&&(v=R)}return{props:mn({$event_type:o.type,$ce_version:1},f?{}:{$elements:k},{$elements_chain:od(k)},(t=k[0])!==null&&t!==void 0&&t.$el_text?{$el_text:(n=k[0])===null||n===void 0?void 0:n.$el_text}:{},v&&o.type==="click"?{$external_click_url:v}:{},C)}}class rh{constructor(e){ie(this,"_initialized",!1),ie(this,"_isDisabledServerSide",null),ie(this,"rageclicks",new ju),ie(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,t,n=Wt(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=(e=n.url_allowlist)===null||e===void 0?void 0:e.map(o=>new RegExp(o)),n.url_ignorelist=(t=n.url_ignorelist)===null||t===void 0?void 0:t.map(o=>new RegExp(o)),n}_addDomEventHandlers(){if(this.isBrowserSupported()){if(M&&Te){var e=n=>{n=n||M?.event;try{this._captureEvent(n)}catch(o){Pl.error("Failed to capture event",o)}},t=n=>{n=n||M?.event,this._captureEvent(n,gs)};or(Te,"submit",e,!1,!0),or(Te,"change",e,!1,!0),or(Te,"click",e,!1,!0),this.config.capture_copied_text&&(or(Te,"copy",t,!1,!0),or(Te,"cut",t,!1,!0))}}else Pl.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Ga]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var t,n=[];return(t=this._elementSelectors)===null||t===void 0||t.forEach(o=>{var a=Te?.querySelectorAll(o);a?.forEach(u=>{e===u&&n.push(o)})}),n}get isEnabled(){var e,t,n=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[Ga],o=this._isDisabledServerSide;if(wr(o)&&!Br(n)&&!this.instance.config.advanced_disable_decide)return!1;var a=(t=this._isDisabledServerSide)!==null&&t!==void 0?t:!!n;return!!this.instance.config.autocapture&&!a}_captureEvent(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var n,o=fu(e);hu(o)&&(o=o.parentNode||null),t==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var a=t===gs;if(o&&ed(o,e,this.config,a,a?["copy","cut"]:void 0)){var{props:u,explicitNoCapture:p}=nh(o,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(p)return!1;var f=this.getElementSelectors(o);if(f&&f.length>0&&(u.$element_selectors=f),t===gs){var b,m=gu(M==null||(b=M.getSelection())===null||b===void 0?void 0:b.toString()),v=e.type||"clipboard";if(!m)return!1;u.$selected_content=m,u.$copy_type=v}return this.instance.capture(t,u),!0}}}isBrowserSupported(){return Ln(Te?.querySelectorAll)}}var ih=En("[TracingHeaders]");class oh{constructor(e){ie(this,"_restoreXHRPatch",void 0),ie(this,"_restoreFetchPatch",void 0),ie(this,"_startCapturing",()=>{var t,n,o,a;Me(this._restoreXHRPatch)&&((t=et.__PosthogExtensions__)===null||t===void 0||(n=t.tracingHeadersPatchFns)===null||n===void 0||n._patchXHR(this.instance.sessionManager)),Me(this._restoreFetchPatch)&&((o=et.__PosthogExtensions__)===null||o===void 0||(a=o.tracingHeadersPatchFns)===null||a===void 0||a._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var t,n,o;(t=et.__PosthogExtensions__)!==null&&t!==void 0&&t.tracingHeadersPatchFns&&e(),(n=et.__PosthogExtensions__)===null||n===void 0||(o=n.loadExternalDependency)===null||o===void 0||o.call(n,this.instance,"tracing-headers",a=>{if(a)return ih.error("failed to load script",a);e()})}startIfEnabledOrStop(){var e,t;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(t=this._restoreFetchPatch)===null||t===void 0||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var mr;(function(r){r[r.PENDING=-1]="PENDING",r[r.DENIED=0]="DENIED",r[r.GRANTED=1]="GRANTED"})(mr||(mr={}));class sh{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?mr.DENIED:this.storedConsent}isOptedOut(){return this.consent===mr.DENIED||this.consent===mr.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:t}=this.instance.config;return(t||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return e==="1"?mr.GRANTED:e==="0"?mr.DENIED:mr.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?Qt:sr;var t=e==="localStorage"?sr:Qt;t.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(t.get(this.storageKey)==="1"),t.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!Gl([An?.doNotTrack,An?.msDoNotTrack,et.doNotTrack],e=>at([!0,1,"1","yes"],e))}}var bo=En("[ExceptionAutocapture]");class ah{constructor(e){var t;ie(this,"originalOnUnhandledRejectionHandler",void 0),ie(this,"startCapturing",()=>{var n,o,a,u;if(M&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var p=(n=et.__PosthogExtensions__)===null||n===void 0||(o=n.errorWrappingFunctions)===null||o===void 0?void 0:o.wrapOnError,f=(a=et.__PosthogExtensions__)===null||a===void 0||(u=a.errorWrappingFunctions)===null||u===void 0?void 0:u.wrapUnhandledRejection;if(p&&f)try{this.unwrapOnError=p(this.captureException.bind(this)),this.unwrapUnhandledRejection=f(this.captureException.bind(this))}catch(b){bo.error("failed to start",b),this.stopCapturing()}else bo.error("failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((t=this.instance.persistence)===null||t===void 0||!t.props[Za]),this.startIfEnabled()}get isEnabled(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}get isCapturing(){var e;return!(M==null||(e=M.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(bo.info("enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var t,n;this.hasHandlers&&e(),(t=et.__PosthogExtensions__)===null||t===void 0||(n=t.loadExternalDependency)===null||n===void 0||n.call(t,this.instance,"exception-autocapture",o=>{if(o)return bo.error("failed to load script",o);e()})}stopCapturing(){var e,t;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(t=this.unwrapUnhandledRejection)===null||t===void 0||t.call(this)}onRemoteConfig(e){var t=e.autocaptureExceptions;this.remoteEnabled=!!t||!1,this.instance.persistence&&this.instance.persistence.register({[Za]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var t=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(t,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var Or=En("[Web Vitals]"),Ll=9e5;class lh{constructor(e){var t;ie(this,"_enabledServerSide",!1),ie(this,"_initialized",!1),ie(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),ie(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),this.buffer.metrics.length!==0&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((n,o)=>X(X({},n),{},{["$web_vitals_".concat(o.name,"_event")]:X({},o),["$web_vitals_".concat(o.name,"_value")]:o.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),ie(this,"_addToBuffer",n=>{var o,a=(o=this.instance.sessionManager)===null||o===void 0?void 0:o.checkAndGetSessionAndWindowId(!0);if(Me(a))Or.error("Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var u=this._currentURL();Me(u)||(Tt(n?.name)||Tt(n?.value)?Or.error("Invalid metric received",n):this._maxAllowedValue&&n.value>=this._maxAllowedValue?Or.error("Ignoring metric with value >= "+this._maxAllowedValue,n):(this.buffer.url!==u&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),Me(this.buffer.url)&&(this.buffer.url=u),this.buffer.firstMetricTimestamp=Me(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,n.attribution&&n.attribution.interactionTargetElement&&(n.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(X(X({},n),{},{$current_url:u,$session_id:a.sessionId,$window_id:a.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}}),ie(this,"_startCapturing",()=>{var n,o,a,u,p=et.__PosthogExtensions__;Me(p)||Me(p.postHogWebVitalsCallbacks)||({onLCP:n,onCLS:o,onFCP:a,onINP:u}=p.postHogWebVitalsCallbacks),n&&o&&a&&u?(this.allowedMetrics.indexOf("LCP")>-1&&n(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&o(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&a(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&u(this._addToBuffer.bind(this)),this._initialized=!0):Or.error("web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((t=this.instance.persistence)===null||t===void 0||!t.props[za]),this.startIfEnabled()}get allowedMetrics(){var e,t,n=Wt(this.instance.config.capture_performance)?(e=this.instance.config.capture_performance)===null||e===void 0?void 0:e.web_vitals_allowed_metrics:void 0;return Me(n)?((t=this.instance.persistence)===null||t===void 0?void 0:t.props[Ya])||["CLS","FCP","INP","LCP"]:n}get flushToCaptureTimeoutMs(){return(Wt(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=Wt(this.instance.config.capture_performance)&&vn(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:Ll;return 0<e&&e<=6e4?Ll:e}get isEnabled(){var e=Wt(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return Br(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(Or.info("enabled, starting..."),this.loadScript(this._startCapturing))}onRemoteConfig(e){var t=Wt(e.capturePerformance)&&!!e.capturePerformance.web_vitals,n=Wt(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[za]:t}),this.instance.persistence.register({[Ya]:n})),this._enabledServerSide=t,this.startIfEnabled()}loadScript(e){var t,n,o;(t=et.__PosthogExtensions__)!==null&&t!==void 0&&t.postHogWebVitalsCallbacks&&e(),(n=et.__PosthogExtensions__)===null||n===void 0||(o=n.loadExternalDependency)===null||o===void 0||o.call(n,this.instance,"web-vitals",a=>{a?Or.error("failed to load script",a):e()})}_currentURL(){var e=M?M.location.href:void 0;return e||Or.error("Could not determine current URL"),e}}var uh={icontains:(r,e)=>!!M&&e.href.toLowerCase().indexOf(r.toLowerCase())>-1,not_icontains:(r,e)=>!!M&&e.href.toLowerCase().indexOf(r.toLowerCase())===-1,regex:(r,e)=>!!M&&si(e.href,r),not_regex:(r,e)=>!!M&&!si(e.href,r),exact:(r,e)=>e.href===r,is_not:(r,e)=>e.href!==r};class en{constructor(e){var t=this;ie(this,"getWebExperimentsAndEvaluateDisplayLogic",function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];t.getWebExperiments(o=>{en.logInfo("retrieved web experiments from the server"),t._flagToExperiments=new Map,o.forEach(a=>{if(a.feature_flag_key){var u;t._flagToExperiments&&(en.logInfo("setting flag key ",a.feature_flag_key," to web experiment ",a),(u=t._flagToExperiments)===null||u===void 0||u.set(a.feature_flag_key,a));var p=t.instance.getFeatureFlag(a.feature_flag_key);an(p)&&a.variants[p]&&t.applyTransforms(a.name,p,a.variants[p].transforms)}else if(a.variants)for(var f in a.variants){var b=a.variants[f];en.matchesTestVariant(b)&&t.applyTransforms(a.name,f,b.transforms)}})},n)}),this.instance=e,this.instance.onFeatureFlags(n=>{this.onFeatureFlags(n)})}onFeatureFlags(e){if(this._is_bot())en.logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this.instance.config.disable_web_experiments){if(Tt(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();en.logInfo("applying feature flags",e),e.forEach(t=>{var n;if(this._flagToExperiments&&(n=this._flagToExperiments)!==null&&n!==void 0&&n.has(t)){var o,a=this.instance.getFeatureFlag(t),u=(o=this._flagToExperiments)===null||o===void 0?void 0:o.get(t);a&&u!=null&&u.variants[a]&&this.applyTransforms(u.name,a,u.variants[a].transforms)}})}}previewWebExperiment(){var e=en.getWindowLocation();if(e!=null&&e.search){var t=Ro(e?.search,"__experiment_id"),n=Ro(e?.search,"__experiment_variant");t&&n&&(en.logInfo("previewing web experiments ".concat(t," && ").concat(n)),this.getWebExperiments(o=>{this.showPreviewWebExperiment(parseInt(t),n,o)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,n){if(this.instance.config.disable_web_experiments&&!n)return e([]);var o=this.instance.get_property("$web_experiments");if(o&&!t)return e(o);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",callback:a=>{if(a.statusCode!==200||!a.json)return e([]);var u=a.json.experiments||[];return e(u)}})}showPreviewWebExperiment(e,t,n){var o=n.filter(a=>a.id===e);o&&o.length>0&&(en.logInfo("Previewing web experiment [".concat(o[0].name,"] with variant [").concat(t,"]")),this.applyTransforms(o[0].name,t,o[0].variants[t].transforms,!0))}static matchesTestVariant(e){return!Tt(e.conditions)&&en.matchUrlConditions(e)&&en.matchUTMConditions(e)}static matchUrlConditions(e){var t;if(Tt(e.conditions)||Tt((t=e.conditions)===null||t===void 0?void 0:t.url))return!0;var n,o,a,u=en.getWindowLocation();return!!u&&((n=e.conditions)===null||n===void 0||!n.url||uh[(o=(a=e.conditions)===null||a===void 0?void 0:a.urlMatchType)!==null&&o!==void 0?o:"icontains"](e.conditions.url,u))}static getWindowLocation(){return M?.location}static matchUTMConditions(e){var t;if(Tt(e.conditions)||Tt((t=e.conditions)===null||t===void 0?void 0:t.utm))return!0;var n=qt.campaignParams();if(n.utm_source){var o,a,u,p,f,b,m,v,k,C,R,O,ne,ee,z,fe,me=(o=e.conditions)===null||o===void 0||(a=o.utm)===null||a===void 0||!a.utm_campaign||((u=e.conditions)===null||u===void 0||(p=u.utm)===null||p===void 0?void 0:p.utm_campaign)==n.utm_campaign,De=(f=e.conditions)===null||f===void 0||(b=f.utm)===null||b===void 0||!b.utm_source||((m=e.conditions)===null||m===void 0||(v=m.utm)===null||v===void 0?void 0:v.utm_source)==n.utm_source,lt=(k=e.conditions)===null||k===void 0||(C=k.utm)===null||C===void 0||!C.utm_medium||((R=e.conditions)===null||R===void 0||(O=R.utm)===null||O===void 0?void 0:O.utm_medium)==n.utm_medium,Ie=(ne=e.conditions)===null||ne===void 0||(ee=ne.utm)===null||ee===void 0||!ee.utm_term||((z=e.conditions)===null||z===void 0||(fe=z.utm)===null||fe===void 0?void 0:fe.utm_term)==n.utm_term;return me&&lt&&Ie&&De}return!1}static logInfo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];Ae.info("[WebExperiments] ".concat(e),n)}applyTransforms(e,t,n,o){var a;this._is_bot()?en.logInfo("Refusing to render web experiment since the viewer is a likely bot"):t!=="control"?n.forEach(u=>{if(u.selector){var p;en.logInfo("applying transform of variant ".concat(t," for experiment ").concat(e," "),u);var f,b=0,m=(p=document)===null||p===void 0?void 0:p.querySelectorAll(u.selector);m?.forEach(v=>{var k=v;b+=1,u.attributes&&u.attributes.forEach(C=>{switch(C.name){case"text":k.innerText=C.value;break;case"html":k.innerHTML=C.value;break;case"cssClass":k.className=C.value;break;default:k.setAttribute(C.name,C.value)}}),u.text&&(k.innerText=u.text),u.html&&(k.parentElement?k.parentElement.innerHTML=u.html:k.innerHTML=u.html),u.css&&k.setAttribute("style",u.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:t,$web_experiment_preview:o,$web_experiment_document_url:(f=en.getWindowLocation())===null||f===void 0?void 0:f.href,$web_experiment_elements_modified:b})}}):(en.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:o,$web_experiment_variant:t,$web_experiment_document_url:(a=en.getWindowLocation())===null||a===void 0?void 0:a.href,$web_experiment_elements_modified:0}))}_is_bot(){return An&&this.instance?Wu(An,this.instance.config.custom_blocked_useragents):void 0}}class ch{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var dh=["$set_once","$set"],Fr=En("[SiteApps]");class hh{constructor(e){this.instance=e,this.bufferedInvocations=[],this.apps={}}get isEnabled(){return!!this.instance.config.opt_in_site_apps}eventCollector(e,t){if(t){var n=this.globalsForEvent(t);this.bufferedInvocations.push(n),this.bufferedInvocations.length>1e3&&(this.bufferedInvocations=this.bufferedInvocations.slice(10))}}get siteAppLoaders(){var e,t;return(e=et._POSTHOG_REMOTE_CONFIG)===null||e===void 0||(t=e[this.instance.config.token])===null||t===void 0?void 0:t.siteApps}init(){if(this.isEnabled){var e=this.instance._addCaptureHook(this.eventCollector.bind(this));this.stopBuffering=()=>{e(),this.bufferedInvocations=[],this.stopBuffering=void 0}}}globalsForEvent(e){var t,n,o,a,u,p,f;if(!e)throw new Error("Event payload is required");var b={},m=this.instance.get_property("$groups")||[],v=this.instance.get_property("$stored_group_properties")||{};for(var[k,C]of Object.entries(v))b[k]={id:m[k],type:k,properties:C};var{$set_once:R,$set:O}=e;return{event:X(X({},$l(e,dh)),{},{properties:X(X(X({},e.properties),O?{$set:X(X({},(t=(n=e.properties)===null||n===void 0?void 0:n.$set)!==null&&t!==void 0?t:{}),O)}:{}),R?{$set_once:X(X({},(o=(a=e.properties)===null||a===void 0?void 0:a.$set_once)!==null&&o!==void 0?o:{}),R)}:{}),elements_chain:(u=(p=e.properties)===null||p===void 0?void 0:p.$elements_chain)!==null&&u!==void 0?u:"",distinct_id:(f=e.properties)===null||f===void 0?void 0:f.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:b}}setupSiteApp(e){var t={id:e.id,loaded:!1,errored:!1};this.apps[e.id]=t;var n=a=>{var u;for(var p of(this.apps[e.id].errored=!a,this.apps[e.id].loaded=!0,Fr.info("Site app with id ".concat(e.id," ").concat(a?"loaded":"errored")),a&&this.bufferedInvocations.length&&(Fr.info("Processing ".concat(this.bufferedInvocations.length," events for site app with id ").concat(e.id)),this.bufferedInvocations.forEach(f=>{var b;return(b=t.processEvent)===null||b===void 0?void 0:b.call(t,f)})),Object.values(this.apps)))if(!p.loaded)return;(u=this.stopBuffering)===null||u===void 0||u.call(this)};try{var{processEvent:o}=e.init({posthog:this.instance,callback:a=>{n(a)}});o&&(t.processEvent=o)}catch(a){Fr.error("Error while initializing PostHog app with config id ".concat(e.id),a),n(!1)}}onCapturedEvent(e){if(Object.keys(this.apps).length!==0){var t=this.globalsForEvent(e);for(var n of Object.values(this.apps))try{var o;(o=n.processEvent)===null||o===void 0||o.call(n,t)}catch(a){Fr.error("Error while processing event ".concat(e.event," for site app ").concat(n.id),a)}}}onRemoteConfig(e){var t,n,o,a=this;if((t=this.siteAppLoaders)!==null&&t!==void 0&&t.length){if(!this.isEnabled)return void Fr.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');for(var u of this.siteAppLoaders)this.setupSiteApp(u);this.instance.on("eventCaptured",m=>this.onCapturedEvent(m))}else if((n=this.stopBuffering)===null||n===void 0||n.call(this),(o=e.siteApps)!==null&&o!==void 0&&o.length)if(this.isEnabled){var p=function(m,v){var k,C;et["__$$ph_site_app_".concat(m)]=a.instance,(k=et.__PosthogExtensions__)===null||k===void 0||(C=k.loadSiteApp)===null||C===void 0||C.call(k,a.instance,v,R=>{if(R)return Fr.error("Error while initializing PostHog app with config id ".concat(m),R)})};for(var{id:f,url:b}of e.siteApps)p(f,b)}else Fr.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var Di={},Qs=()=>{},Qr="posthog",Uu=!Md&&tn?.indexOf("MSIE")===-1&&tn?.indexOf("Mozilla")===-1,Dl=()=>{var r,e,t;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Te?.location,t=e?.hostname,!!an(t)&&t.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:Qs,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Cn&&an(Cn?.search)&&Cn.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(M==null||(r=M.location)===null||r===void 0?void 0:r.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:n=>{var o="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(o)},get_device_id:n=>n,_onCapture:Qs,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1,before_send:void 0}},Bl=r=>{var e={};Me(r.process_person)||(e.person_profiles=r.process_person),Me(r.xhr_headers)||(e.request_headers=r.xhr_headers),Me(r.cookie_name)||(e.persistence_name=r.cookie_name),Me(r.disable_cookie)||(e.disable_persistence=r.disable_cookie);var t=mn({},e,r);return zt(r.property_blacklist)&&(Me(r.property_denylist)?t.property_denylist=r.property_blacklist:zt(r.property_denylist)?t.property_denylist=[...r.property_blacklist,...r.property_denylist]:Ae.error("Invalid value for property_denylist config: "+r.property_denylist)),t};class ph{constructor(){ie(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class jo{get decideEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)===null||t===void 0?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){ie(this,"webPerformance",new ph),ie(this,"version",ir.LIB_VERSION),ie(this,"_internalEventEmitter",new Au),this.config=Dl(),this.SentryIntegration=Fd,this.sentryIntegration=e=>function(t,n){var o=Ru(t,n);return{name:Mu,processEvent:a=>o(a)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new Nc(this),this.toolbar=new Ed(this),this.scrollManager=new Qd(this),this.pageViewManager=new Ld(this),this.surveys=new Vd(this),this.experiments=new en(this),this.exceptions=new ch(this),this.rateLimiter=new Ud(this),this.requestRouter=new Od(this),this.consent=new sh(this),this.people={set:(e,t,n)=>{var o=an(e)?{[e]:t}:e;this.setPersonProperties(o),n?.({})},set_once:(e,t,n)=>{var o=an(e)?{[e]:t}:e;this.setPersonProperties(void 0,o),n?.({})}},this.on("eventCaptured",e=>Ae.info('send "'.concat(e?.event,'"'),e))}init(e,t,n){if(n&&n!==Qr){var o,a=(o=Di[n])!==null&&o!==void 0?o:new jo;return a._init(e,t,n),Di[n]=a,Di[Qr][n]=a,a}return this._init(e,t,n)}_init(e){var t,n,o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0;if(Me(e)||Va(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],a.person_profiles&&(this._initialPersonProfilesConfig=a.person_profiles),this.set_config(mn({},Dl(),Bl(a),{name:u,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=a.disable_compression?void 0:Gn.GZipJS,this.persistence=new bs(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new bs(X(X({},this.config),{},{persistence:"sessionStorage"}));var p=X({},this.persistence.props),f=X({},this.sessionPersistence.props);if(this._requestQueue=new xd(z=>this._send_retriable_request(z)),this._retryQueue=new Ad(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new Nd(this),this.sessionPropsManager=new Zd(this.sessionManager,this.persistence)),new oh(this).startIfEnabledOrStop(),this.siteApps=new hh(this),(t=this.siteApps)===null||t===void 0||t.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Cd(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new rh(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Kd(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new lh(this),this.exceptionObserver=new ah(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new Vu(this,Xd),this.deadClicksAutocapture.startIfEnabled(),ir.DEBUG=ir.DEBUG||this.config.debug,ir.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:a,thisC:X({},this.config),p,s:f}),this._sync_opt_out_with_persistence(),((n=a.bootstrap)===null||n===void 0?void 0:n.distinctID)!==void 0){var b,m,v=this.config.get_device_id(_r()),k=(b=a.bootstrap)!==null&&b!==void 0&&b.isIdentifiedID?v:a.bootstrap.distinctID;this.persistence.set_property(tr,(m=a.bootstrap)!==null&&m!==void 0&&m.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:a.bootstrap.distinctID,$device_id:k})}if(this._hasBootstrappedFeatureFlags()){var C,R,O=Object.keys(((C=a.bootstrap)===null||C===void 0?void 0:C.featureFlags)||{}).filter(z=>{var fe,me;return!((fe=a.bootstrap)===null||fe===void 0||(me=fe.featureFlags)===null||me===void 0||!me[z])}).reduce((z,fe)=>{var me,De;return z[fe]=((me=a.bootstrap)===null||me===void 0||(De=me.featureFlags)===null||De===void 0?void 0:De[fe])||!1,z},{}),ne=Object.keys(((R=a.bootstrap)===null||R===void 0?void 0:R.featureFlagPayloads)||{}).filter(z=>O[z]).reduce((z,fe)=>{var me,De,lt,Ie;return(me=a.bootstrap)!==null&&me!==void 0&&(De=me.featureFlagPayloads)!==null&&De!==void 0&&De[fe]&&(z[fe]=(lt=a.bootstrap)===null||lt===void 0||(Ie=lt.featureFlagPayloads)===null||Ie===void 0?void 0:Ie[fe]),z},{});this.featureFlags.receivedFeatureFlags({featureFlags:O,featureFlagPayloads:ne})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:nl,$device_id:null},"");else if(!this.get_distinct_id()){var ee=this.config.get_device_id(_r());this.register_once({distinct_id:ee,$device_id:ee},""),this.persistence.set_property(tr,"anonymous")}return M==null||(o=M.addEventListener)===null||o===void 0||o.call(M,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),a.segment?Pd(this,()=>this._loaded()):this._loaded(),Ln(this.config._onCapture)&&this.config._onCapture!==Qs&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",z=>this.config._onCapture(z.event,z))),this}_onRemoteConfig(e){var t,n,o,a,u,p,f,b,m;if(!Te||!Te.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this._onRemoteConfig(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=at(e.supportedCompression,Gn.GZipJS)?Gn.GZipJS:at(e.supportedCompression,Gn.Base64)?Gn.Base64:void 0),(t=e.analytics)!==null&&t!==void 0&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),(n=this.siteApps)===null||n===void 0||n.onRemoteConfig(e),(o=this.sessionRecording)===null||o===void 0||o.onRemoteConfig(e),(a=this.autocapture)===null||a===void 0||a.onRemoteConfig(e),(u=this.heatmaps)===null||u===void 0||u.onRemoteConfig(e),(p=this.surveys)===null||p===void 0||p.onRemoteConfig(e),(f=this.webVitalsAutocapture)===null||f===void 0||f.onRemoteConfig(e),(b=this.exceptionObserver)===null||b===void 0||b.onRemoteConfig(e),(m=this.deadClicksAutocapture)===null||m===void 0||m.onRemoteConfig(e)}_loaded(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),new Id(this).load(),this.featureFlags.decide()}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||ni(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(t=this._retryQueue)===null||t===void 0||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(Uu?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Lo(e.url,{ip:this.config.ip?1:0}),e.headers=X({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(t=>{var n,o,a,u=X({},t);u.timeout=u.timeout||6e4,u.url=Lo(u.url,{_:new Date().getTime().toString(),ver:ir.LIB_VERSION,compression:u.compression});var p=(n=u.transport)!==null&&n!==void 0?n:"fetch",f=(o=(a=Gl(Li,b=>b.transport===p))===null||a===void 0?void 0:a.method)!==null&&o!==void 0?o:Li[0].method;if(!f)throw new Error("No available transport method");f(u)})(X(X({},e),{},{callback:t=>{var n,o,a;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&((o=(a=this.config).on_request_error)===null||o===void 0||o.call(a,t)),(n=e.callback)===null||n===void 0||n.call(e,t)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,n=[],o=[],a=[];ni(e,p=>{p&&(t=p[0],zt(t)?a.push(p):Ln(p)?p.call(this):zt(p)&&t==="alias"?n.push(p):zt(p)&&t.indexOf("capture")!==-1&&Ln(this[t])?a.push(p):o.push(p))});var u=function(p,f){ni(p,function(b){if(zt(b[0])){var m=f;kt(b,function(v){m=m[v[0]].apply(m,v.slice(1))})}else this[b[0]].apply(this,b.slice(1))},f)};u(n,this),u(o,this),u(a,this)}_hasBootstrappedFeatureFlags(){var e,t;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((t=this.config.bootstrap)===null||t===void 0?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,n){var o;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!Me(e)&&an(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var a=n!=null&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(a==null||!a.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var u=new Date,p=n?.timestamp||u,f={uuid:_r(),event:e,properties:this._calculate_event_properties(e,t||{},p)};a&&(f.properties.$lib_rate_limit_remaining_tokens=a.remainingTokens),n?.$set&&(f.$set=n?.$set);var b=this._calculate_set_once_properties(n?.$set_once);b&&(f.$set_once=b),(f=Rc(f,n!=null&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=p,Me(n?.timestamp)||(f.properties.$event_time_override_provided=!0,f.properties.$event_time_override_system_time=u);var m=X(X({},f.properties.$set),f.$set);if(ei(m)||this.setPersonPropertiesForFlags(m),!Tt(this.config.before_send)){var v=this._runBeforeSend(f);if(!v)return;f=v}this._internalEventEmitter.emit("eventCaptured",f);var k={method:"POST",url:(o=n?._url)!==null&&o!==void 0?o:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:f,compression:"best-available",batchKey:n?._batchKey};return!this.config.request_batching||n&&(n==null||!n._batchKey)||n!=null&&n.send_instantly?this._send_retriable_request(k):this._requestQueue.enqueue(k),f}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",t=>e(t.event,t))}_calculate_event_properties(e,t,n){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return t;var o=this.persistence.remove_event_timer(e),a=X({},t);if(a.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(a.$cklsh_mode=!0),e==="$snapshot"){var u=X(X({},this.persistence.properties()),this.sessionPersistence.properties());return a.distinct_id=u.distinct_id,(!an(a.distinct_id)&&!vn(a.distinct_id)||Va(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var p=qt.properties();if(this.sessionManager){var{sessionId:f,windowId:b}=this.sessionManager.checkAndGetSessionAndWindowId();a.$session_id=f,a.$window_id=b}if(this.sessionRecording&&(a.$recording_status=this.sessionRecording.status),this.requestRouter.region===Hr.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var m=this.sessionPropsManager.getSessionProps();a=mn(a,m)}if(!this.config.disable_scroll_properties){var v={};e==="$pageview"?v=this.pageViewManager.doPageView(n):e==="$pageleave"&&(v=this.pageViewManager.doPageLeave(n)),a=mn(a,v)}if(e==="$pageview"&&Te&&(a.title=Te.title),!Me(o)){var k=n.getTime()-o;a.$duration=parseFloat((k/1e3).toFixed(3))}tn&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=mn({},p,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),zt(this.config.property_denylist)?kt(this.config.property_denylist,function(O){delete a[O]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var C=this.config.sanitize_properties;C&&(a=C(a,e));var R=this._hasPersonProcessing();return a.$process_person_profile=R,R&&this._requirePersonProcessing("_calculate_event_properties"),a}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var t=mn({},this.persistence.get_initial_props(),e||{}),n=this.config.sanitize_properties;return n&&(t=n(t,"$set_once")),ei(t)?void 0:t}register(e,t){var n;(n=this.persistence)===null||n===void 0||n.register(e,t)}register_once(e,t,n){var o;(o=this.persistence)===null||o===void 0||o.register_once(e,t,n)}register_for_session(e){var t;(t=this.sessionPersistence)===null||t===void 0||t.register(e)}unregister(e){var t;(t=this.persistence)===null||t===void 0||t.unregister(e)}unregister_for_session(e){var t;(t=this.sessionPersistence)===null||t===void 0||t.unregister(e)}_register_single(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}on(e,t){return this._internalEventEmitter.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var t,n;return(t=(n=this.sessionManager)===null||n===void 0?void 0:n.onSessionId(e))!==null&&t!==void 0?t:()=>{}}getSurveys(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,t,n){return this.surveys.getNextSurveyStep(e,t,n)}identify(e,t,n){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(vn(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var o=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var a=o;this.register_once({$had_persisted_distinct_id:!0,$device_id:a},"")}e!==o&&e!==this.get_property(Mi)&&(this.unregister(Mi),this.register({distinct_id:e}));var u=(this.persistence.get_property(tr)||"anonymous")==="anonymous";e!==o&&u?(this.persistence.set_property(tr,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:o},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(o)):(t||n)&&this.setPersonProperties(t,n),e!==o&&(this.reloadFeatureFlags(),this.unregister(xo))}}else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}group(e,t,n){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var o=this.getGroups();o[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:X(X({},o),{},{[e]:t})}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags({[e]:n})),o[e]===t||n||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,n,o,a,u;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var p=this.get_property("$device_id");if(this.consent.reset(),(t=this.persistence)===null||t===void 0||t.clear(),(n=this.sessionPersistence)===null||n===void 0||n.clear(),(o=this.surveys)===null||o===void 0||o.reset(),(a=this.persistence)===null||a===void 0||a.set_property(tr,"anonymous"),(u=this.sessionManager)===null||u===void 0||u.resetSessionId(),this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:nl,$device_id:null},"");else{var f=this.config.get_device_id(_r());this.register_once({distinct_id:f,$device_id:e?f:p},"")}}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return(e=(t=this.sessionManager)===null||t===void 0?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0),o=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(t));if(e!=null&&e.withTimestamp&&n){var a,u=(a=e.timestampLookBack)!==null&&a!==void 0?a:10;if(!n)return o;var p=Math.max(Math.floor((new Date().getTime()-n)/1e3)-u,0);o+="?t=".concat(p)}return o}alias(e,t){return e===this.get_property(Zl)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Me(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(Mi,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t,n,o,a,u=X({},this.config);Wt(e)&&(mn(this.config,Bl(e)),(t=this.persistence)===null||t===void 0||t.update_config(this.config,u),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new bs(X(X({},this.config),{},{persistence:"sessionStorage"})),Qt.is_supported()&&Qt.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ir.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:u,newConfig:X({},this.config)})),(n=this.sessionRecording)===null||n===void 0||n.startIfEnabledOrStop(),(o=this.autocapture)===null||o===void 0||o.startIfEnabled(),(a=this.heatmaps)===null||a===void 0||a.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var t=e===!0,n={sampling:t||!(e==null||!e.sampling),linked_flag:t||!(e==null||!e.linked_flag),url_trigger:t||!(e==null||!e.url_trigger),event_trigger:t||!(e==null||!e.event_trigger)};if(Object.values(n).some(Boolean)){var o,a,u,p,f;(o=this.sessionManager)===null||o===void 0||o.checkAndGetSessionAndWindowId(),n.sampling&&((a=this.sessionRecording)===null||a===void 0||a.overrideSampling()),n.linked_flag&&((u=this.sessionRecording)===null||u===void 0||u.overrideLinkedFlag()),n.url_trigger&&((p=this.sessionRecording)===null||p===void 0||p.overrideTrigger("url")),n.event_trigger&&((f=this.sessionRecording)===null||f===void 0||f.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}captureException(e,t){var n,o=new Error("PostHog syntheticException"),a=Ln((n=et.__PosthogExtensions__)===null||n===void 0?void 0:n.parseErrorAsProperties)?et.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:o}):X({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},t);this.exceptions.sendExceptionEvent(a)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return(t=this.persistence)===null||t===void 0?void 0:t.props[e]}getSessionProperty(e){var t;return(t=this.sessionPersistence)===null||t===void 0?void 0:t.props[e]}toString(){var e,t=(e=this.config.name)!==null&&e!==void 0?e:Qr;return t!==Qr&&(t=Qr+"."+t),t}_isIdentified(){var e,t;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(tr))==="identified"||((t=this.sessionPersistence)===null||t===void 0?void 0:t.get_property(tr))==="identified"}_hasPersonProcessing(){var e,t,n,o;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&ei(this.getGroups())&&((e=this.persistence)===null||e===void 0||(t=e.props)===null||t===void 0||!t[Mi])&&((n=this.persistence)===null||n===void 0||(o=n.props)===null||o===void 0||!o[To]))}_shouldCapturePageleave(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(To,!0),!0)}_sync_opt_out_with_persistence(){var e,t,n,o,a=this.consent.isOptedOut(),u=this.config.opt_out_persistence_by_default,p=this.config.disable_persistence||a&&!!u;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==p&&((n=this.persistence)===null||n===void 0||n.set_disabled(p)),((t=this.sessionPersistence)===null||t===void 0?void 0:t.disabled)!==p&&((o=this.sessionPersistence)===null||o===void 0||o.set_disabled(p))}opt_in_capturing(e){var t;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(Me(e?.captureEventName)||e!=null&&e.captureEventName)&&this.capture((t=e?.captureEventName)!==null&&t!==void 0?t:"$opt_in",e?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return An?Wu(An,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){Te&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Te.title},{send_instantly:!0}))}debug(e){e===!1?(M?.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(M?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(Tt(this.config.before_send))return e;var t=zt(this.config.before_send)?this.config.before_send:[this.config.before_send],n=e;for(var o of t){if(n=o(n),Tt(n)){var a="Event '".concat(e.event,"' was rejected in beforeSend function");return Tc(e.event)?Ae.warn("".concat(a,". This can cause unexpected behavior.")):Ae.info(a),null}n.properties&&!ei(n.properties)||Ae.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return n}}(function(r,e){for(var t=0;t<e.length;t++)r.prototype[e[t]]=Mc(r.prototype[e[t]])})(jo,["identify"]);var Hl,gh=(Hl=Di[Qr]=new jo,function(){function r(){r.done||(r.done=!0,Uu=!1,kt(Di,function(e){e._dom_loaded()}))}Te!=null&&Te.addEventListener&&(Te.readyState==="complete"?r():Te.addEventListener("DOMContentLoaded",r,!1)),M&&or(M,"load",r,!0)}(),Hl);export{gh as posthog};
