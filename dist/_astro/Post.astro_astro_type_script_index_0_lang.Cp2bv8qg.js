import{Q as S}from"./QuestionStore.DE3R8U0_.js";import"./_commonjsHelpers.Cpj98o6Y.js";let i=null,p=0;window.__updateCounts=()=>{const t=document.querySelectorAll(".quiz-ui"),e=document.querySelectorAll("main .challenge");if(!(t.length>0)||e.length<=0)return!1;const r=document.querySelectorAll(".score"),o=r[0],c=document.querySelector(".score-wrapper"),u=document.querySelector(".score label"),s=document.querySelectorAll("main .challenge.correct"),d=document.querySelector(".congrats-message"),h=m(),l=h?h.sumOfTries():q(),a=e.length===s.length&&l===e.length;if(o?.parentNode?.nodeName!=="BODY"&&document.body.appendChild(o),a&&(o?.classList.add("perfect"),t[0].classList.add("perfect")),r.length>=2&&console.error("Multiple score elements found"),!u)return console.error("Expected score label, not found"),!1;if(s.length>0&&r[0].classList.add("active"),e.length===s.length){if(o.classList.add("all-correct"),d){const y=a?"WOW! Perfect!":"All correct!",g=a?"h2":"h3";d.innerHTML=`<${g}>${y} ${s.length} / ${e.length} ${l>0?`<sup>(${l} tries)</sup>`:""}</${g}>`}c?.classList.toggle("pulse"),o?.classList.add("success")}else u.innerHTML=`${s.length} / ${e.length} ${l>0?`<sup>(${l} tries)</sup>`:""}`;return!0};function m(){const t=S(window.location.pathname);return t||null}document.addEventListener("astro:page-load",function(){const t=document.querySelector(".quiz-ui");if(f(),t){const e=m(),n=document.querySelector("button.reset-quiz");n&&n.addEventListener("click",()=>{e?.reset(),location.reload()}),i=setInterval(()=>{if(p++,window.__updateCounts(),p>12){clearInterval(i);return}},100),t.addEventListener("mousedown",()=>{clearInterval(i)},{once:!0}),t.addEventListener("click",()=>{clearInterval(i),window.__updateCounts()})}});function q(){return[...document.querySelectorAll("[data-answer-count")].reduce((t,e)=>{const n=parseInt(e.getAttribute("data-answer-count")||"0",10);return t+n},0)}window.__superHackFix_patchOptionsListWithActualHeight=function(e=null){return e??=[...document.querySelectorAll(".quiz-options")],console.log("patchRealHeight",e.length),e.forEach(function(n){try{let r=n&&Array.from(n.querySelectorAll("a")).map(function(c){return c.getBoundingClientRect().height});const o=r&&r.reduce((c,u)=>c+u,0);console.log("sumHeight",o),n.parentElement&&(n.parentElement.style.height=o+"px")}catch(r){console.error("Error patching options list",r)}}),e};function f(){const t=document.querySelector(".share-counters"),e=t?.querySelectorAll("span:empty");return e&&e.length>=4&&t?.classList.add("hidden","empty","no-share-counts"),{shareCounters:t,emptySpans:e}}window.__checkForEmptyShareCounts=f;
