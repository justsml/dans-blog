import"./hoisted.B3pwVyVG.js";var d=0,r=null;let a="",o=null,n=null;document.addEventListener("astro:page-load",async()=>{const e=document.querySelector("[data-recaptcha-site-key]");if(o=document.querySelector('form[name="contact"]'),n=document.querySelector('[name="g-recaptcha-response"]'),!o)return console.error("No form found");if(!e)return console.error("No reCaptcha Site Key found");if(a=e?.dataset?.recaptchaSiteKey||e?.getAttribute("data-recaptcha-site-key")||"",!a)return console.error("No reCaptcha site key found");window.grecaptcha.ready(()=>{f()}),r=setInterval(u,200),document.body.addEventListener("submit",m)});function u(){console.info("hideBotFood()",{$hideBotRetries:d,$hideBotInterval:r}),window.$hideBotRetries=window.$hideBotRetries||0,window.$hideBotRetries++;const e=document.querySelectorAll(".bot-food");e.length>0&&r&&(console.info(`Hiding ${e.length} bot fields`),clearInterval(r)),e.forEach(t=>{t.style.display="none"})}function f(){window.grecaptcha.render("recaptcha",{sitekey:a,theme:"light",callback:e=>{n&&(n.value=e),console.log("reCaptcha response:",e)}})}function h(e){e?(o?.classList.add("success"),o?.classList.remove("failure")):(o?.classList.add("failure"),o?.classList.remove("success")),o?.classList.remove("loading")}async function m(e){e.preventDefault();const t=e.target;if(!t)return console.error("Invalid form configuration!");const s=new FormData(t);o?.classList.add("loading");const c=window.grecaptcha.getResponse();if(!c){console.error("reCaptcha not completed"),o?.classList.remove("loading"),o?.classList.add("failure");return}s.set("g-recaptcha-response",c);const i=await fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s).toString()}).catch(l=>(console.error("Error submitting form",l),{ok:!1}));h(i.ok),i.ok?console.log("Form submitted successfully"):console.error("Form submission failed")}
