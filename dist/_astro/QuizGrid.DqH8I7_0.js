import{j as e}from"./jsx-runtime.vlAWDSmm.js";import{B as S}from"./index.C14RpapU.js";import{P as E,a as w,b as D}from"./popover.x9D3fW6f.js";import{r as c}from"./index.BwNzhqGF.js";import{s as f}from"./pathHelpers.kwYD5byA.js";import{c as v}from"./clsx.B-dksMZM.js";import{g as F}from"./dateUtils.DO4RL2xL.js";import{Q as O}from"./QuestionStore.CLterkrh.js";import"./index.DmAWNlUL.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./formatDistance.Ci3P8epv.js";function B(i){const[a,d]=c.useState([]);c.useEffect(()=>{i?.onSearchChange?.(a)},[a]);const l=s=>{if(s=f(s),a.includes(s)){d(a.filter(u=>u!==s)),i?.onSearchChange?.(a);return}d([...a,s]),i?.onSearchChange?.(a)},n=({children:s,className:u=""})=>{const o=f(s),t=a.includes(o)||a.includes(s),r=(t?"open-":"closed-")+o;return e.jsx("div",{className:v({selectedItem:t},u,r," flex-wrap items-center justify-between"),children:e.jsx(S,{onClick:()=>l(o),variant:t?"default":"secondary",children:s})})};return e.jsxs(E,{children:[e.jsx(w,{asChild:!0,className:"toggle-filters",children:e.jsx(S,{variant:"outline",children:"FiltersÂ "})}),e.jsx(D,{className:"w-80",children:e.jsx("div",{className:"grid gap-2",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mt-4 space-y-2 inline-flex justify-start align-top place-self-start",children:[e.jsxs("section",{className:"tag-filters skill-level inline-grid mx-4 gap-4 self-end justify-center",children:[e.jsx(n,{children:"Beginner"}),e.jsx(n,{children:"Intermediate"}),e.jsx(n,{children:"Advanced"})]}),e.jsxs("section",{className:"hidden status-filters mx-4 gap-4 self-end justify-center",children:[e.jsx(n,{children:"Not Started"}),e.jsx(n,{children:"Started"}),e.jsx(n,{children:"Complete"})]})]})})})})]})}const L=({article:i,width:a,className:d,subCategoryList:l,subCategoryCounts:n})=>{const s=i.slug,{index:u,title:o,subCategory:t,label:r,draft:N,date:x,modified:j,tags:g}=i.data;F({date:x,modified:j});const[h,b]=c.useState(0),[P,y]=c.useState(0),[z,q]=c.useState(0);let p=`cat-${f(t)}`;N&&(p+=" draft");const Q="quiz-card",C=i.data.questionCount;c.useEffect(()=>{const m=O(s);console.log("ðŸš€ ~ qStore",m.correct(),s,m),b(m.correct()),y(m.total()),q(m.sumOfTries())},[s,h]);const T=h===C;return e.jsx("div",{className:v(Q,p,d),children:e.jsxs("a",{href:`/${s}/`,className:"quiz-card-inner","data-created":x,"data-modified":j,children:[e.jsx("label",{className:"small-label",title:g&&g.join(", "),children:e.jsx("b",{children:t})}),e.jsx("h2",{className:"post-title","aria-description":o.replace("Quiz: ",""),children:r}),T?e.jsxs("div",{className:"quiz-status",children:[e.jsx("span",{className:"status-icon",children:"âœ…Â "}),e.jsx("span",{className:"status-text",children:"Â Completed"})]}):e.jsxs("p",{title:"in "+(z??0)+" tries",children:[h??0," correct / ",C," questions"]})]})})},V=({quizList:i,subCategoryList:a,subCategoryCounts:d})=>{const[l,n]=c.useState(i),[s,u]=c.useState([]),o=t=>{console.log("Filter changed!",t,s,l.length),u(t)};return l.forEach(t=>{t.data.tags=t.data.tags.map(r=>r.toLowerCase())}),c.useEffect(()=>{s.length>0?n(l.filter(({data:{tags:t}})=>s.some(r=>t.includes(r)))):n(i)},[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"filter-toolbar",children:e.jsx(B,{onOpenChange:console.log,onSearchChange:o})}),e.jsx("div",{className:"quiz-list",children:l.filter(({data:{unlisted:t,hidden:r}})=>r!==!0).map((t,r)=>e.jsx(L,{article:t,subCategoryCounts:d,subCategoryList:a},r))})]})};export{V as QuizGrid};
