function Os(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Os(Object(n),!0).forEach(function(r){A(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ls(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function Cn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(l){Ls(o,r,i,s,a,"next",l)}function a(l){Ls(o,r,i,s,a,"throw",l)}s(void 0)})}}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ss(t,e){if(t==null)return{};var n,r,i=function(s,a){if(s==null)return{};var l,c,u={},d=Object.keys(s);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=s[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Ps,fd=["type"],md=Object.defineProperty,q=(t,e,n)=>((r,i,o)=>i in r?md(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o)(t,typeof e!="symbol"?e+"":e,n),_d=Object.defineProperty,Ds=(t,e,n)=>((r,i,o)=>i in r?_d(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o)(t,typeof e!="symbol"?e+"":e,n),Se=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(Se||{}),Bs={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},qs={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ec=()=>{try{return!!globalThis.Zone}catch{return!1}},ur={};function as(t){if(ur[t])return ur[t];var e=globalThis[t],n=e.prototype,r=t in Bs?Bs[t]:void 0,i=!!(r&&r.every(u=>{var d,p;return!!((p=(d=Object.getOwnPropertyDescriptor(n,u))==null?void 0:d.get)!=null&&p.toString().includes("[native code]"))})),o=t in qs?qs[t]:void 0,s=!!(o&&o.every(u=>{var d;return typeof n[u]=="function"&&((d=n[u])==null?void 0:d.toString().includes("[native code]"))}));if(i&&s&&!ec())return ur[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var c=l[t].prototype;return document.body.removeChild(a),c?ur[t]=c:e.prototype}catch{return e.prototype}}var Ti={};function bt(t,e,n){var r,i="".concat(t,".").concat(String(n));if(Ti[i])return Ti[i].call(e);var o=as(t),s=(r=Object.getOwnPropertyDescriptor(o,n))==null?void 0:r.get;return s?(Ti[i]=s,s.call(e)):e[n]}var Mi={};function Hs(t,e,n){var r="".concat(t,".").concat(String(n));if(Mi[r])return Mi[r].bind(e);var i=as(t)[n];return typeof i!="function"?e[n]:(Mi[r]=i,i.bind(e))}var Te={childNodes:function(t){return bt("Node",t,"childNodes")},parentNode:function(t){return bt("Node",t,"parentNode")},parentElement:function(t){return bt("Node",t,"parentElement")},textContent:function(t){return bt("Node",t,"textContent")},contains:function(t,e){return Hs("Node",t,"contains")(e)},getRootNode:function(t){return Hs("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?bt("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?bt("Element",t,"shadowRoot"):null},querySelector:function(t,e){return bt("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return bt("Element",t,"querySelectorAll")(e)},mutationObserver:function(){return as("MutationObserver").constructor}};function tc(t){return t.nodeType===t.ELEMENT_NODE}function qn(t){var e=t&&"host"in t&&"mode"in t&&Te.host(t)||null;return!!(e&&"shadowRoot"in e&&Te.shadowRoot(e)===t)}function Hn(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function Fr(t){try{var e=t.rules||t.cssRules;if(!e)return null;var n=Array.from(e,i=>nc(i,t.href)).join("");return(r=n).includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),r}catch{return null}var r}function nc(t,e){if(function(o){return"styleSheet"in o}(t)){var n;try{n=Fr(t.styleSheet)||function(o){var{cssText:s}=o;if(s.split('"').length<3)return s;var a=["@import","url(".concat(JSON.stringify(o.href),")")];return o.layerName===""?a.push("layer"):o.layerName&&a.push("layer(".concat(o.layerName,")")),o.supportsText&&a.push("supports(".concat(o.supportsText,")")),o.media.length&&a.push(o.media.mediaText),a.join(" ")+";"}(t)}catch{n=t.cssText}return t.styleSheet.href?Zr(n,t.styleSheet.href):n}var r,i=t.cssText;return function(o){return"selectorText"in o}(t)&&t.selectorText.includes(":")&&(r=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,i=i.replace(r,"$1\\$2")),e?Zr(i,e):i}function $s(t,e){return Array.from(t.styleSheets).find(n=>n.href===e)}let rc=class{constructor(){Ds(this,"idNodeMap",new Map),Ds(this,"nodeMetaMap",new WeakMap)}getId(t){var e;if(!t)return-1;var n=(e=this.getMeta(t))==null?void 0:e.id;return n??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){var e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){var n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){var n=this.getNode(t);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(e,r)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function ls(t){var{element:e,maskInputOptions:n,tagName:r,type:i,value:o,maskInputFn:s}=t,a=o||"",l=i&&Vt(i);return(n[r.toLowerCase()]||l&&n[l])&&(a=s?s(a,e):"*".repeat(a.length)),a}function Vt(t){return t.toLowerCase()}var Ws="__rrweb_original__";function cs(t){var e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Vt(e):null}function Vs(t,e){var n,r;try{r=new URL(t,e??window.location.href)}catch{return null}var i=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(n=i?.[1])!==null&&n!==void 0?n:null}var yd=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,bd=/^(?:[a-z+]+:)?\/\//i,wd=/^www\..*/i,Sd=/^(data:)([^,]*),(.*)/i;function Zr(t,e){return(t||"").replace(yd,(n,r,i,o,s,a)=>{var l,c=i||s||a,u=r||o||"";if(!c)return n;if(bd.test(c)||wd.test(c)||Sd.test(c))return"url(".concat(u).concat(c).concat(u,")");if(c[0]==="/")return"url(".concat(u).concat((l=e,(l.indexOf("//")>-1?l.split("/").slice(0,3).join("/"):l.split("/")[0]).split("?")[0]+c)).concat(u,")");var d=e.split("/"),p=c.split("/");for(var h of(d.pop(),p))h!=="."&&(h===".."?d.pop():d.push(h));return"url(".concat(u).concat(d.join("/")).concat(u,")")})}var Ut,Zs,Cd=1,Id=new RegExp("[^a-z0-9-_:]"),Xn=-2;function ic(){return Cd++}var kd=/^[^ \t\n\r\u000c]+/,Ed=/^[, \t\n\r\u000c]+/,Gs=new WeakMap;function En(t,e){return e&&e.trim()!==""?us(t,e):e}function xd(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function us(t,e){var n=Gs.get(t);if(n||(n=t.createElement("a"),Gs.set(t,n)),e){if(e.startsWith("blob:")||e.startsWith("data:"))return e}else e="";return n.setAttribute("href",e),n.href}function oc(t,e,n,r){return r&&(n==="src"||n==="href"&&(e!=="use"||r[0]!=="#")||n==="xlink:href"&&r[0]!=="#"?En(t,r):n!=="background"||e!=="table"&&e!=="td"&&e!=="th"?n==="srcset"?function(i,o){if(o.trim()==="")return o;var s=0;function a(h){var g,v=h.exec(o.substring(s));return v?(g=v[0],s+=g.length,g):""}for(var l=[];a(Ed),!(s>=o.length);){var c=a(kd);if(c.slice(-1)===",")c=En(i,c.substring(0,c.length-1)),l.push(c);else{var u="";c=En(i,c);for(var d=!1;;){var p=o.charAt(s);if(p===""){l.push((c+u).trim());break}if(d)p===")"&&(d=!1);else{if(p===","){s+=1,l.push((c+u).trim());break}p==="("&&(d=!0)}u+=p,s+=1}}}return l.join(", ")}(t,r):n==="style"?Zr(r,us(t)):e==="object"&&n==="data"?En(t,r):r:En(t,r))}function sc(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function Gr(t,e,n){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!n&&Gr(Te.parentNode(t),e,n);for(var r=t.classList.length;r--;){var i=t.classList[r];if(e.test(i))return!0}return!!n&&Gr(Te.parentNode(t),e,n)}function ac(t,e,n,r){var i;if(tc(t)){if(i=t,!Te.childNodes(i).length)return!1}else{if(Te.parentElement(t)===null)return!1;i=Te.parentElement(t)}try{if(typeof e=="string"){if(r){if(i.closest(".".concat(e)))return!0}else if(i.classList.contains(e))return!0}else if(Gr(i,e,r))return!0;if(n){if(r){if(i.closest(n))return!0}else if(i.matches(n))return!0}}catch{}return!1}function Td(t,e){var{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:s,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:p,recordCanvas:h,keepIframeSrcFn:g,newlyAddedElement:v=!1}=e,b=function(_,f){if(f.hasNode(_)){var m=f.getId(_);return m===1?void 0:m}}(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:Se.Document,childNodes:[],compatMode:t.compatMode}:{type:Se.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:Se.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:b};case t.ELEMENT_NODE:return function(_,f){for(var m,{doc:w,blockClass:S,blockSelector:I,inlineStylesheet:E,maskInputOptions:k={},maskInputFn:x,dataURLOptions:T={},inlineImages:D,recordCanvas:M,keepIframeSrcFn:W,newlyAddedElement:$=!1,rootId:P}=f,V=function(K,Be,Xe){try{if(typeof Be=="string"){if(K.classList.contains(Be))return!0}else for(var Je=K.classList.length;Je--;){var at=K.classList[Je];if(Be.test(at))return!0}if(Xe)return K.matches(Xe)}catch{}return!1}(_,S,I),L=function(K){if(K instanceof HTMLFormElement)return"form";var Be=Vt(K.tagName);return Id.test(Be)?"div":Be}(_),O={},N=_.attributes.length,Y=0;Y<N;Y++){var j=_.attributes[Y];sc(L,j.name,j.value)||(O[j.name]=oc(w,L,Vt(j.name),j.value))}if(L==="link"&&E){var R=_.href,H=$s(w,R);!H&&R.includes(".css")&&(H=$s(w,window.location.origin+"/"+R.replace(window.location.href,"")));var te=null;H&&(te=Fr(H)),te&&(delete O.rel,delete O.href,O._cssText=te)}if(L==="style"&&_.sheet&&!(_.innerText||Te.textContent(_)||"").trim().length){var ae=Fr(_.sheet);ae&&(O._cssText=ae)}if(L==="input"||L==="textarea"||L==="select"){var X=_.value,le=_.checked;O.type!=="radio"&&O.type!=="checkbox"&&O.type!=="submit"&&O.type!=="button"&&X?O.value=ls({element:_,type:cs(_),tagName:L,value:X,maskInputOptions:k,maskInputFn:x}):le&&(O.checked=le)}if(L==="option"&&(_.selected&&!k.select?O.selected=!0:delete O.selected),L==="dialog"&&_.open)try{O.rr_open_mode=_.matches("dialog:modal")?"modal":"non-modal"}catch{O.rr_open_mode="modal",O.ph_rr_could_not_detect_modal=!0}if(L==="canvas"&&M){if(_.__context==="2d")(function(K){var Be=K.getContext("2d");if(!Be)return!0;for(var Xe=0;Xe<K.width;Xe+=50)for(var Je=0;Je<K.height;Je+=50){var at=Be.getImageData,cr=Ws in at?at[Ws]:at;if(new Uint32Array(cr.call(Be,Xe,Je,Math.min(50,K.width-Xe),Math.min(50,K.height-Je)).data.buffer).some(Ei=>Ei!==0))return!1}return!0})(_)||(O.rr_dataURL=_.toDataURL(T.type,T.quality));else if(!("__context"in _)){var ce=_.toDataURL(T.type,T.quality),De=w.createElement("canvas");De.width=_.width,De.height=_.height,ce!==De.toDataURL(T.type,T.quality)&&(O.rr_dataURL=ce)}}if(L==="img"&&D){Ut||(Ut=w.createElement("canvas"),Zs=Ut.getContext("2d"));var se=_,st=se.currentSrc||se.getAttribute("src")||"<unknown-src>",yt=se.crossOrigin,Ve=()=>{se.removeEventListener("load",Ve);try{Ut.width=se.naturalWidth,Ut.height=se.naturalHeight,Zs.drawImage(se,0,0),O.rr_dataURL=Ut.toDataURL(T.type,T.quality)}catch(K){if(se.crossOrigin!=="anonymous")return se.crossOrigin="anonymous",void(se.complete&&se.naturalWidth!==0?Ve():se.addEventListener("load",Ve));console.warn("Cannot inline img src=".concat(st,"! Error: ").concat(K))}se.crossOrigin==="anonymous"&&(yt?O.crossOrigin=yt:se.removeAttribute("crossorigin"))};se.complete&&se.naturalWidth!==0?Ve():se.addEventListener("load",Ve)}if(L==="audio"||L==="video"){var J=O;J.rr_mediaState=_.paused?"paused":"played",J.rr_mediaCurrentTime=_.currentTime,J.rr_mediaPlaybackRate=_.playbackRate,J.rr_mediaMuted=_.muted,J.rr_mediaLoop=_.loop,J.rr_mediaVolume=_.volume}if($||(_.scrollLeft&&(O.rr_scrollLeft=_.scrollLeft),_.scrollTop&&(O.rr_scrollTop=_.scrollTop)),V){var{width:Ie,height:z}=_.getBoundingClientRect();O={class:O.class,rr_width:"".concat(Ie,"px"),rr_height:"".concat(z,"px")}}L!=="iframe"||W(O.src)||(_.contentDocument||(O.rr_src=O.src),delete O.src);try{customElements.get(L)&&(m=!0)}catch{}return{type:Se.Element,tagName:L,attributes:O,childNodes:[],isSVG:xd(_)||void 0,needBlock:V,rootId:P,isCustom:m}}(t,{doc:n,blockClass:i,blockSelector:o,inlineStylesheet:a,maskInputOptions:l,maskInputFn:u,dataURLOptions:d,inlineImages:p,recordCanvas:h,keepIframeSrcFn:g,newlyAddedElement:v,rootId:b});case t.TEXT_NODE:return function(_,f){var m,{needsMask:w,maskTextFn:S,rootId:I}=f,E=Te.parentNode(_),k=E&&E.tagName,x=Te.textContent(_),T=k==="STYLE"||void 0,D=k==="SCRIPT"||void 0;if(T&&x){try{_.nextSibling||_.previousSibling||(m=E.sheet)!=null&&m.cssRules&&(x=Fr(E.sheet))}catch(M){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(M),_)}x=Zr(x,us(f.doc))}return D&&(x="SCRIPT_PLACEHOLDER"),!T&&!D&&x&&w&&(x=S?S(x,Te.parentElement(_)):x.replace(/[\S]/g,"*")),{type:Se.Text,textContent:x||"",isStyle:T,rootId:I}}(t,{doc:n,needsMask:s,maskTextFn:c,rootId:b});case t.CDATA_SECTION_NODE:return{type:Se.CDATA,textContent:"",rootId:b};case t.COMMENT_NODE:return{type:Se.Comment,textContent:Te.textContent(t)||"",rootId:b};default:return!1}}function he(t){return t==null?"":t.toLowerCase()}function tn(t,e){var{doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:c=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:g={},inlineImages:v=!1,recordCanvas:b=!1,onSerialize:_,onIframeLoad:f,iframeLoadTimeout:m=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:S=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:E=!1}=e,{needsMask:k}=e,{preserveWhiteSpace:x=!0}=e;k||(k=ac(t,s,a,k===void 0));var T,D=Td(t,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:k,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,dataURLOptions:g,inlineImages:v,recordCanvas:b,keepIframeSrcFn:I,newlyAddedElement:E});if(!D)return console.warn(t,"not serialized"),null;T=r.hasNode(t)?r.getId(t):!function(R,H){return!!(H.comment&&R.type===Se.Comment||R.type===Se.Element&&(H.script&&(R.tagName==="script"||R.tagName==="link"&&(R.attributes.rel==="preload"||R.attributes.rel==="modulepreload")&&R.attributes.as==="script"||R.tagName==="link"&&R.attributes.rel==="prefetch"&&typeof R.attributes.href=="string"&&Vs(R.attributes.href)==="js")||H.headFavicon&&(R.tagName==="link"&&R.attributes.rel==="shortcut icon"||R.tagName==="meta"&&(he(R.attributes.name).match(/^msapplication-tile(image|color)$/)||he(R.attributes.name)==="application-name"||he(R.attributes.rel)==="icon"||he(R.attributes.rel)==="apple-touch-icon"||he(R.attributes.rel)==="shortcut icon"))||R.tagName==="meta"&&(H.headMetaDescKeywords&&he(R.attributes.name).match(/^description|keywords$/)||H.headMetaSocial&&(he(R.attributes.property).match(/^(og|twitter|fb):/)||he(R.attributes.name).match(/^(og|twitter):/)||he(R.attributes.name)==="pinterest")||H.headMetaRobots&&(he(R.attributes.name)==="robots"||he(R.attributes.name)==="googlebot"||he(R.attributes.name)==="bingbot")||H.headMetaHttpEquiv&&R.attributes["http-equiv"]!==void 0||H.headMetaAuthorship&&(he(R.attributes.name)==="author"||he(R.attributes.name)==="generator"||he(R.attributes.name)==="framework"||he(R.attributes.name)==="publisher"||he(R.attributes.name)==="progid"||he(R.attributes.property).match(/^article:/)||he(R.attributes.property).match(/^product:/))||H.headMetaVerification&&(he(R.attributes.name)==="google-site-verification"||he(R.attributes.name)==="yandex-verification"||he(R.attributes.name)==="csrf-token"||he(R.attributes.name)==="p:domain_verify"||he(R.attributes.name)==="verify-v1"||he(R.attributes.name)==="verification"||he(R.attributes.name)==="shopify-checkout-api-token"))))}(D,h)&&(x||D.type!==Se.Text||D.isStyle||D.textContent.replace(/^\s+|\s+$/gm,"").length)?ic():Xn;var M=Object.assign(D,{id:T});if(r.add(t,M),T===Xn)return null;_&&_(t);var W=!l;if(M.type===Se.Element){W=W&&!M.needBlock,delete M.needBlock;var $=Te.shadowRoot(t);$&&Hn($)&&(M.isShadowHost=!0)}if((M.type===Se.Document||M.type===Se.Element)&&W){h.headWhitespace&&M.type===Se.Element&&M.tagName==="head"&&(x=!1);var P={doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:k,maskTextClass:s,maskTextSelector:a,skipChild:l,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:g,inlineImages:v,recordCanvas:b,preserveWhiteSpace:x,onSerialize:_,onIframeLoad:f,iframeLoadTimeout:m,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:I};if(!(M.type===Se.Element&&M.tagName==="textarea"&&M.attributes.value!==void 0))for(var V of Array.from(Te.childNodes(t))){var L=tn(V,P);L&&M.childNodes.push(L)}var O=null;if(tc(t)&&(O=Te.shadowRoot(t)))for(var N of Array.from(Te.childNodes(O))){var Y=tn(N,P);Y&&(Hn(O)&&(Y.isShadow=!0),M.childNodes.push(Y))}}var j=Te.parentNode(t);return j&&qn(j)&&Hn(j)&&(M.isShadow=!0),M.type===Se.Element&&M.tagName==="iframe"&&function(R,H,te){var ae=R.contentWindow;if(ae){var X,le=!1;try{X=ae.document.readyState}catch{return}if(X==="complete"){var ce="about:blank";if(ae.location.href!==ce||R.src===ce||R.src==="")return setTimeout(H,0),R.addEventListener("load",H);R.addEventListener("load",H)}else{var De=setTimeout(()=>{le||(H(),le=!0)},te);R.addEventListener("load",()=>{clearTimeout(De),le=!0,H()})}}}(t,()=>{var R=t.contentDocument;if(R&&f){var H=tn(R,{doc:R,mirror:r,blockClass:i,blockSelector:o,needsMask:k,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:g,inlineImages:v,recordCanvas:b,preserveWhiteSpace:x,onSerialize:_,onIframeLoad:f,iframeLoadTimeout:m,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:I});H&&f(t,H)}},m),M.type===Se.Element&&M.tagName==="link"&&typeof M.attributes.rel=="string"&&(M.attributes.rel==="stylesheet"||M.attributes.rel==="preload"&&typeof M.attributes.href=="string"&&Vs(M.attributes.href)==="css")&&function(R,H,te){var ae,X=!1;try{ae=R.sheet}catch{return}if(!ae){var le=setTimeout(()=>{X||(H(),X=!0)},te);R.addEventListener("load",()=>{clearTimeout(le),X=!0,H()})}}(t,()=>{if(w){var R=tn(t,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:k,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:g,inlineImages:v,recordCanvas:b,preserveWhiteSpace:x,onSerialize:_,onIframeLoad:f,iframeLoadTimeout:m,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:I});R&&w(t,R)}},S),M}let Md=class lc{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){for(var e=[],n=this.firstChild;n;)e.push(n),n=n.nextSibling;return e}contains(e){if(!(e instanceof lc)||e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,n){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var Us={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},js={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},dr={};function ds(t){if(dr[t])return dr[t];var e=globalThis[t],n=e.prototype,r=t in Us?Us[t]:void 0,i=!!(r&&r.every(u=>{var d,p;return!!((p=(d=Object.getOwnPropertyDescriptor(n,u))==null?void 0:d.get)!=null&&p.toString().includes("[native code]"))})),o=t in js?js[t]:void 0,s=!!(o&&o.every(u=>{var d;return typeof n[u]=="function"&&((d=n[u])==null?void 0:d.toString().includes("[native code]"))}));if(i&&s&&!ec())return dr[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var c=l[t].prototype;return document.body.removeChild(a),c?dr[t]=c:n}catch{return n}}var Ri={};function wt(t,e,n){var r,i="".concat(t,".").concat(String(n));if(Ri[i])return Ri[i].call(e);var o=ds(t),s=(r=Object.getOwnPropertyDescriptor(o,n))==null?void 0:r.get;return s?(Ri[i]=s,s.call(e)):e[n]}var Ai={};function zs(t,e,n){var r="".concat(t,".").concat(String(n));if(Ai[r])return Ai[r].bind(e);var i=ds(t)[n];return typeof i!="function"?e[n]:(Ai[r]=i,i.bind(e))}function cc(){return ds("MutationObserver").constructor}var ne={childNodes:function(t){return wt("Node",t,"childNodes")},parentNode:function(t){return wt("Node",t,"parentNode")},parentElement:function(t){return wt("Node",t,"parentElement")},textContent:function(t){return wt("Node",t,"textContent")},contains:function(t,e){return zs("Node",t,"contains")(e)},getRootNode:function(t){return zs("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?wt("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?wt("Element",t,"shadowRoot"):null},querySelector:function(t,e){return wt("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return wt("Element",t,"querySelectorAll")(e)},mutationObserver:cc};function Oe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}var Xt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Ys={map:{},getId:()=>(console.error(Xt),-1),getNode:()=>(console.error(Xt),null),removeNodeFromMap(){console.error(Xt)},has:()=>(console.error(Xt),!1),reset(){console.error(Xt)}};function An(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=null,i=0;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=Date.now();i||n.leading!==!1||(i=l);var c=e-(l-i),u=this;c<=0||c>e?(r&&(clearTimeout(r),r=null),i=l,t.apply(u,s)):r||n.trailing===!1||(r=setTimeout(()=>{i=n.leading===!1?0:Date.now(),r=null,t.apply(u,s)},c))}}function mi(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:window,o=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(s){setTimeout(()=>{n.set.call(this,s)},0),o&&o.set&&o.set.call(this,s)}}),()=>mi(t,e,o||{},!0)}function fn(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Ys=new Proxy(Ys,{get:(t,e,n)=>(e==="map"&&console.error(Xt),Reflect.get(t,e,n))}));var Ur=Date.now;function uc(t){var e,n,r,i,o=t.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:o.documentElement.scrollLeft||o?.body&&((e=ne.parentElement(o.body))==null?void 0:e.scrollLeft)||((n=o?.body)==null?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:o?.documentElement.scrollTop||o?.body&&((r=ne.parentElement(o.body))==null?void 0:r.scrollTop)||((i=o?.body)==null?void 0:i.scrollTop)||0}}function dc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function hc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pc(t){return t?t.nodeType===t.ELEMENT_NODE?t:ne.parentElement(t):null}function Pe(t,e,n,r){if(!t)return!1;var i=pc(t);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||r&&i.closest("."+e)!==null)return!0}else if(Gr(i,e,r))return!0}catch{}return!!(n&&(i.matches(n)||r&&i.closest(n)!==null))}function Ni(t,e,n){return!(t.tagName!=="TITLE"||!n.headTitleMutations)||e.getId(t)===Xn}function gc(t,e){if(qn(t))return!1;var n=e.getId(t);if(!e.has(n))return!0;var r=ne.parentNode(t);return(!r||r.nodeType!==t.DOCUMENT_NODE)&&(!r||gc(r,e))}function uo(t){return!!t.changedTouches}function vc(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function fc(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function ho(t){return!!t&&(t instanceof Md&&"shadowRoot"in t?!!t.shadowRoot:!!ne.shadowRoot(t))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Ur=()=>new Date().getTime());let Rd=class{constructor(){q(this,"id",1),q(this,"styleIDMap",new WeakMap),q(this,"idStyleMap",new Map)}getId(t){var e;return(e=this.styleIDMap.get(t))!==null&&e!==void 0?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){return this.has(t)?this.getId(t):(n=e===void 0?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n);var n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function mc(t){var e,n=null;return"getRootNode"in t&&((e=ne.getRootNode(t))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ne.host(ne.getRootNode(t))&&(n=ne.host(ne.getRootNode(t))),n}function Ad(t){var e=t.ownerDocument;if(!e)return!1;var n=function(r){for(var i,o=r;i=mc(o);)o=i;return o}(t);return ne.contains(e,n)}function _c(t){var e=t.ownerDocument;return!!e&&(ne.contains(e,t)||Ad(t))}var oe=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(oe||{}),re=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(re||{}),qe=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(qe||{}),ct=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(ct||{}),Jt=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Jt||{}),Kt=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Kt||{});function Xs(t){return"__ln"in t}class Nd{constructor(){q(this,"length",0),q(this,"head",null),q(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");for(var n=this.head,r=0;r<e;r++)n=n?.next||null;return n}addNode(e){var n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&Xs(e.previousSibling)){var r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&Xs(e.nextSibling)&&e.nextSibling.__ln.previous){var i=e.nextSibling.__ln.previous;n.previous=i,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,i&&(i.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){var n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}var $n,Js=(t,e)=>"".concat(t,"@").concat(e);class Fd{constructor(){q(this,"frozen",!1),q(this,"locked",!1),q(this,"texts",[]),q(this,"attributes",[]),q(this,"attributeMap",new WeakMap),q(this,"removes",[]),q(this,"mapRemoves",[]),q(this,"movedMap",{}),q(this,"addedSet",new Set),q(this,"movedSet",new Set),q(this,"droppedSet",new Set),q(this,"mutationCb"),q(this,"blockClass"),q(this,"blockSelector"),q(this,"maskTextClass"),q(this,"maskTextSelector"),q(this,"inlineStylesheet"),q(this,"maskInputOptions"),q(this,"maskTextFn"),q(this,"maskInputFn"),q(this,"keepIframeSrcFn"),q(this,"recordCanvas"),q(this,"inlineImages"),q(this,"slimDOMOptions"),q(this,"dataURLOptions"),q(this,"doc"),q(this,"mirror"),q(this,"iframeManager"),q(this,"stylesheetManager"),q(this,"shadowDomManager"),q(this,"canvasManager"),q(this,"processedNodeManager"),q(this,"unattachedDoc"),q(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),q(this,"emit",()=>{if(!this.frozen&&!this.locked){for(var e=[],n=new Set,r=new Nd,i=m=>{for(var w=m,S=Xn;S===Xn;)S=(w=w&&w.nextSibling)&&this.mirror.getId(w);return S},o=m=>{var w=ne.parentNode(m);if(w&&_c(m)&&w.tagName!=="TEXTAREA"){var S=qn(w)?this.mirror.getId(mc(m)):this.mirror.getId(w),I=i(m);if(S===-1||I===-1)return r.addNode(m);var E=tn(m,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:k=>{vc(k,this.mirror)&&this.iframeManager.addIframe(k),fc(k,this.mirror)&&this.stylesheetManager.trackLinkElement(k),ho(m)&&this.shadowDomManager.addShadowRoot(ne.shadowRoot(m),this.doc)},onIframeLoad:(k,x)=>{this.iframeManager.attachIframe(k,x),this.shadowDomManager.observeAttachShadow(k)},onStylesheetLoad:(k,x)=>{this.stylesheetManager.attachLinkElement(k,x)}});E&&(e.push({parentId:S,nextId:I,node:E}),n.add(E.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var s of this.movedSet)Ks(this.removes,s,this.mirror)&&!this.movedSet.has(ne.parentNode(s))||o(s);for(var a of this.addedSet)Qs(this.droppedSet,a)||Ks(this.removes,a,this.mirror)?Qs(this.movedSet,a)?o(a):this.droppedSet.add(a):o(a);for(var l=null;r.length;){var c=null;if(l){var u=this.mirror.getId(ne.parentNode(l.value)),d=i(l.value);u!==-1&&d!==-1&&(c=l)}if(!c)for(var p=r.tail;p;){var h=p;if(p=p.previous,h){var g=this.mirror.getId(ne.parentNode(h.value));if(i(h.value)===-1)continue;if(g!==-1){c=h;break}var v=h.value,b=ne.parentNode(v);if(b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var _=ne.host(b);if(this.mirror.getId(_)!==-1){c=h;break}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}l=c.previous,r.removeNode(c.value),o(c.value)}var f={texts:this.texts.map(m=>{var w=m.node,S=ne.parentNode(w);return S&&S.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(S),{id:this.mirror.getId(w),value:m.value}}).filter(m=>!n.has(m.id)).filter(m=>this.mirror.has(m.id)),attributes:this.attributes.map(m=>{var{attributes:w}=m;if(typeof w.style=="string"){var S=JSON.stringify(m.styleDiff),I=JSON.stringify(m._unchangedStyles);S.length<w.style.length&&(S+I).split("var(").length===w.style.split("var(").length&&(w.style=m.styleDiff)}return{id:this.mirror.getId(m.node),attributes:w}}).filter(m=>!n.has(m.id)).filter(m=>this.mirror.has(m.id)),removes:this.removes,adds:e};(f.texts.length||f.attributes.length||f.removes.length||f.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(f))}}),q(this,"genTextAreaValueMutation",e=>{var n=this.attributeMap.get(e);n||(n={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(n),this.attributeMap.set(e,n)),n.attributes.value=Array.from(ne.childNodes(e),r=>ne.textContent(r)||"").join("")}),q(this,"processMutation",e=>{if(!Ni(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":var n=ne.textContent(e.target);Pe(e.target,this.blockClass,this.blockSelector,!1)||n===e.oldValue||this.texts.push({value:ac(e.target,this.maskTextClass,this.maskTextSelector,!0)&&n?this.maskTextFn?this.maskTextFn(n,pc(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break;case"attributes":var r=e.target,i=e.attributeName,o=e.target.getAttribute(i);if(i==="value"){var s=cs(r);o=ls({element:r,maskInputOptions:this.maskInputOptions,tagName:r.tagName,type:s,value:o,maskInputFn:this.maskInputFn})}if(Pe(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;var a=this.attributeMap.get(e.target);if(r.tagName==="IFRAME"&&i==="src"&&!this.keepIframeSrcFn(o)){if(r.contentDocument)return;i="rr_src"}if(a||(a={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a),this.attributeMap.set(e.target,a)),i==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!sc(r.tagName,i))if(a.attributes[i]=oc(this.doc,Vt(r.tagName),Vt(i),o),i==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}var l=this.unattachedDoc.createElement("span");for(var c of(e.oldValue&&l.setAttribute("style",e.oldValue),Array.from(r.style))){var u=r.style.getPropertyValue(c),d=r.style.getPropertyPriority(c);u!==l.style.getPropertyValue(c)||d!==l.style.getPropertyPriority(c)?a.styleDiff[c]=d===""?u:[u,d]:a._unchangedStyles[c]=[u,d]}for(var p of Array.from(l.style))r.style.getPropertyValue(p)===""&&(a.styleDiff[p]=!1)}else i==="open"&&r.tagName==="DIALOG"&&(r.matches("dialog:modal")?a.attributes.rr_open_mode="modal":a.attributes.rr_open_mode="non-modal");break;case"childList":if(Pe(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA")return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach(h=>this.genAdds(h,e.target)),e.removedNodes.forEach(h=>{var g=this.mirror.getId(h),v=qn(e.target)?this.mirror.getId(ne.host(e.target)):this.mirror.getId(e.target);Pe(e.target,this.blockClass,this.blockSelector,!1)||Ni(h,this.mirror,this.slimDOMOptions)||!function(b,_){return _.getId(b)!==-1}(h,this.mirror)||(this.addedSet.has(h)?(po(this.addedSet,h),this.droppedSet.add(h)):this.addedSet.has(e.target)&&g===-1||gc(e.target,this.mirror)||(this.movedSet.has(h)&&this.movedMap[Js(g,v)]?po(this.movedSet,h):this.removes.push({parentId:v,id:g,isShadow:!(!qn(e.target)||!Hn(e.target))||void 0})),this.mapRemoves.push(h))})}}),q(this,"genAdds",(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Ni(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);var r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Js(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Pe(e,this.blockClass,this.blockSelector,!1)||(ne.childNodes(e).forEach(i=>this.genAdds(i)),ho(e)&&ne.childNodes(ne.shadowRoot(e)).forEach(i=>{this.processedNodeManager.add(i,this),this.genAdds(i,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function po(t,e){t.delete(e),ne.childNodes(e).forEach(n=>po(t,n))}function Ks(t,e,n){return t.length!==0&&function(r,i,o){for(var s=ne.parentNode(i),a=function(){var c=o.getId(s);if(r.some(u=>u.id===c))return{v:!0};s=ne.parentNode(s)};s;){var l=a();if(typeof l=="object")return l.v}return!1}(t,e,n)}function Qs(t,e){return t.size!==0&&yc(t,e)}function yc(t,e){var n=ne.parentNode(e);return!!n&&(!!t.has(n)||yc(t,n))}var ie=t=>$n?function(){try{return t(...arguments)}catch(e){if($n&&$n(e)===!0)return;throw e}}:t,Ht=[];function Wn(t){try{if("composedPath"in t){var e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function bc(t,e){var n=new Fd;Ht.push(n),n.init(t);var r=new(cc())(ie(n.processMutations.bind(n)));return r.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function Od(t){var{mouseInteractionCb:e,doc:n,mirror:r,blockClass:i,blockSelector:o,sampling:s}=t;if(s.mouseInteraction===!1)return()=>{};var a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,l=[],c=null;return Object.keys(qe).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&a[u]!==!1).forEach(u=>{var d=Vt(u),p=(h=>g=>{var v=Wn(g);if(!Pe(v,i,o,!0)){var b=null,_=h;if("pointerType"in g){switch(g.pointerType){case"mouse":b=ct.Mouse;break;case"touch":b=ct.Touch;break;case"pen":b=ct.Pen}b===ct.Touch?qe[h]===qe.MouseDown?_="TouchStart":qe[h]===qe.MouseUp&&(_="TouchEnd"):ct.Pen}else uo(g)&&(b=ct.Touch);b!==null?(c=b,(_.startsWith("Touch")&&b===ct.Touch||_.startsWith("Mouse")&&b===ct.Mouse)&&(b=null)):qe[h]===qe.Click&&(b=c,c=null);var f=uo(g)?g.changedTouches[0]:g;if(f){var m=r.getId(v),{clientX:w,clientY:S}=f;ie(e)(C({type:qe[_],id:m,x:w,y:S},b!==null&&{pointerType:b}))}}})(u);if(window.PointerEvent)switch(qe[u]){case qe.MouseDown:case qe.MouseUp:d=d.replace("mouse","pointer");break;case qe.TouchStart:case qe.TouchEnd:return}l.push(Oe(d,p,n))}),ie(()=>{l.forEach(u=>u())})}function wc(t){var{scrollCb:e,doc:n,mirror:r,blockClass:i,blockSelector:o,sampling:s}=t;return Oe("scroll",ie(An(ie(a=>{var l=Wn(a);if(l&&!Pe(l,i,o,!0)){var c=r.getId(l);if(l===n&&n.defaultView){var u=uc(n.defaultView);e({id:c,x:u.left,y:u.top})}else e({id:c,x:l.scrollLeft,y:l.scrollTop})}}),s.scroll||100)),n)}var Ld=["INPUT","TEXTAREA","SELECT"],ea=new WeakMap;function hr(t){return function(e,n){if(pr("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||pr("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||pr("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||pr("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var r=Array.from(e.parentRule.cssRules).indexOf(e);n.unshift(r)}else if(e.parentStyleSheet){var i=Array.from(e.parentStyleSheet.cssRules).indexOf(e);n.unshift(i)}return n}(t,[])}function St(t,e,n){var r,i;return t?(t.ownerNode?r=e.getId(t.ownerNode):i=n.getId(t),{styleId:i,id:r}):{}}function Sc(t,e){var n,r,i,{mirror:o,stylesheetManager:s}=t,a=null;a=e.nodeName==="#document"?o.getId(e):o.getId(ne.host(e));var l=e.nodeName==="#document"?(n=e.defaultView)==null?void 0:n.Document:(i=(r=e.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.ShadowRoot,c=l?.prototype?Object.getOwnPropertyDescriptor(l?.prototype,"adoptedStyleSheets"):void 0;return a!==null&&a!==-1&&l&&c?(Object.defineProperty(e,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var u;return(u=c.get)==null?void 0:u.call(this)},set(u){var d,p=(d=c.set)==null?void 0:d.call(this,u);if(a!==null&&a!==-1)try{s.adoptStyleSheets(u,a)}catch{}return p}}),ie(()=>{Object.defineProperty(e,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})})):()=>{}}function Pd(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.doc.defaultView;if(!r)return()=>{};(function(f,m){var{mutationCb:w,mousemoveCb:S,mouseInteractionCb:I,scrollCb:E,viewportResizeCb:k,inputCb:x,mediaInteractionCb:T,styleSheetRuleCb:D,styleDeclarationCb:M,canvasMutationCb:W,fontCb:$,selectionCb:P,customElementCb:V}=f;f.mutationCb=function(){m.mutation&&m.mutation(...arguments),w(...arguments)},f.mousemoveCb=function(){m.mousemove&&m.mousemove(...arguments),S(...arguments)},f.mouseInteractionCb=function(){m.mouseInteraction&&m.mouseInteraction(...arguments),I(...arguments)},f.scrollCb=function(){m.scroll&&m.scroll(...arguments),E(...arguments)},f.viewportResizeCb=function(){m.viewportResize&&m.viewportResize(...arguments),k(...arguments)},f.inputCb=function(){m.input&&m.input(...arguments),x(...arguments)},f.mediaInteractionCb=function(){m.mediaInteaction&&m.mediaInteaction(...arguments),T(...arguments)},f.styleSheetRuleCb=function(){m.styleSheetRule&&m.styleSheetRule(...arguments),D(...arguments)},f.styleDeclarationCb=function(){m.styleDeclaration&&m.styleDeclaration(...arguments),M(...arguments)},f.canvasMutationCb=function(){m.canvasMutation&&m.canvasMutation(...arguments),W(...arguments)},f.fontCb=function(){m.font&&m.font(...arguments),$(...arguments)},f.selectionCb=function(){m.selection&&m.selection(...arguments),P(...arguments)},f.customElementCb=function(){m.customElement&&m.customElement(...arguments),V(...arguments)}})(t,n),t.recordDOM&&(e=bc(t,t.doc));var i=function(f){var{mousemoveCb:m,sampling:w,doc:S,mirror:I}=f;if(w.mousemove===!1)return()=>{};var E,k=typeof w.mousemove=="number"?w.mousemove:50,x=typeof w.mousemoveCallback=="number"?w.mousemoveCallback:500,T=[],D=An(ie($=>{var P=Date.now()-E;m(T.map(V=>(V.timeOffset-=P,V)),$),T=[],E=null}),x),M=ie(An(ie($=>{var P=Wn($),{clientX:V,clientY:L}=uo($)?$.changedTouches[0]:$;E||(E=Ur()),T.push({x:V,y:L,id:I.getId(P),timeOffset:Ur()-E}),D(typeof DragEvent<"u"&&$ instanceof DragEvent?re.Drag:$ instanceof MouseEvent?re.MouseMove:re.TouchMove)}),k,{trailing:!1})),W=[Oe("mousemove",M,S),Oe("touchmove",M,S),Oe("drag",M,S)];return ie(()=>{W.forEach($=>$())})}(t),o=Od(t),s=wc(t),a=function(f,m){var{viewportResizeCb:w}=f,{win:S}=m,I=-1,E=-1;return Oe("resize",ie(An(ie(()=>{var k=dc(),x=hc();I===k&&E===x||(w({width:Number(x),height:Number(k)}),I=k,E=x)}),200)),S)}(t,{win:r}),l=function(f){var{inputCb:m,doc:w,mirror:S,blockClass:I,blockSelector:E,ignoreClass:k,ignoreSelector:x,maskInputOptions:T,maskInputFn:D,sampling:M,userTriggeredOnInput:W}=f;function $(Y){var j=Wn(Y),R=Y.isTrusted,H=j&&j.tagName;if(j&&H==="OPTION"&&(j=ne.parentElement(j)),j&&H&&!(Ld.indexOf(H)<0)&&!Pe(j,I,E,!0)&&!(j.classList.contains(k)||x&&j.matches(x))){var te=j.value,ae=!1,X=cs(j)||"";X==="radio"||X==="checkbox"?ae=j.checked:(T[H.toLowerCase()]||T[X])&&(te=ls({element:j,maskInputOptions:T,tagName:H,type:X,value:te,maskInputFn:D})),P(j,W?{text:te,isChecked:ae,userTriggered:R}:{text:te,isChecked:ae});var le=j.name;X==="radio"&&le&&ae&&w.querySelectorAll('input[type="radio"][name="'.concat(le,'"]')).forEach(ce=>{if(ce!==j){var De=ce.value;P(ce,W?{text:De,isChecked:!ae,userTriggered:!1}:{text:De,isChecked:!ae})}})}}function P(Y,j){var R=ea.get(Y);if(!R||R.text!==j.text||R.isChecked!==j.isChecked){ea.set(Y,j);var H=S.getId(Y);ie(m)(C(C({},j),{},{id:H}))}}var V=(M.input==="last"?["change"]:["input","change"]).map(Y=>Oe(Y,ie($),w)),L=w.defaultView;if(!L)return()=>{V.forEach(Y=>Y())};var O=L.Object.getOwnPropertyDescriptor(L.HTMLInputElement.prototype,"value"),N=[[L.HTMLInputElement.prototype,"value"],[L.HTMLInputElement.prototype,"checked"],[L.HTMLSelectElement.prototype,"value"],[L.HTMLTextAreaElement.prototype,"value"],[L.HTMLSelectElement.prototype,"selectedIndex"],[L.HTMLOptionElement.prototype,"selected"]];return O&&O.set&&V.push(...N.map(Y=>mi(Y[0],Y[1],{set(){ie($)({target:this,isTrusted:!1})}},!1,L))),ie(()=>{V.forEach(Y=>Y())})}(t),c=function(f){var{mediaInteractionCb:m,blockClass:w,blockSelector:S,mirror:I,sampling:E,doc:k}=f,x=ie(D=>An(ie(M=>{var W=Wn(M);if(W&&!Pe(W,w,S,!0)){var{currentTime:$,volume:P,muted:V,playbackRate:L,loop:O}=W;m({type:D,id:I.getId(W),currentTime:$,volume:P,muted:V,playbackRate:L,loop:O})}}),E.media||500)),T=[Oe("play",x(Kt.Play),k),Oe("pause",x(Kt.Pause),k),Oe("seeked",x(Kt.Seeked),k),Oe("volumechange",x(Kt.VolumeChange),k),Oe("ratechange",x(Kt.RateChange),k)];return ie(()=>{T.forEach(D=>D())})}(t),u=()=>{},d=()=>{},p=()=>{},h=()=>{};t.recordDOM&&(u=function(f,m){var{styleSheetRuleCb:w,mirror:S,stylesheetManager:I}=f,{win:E}=m;if(!E.CSSStyleSheet||!E.CSSStyleSheet.prototype)return()=>{};var k=E.CSSStyleSheet.prototype.insertRule;E.CSSStyleSheet.prototype.insertRule=new Proxy(k,{apply:ie(($,P,V)=>{var[L,O]=V,{id:N,styleId:Y}=St(P,S,I.styleMirror);return(N&&N!==-1||Y&&Y!==-1)&&w({id:N,styleId:Y,adds:[{rule:L,index:O}]}),$.apply(P,V)})}),E.CSSStyleSheet.prototype.addRule=function($,P){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.cssRules.length,L="".concat($," { ").concat(P," }");return E.CSSStyleSheet.prototype.insertRule.apply(this,[L,V])};var x,T,D=E.CSSStyleSheet.prototype.deleteRule;E.CSSStyleSheet.prototype.deleteRule=new Proxy(D,{apply:ie(($,P,V)=>{var[L]=V,{id:O,styleId:N}=St(P,S,I.styleMirror);return(O&&O!==-1||N&&N!==-1)&&w({id:O,styleId:N,removes:[{index:L}]}),$.apply(P,V)})}),E.CSSStyleSheet.prototype.removeRule=function($){return E.CSSStyleSheet.prototype.deleteRule.apply(this,[$])},E.CSSStyleSheet.prototype.replace&&(x=E.CSSStyleSheet.prototype.replace,E.CSSStyleSheet.prototype.replace=new Proxy(x,{apply:ie(($,P,V)=>{var[L]=V,{id:O,styleId:N}=St(P,S,I.styleMirror);return(O&&O!==-1||N&&N!==-1)&&w({id:O,styleId:N,replace:L}),$.apply(P,V)})})),E.CSSStyleSheet.prototype.replaceSync&&(T=E.CSSStyleSheet.prototype.replaceSync,E.CSSStyleSheet.prototype.replaceSync=new Proxy(T,{apply:ie(($,P,V)=>{var[L]=V,{id:O,styleId:N}=St(P,S,I.styleMirror);return(O&&O!==-1||N&&N!==-1)&&w({id:O,styleId:N,replaceSync:L}),$.apply(P,V)})}));var M={};gr("CSSGroupingRule")?M.CSSGroupingRule=E.CSSGroupingRule:(gr("CSSMediaRule")&&(M.CSSMediaRule=E.CSSMediaRule),gr("CSSConditionRule")&&(M.CSSConditionRule=E.CSSConditionRule),gr("CSSSupportsRule")&&(M.CSSSupportsRule=E.CSSSupportsRule));var W={};return Object.entries(M).forEach($=>{var[P,V]=$;W[P]={insertRule:V.prototype.insertRule,deleteRule:V.prototype.deleteRule},V.prototype.insertRule=new Proxy(W[P].insertRule,{apply:ie((L,O,N)=>{var[Y,j]=N,{id:R,styleId:H}=St(O.parentStyleSheet,S,I.styleMirror);return(R&&R!==-1||H&&H!==-1)&&w({id:R,styleId:H,adds:[{rule:Y,index:[...hr(O),j||0]}]}),L.apply(O,N)})}),V.prototype.deleteRule=new Proxy(W[P].deleteRule,{apply:ie((L,O,N)=>{var[Y]=N,{id:j,styleId:R}=St(O.parentStyleSheet,S,I.styleMirror);return(j&&j!==-1||R&&R!==-1)&&w({id:j,styleId:R,removes:[{index:[...hr(O),Y]}]}),L.apply(O,N)})})}),ie(()=>{E.CSSStyleSheet.prototype.insertRule=k,E.CSSStyleSheet.prototype.deleteRule=D,x&&(E.CSSStyleSheet.prototype.replace=x),T&&(E.CSSStyleSheet.prototype.replaceSync=T),Object.entries(M).forEach($=>{var[P,V]=$;V.prototype.insertRule=W[P].insertRule,V.prototype.deleteRule=W[P].deleteRule})})}(t,{win:r}),d=Sc(t,t.doc),p=function(f,m){var{styleDeclarationCb:w,mirror:S,ignoreCSSAttributes:I,stylesheetManager:E}=f,{win:k}=m,x=k.CSSStyleDeclaration.prototype.setProperty;k.CSSStyleDeclaration.prototype.setProperty=new Proxy(x,{apply:ie((D,M,W)=>{var $,[P,V,L]=W;if(I.has(P))return x.apply(M,[P,V,L]);var{id:O,styleId:N}=St(($=M.parentRule)==null?void 0:$.parentStyleSheet,S,E.styleMirror);return(O&&O!==-1||N&&N!==-1)&&w({id:O,styleId:N,set:{property:P,value:V,priority:L},index:hr(M.parentRule)}),D.apply(M,W)})});var T=k.CSSStyleDeclaration.prototype.removeProperty;return k.CSSStyleDeclaration.prototype.removeProperty=new Proxy(T,{apply:ie((D,M,W)=>{var $,[P]=W;if(I.has(P))return T.apply(M,[P]);var{id:V,styleId:L}=St(($=M.parentRule)==null?void 0:$.parentStyleSheet,S,E.styleMirror);return(V&&V!==-1||L&&L!==-1)&&w({id:V,styleId:L,remove:{property:P},index:hr(M.parentRule)}),D.apply(M,W)})}),ie(()=>{k.CSSStyleDeclaration.prototype.setProperty=x,k.CSSStyleDeclaration.prototype.removeProperty=T})}(t,{win:r}),t.collectFonts&&(h=function(f){var{fontCb:m,doc:w}=f,S=w.defaultView;if(!S)return()=>{};var I=[],E=new WeakMap,k=S.FontFace;S.FontFace=function(T,D,M){var W=new k(T,D,M);return E.set(W,{family:T,buffer:typeof D!="string",descriptors:M,fontSource:typeof D=="string"?D:JSON.stringify(Array.from(new Uint8Array(D)))}),W};var x=fn(w.fonts,"add",function(T){return function(D){return setTimeout(ie(()=>{var M=E.get(D);M&&(m(M),E.delete(D))}),0),T.apply(this,[D])}});return I.push(()=>{S.FontFace=k}),I.push(x),ie(()=>{I.forEach(T=>T())})}(t)));var g=function(f){var{doc:m,mirror:w,blockClass:S,blockSelector:I,selectionCb:E}=f,k=!0,x=ie(()=>{var T=m.getSelection();if(!(!T||k&&T?.isCollapsed)){k=T.isCollapsed||!1;for(var D=[],M=T.rangeCount||0,W=0;W<M;W++){var $=T.getRangeAt(W),{startContainer:P,startOffset:V,endContainer:L,endOffset:O}=$;Pe(P,S,I,!0)||Pe(L,S,I,!0)||D.push({start:w.getId(P),startOffset:V,end:w.getId(L),endOffset:O})}E({ranges:D})}});return x(),Oe("selectionchange",x)}(t),v=function(f){var{doc:m,customElementCb:w}=f,S=m.defaultView;if(!S||!S.customElements)return()=>{};var I=fn(S.customElements,"define",function(E){return function(k,x,T){try{w({define:{name:k}})}catch{console.warn("Custom element callback failed for ".concat(k))}return E.apply(this,[k,x,T])}});return I}(t),b=[];for(var _ of t.plugins)b.push(_.observer(_.callback,r,_.options));return ie(()=>{Ht.forEach(f=>f.reset()),e?.disconnect(),i(),o(),s(),a(),l(),c(),u(),d(),p(),h(),g(),v(),b.forEach(f=>f())})}function pr(t){return window[t]!==void 0}function gr(t){return!!(window[t]!==void 0&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class ta{constructor(e){q(this,"iframeIdToRemoteIdMap",new WeakMap),q(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,n,r,i){var o=r||this.getIdToRemoteIdMap(e),s=i||this.getRemoteIdToIdMap(e),a=o.get(n);return a||(a=this.generateIdFn(),o.set(n,a),s.set(a,n)),a}getIds(e,n){var r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return n.map(o=>this.getId(e,o,r,i))}getRemoteId(e,n,r){var i=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;var o=i.get(n);return o||-1}getRemoteIds(e,n){var r=this.getRemoteIdToIdMap(e);return n.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){var n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){var n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}class Dd{constructor(e){q(this,"iframes",new WeakMap),q(this,"crossOriginIframeMap",new WeakMap),q(this,"crossOriginIframeMirror",new ta(ic)),q(this,"crossOriginIframeStyleMirror"),q(this,"crossOriginIframeRootIdMap",new WeakMap),q(this,"mirror"),q(this,"mutationCb"),q(this,"wrappedEmit"),q(this,"loadListener"),q(this,"stylesheetManager"),q(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ta(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){var r,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((r=e.contentWindow)==null||r.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){var n=e;if(n.data.type==="rrweb"&&n.origin===n.data.origin&&e.source){var r=this.crossOriginIframeMap.get(e.source);if(r){var i=this.transformCrossOriginEvent(r,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}}}transformCrossOriginEvent(e,n){var r;switch(n.type){case oe.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);var i=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(n.data.node,i),{timestamp:n.timestamp,type:oe.IncrementalSnapshot,data:{source:re.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case oe.Meta:case oe.Load:case oe.DomContentLoaded:return!1;case oe.Plugin:return n;case oe.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case oe.IncrementalSnapshot:switch(n.data.source){case re.Mutation:return n.data.adds.forEach(o=>{this.replaceIds(o,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,e);var s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(o.node,s)}),n.data.removes.forEach(o=>{this.replaceIds(o,e,["parentId","id"])}),n.data.attributes.forEach(o=>{this.replaceIds(o,e,["id"])}),n.data.texts.forEach(o=>{this.replaceIds(o,e,["id"])}),n;case re.Drag:case re.TouchMove:case re.MouseMove:return n.data.positions.forEach(o=>{this.replaceIds(o,e,["id"])}),n;case re.ViewportResize:return!1;case re.MediaInteraction:case re.MouseInteraction:case re.Scroll:case re.CanvasMutation:case re.Input:return this.replaceIds(n.data,e,["id"]),n;case re.StyleSheetRule:case re.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case re.Font:return n;case re.Selection:return n.data.ranges.forEach(o=>{this.replaceIds(o,e,["start","end"])}),n;case re.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),(r=n.data.styles)==null||r.forEach(o=>{this.replaceStyleIds(o,e,["styleId"])}),n}}return!1}replace(e,n,r,i){for(var o of i)(Array.isArray(n[o])||typeof n[o]=="number")&&(Array.isArray(n[o])?n[o]=e.getIds(r,n[o]):n[o]=e.getId(r,n[o]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type===Se.Document||e.rootId||(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Bd{constructor(e){q(this,"shadowDoms",new WeakSet),q(this,"mutationCb"),q(this,"scrollCb"),q(this,"bypassOptions"),q(this,"mirror"),q(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(Hn(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var r=bc(C(C({},this.bypassOptions),{},{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(wc(C(C({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ne.host(e))),this.restoreHandlers.push(Sc({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,n){var r=this;this.restoreHandlers.push(fn(e.prototype,"attachShadow",function(i){return function(o){var s=i.call(this,o),a=ne.shadowRoot(this);return a&&_c(this)&&r.addShadowRoot(a,n),s}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qd=typeof Uint8Array>"u"?[]:new Uint8Array(256),vr=0;vr<64;vr++)qd[Nn.charCodeAt(vr)]=vr;var na=new Map,Cc=(t,e,n)=>{if(t&&(kc(t,e)||typeof t=="object")){var r=function(o,s){var a=na.get(o);return a||(a=new Map,na.set(o,a)),a.has(s)||a.set(s,[]),a.get(s)}(n,t.constructor.name),i=r.indexOf(t);return i===-1&&(i=r.length,r.push(t)),i}};function Or(t,e,n){if(t instanceof Array)return t.map(o=>Or(o,e,n));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer)return{rr_type:t.constructor.name,base64:function(o){var s,a=new Uint8Array(o),l=a.length,c="";for(s=0;s<l;s+=3)c+=Nn[a[s]>>2],c+=Nn[(3&a[s])<<4|a[s+1]>>4],c+=Nn[(15&a[s+1])<<2|a[s+2]>>6],c+=Nn[63&a[s+2]];return l%3==2?c=c.substring(0,c.length-1)+"=":l%3==1&&(c=c.substring(0,c.length-2)+"=="),c}(t)};if(t instanceof DataView)return{rr_type:t.constructor.name,args:[Or(t.buffer,e,n),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){var r=t.constructor.name,{src:i}=t;return{rr_type:r,src:i}}return t instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:t.toDataURL()}:t instanceof ImageData?{rr_type:t.constructor.name,args:[Or(t.data,e,n),t.width,t.height]}:kc(t,e)||typeof t=="object"?{rr_type:t.constructor.name,index:Cc(t,e,n)}:t}var Ic=(t,e,n)=>t.map(r=>Or(r,e,n)),kc=(t,e)=>{var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(r=>typeof e[r]=="function");return!!n.find(r=>t instanceof e[r])};function ra(t,e,n,r){var i=[];try{var o=fn(t.HTMLCanvasElement.prototype,"getContext",function(s){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];if(!Pe(this,e,n,!0)){var d=function(h){return h==="experimental-webgl"?"webgl":h}(a);if("__context"in this||(this.__context=d),r&&["webgl","webgl2"].includes(d))if(c[0]&&typeof c[0]=="object"){var p=c[0];p.preserveDrawingBuffer||(p.preserveDrawingBuffer=!0)}else c.splice(0,1,{preserveDrawingBuffer:!0})}return s.apply(this,[a,...c])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function ia(t,e,n,r,i,o){var s=[],a=Object.getOwnPropertyNames(t),l=function(u){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(u))return"continue";try{if(typeof t[u]!="function")return"continue";var d=fn(t,u,function(h){return function(){for(var g=arguments.length,v=new Array(g),b=0;b<g;b++)v[b]=arguments[b];var _=h.apply(this,v);if(Cc(_,o,this),"tagName"in this.canvas&&!Pe(this.canvas,r,i,!0)){var f=Ic(v,o,this),m={type:e,property:u,args:f};n(this.canvas,m)}return _}});s.push(d)}catch{var p=mi(t,u,{set(g){n(this.canvas,{type:e,property:u,args:[g],setter:!0})}});s.push(p)}};for(var c of a)l(c);return s}var oa,me,Lr,Fi,Ec="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",sa=typeof window<"u"&&window.Blob&&new Blob([(oa=Ec,Uint8Array.from(atob(oa),t=>t.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});function Hd(t){var e;try{if(!(e=sa&&(window.URL||window.webkitURL).createObjectURL(sa)))throw"";var n=new Worker(e,{name:t?.name});return n.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),n}catch{return new Worker("data:text/javascript;base64,"+Ec,{name:t?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}class $d{constructor(e){q(this,"pendingCanvasMutations",new Map),q(this,"rafStamps",{latestId:0,invokeId:null}),q(this,"mirror"),q(this,"mutationCb"),q(this,"resetObservers"),q(this,"frozen",!1),q(this,"locked",!1),q(this,"processMutation",(l,c)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(c)});var{sampling:n="all",win:r,blockClass:i,blockSelector:o,recordCanvas:s,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,s&&n==="all"&&this.initCanvasMutationObserver(r,i,o),s&&typeof n=="number"&&this.initCanvasFPSObserver(n,r,i,o,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,n,r,i,o){var s=this,a=ra(n,r,i,!0),l=new Map,c=new Hd;c.onmessage=g=>{var{id:v}=g.data;if(l.set(v,!1),"base64"in g.data){var{base64:b,type:_,width:f,height:m}=g.data;this.mutationCb({id:v,type:Jt["2D"],commands:[{property:"clearRect",args:[0,0,f,m]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:b}],type:_}]},0,0]}]})}};var u,d=1e3/e,p=0,h=g=>{var v,b;p&&g-p<d||(p=g,(v=[],b=_=>{_.querySelectorAll("canvas").forEach(f=>{Pe(f,r,i,!0)||v.push(f)}),_.querySelectorAll("*").forEach(f=>{f.shadowRoot&&b(f.shadowRoot)})},b(n.document),v).forEach(function(){var _=Cn(function*(f){var m,w=s.mirror.getId(f);if(!l.get(w)&&f.width!==0&&f.height!==0){if(l.set(w,!0),["webgl","webgl2"].includes(f.__context)){var S=f.getContext(f.__context);((m=S?.getContextAttributes())==null?void 0:m.preserveDrawingBuffer)===!1&&S.clear(S.COLOR_BUFFER_BIT)}var I=f.clientWidth||f.width,E=f.clientHeight||f.height,k=yield createImageBitmap(f,{resizeWidth:I,resizeHeight:E});c.postMessage({id:w,bitmap:k,width:I,height:E,dataURLOptions:o.dataURLOptions},[k])}});return function(f){return _.apply(this,arguments)}}())),u=requestAnimationFrame(h)};u=requestAnimationFrame(h),this.resetObservers=()=>{a(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var i=ra(e,n,r,!1),o=function(a,l,c,u){var d=[],p=Object.getOwnPropertyNames(l.CanvasRenderingContext2D.prototype),h=function(v){try{if(typeof l.CanvasRenderingContext2D.prototype[v]!="function")return"continue";var b=fn(l.CanvasRenderingContext2D.prototype,v,function(f){return function(){for(var m=arguments.length,w=new Array(m),S=0;S<m;S++)w[S]=arguments[S];return Pe(this.canvas,c,u,!0)||setTimeout(()=>{var I=Ic(w,l,this);a(this.canvas,{type:Jt["2D"],property:v,args:I})},0),f.apply(this,w)}});d.push(b)}catch{var _=mi(l.CanvasRenderingContext2D.prototype,v,{set(m){a(this.canvas,{type:Jt["2D"],property:v,args:[m],setter:!0})}});d.push(_)}};for(var g of p)h(g);return()=>{d.forEach(v=>v())}}(this.processMutation.bind(this),e,n,r),s=function(a,l,c,u){var d=[];return d.push(...ia(l.WebGLRenderingContext.prototype,Jt.WebGL,a,c,u,l)),l.WebGL2RenderingContext!==void 0&&d.push(...ia(l.WebGL2RenderingContext.prototype,Jt.WebGL2,a,c,u,l)),()=>{d.forEach(p=>p())}}(this.processMutation.bind(this),e,n,r);this.resetObservers=()=>{i(),o(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){var e=n=>{this.rafStamps.latestId=n,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,n)=>{var r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,n){if(!this.frozen&&!this.locked){var r=this.pendingCanvasMutations.get(e);if(r&&n!==-1){var i=r.map(s=>ss(s,fd)),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:i}),this.pendingCanvasMutations.delete(e)}}}}class Wd{constructor(e){q(this,"trackedLinkElements",new WeakSet),q(this,"mutationCb"),q(this,"adoptedStyleSheetCb"),q(this,"styleMirror",new Rd),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){var r=this;if(e.length!==0){var i={id:n,styleIds:[]},o=[],s=function(l){var c=void 0;r.styleMirror.has(l)?c=r.styleMirror.getId(l):(c=r.styleMirror.add(l),o.push({styleId:c,rules:Array.from(l.rules||CSSRule,(u,d)=>({rule:nc(u,l.href),index:d}))})),i.styleIds.push(c)};for(var a of e)s(a);o.length>0&&(i.styles=o),this.adoptedStyleSheetCb(i)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Vd{constructor(){q(this,"nodeMap",new WeakMap),q(this,"active",!1)}inOtherBuffer(e,n){var r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==n)}add(e,n){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}destroy(){}}var jr=!1;try{if(Array.from([1],t=>2*t)[0]!==2){var Oi=document.createElement("iframe");document.body.appendChild(Oi),Array.from=((Ps=Oi.contentWindow)==null?void 0:Ps.Array.from)||Array.from,document.body.removeChild(Oi)}}catch(t){console.debug("Unable to override Array.from",t)}var aa,jt,Ke=new rc;function nn(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:s="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:d,maskInputOptions:p,slimDOMOptions:h,maskInputFn:g,maskTextFn:v,hooks:b,packFn:_,sampling:f={},dataURLOptions:m={},mousemoveWait:w,recordDOM:S=!0,recordCanvas:I=!1,recordCrossOriginIframes:E=!1,recordAfter:k=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:x=!1,collectFonts:T=!1,inlineImages:D=!1,plugins:M,keepIframeSrcFn:W=()=>!1,ignoreCSSAttributes:$=new Set([]),errorHandler:P}=t;$n=P;var V=!E||window.parent===window,L=!1;if(!V)try{window.parent.document&&(L=!1)}catch{L=!0}if(V&&!e)throw new Error("emit function is required");if(!V&&!L)return()=>{};w!==void 0&&f.mousemove===void 0&&(f.mousemove=w),Ke.reset();var O,N=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p!==void 0?p:{password:!0},Y=h===!0||h==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:h==="all",headMetaDescKeywords:h==="all",headTitleMutations:h==="all"}:h||{};(function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;"NodeList"in J&&!J.NodeList.prototype.forEach&&(J.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in J&&!J.DOMTokenList.prototype.forEach&&(J.DOMTokenList.prototype.forEach=Array.prototype.forEach)})();var j=0,R=J=>{for(var Ie of M||[])Ie.eventProcessor&&(J=Ie.eventProcessor(J));return _&&!L&&(J=_(J)),J};me=(J,Ie)=>{var z,K=J;if(K.timestamp=Ur(),!((z=Ht[0])!=null&&z.isFrozen())||K.type===oe.FullSnapshot||K.type===oe.IncrementalSnapshot&&K.data.source===re.Mutation||Ht.forEach(at=>at.unfreeze()),V)e?.(R(K),Ie);else if(L){var Be={type:"rrweb",event:R(K),origin:window.location.origin,isCheckout:Ie};window.parent.postMessage(Be,"*")}if(K.type===oe.FullSnapshot)O=K,j=0;else if(K.type===oe.IncrementalSnapshot){if(K.data.source===re.Mutation&&K.data.isAttachIframe)return;j++;var Xe=r&&j>=r,Je=n&&K.timestamp-O.timestamp>n;(Xe||Je)&&Lr(!0)}};var H=J=>{me({type:oe.IncrementalSnapshot,data:C({source:re.Mutation},J)})},te=J=>me({type:oe.IncrementalSnapshot,data:C({source:re.Scroll},J)}),ae=J=>me({type:oe.IncrementalSnapshot,data:C({source:re.CanvasMutation},J)}),X=new Wd({mutationCb:H,adoptedStyleSheetCb:J=>me({type:oe.IncrementalSnapshot,data:C({source:re.AdoptedStyleSheet},J)})}),le=new Dd({mirror:Ke,mutationCb:H,stylesheetManager:X,recordCrossOriginIframes:E,wrappedEmit:me});for(var ce of M||[])ce.getMirror&&ce.getMirror({nodeMirror:Ke,crossOriginIframeMirror:le.crossOriginIframeMirror,crossOriginIframeStyleMirror:le.crossOriginIframeStyleMirror});var De=new Vd;Fi=new $d({recordCanvas:I,mutationCb:ae,win:window,blockClass:i,blockSelector:o,mirror:Ke,sampling:f.canvas,dataURLOptions:m});var se=new Bd({mutationCb:H,scrollCb:te,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:N,dataURLOptions:m,maskTextFn:v,maskInputFn:g,recordCanvas:I,inlineImages:D,sampling:f,slimDOMOptions:Y,iframeManager:le,stylesheetManager:X,canvasManager:Fi,keepIframeSrcFn:W,processedNodeManager:De},mirror:Ke});Lr=function(){var J=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(S){me({type:oe.Meta,data:{href:window.location.href,width:hc(),height:dc()}},J),X.reset(),se.init(),Ht.forEach(z=>z.lock());var Ie=function(z,K){var{mirror:Be=new rc,blockClass:Xe="rr-block",blockSelector:Je=null,maskTextClass:at="rr-mask",maskTextSelector:cr=null,inlineStylesheet:Ei=!0,inlineImages:id=!1,recordCanvas:od=!1,maskAllInputs:xi=!1,maskTextFn:sd,maskInputFn:ad,slimDOM:kn=!1,dataURLOptions:ld,preserveWhiteSpace:cd,onSerialize:ud,onIframeLoad:dd,iframeLoadTimeout:hd,onStylesheetLoad:pd,stylesheetLoadTimeout:gd,keepIframeSrcFn:vd=()=>!1}=K||{};return tn(z,{doc:z,mirror:Be,blockClass:Xe,blockSelector:Je,maskTextClass:at,maskTextSelector:cr,skipChild:!1,inlineStylesheet:Ei,maskInputOptions:xi===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:xi===!1?{password:!0}:xi,maskTextFn:sd,maskInputFn:ad,slimDOMOptions:kn===!0||kn==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:kn==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:kn===!1?{}:kn,dataURLOptions:ld,inlineImages:id,recordCanvas:od,preserveWhiteSpace:cd,onSerialize:ud,onIframeLoad:dd,iframeLoadTimeout:hd,onStylesheetLoad:pd,stylesheetLoadTimeout:gd,keepIframeSrcFn:vd,newlyAddedElement:!1})}(document,{mirror:Ke,blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:N,maskTextFn:v,maskInputFn:g,slimDOM:Y,dataURLOptions:m,recordCanvas:I,inlineImages:D,onSerialize:z=>{vc(z,Ke)&&le.addIframe(z),fc(z,Ke)&&X.trackLinkElement(z),ho(z)&&se.addShadowRoot(ne.shadowRoot(z),document)},onIframeLoad:(z,K)=>{le.attachIframe(z,K),se.observeAttachShadow(z)},onStylesheetLoad:(z,K)=>{X.attachLinkElement(z,K)},keepIframeSrcFn:W});if(!Ie)return console.warn("Failed to snapshot the document");me({type:oe.FullSnapshot,data:{node:Ie,initialOffset:uc(window)}},J),Ht.forEach(z=>z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,Ke.getId(document))}};try{var st=[],yt=J=>{var Ie;return ie(Pd)({mutationCb:H,mousemoveCb:(z,K)=>me({type:oe.IncrementalSnapshot,data:{source:K,positions:z}}),mouseInteractionCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.MouseInteraction},z)}),scrollCb:te,viewportResizeCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.ViewportResize},z)}),inputCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.Input},z)}),mediaInteractionCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.MediaInteraction},z)}),styleSheetRuleCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.StyleSheetRule},z)}),styleDeclarationCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.StyleDeclaration},z)}),canvasMutationCb:ae,fontCb:z=>me({type:oe.IncrementalSnapshot,data:C({source:re.Font},z)}),selectionCb:z=>{me({type:oe.IncrementalSnapshot,data:C({source:re.Selection},z)})},customElementCb:z=>{me({type:oe.IncrementalSnapshot,data:C({source:re.CustomElement},z)})},blockClass:i,ignoreClass:s,ignoreSelector:a,maskTextClass:l,maskTextSelector:c,maskInputOptions:N,inlineStylesheet:u,sampling:f,recordDOM:S,recordCanvas:I,inlineImages:D,userTriggeredOnInput:x,collectFonts:T,doc:J,maskInputFn:g,maskTextFn:v,keepIframeSrcFn:W,blockSelector:o,slimDOMOptions:Y,dataURLOptions:m,mirror:Ke,iframeManager:le,stylesheetManager:X,shadowDomManager:se,processedNodeManager:De,canvasManager:Fi,ignoreCSSAttributes:$,plugins:((Ie=M?.filter(z=>z.observer))==null?void 0:Ie.map(z=>({observer:z.observer,options:z.options,callback:K=>me({type:oe.Plugin,data:{plugin:z.name,payload:K}})})))||[]},b)};le.addLoadListener(J=>{try{st.push(yt(J.contentDocument))}catch(Ie){console.warn(Ie)}});var Ve=()=>{Lr(),st.push(yt(document)),jr=!0};return document.readyState==="interactive"||document.readyState==="complete"?Ve():(st.push(Oe("DOMContentLoaded",()=>{me({type:oe.DomContentLoaded,data:{}}),k==="DOMContentLoaded"&&Ve()})),st.push(Oe("load",()=>{me({type:oe.Load,data:{}}),k==="load"&&Ve()},window))),()=>{st.forEach(J=>J()),De.destroy(),jr=!1,$n=void 0}}catch(J){console.warn(J)}}nn.addCustomEvent=(t,e)=>{if(!jr)throw new Error("please add custom event after start recording");me({type:oe.Custom,data:{tag:t,payload:e}})},nn.freezePage=()=>{Ht.forEach(t=>t.freeze())},nn.takeFullSnapshot=t=>{if(!jr)throw new Error("please take full snapshot after start recording");Lr(t)},nn.mirror=Ke,(jt=aa||(aa={}))[jt.NotStarted=0]="NotStarted",jt[jt.Running=1]="Running",jt[jt.Stopped=2]="Stopped";var la,Zd=Object.defineProperty,fr=(t,e,n)=>((r,i,o)=>i in r?Zd(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o)(t,typeof e!="symbol"?e+"":e,n),Gd=Object.defineProperty,Li=(t,e,n)=>((r,i,o)=>i in r?Gd(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o)(t,typeof e!="symbol"?e+"":e,n),Ud=Object.defineProperty,ca=(t,e,n)=>((r,i,o)=>i in r?Ud(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o)(t,typeof e!="symbol"?e+"":e,n),ua={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},da={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},mr={};function hs(t){if(mr[t])return mr[t];var e=globalThis[t],n=e.prototype,r=t in ua?ua[t]:void 0,i=!!(r&&r.every(u=>{var d,p;return!!((p=(d=Object.getOwnPropertyDescriptor(n,u))==null?void 0:d.get)!=null&&p.toString().includes("[native code]"))})),o=t in da?da[t]:void 0,s=!!(o&&o.every(u=>{var d;return typeof n[u]=="function"&&((d=n[u])==null?void 0:d.toString().includes("[native code]"))}));if(i&&s)return mr[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var c=l[t].prototype;return document.body.removeChild(a),c?mr[t]=c:n}catch{return n}}var Pi={};function Ct(t,e,n){var r,i="".concat(t,".").concat(String(n));if(Pi[i])return Pi[i].call(e);var o=hs(t),s=(r=Object.getOwnPropertyDescriptor(o,n))==null?void 0:r.get;return s?(Pi[i]=s,s.call(e)):e[n]}var Di={};function ha(t,e,n){var r="".concat(t,".").concat(String(n));if(Di[r])return Di[r].bind(e);var i=hs(t)[n];return typeof i!="function"?e[n]:(Di[r]=i,i.bind(e))}var zr={childNodes:function(t){return Ct("Node",t,"childNodes")},parentNode:function(t){return Ct("Node",t,"parentNode")},parentElement:function(t){return Ct("Node",t,"parentElement")},textContent:function(t){return Ct("Node",t,"textContent")},contains:function(t,e){return ha("Node",t,"contains")(e)},getRootNode:function(t){return ha("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?Ct("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?Ct("Element",t,"shadowRoot"):null},querySelector:function(t,e){return Ct("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return Ct("Element",t,"querySelectorAll")(e)},mutationObserver:function(){return hs("MutationObserver").constructor}};class jd{constructor(){ca(this,"idNodeMap",new Map),ca(this,"nodeMetaMap",new WeakMap)}getId(e){var n;if(!e)return-1;var r=(n=this.getMeta(e))==null?void 0:n.id;return r??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){var n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){var r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){var r=this.getNode(e);if(r){var i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function go(t,e,n){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!n&&go(zr.parentNode(t),e,n);for(var r=t.classList.length;r--;){var i=t.classList[r];if(e.test(i))return!0}return!!n&&go(zr.parentNode(t),e,n)}class ps{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){for(var e=[],n=this.firstChild;n;)e.push(n),n=n.nextSibling;return e}contains(e){if(!(e instanceof ps)||e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,n){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var pa={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ga={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},_r={};function gs(t){if(_r[t])return _r[t];var e=globalThis[t],n=e.prototype,r=t in pa?pa[t]:void 0,i=!!(r&&r.every(u=>{var d,p;return!!((p=(d=Object.getOwnPropertyDescriptor(n,u))==null?void 0:d.get)!=null&&p.toString().includes("[native code]"))})),o=t in ga?ga[t]:void 0,s=!!(o&&o.every(u=>{var d;return typeof n[u]=="function"&&((d=n[u])==null?void 0:d.toString().includes("[native code]"))}));if(i&&s)return _r[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var c=l[t].prototype;return document.body.removeChild(a),c?_r[t]=c:n}catch{return n}}var Bi={};function It(t,e,n){var r,i="".concat(t,".").concat(String(n));if(Bi[i])return Bi[i].call(e);var o=gs(t),s=(r=Object.getOwnPropertyDescriptor(o,n))==null?void 0:r.get;return s?(Bi[i]=s,s.call(e)):e[n]}var qi={};function va(t,e,n){var r="".concat(t,".").concat(String(n));if(qi[r])return qi[r].bind(e);var i=gs(t)[n];return typeof i!="function"?e[n]:(qi[r]=i,i.bind(e))}var Ue={childNodes:function(t){return It("Node",t,"childNodes")},parentNode:function(t){return It("Node",t,"parentNode")},parentElement:function(t){return It("Node",t,"parentElement")},textContent:function(t){return It("Node",t,"textContent")},contains:function(t,e){return va("Node",t,"contains")(e)},getRootNode:function(t){return va("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?It("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?It("Element",t,"shadowRoot"):null},querySelector:function(t,e){return It("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return It("Element",t,"querySelectorAll")(e)},mutationObserver:function(){return gs("MutationObserver").constructor}},Qt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,vo={map:{},getId:()=>(console.error(Qt),-1),getNode:()=>(console.error(Qt),null),removeNodeFromMap(){console.error(Qt)},has:()=>(console.error(Qt),!1),reset(){console.error(Qt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(vo=new Proxy(vo,{get:(t,e,n)=>(e==="map"&&console.error(Qt),Reflect.get(t,e,n))}));var xc=Date.now;function fa(t){return t?t.nodeType===t.ELEMENT_NODE?t:Ue.parentElement(t):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(xc=()=>new Date().getTime());function Tc(t){var e,n=null;return"getRootNode"in t&&((e=Ue.getRootNode(t))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Ue.host(Ue.getRootNode(t))&&(n=Ue.host(Ue.getRootNode(t))),n}function Mc(t){for(var e,n=t;e=Tc(n);)n=e;return n}function ma(t){var e=t.ownerDocument;if(!e)return!1;var n=Mc(t);return Ue.contains(e,n)}for(var zd=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){Li(this,"id",1),Li(this,"styleIDMap",new WeakMap),Li(this,"idStyleMap",new Map)}getId(t){var e;return(e=this.styleIDMap.get(t))!==null&&e!==void 0?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){return this.has(t)?this.getId(t):(n=e===void 0?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n);var n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return vo},closestElementOfNode:fa,getBaseDimension:function t(e,n){var r,i,o=(i=(r=e.ownerDocument)==null?void 0:r.defaultView)==null?void 0:i.frameElement;if(!o||o===n)return{x:0,y:0,relativeScale:1,absoluteScale:1};var s=o.getBoundingClientRect(),a=t(o,n),l=s.height/o.clientHeight;return{x:s.x*a.relativeScale+a.x,y:s.y*a.relativeScale+a.y,relativeScale:l,absoluteScale:a.absoluteScale*l}},getNestedRule:function t(e,n){var r=e[n[0]];return n.length===1?r:t(r.cssRules[n[1]].cssRules,n.slice(2))},getPositionsAndIndex:function(t){var e=[...t],n=e.pop();return{positions:e,index:n}},getRootShadowHost:Mc,getShadowHost:Tc,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(t){var e,n,r,i,o=t.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:o.documentElement.scrollLeft||o?.body&&((e=Ue.parentElement(o.body))==null?void 0:e.scrollLeft)||((n=o?.body)==null?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:o?.documentElement.scrollTop||o?.body&&((r=Ue.parentElement(o.body))==null?void 0:r.scrollTop)||((i=o?.body)==null?void 0:i.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(t){return!!t&&(t instanceof ps&&"shadowRoot"in t?!!t.shadowRoot:!!Ue.shadowRoot(t))},hookSetter:function t(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:window,s=o.Object.getOwnPropertyDescriptor(e,n);return o.Object.defineProperty(e,n,i?r:{set(a){setTimeout(()=>{r.set.call(this,a)},0),s&&s.set&&s.set.call(this,a)}}),()=>t(e,n,s||{},!0)},inDom:function(t){var e=t.ownerDocument;return!!e&&(Ue.contains(e,t)||ma(t))},isAncestorRemoved:function t(e,n){if(i=(r=e)&&"host"in r&&"mode"in r&&zr.host(r)||null,!!(i&&"shadowRoot"in i&&zr.shadowRoot(i)===r))return!1;var r,i,o=n.getId(e);if(!n.has(o))return!0;var s=Ue.parentNode(e);return(!s||s.nodeType!==e.DOCUMENT_NODE)&&(!s||t(s,n))},isBlocked:function(t,e,n,r){if(!t)return!1;var i=fa(t);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||r&&i.closest("."+e)!==null)return!0}else if(go(i,e,r))return!0}catch{}return!!(n&&(i.matches(n)||r&&i.closest(n)!==null))},isIgnored:function(t,e,n){return!(t.tagName!=="TITLE"||!n.headTitleMutations)||e.getId(t)===-2},isSerialized:function(t,e){return e.getId(t)!==-1},isSerializedIframe:function(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))},isSerializedStylesheet:function(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))},iterateResolveTree:function t(e,n){n(e.value);for(var r=e.children.length-1;r>=0;r--)t(e.children[r],n)},legacy_isTouchEvent:function(t){return!!t.changedTouches},get nowTimestamp(){return xc},on:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)},patch:function(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}},polyfill:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(t){var e={},n=(d,p)=>{var h={value:d,parent:p,children:[]};return e[d.node.id]=h,h},r=[];for(var i of t){var{nextId:o,parentId:s}=i;if(o&&o in e){var a=e[o];if(a.parent){var l=a.parent.children.indexOf(a);a.parent.children.splice(l,0,n(i,a.parent))}else{var c=r.indexOf(a);r.splice(c,0,n(i,null))}}else if(s in e){var u=e[s];u.children.push(n(i,u))}else r.push(n(i,null))}return r},shadowHostInDom:ma,throttle:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=null,i=0;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=Date.now();i||n.leading!==!1||(i=l);var c=e-(l-i),u=this;c<=0||c>e?(r&&(clearTimeout(r),r=null),i=l,t.apply(u,s)):r||n.trailing===!1||(r=setTimeout(()=>{i=n.leading===!1?0:Date.now(),r=null,t.apply(u,s)},c))}},uniqueTextMutations:function(t){for(var e=new Set,n=[],r=t.length;r--;){var i=t[r];e.has(i.id)||(n.push(i),e.add(i.id))}return n}},Symbol.toStringTag,{value:"Module"})),Yd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xd=typeof Uint8Array>"u"?[]:new Uint8Array(256),yr=0;yr<64;yr++)Xd[Yd.charCodeAt(yr)]=yr;var _a;typeof window<"u"&&window.Blob&&new Blob([(t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)))("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"});try{if(Array.from([1],t=>2*t)[0]!==2){var Hi=document.createElement("iframe");document.body.appendChild(Hi),Array.from=((la=Hi.contentWindow)==null?void 0:la.Array.from)||Array.from,document.body.removeChild(Hi)}}catch(t){console.debug("Unable to override Array.from",t)}new jd,function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(_a||(_a={}));class zt{constructor(e){fr(this,"fileName"),fr(this,"functionName"),fr(this,"lineNumber"),fr(this,"columnNumber"),this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){var e=this.lineNumber||"",n=this.columnNumber||"";return this.functionName?"".concat(this.functionName," (").concat(this.fileName,":").concat(e,":").concat(n,")"):"".concat(this.fileName,":").concat(e,":").concat(n)}}var Jd=/(^|@)\S+:\d+/,ya=/^\s*at .*(\S+:\d+|\(native\))/m,Kd=/^(eval@)?(\[native code])?$/,$i={parse:function(t){return t?t.stacktrace!==void 0||t["opera#sourceloc"]!==void 0?this.parseOpera(t):t.stack&&t.stack.match(ya)?this.parseV8OrIE(t):t.stack?this.parseFFOrSafari(t):(console.warn("[console-record-plugin]: Failed to parse error object:",t),[]):[]},extractLocation:function(t){if(t.indexOf(":")===-1)return[t];var e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));if(!e)throw new Error("Cannot parse given url: ".concat(t));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(t){return t.stack.split(`
`).filter(function(e){return!!e.match(ya)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=n.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(n=r?n.replace(r[0],""):n).split(/\s+/).slice(1),o=this.extractLocation(r?r[1]:i.pop()),s=i.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new zt({functionName:s,fileName:a,lineNumber:o[1],columnNumber:o[2]})},this)},parseFFOrSafari:function(t){return t.stack.split(`
`).filter(function(e){return!e.match(Kd)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),e.indexOf("@")===-1&&e.indexOf(":")===-1)return new zt({functionName:e});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=e.match(n),i=r&&r[1]?r[1]:void 0,o=this.extractLocation(e.replace(n,""));return new zt({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf(`
`)>-1&&t.message.split(`
`).length>t.stacktrace.split(`
`).length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split(`
`),r=[],i=2,o=n.length;i<o;i+=2){var s=e.exec(n[i]);s&&r.push(new zt({fileName:s[2],lineNumber:parseFloat(s[1])}))}return r},parseOpera10:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split(`
`),r=[],i=0,o=n.length;i<o;i+=2){var s=e.exec(n[i]);s&&r.push(new zt({functionName:s[3]||void 0,fileName:s[2],lineNumber:parseFloat(s[1])}))}return r},parseOpera11:function(t){return t.stack.split(`
`).filter(function(e){return!!e.match(Jd)&&!e.match(/^Error created at/)},this).map(function(e){var n=e.split("@"),r=this.extractLocation(n.pop()),i=(n.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new zt({functionName:i,fileName:r[0],lineNumber:r[1],columnNumber:r[2]})},this)}};function Qd(t){if(!t||!t.outerHTML)return"";for(var e="";t.parentElement;){var n=t.localName;if(!n)break;n=n.toLowerCase();var r=t.parentElement,i=[];if(r.children&&r.children.length>0)for(var o=0;o<r.children.length;o++){var s=r.children[o];s.localName&&s.localName.toLowerCase&&s.localName.toLowerCase()===n&&i.push(s)}i.length>1&&(n+=":eq(".concat(i.indexOf(t),")")),e=n+(e?">"+e:""),t=r}return e}function fo(t){return Object.prototype.toString.call(t)==="[object Object]"}function Rc(t,e){if(e===0)return!0;var n=Object.keys(t);for(var r of n)if(fo(t[r])&&Rc(t[r],e-1))return!0;return!1}function Yt(t,e){var n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,e);var r=[],i=[];return JSON.stringify(t,function(o,s){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?i.splice(a,1/0,o):i.push(o),~r.indexOf(s)&&(s=r[0]===s?"[Circular ~]":"[Circular ~."+i.slice(0,r.indexOf(s)).join(".")+"]")}else r.push(s);if(s===null)return s;if(s===void 0)return"undefined";if(function(d){return!!(fo(d)&&Object.keys(d).length>n.numOfKeysLimit||typeof d=="function"||fo(d)&&Rc(d,n.depthOfLimit))}(s))return function(d){var p=d.toString();return n.stringLengthLimit&&p.length>n.stringLengthLimit&&(p="".concat(p.slice(0,n.stringLengthLimit),"...")),p}(s);if(typeof s=="bigint")return s.toString()+"n";if(s instanceof Event){var l={};for(var c in s){var u=s[c];Array.isArray(u)?l[c]=Qd(u.length?u[0]:null):l[c]=u}return l}return s instanceof Node?s instanceof HTMLElement?s?s.outerHTML:"":s.nodeName:s instanceof Error?s.stack?s.stack+`
End of stack for Error object`:s.name+": "+s.message:s})}var ba={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function eh(t,e,n){var r,i=n?Object.assign({},ba,n):ba,o=i.logger;if(!o)return()=>{};r=typeof o=="string"?e[o]:o;var s=0,a=!1,l=[];if(i.level.includes("error")){var c=h=>{var g=h.message,v=h.error,b=$i.parse(v).map(f=>f.toString()),_=[Yt(g,i.stringifyOptions)];t({level:"error",trace:b,payload:_})};e.addEventListener("error",c),l.push(()=>{e.removeEventListener("error",c)});var u=h=>{var g,v;h.reason instanceof Error?(g=h.reason,v=[Yt("Uncaught (in promise) ".concat(g.name,": ").concat(g.message),i.stringifyOptions)]):(g=new Error,v=[Yt("Uncaught (in promise)",i.stringifyOptions),Yt(h.reason,i.stringifyOptions)]);var b=$i.parse(g).map(_=>_.toString());t({level:"error",trace:b,payload:v})};e.addEventListener("unhandledrejection",u),l.push(()=>{e.removeEventListener("unhandledrejection",u)})}for(var d of i.level)l.push(p(r,d));return()=>{l.forEach(h=>h())};function p(h,g){var v=this;return h[g]?zd.patch(h,g,b=>function(){for(var _=arguments.length,f=new Array(_),m=0;m<_;m++)f[m]=arguments[m];if(b.apply(v,f),!(g==="assert"&&f[0]||a)){a=!0;try{var w=$i.parse(new Error).map(I=>I.toString()).splice(1),S=(g==="assert"?f.slice(1):f).map(I=>Yt(I,i.stringifyOptions));++s<i.lengthThreshold?t({level:g,trace:w,payload:S}):s===i.lengthThreshold&&t({level:"warn",trace:[],payload:[Yt("The number of log records reached the threshold.")]})}catch(I){b("rrweb logger error:",I,...f)}finally{a=!1}}}):()=>{}}}var tt,wa=t=>({name:"rrweb/console@1",observer:eh,options:t}),y=typeof window<"u"?window:void 0,$e=typeof globalThis<"u"?globalThis:y,Ac=Array.prototype,Sa=Ac.forEach,Ca=Ac.indexOf,Ze=$e?.navigator,G=$e?.document,He=$e?.location,mo=$e?.fetch,_o=$e!=null&&$e.XMLHttpRequest&&"withCredentials"in new $e.XMLHttpRequest?$e.XMLHttpRequest:void 0,Ia=$e?.AbortController,Ee=Ze?.userAgent,B=y??{},Wi="$copy_autocapture",th=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(tt||(tt={}));var nh=["fatal","error","warning","log","info","debug"];function ee(t,e){return t.indexOf(e)!==-1}var _i=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},yo=function(t){return t.replace(/^\$/,"")},rh=Array.isArray,Nc=Object.prototype,Fc=Nc.hasOwnProperty,yi=Nc.toString,pe=rh||function(t){return yi.call(t)==="[object Array]"},Me=t=>typeof t=="function",ih=t=>Me(t)&&t.toString().indexOf("[native code]")!==-1,oh=()=>!!y.Zone,fe=t=>t===Object(t)&&!pe(t),rn=t=>{if(fe(t)){for(var e in t)if(Fc.call(t,e))return!1;return!0}return!1},Z=t=>t===void 0,we=t=>yi.call(t)=="[object String]",bo=t=>we(t)&&t.trim().length===0,Ne=t=>t===null,de=t=>Z(t)||Ne(t),be=t=>yi.call(t)=="[object Number]",nt=t=>yi.call(t)==="[object Boolean]",sh=t=>t instanceof Document,Oc=t=>t instanceof FormData,ah=t=>ee(th,t),gt={DEBUG:!1,LIB_VERSION:"1.203.1"},Lc=t=>{var e={_log:function(n){if(y&&(gt.DEBUG||B.POSTHOG_DEBUG)&&!Z(y.console)&&y.console){for(var r=("__rrweb_original__"in y.console[n])?y.console[n].__rrweb_original__:y.console[n],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];r(t,...o)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e._log("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e._log("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e._log("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(t,...r)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling ".concat(n))},createLogger:n=>Lc("".concat(t," ").concat(n))};return e},U=Lc("[PostHog.js]"),Re=U.createLogger,Yr={};function un(t,e,n){if(pe(t)){if(Sa&&t.forEach===Sa)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===Yr)return}}}function ue(t,e,n){if(!de(t)){if(pe(t))return un(t,e,n);if(Oc(t)){for(var r of t.entries())if(e.call(n,r[1],r[0])===Yr)return}else for(var i in t)if(Fc.call(t,i)&&e.call(n,t[i],i)===Yr)return}}var Le=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return un(n,function(i){for(var o in i)i[o]!==void 0&&(t[o]=i[o])}),t};function Pr(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var ka=function(t){try{return t()}catch{return}},lh=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){U.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),U.critical(i)}}},Xr=function(t){var e={};return ue(t,function(n,r){we(n)&&n.length>0&&(e[r]=n)}),e};function ch(t,e){return n=t,r=o=>we(o)&&!Ne(e)?o.slice(0,e):o,i=new Set,function o(s,a){return s!==Object(s)?r?r(s,a):s:i.has(s)?void 0:(i.add(s),pe(s)?(l=[],un(s,c=>{l.push(o(c))})):(l={},ue(s,(c,u)=>{i.has(c)||(l[u]=o(c,u))})),l);var l}(n);var n,r,i}var vt=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,o){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!o);else{var s="on"+n,a=e[s];e[s]=function(l,c,u){return function(d){if(d=d||t(y?.event)){var p,h=!0;Me(u)&&(p=u(d));var g=c.call(l,d);return p!==!1&&g!==!1||(h=!1),h}}}(e,r,a)}else U.error("No valid element provided to register_event")}}();function Pc(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}var uh=["localhost","127.0.0.1"],dn=t=>{var e=G?.createElement("a");return Z(e)?null:(e.href=t,e)},mn=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},Dc=function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",i=[];return ue(t,function(o,s){Z(o)||Z(s)||s==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(o)?o.name:o.toString()),n=encodeURIComponent(s),i[i.length]=n+"="+e)}),i.join(r)},Jr=function(t,e){for(var n,r=((t.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===e){n=o;break}}if(!pe(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch{U.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},Kr=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Bc="$people_distinct_id",Fn="__alias",On="__timers",Ea="$autocapture_disabled_server_side",wo="$heatmaps_enabled_server_side",xa="$exception_capture_enabled_server_side",Ta="$web_vitals_enabled_server_side",qc="$dead_clicks_enabled_server_side",Ma="$web_vitals_allowed_metrics",So="$session_recording_enabled_server_side",Ra="$console_log_recording_enabled_server_side",Aa="$session_recording_network_payload_capture",Na="$session_recording_canvas_recording",Fa="$replay_sample_rate",Oa="$replay_minimum_duration",La="$replay_script_config",Qr="$sesid",Ln="$session_is_sampled",Vi="$session_recording_url_trigger_activated_session",Zi="$session_recording_event_trigger_activated_session",on="$enabled_feature_flags",Dr="$early_access_features",Pn="$stored_person_properties",Dt="$stored_group_properties",Co="$surveys",br="$surveys_activated",ei="$flag_call_reported",ut="$user_state",Io="$client_session_props",ko="$capture_rate_limit",Eo="$initial_campaign_params",xo="$initial_referrer_info",To="$initial_person_info",ti="$epp",Hc="__POSTHOG_TOOLBAR__",Pa="$posthog_cklsh",dh=[Bc,Fn,"__cmpns",On,So,wo,Qr,on,ut,Dr,Dt,Pn,Co,ei,Io,ko,Eo,xo,ti];function Mo(t){var e;return t instanceof Element&&(t.id===Hc||!((e=t.closest)===null||e===void 0||!e.call(t,".toolbar-global-fade-container")))}function ir(t){return!!t&&t.nodeType===1}function mt(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function $c(t){return!!t&&t.nodeType===3}function Wc(t){return!!t&&t.nodeType===11}function vs(t){return t?_i(t).split(/\s+/):[]}function Da(t){var e=y?.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function ni(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return vs(e)}function Vc(t){return de(t)?null:_i(t).split(/(\s+)/).filter(e=>_n(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function bi(t){var e="";return Ro(t)&&!Gc(t)&&t.childNodes&&t.childNodes.length&&ue(t.childNodes,function(n){var r;$c(n)&&n.textContent&&(e+=(r=Vc(n.textContent))!==null&&r!==void 0?r:"")}),_i(e)}function fs(t){return Z(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var ri=["a","button","form","input","select","textarea","label"];function Zc(t){var e=t.parentNode;return!(!e||!ir(e))&&e}function hh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!y||!t||mt(t,"html")||!ir(t)||n!=null&&n.url_allowlist&&!Da(n.url_allowlist)||n!=null&&n.url_ignorelist&&Da(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var o=n.dom_event_allowlist;if(o&&!o.some(h=>e.type===h))return!1}for(var s=!1,a=[t],l=!0,c=t;c.parentNode&&!mt(c,"body");)if(Wc(c.parentNode))a.push(c.parentNode.host),c=c.parentNode.host;else{if(!(l=Zc(c)))break;if(r||ri.indexOf(l.tagName.toLowerCase())>-1)s=!0;else{var u=y.getComputedStyle(l);u&&u.getPropertyValue("cursor")==="pointer"&&(s=!0)}a.push(l),c=l}if(!function(h,g){var v=g?.element_allowlist;if(Z(v))return!0;var b=function(m){if(v.some(w=>m.tagName.toLowerCase()===w))return{v:!0}};for(var _ of h){var f=b(_);if(typeof f=="object")return f.v}return!1}(a,n)||!function(h,g){var v=g?.css_selector_allowlist;if(Z(v))return!0;var b=function(m){if(v.some(w=>m.matches(w)))return{v:!0}};for(var _ of h){var f=b(_);if(typeof f=="object")return f.v}return!1}(a,n))return!1;var d=y.getComputedStyle(t);if(d&&d.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var p=t.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return s?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(ri.indexOf(p)>-1||t.getAttribute("contenteditable")==="true")}}function Ro(t){for(var e=t;e.parentNode&&!mt(e,"body");e=e.parentNode){var n=ni(e);if(ee(n,"ph-sensitive")||ee(n,"ph-no-capture"))return!1}if(ee(ni(t),"ph-include"))return!0;var r=t.type||"";if(we(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(we(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function Gc(t){return!!(mt(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||mt(t,"select")||mt(t,"textarea")||t.getAttribute("contenteditable")==="true")}var Uc="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",ph=new RegExp("^(?:".concat(Uc,")$")),gh=new RegExp(Uc),jc="\\d{3}-?\\d{2}-?\\d{4}",vh=new RegExp("^(".concat(jc,")$")),fh=new RegExp("(".concat(jc,")"));function _n(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(de(t)||we(t)&&(t=_i(t),(e?ph:gh).test((t||"").replace(/[- ]/g,""))||(e?vh:fh).test(t)))}function zc(t){var e=bi(t);return _n(e="".concat(e," ").concat(Yc(t)).trim())?e:""}function Yc(t){var e="";return t&&t.childNodes&&t.childNodes.length&&ue(t.childNodes,function(n){var r;if(n&&((r=n.tagName)===null||r===void 0?void 0:r.toLowerCase())==="span")try{var i=bi(n);e="".concat(e," ").concat(i).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(Yc(n)).trim())}catch(o){U.error("[AutoCapture]",o)}}),e}function mh(t){return function(e){var n=e.map(r=>{var i,o,s="";if(r.tag_name&&(s+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))s+=".".concat(a.replace(/"/g,""));var l=C(C(C(C({},r.text?{text:r.text}:{}),{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(o=r.nth_of_type)!==null&&o!==void 0?o:0},r.href?{href:r.href}:{}),r.attr_id?{attr_id:r.attr_id}:{}),r.attributes),c={};return Pr(l).sort((u,d)=>{var[p]=u,[h]=d;return p.localeCompare(h)}).forEach(u=>{var[d,p]=u;return c[Ba(d.toString())]=Ba(p.toString())}),s+=":",s+=Pr(l).map(u=>{var[d,p]=u;return"".concat(d,'="').concat(p,'"')}).join("")});return n.join(";")}(function(e){return e.map(n=>{var r,i,o={text:(r=n.$el_text)===null||r===void 0?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)===null||i===void 0?void 0:i.slice(0,2048),attr_class:_h(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Pr(n).filter(s=>{var[a]=s;return a.indexOf("attr__")===0}).forEach(s=>{var[a,l]=s;return o.attributes[a]=l}),o})}(t))}function Ba(t){return t.replace(/"|\\"/g,'\\"')}function _h(t){var e=t.attr__class;return e?pe(e)?e:vs(e):void 0}var Ao="[SessionRecording]",No="redacted",sn={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},yh=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],bh=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],wh=["/s/","/e/","/i/"];function qa(t,e,n,r){if(de(t))return t;var i=e?.["content-length"]||function(o){return new Blob([o]).size}(t);return we(i)&&(i=parseInt(i)),i>n?Ao+" ".concat(r," body too large to record (").concat(i," bytes)"):t}function Ha(t,e){if(de(t))return t;var n=t;return _n(n,!1)||(n=Ao+" "+e+" body "+No),ue(bh,r=>{var i,o;(i=n)!==null&&i!==void 0&&i.length&&((o=n)===null||o===void 0?void 0:o.indexOf(r))!==-1&&(n=Ao+" "+e+" body "+No+" as might contain: "+r)}),n}var Sh=(t,e)=>{var n,r,i,o={payloadSizeLimitBytes:sn.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...sn.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...sn.payloadHostDenyList]},s=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=o,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),p=>(p!=null&&p.requestBody&&(p.requestBody=qa(p.requestBody,p.requestHeaders,i,"Request")),p!=null&&p.responseBody&&(p.responseBody=qa(p.responseBody,p.responseHeaders,i,"Response")),p)),u=p=>{return c(((v,b)=>{var _,f=dn(v.name),m=b.indexOf("http")===0?(_=dn(b))===null||_===void 0?void 0:_.pathname:b;m==="/"&&(m="");var w=f?.pathname.replace(m||"","");if(!(f&&w&&wh.some(S=>w.indexOf(S)===0)))return v})((g=(h=p).requestHeaders,de(g)||ue(Object.keys(g??{}),v=>{yh.includes(v.toLowerCase())&&(g[v]=No)}),h),t.api_host));var h,g},d=Me(t.session_recording.maskNetworkRequestFn);return d&&Me(t.session_recording.maskCapturedNetworkRequestFn)&&U.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=p=>{var h=t.session_recording.maskNetworkRequestFn({url:p.name});return C(C({},p),{},{name:h?.url})}),o.maskRequestFn=Me(t.session_recording.maskCapturedNetworkRequestFn)?p=>{var h,g,v,b=u(p);return b&&(h=(g=(v=t.session_recording).maskCapturedNetworkRequestFn)===null||g===void 0?void 0:g.call(v,b))!==null&&h!==void 0?h:void 0}:p=>function(h){if(!Z(h))return h.requestBody=Ha(h.requestBody,"Request"),h.responseBody=Ha(h.responseBody,"Response"),h}(u(p)),C(C(C({},sn),o),{},{recordHeaders:s,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function ii(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],i=n(r);return Me(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}function ms(t,e){var n,r=function(s){try{return typeof s=="string"?new URL(s).hostname:"url"in s?new URL(s.url).hostname:s.hostname}catch{return null}}(t),i={hostname:r,isHostDenied:!1};if((n=e.payloadHostDenyList)===null||n===void 0||!n.length||r==null||!r.trim().length)return i;for(var o of e.payloadHostDenyList)if(r.endsWith(o))return{hostname:r,isHostDenied:!0};return i}var Xc=Re("[Recorder]"),$a=t=>t.entryType==="navigation",Fo=t=>t.entryType==="resource";function Ch(t,e,n){if(n.recordInitialRequests){var r=e.performance.getEntries().filter(s=>$a(s)||Fo(s)&&n.initiatorTypes.includes(s.initiatorType));t({requests:r.flatMap(s=>ai({entry:s,method:void 0,status:void 0,networkRequest:{},isInitial:!0})),isInitial:!0})}var i=new e.PerformanceObserver(s=>{var a=s.getEntries().filter(l=>$a(l)||Fo(l)&&n.initiatorTypes.includes(l.initiatorType)&&(c=>!n.recordBody&&!n.recordHeaders||c.initiatorType!=="xmlhttprequest"&&c.initiatorType!=="fetch")(l));t({requests:a.flatMap(l=>ai({entry:l,method:void 0,status:void 0,networkRequest:{}}))})}),o=PerformanceObserver.supportedEntryTypes.filter(s=>n.performanceEntryTypeToObserve.includes(s));return i.observe({entryTypes:o}),()=>{i.disconnect()}}function oi(t,e){return!!e&&(nt(e)||e[t])}function si(t){var{type:e,recordBody:n,headers:r}=t;function i(s){var a=Object.keys(r).find(c=>c.toLowerCase()==="content-type"),l=a&&r[a];return s.some(c=>l?.includes(c))}if(!n)return!1;if(nt(n))return!0;if(pe(n))return i(n);var o=n[e];return nt(o)?o:i(o)}function _s(t,e,n,r,i){return Oo.apply(this,arguments)}function Oo(){return Oo=Cn(function*(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o>10)return Xc.warn("Failed to get performance entry for request",{url:n,initiatorType:e}),null;var s=function(a,l){for(var c=a.length-1;c>=0;c-=1)if(l(a[c]))return a[c]}(t.performance.getEntriesByName(n),a=>Fo(a)&&a.initiatorType===e&&(Z(r)||a.startTime>=r)&&(Z(i)||a.startTime<=i));return s||(yield new Promise(a=>setTimeout(a,50*o)),_s(t,e,n,r,i,o+1))}),Oo.apply(this,arguments)}function Wa(t){var{body:e,options:n,url:r}=t;if(de(e))return null;var{hostname:i,isHostDenied:o}=ms(r,n);if(o)return i+" is in deny list";if(we(e))return e;if(sh(e))return e.textContent;if(Oc(e))return Dc(e);if(fe(e))try{return JSON.stringify(e)}catch{return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(e)}var Ih=t=>!Ne(t)&&(t.entryType==="navigation"||t.entryType==="resource");function ai(t){var{entry:e,method:n,status:r,networkRequest:i,isInitial:o,start:s,end:a,url:l,initiatorType:c}=t;s=e?e.startTime:s,a=e?e.responseEnd:a;var u=Math.floor(Date.now()-performance.now()),d=Math.floor(u+(s||0)),p=[C(C({},e?e.toJSON():{name:l}),{},{startTime:Z(s)?void 0:Math.round(s),endTime:Z(a)?void 0:Math.round(a),timeOrigin:u,timestamp:d,method:n,initiatorType:c||(e?e.initiatorType:void 0),status:r,requestHeaders:i.requestHeaders,requestBody:i.requestBody,responseHeaders:i.responseHeaders,responseBody:i.responseBody,isInitial:o})];if(Ih(e))for(var h of e.serverTiming||[])p.push({timeOrigin:u,timestamp:d,startTime:Math.round(e.startTime),name:h.name,duration:h.duration,entryType:"serverTiming"});return p}var kh=["video/","audio/"];function Jc(t){return new Promise((e,n)=>{var r=setTimeout(()=>e("[SessionReplay] Timeout while trying to read body"),500);try{t.clone().text().then(i=>e(i),i=>n(i)).finally(()=>clearTimeout(r))}catch{clearTimeout(r),e("[SessionReplay] Failed to read body")}})}function Lo(){return Lo=Cn(function*(t){var{r:e,options:n,url:r}=t,{hostname:i,isHostDenied:o}=ms(r,n);return o?Promise.resolve(i+" is in deny list"):Jc(e)}),Lo.apply(this,arguments)}function Po(){return Po=Cn(function*(t){var{r:e,options:n,url:r}=t,i=function(o){var s,{r:a,options:l,url:c}=o;if(a.headers.get("Transfer-Encoding")==="chunked")return"Chunked Transfer-Encoding is not supported";var u=(s=a.headers.get("Content-Type"))===null||s===void 0?void 0:s.toLowerCase(),d=kh.some(g=>u?.startsWith(g));if(u&&d)return"Content-Type ".concat(u," is not supported");var{hostname:p,isHostDenied:h}=ms(c,l);return h?p+" is in deny list":null}({r:e,options:n,url:r});return Ne(i)?Jc(e):Promise.resolve(i)}),Po.apply(this,arguments)}function Eh(t,e,n){if(!n.initiatorTypes.includes("fetch"))return()=>{};var r=oi("request",n.recordHeaders),i=oi("response",n.recordHeaders),o=ii(e,"fetch",s=>function(){var a=Cn(function*(l,c){var u,d,p,h=new Request(l,c),g={};try{var v={};h.headers.forEach((_,f)=>{v[f]=_}),r&&(g.requestHeaders=v),si({type:"request",headers:v,url:l,recordBody:n.recordBody})&&(g.requestBody=yield function(_){return Lo.apply(this,arguments)}({r:h,options:n,url:l})),d=e.performance.now(),u=yield s(h),p=e.performance.now();var b={};return u.headers.forEach((_,f)=>{b[f]=_}),i&&(g.responseHeaders=b),si({type:"response",headers:b,url:l,recordBody:n.recordBody})&&(g.responseBody=yield function(_){return Po.apply(this,arguments)}({r:u,options:n,url:l})),u}finally{_s(e,"fetch",h.url,d,p).then(_=>{var f,m=ai({entry:_,method:h.method,status:(f=u)===null||f===void 0?void 0:f.status,networkRequest:g,start:d,end:p,url:h.url,initiatorType:"fetch"});t({requests:m})}).catch(()=>{})}});return function(l,c){return a.apply(this,arguments)}}());return()=>{o()}}var Va=null;function xh(t,e,n){if(!("performance"in e))return()=>{};if(Va)return Xc.warn("Network observer already initialised, doing nothing"),()=>{};var r=n?Object.assign({},sn,n):sn,i=l=>{var c=[];l.requests.forEach(u=>{var d=r.maskRequestFn(u);d&&c.push(d)}),c.length>0&&t(C(C({},l),{},{requests:c}))},o=Ch(i,e,r),s=()=>{},a=()=>{};return(r.recordHeaders||r.recordBody)&&(s=function(l,c,u){if(!u.initiatorTypes.includes("xmlhttprequest"))return()=>{};var d=oi("request",u.recordHeaders),p=oi("response",u.recordHeaders),h=ii(c.XMLHttpRequest.prototype,"open",g=>function(v,b){var _,f,m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=arguments.length>3?arguments[3]:void 0,S=arguments.length>4?arguments[4]:void 0,I=this,E=new Request(b),k={},x={},T=I.setRequestHeader.bind(I);I.setRequestHeader=(M,W)=>(x[M]=W,T(M,W)),d&&(k.requestHeaders=x);var D=I.send.bind(I);I.send=M=>(si({type:"request",headers:x,url:b,recordBody:u.recordBody})&&(k.requestBody=Wa({body:M,options:u,url:b})),_=c.performance.now(),D(M)),I.addEventListener("readystatechange",()=>{if(I.readyState===I.DONE){f=c.performance.now();var M={};I.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(W=>{var $=W.split(": "),P=$.shift(),V=$.join(": ");P&&(M[P]=V)}),p&&(k.responseHeaders=M),si({type:"response",headers:M,url:b,recordBody:u.recordBody})&&(k.responseBody=Wa({body:I.response,options:u,url:b})),_s(c,"xmlhttprequest",E.url,_,f).then(W=>{var $=ai({entry:W,method:v,status:I?.status,networkRequest:k,start:_,end:f,url:b.toString(),initiatorType:"xmlhttprequest"});l({requests:$})}).catch(()=>{})}}),g.call(I,v,b,m,w,S)});return()=>{h()}}(i,e,r),a=Eh(i,e,r)),Va=()=>{o(),s(),a()}}var Vn,ye,Ge,Za=t=>({name:"rrweb/network@1",observer:xh,options:t});B.__PosthogExtensions__=B.__PosthogExtensions__||{},B.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:wa,getRecordNetworkPlugin:Za},B.__PosthogExtensions__.rrweb={record:nn,version:"v2"},B.rrweb={record:nn,version:"v2"},B.rrwebConsoleRecord={getRecordConsolePlugin:wa},B.getRecordNetworkPlugin=Za,function(t){t.Popover="popover",t.API="api",t.Widget="widget"}(Vn||(Vn={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(ye||(ye={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(Ge||(Ge={}));var or,Q,Kc,Bt,Ga,Qc,Do,eu,Jn={},tu=[],Th=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bo=Array.isArray;function ft(t,e){for(var n in e)t[n]=e[n];return t}function nu(t){var e=t.parentNode;e&&e.removeChild(t)}function ys(t,e,n){var r,i,o,s={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?or.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return Zn(t,s,r,i,null)}function Zn(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++Kc,__i:-1,__u:0};return i==null&&Q.vnode!=null&&Q.vnode(o),o}function ot(t){return t.children}function Br(t,e){this.props=t,this.context=e}function yn(t,e){if(e==null)return t.__?yn(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?yn(t):null}function ru(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ru(t)}}function qo(t){(!t.__d&&(t.__d=!0)&&Bt.push(t)&&!li.__r++||Ga!==Q.debounceRendering)&&((Ga=Q.debounceRendering)||Qc)(li)}function li(){var t,e,n,r,i,o,s,a,l;for(Bt.sort(Do);t=Bt.shift();)t.__d&&(e=Bt.length,r=void 0,o=(i=(n=t).__v).__e,a=[],l=[],(s=n.__P)&&((r=ft({},i)).__v=i.__v+1,Q.vnode&&Q.vnode(r),bs(s,r,i,n.__n,s.ownerSVGElement!==void 0,32&i.__u?[o]:null,a,o??yn(i),!!(32&i.__u),l),r.__.__k[r.__i]=r,ou(a,r,l),r.__e!=o&&ru(r)),Bt.length>e&&Bt.sort(Do));li.__r=0}function Ua(t,e,n,r,i,o,s,a,l,c,u){var d,p,h,g,v,b=r&&r.__k||tu,_=e.length;for(n.__d=l,function(f,m,w){var S,I,E,k,x,T=m.length,D=w.length,M=D,W=0;for(f.__k=[],S=0;S<T;S++)(I=f.__k[S]=(I=m[S])==null||typeof I=="boolean"||typeof I=="function"?null:typeof I=="string"||typeof I=="number"||typeof I=="bigint"||I.constructor==String?Zn(null,I,null,null,I):Bo(I)?Zn(ot,{children:I},null,null,null):I.constructor===void 0&&I.__b>0?Zn(I.type,I.props,I.key,I.ref?I.ref:null,I.__v):I)!=null?(I.__=f,I.__b=f.__b+1,x=Mh(I,w,k=S+W,M),I.__i=x,E=null,x!==-1&&(M--,(E=w[x])&&(E.__u|=131072)),E==null||E.__v===null?(x==-1&&W--,typeof I.type!="function"&&(I.__u|=65536)):x!==k&&(x===k+1?W++:x>k?M>T-k?W+=x-k:W--:W=x<k&&x==k-1?x-k:0,x!==S+W&&(I.__u|=65536))):(E=w[S])&&E.key==null&&E.__e&&(E.__e==f.__d&&(f.__d=yn(E)),Ho(E,E,!1),w[S]=null,M--);if(M)for(S=0;S<D;S++)(E=w[S])!=null&&!(131072&E.__u)&&(E.__e==f.__d&&(f.__d=yn(E)),Ho(E,E))}(n,e,b),l=n.__d,d=0;d<_;d++)(h=n.__k[d])!=null&&typeof h!="boolean"&&typeof h!="function"&&(p=h.__i===-1?Jn:b[h.__i]||Jn,h.__i=d,bs(t,h,p,i,o,s,a,l,c,u),g=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&ws(p.ref,null,h),u.push(h.ref,h.__c||g,h)),v==null&&g!=null&&(v=g),65536&h.__u||p.__k===h.__k?l=iu(h,l,t):typeof h.type=="function"&&h.__d!==void 0?l=h.__d:g&&(l=g.nextSibling),h.__d=void 0,h.__u&=-196609);n.__d=l,n.__e=v}function iu(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=iu(r[i],e,n));return e}return t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function Mh(t,e,n,r){var i=t.key,o=t.type,s=n-1,a=n+1,l=e[n];if(l===null||l&&i==l.key&&o===l.type)return n;if(r>(l!=null&&!(131072&l.__u)?1:0))for(;s>=0||a<e.length;){if(s>=0){if((l=e[s])&&!(131072&l.__u)&&i==l.key&&o===l.type)return s;s--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&i==l.key&&o===l.type)return a;a++}}return-1}function ja(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Th.test(e)?n:n+"px"}function wr(t,e,n,r,i){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||ja(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||ja(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=Date.now(),t.addEventListener(e,o?Ya:za,o)):t.removeEventListener(e,o?Ya:za,o);else{if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function za(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(Q.event?Q.event(t):t)}function Ya(t){return this.l[t.type+!0](Q.event?Q.event(t):t)}function bs(t,e,n,r,i,o,s,a,l,c){var u,d,p,h,g,v,b,_,f,m,w,S,I,E,k,x=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=e.__e=n.__e]),(u=Q.__b)&&u(e);e:if(typeof x=="function")try{if(_=e.props,f=(u=x.contextType)&&r[u.__c],m=u?f?f.props.value:u.__:r,n.__c?b=(d=e.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?e.__c=d=new x(_,m):(e.__c=d=new Br(_,m),d.constructor=x,d.render=Rh),f&&f.sub(d),d.props=_,d.state||(d.state={}),d.context=m,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),x.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=ft({},d.__s)),ft(d.__s,x.getDerivedStateFromProps(_,d.__s))),h=d.props,g=d.state,d.__v=e,p)x.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(x.getDerivedStateFromProps==null&&_!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(_,m),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(_,d.__s,m)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(T){T&&(T.__=e)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&s.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(_,d.__s,m),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,g,v)})}if(d.context=m,d.props=_,d.__P=t,d.__e=!1,S=Q.__r,I=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(e),u=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,S&&S(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++I<25);d.state=d.__s,d.getChildContext!=null&&(r=ft(ft({},r),d.getChildContext())),p||d.getSnapshotBeforeUpdate==null||(v=d.getSnapshotBeforeUpdate(h,g)),Ua(t,Bo(k=u!=null&&u.type===ot&&u.key==null?u.props.children:u)?k:[k],e,n,r,i,o,s,a,l,c),d.base=e.__e,e.__u&=-161,d.__h.length&&s.push(d),b&&(d.__E=d.__=null)}catch(T){e.__v=null,l||o!=null?(e.__e=a,e.__u|=l?160:32,o[o.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),Q.__e(T,e,n)}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(T,D,M,W,$,P,V,L,O){var N,Y,j,R,H,te,ae,X=M.props,le=D.props,ce=D.type;if(ce==="svg"&&($=!0),P!=null){for(N=0;N<P.length;N++)if((H=P[N])&&"setAttribute"in H==!!ce&&(ce?H.localName===ce:H.nodeType===3)){T=H,P[N]=null;break}}if(T==null){if(ce===null)return document.createTextNode(le);T=$?document.createElementNS("http://www.w3.org/2000/svg",ce):document.createElement(ce,le.is&&le),P=null,L=!1}if(ce===null)X===le||L&&T.data===le||(T.data=le);else{if(P=P&&or.call(T.childNodes),X=M.props||Jn,!L&&P!=null)for(X={},N=0;N<T.attributes.length;N++)X[(H=T.attributes[N]).name]=H.value;for(N in X)H=X[N],N=="children"||(N=="dangerouslySetInnerHTML"?j=H:N==="key"||N in le||wr(T,N,null,H,$));for(N in le)H=le[N],N=="children"?R=H:N=="dangerouslySetInnerHTML"?Y=H:N=="value"?te=H:N=="checked"?ae=H:N==="key"||L&&typeof H!="function"||X[N]===H||wr(T,N,H,X[N],$);if(Y)L||j&&(Y.__html===j.__html||Y.__html===T.innerHTML)||(T.innerHTML=Y.__html),D.__k=[];else if(j&&(T.innerHTML=""),Ua(T,Bo(R)?R:[R],D,M,W,$&&ce!=="foreignObject",P,V,P?P[0]:M.__k&&yn(M,0),L,O),P!=null)for(N=P.length;N--;)P[N]!=null&&nu(P[N]);L||(N="value",te!==void 0&&(te!==T[N]||ce==="progress"&&!te||ce==="option"&&te!==X[N])&&wr(T,N,te,X[N],!1),N="checked",ae!==void 0&&ae!==T[N]&&wr(T,N,ae,X[N],!1))}return T}(n.__e,e,n,r,i,o,s,l,c);(u=Q.diffed)&&u(e)}function ou(t,e,n){e.__d=void 0;for(var r=0;r<n.length;r++)ws(n[r],n[++r],n[++r]);Q.__c&&Q.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){Q.__e(o,i.__v)}})}function ws(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){Q.__e(r,n)}}function Ho(t,e,n){var r,i;if(Q.unmount&&Q.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ws(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Q.__e(o,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Ho(r[i],e,n||typeof t.type!="function");n||t.__e==null||nu(t.__e),t.__=t.__e=t.__d=void 0}function Rh(t,e,n){return this.constructor(t,n)}function Gi(t,e,n){var r,i,o,s;Q.__&&Q.__(t,e),i=(r=typeof n=="function")?null:e.__k,o=[],s=[],bs(e,t=(!r&&n||e).__k=ys(ot,null,[t]),i||Jn,Jn,e.ownerSVGElement!==void 0,!r&&n?[n]:i?null:e.firstChild?or.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r,s),ou(o,t,s)}function Ah(t,e,n){var r,i,o,s,a=ft({},t.props);for(o in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o]===void 0&&s!==void 0?s[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?or.call(arguments,2):n),Zn(t.type,a,r||t.key,i||t.ref,null)}or=tu.slice,Q={__e:function(t,e,n,r){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),s=i.__d),s)return i.__E=i}catch(a){t=a}throw t}},Kc=0,Br.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ft({},this.state),typeof t=="function"&&(t=t(ft({},n),this.props)),t&&ft(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),qo(this))},Br.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),qo(this))},Br.prototype.render=ot,Bt=[],Qc=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Do=function(t,e){return t.__v.__b-e.__v.__b},li.__r=0,eu=0;var Ss=y,Ui=G,$o="seenSurvey_",Xa=t=>`
          .survey-form, .thank-you-message {
              position: fixed;
              margin: 0px;
              bottom: 0px;
              color: black;
              font-weight: normal;
              font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              text-align: left;
              max-width: `.concat(parseInt(t?.maxWidth||"300"),`px;
              width: 100%;
              z-index: `).concat(parseInt(t?.zIndex||"99999"),`;
              border: 1.5px solid `).concat(t?.borderColor||"#c9c6c6",`;
              border-bottom: 0px;
              `).concat({left:"left: 30px;",right:"right: 30px;",center:`
            left: 50%;
            transform: translateX(-50%);
          `}[t?.position||"right"]||"right: 30px;",`
              flex-direction: column;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
              border-top-left-radius: 10px;
              border-top-right-radius: 10px;
              box-shadow: -6px 0 16px -8px rgb(0 0 0 / 8%), -9px 0 28px 0 rgb(0 0 0 / 5%), -12px 0 48px 16px rgb(0 0 0 / 3%);
          }
          
          .survey-box, .thank-you-message-container {
              padding: 20px 25px 10px;
              display: flex;
              flex-direction: column;
              border-radius: 10px;
          }

          .thank-you-message {
              text-align: center;
          }

          .form-submit[disabled] {
              opacity: 0.6;
              filter: grayscale(50%);
              cursor: not-allowed;
          }
          .survey-form textarea {
              color: #2d2d2d;
              font-size: 14px;
              font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              background: white;
              color: black;
              outline: none;
              padding-left: 10px;
              padding-right: 10px;
              padding-top: 10px;
              border-radius: 6px;
              border-color: `).concat(t?.borderColor||"#c9c6c6",`;
              margin-top: 14px;
              width: 100%;
              box-sizing: border-box;
          }
          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) textarea {
              margin-top: 0;
          }
          .form-submit {
              box-sizing: border-box;
              margin: 0;
              font-family: inherit;
              overflow: visible;
              text-transform: none;
              position: relative;
              display: inline-block;
              font-weight: 700;
              white-space: nowrap;
              text-align: center;
              border: 1.5px solid transparent;
              cursor: pointer;
              user-select: none;
              touch-action: manipulation;
              padding: 12px;
              font-size: 14px;
              border-radius: 6px;
              outline: 0;
              background: `).concat(t?.submitButtonColor||"black",` !important;
              text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
              box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
              width: 100%;
          }
          .form-cancel {
              display: flex;
              float: right;
              border: none;
              background: none;
              cursor: pointer;
          }
          .cancel-btn-wrapper {
              position: absolute;
              width: 35px;
              height: 35px;
              border-radius: 100%;
              top: 0;
              right: 0;
              transform: translate(50%, -50%);
              background: white;
              border: 1.5px solid `).concat(t?.borderColor||"#c9c6c6",`;
              display: flex;
              justify-content: center;
              align-items: center;
          }
          .bolded { font-weight: 600; }
          .buttons {
              display: flex;
              justify-content: center;
          }
          .footer-branding {
              font-size: 11px;
              margin-top: 10px;
              text-align: center;
              display: flex;
              justify-content: center;
              gap: 4px;
              align-items: center;
              font-weight: 500;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
              text-decoration: none;
              backgroundColor: `).concat(t?.backgroundColor||"#eeeded",`;
              color: `).concat(sr(t?.backgroundColor||"#eeeded"),`;
          }
          .survey-question {
              font-weight: 500;
              font-size: 14px;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
          }
          .question-textarea-wrapper {
              display: flex;
              flex-direction: column;
          }
          .survey-question-description {
              font-size: 13px;
              padding-top: 5px;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
          }
          .ratings-number {
              font-size: 16px;
              font-weight: 600;
              padding: 8px 0px;
              border: none;
          }
          .ratings-number:hover {
              cursor: pointer;
          }
          .rating-options {
              margin-top: 14px;
          }
          .rating-options-number {
              display: grid;
              border-radius: 6px;
              overflow: hidden;
              border: 1.5px solid `).concat(t?.borderColor||"#c9c6c6",`;
          }
          .rating-options-number > .ratings-number {
              border-right: 1px solid `).concat(t?.borderColor||"#c9c6c6",`;
          }
          .rating-options-number > .ratings-number:last-of-type {
              border-right: 0px;
          }
          .rating-options-number .rating-active {
              background: `).concat(t?.ratingButtonActiveColor||"black",`;
          }
          .rating-options-emoji {
              display: flex;
              justify-content: space-between;
          }
          .ratings-emoji {
              font-size: 16px;
              background-color: transparent;
              border: none;
              padding: 0px;
          }
          .ratings-emoji:hover {
              cursor: pointer;
          }
          .ratings-emoji.rating-active svg {
              fill: `).concat(t?.ratingButtonActiveColor||"black",`;
          }
          .emoji-svg {
              fill: '#939393';
          }
          .rating-text {
              display: flex;
              flex-direction: row;
              font-size: 11px;
              justify-content: space-between;
              margin-top: 6px;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
              opacity: .60;
          }
          .multiple-choice-options {
              margin-top: 13px;
              font-size: 14px;
          }
          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) .multiple-choice-options {
              margin-top: 0;
          }
          .multiple-choice-options .choice-option {
              display: flex;
              align-items: center;
              gap: 4px;
              font-size: 13px;
              cursor: pointer;
              margin-bottom: 5px;
              position: relative;
          }
          .multiple-choice-options > .choice-option:last-of-type {
              margin-bottom: 0px;
          }
          .multiple-choice-options input {
              cursor: pointer;
              position: absolute;
              opacity: 0;
          }
          .choice-check {
              position: absolute;
              right: 10px;
              background: white;
          }
          .choice-check svg {
              display: none;
          }
          .multiple-choice-options .choice-option:hover .choice-check svg {
              display: inline-block;
              opacity: .25;
          }
          .multiple-choice-options input:checked + label + .choice-check svg {
              display: inline-block;
              opacity: 100% !important;
          }
          .multiple-choice-options input:checked + label {
              font-weight: bold;
              border: 1.5px solid rgba(0,0,0);
          }
          .multiple-choice-options input:checked + label input {
              font-weight: bold;
          }
          .multiple-choice-options label {
              width: 100%;
              cursor: pointer;
              padding: 10px;
              border: 1.5px solid rgba(0,0,0,.25);
              border-radius: 4px;
              background: white;
          }
          .multiple-choice-options .choice-option-open label {
              padding-right: 30px;
              display: flex;
              flex-wrap: wrap;
              gap: 8px;
              max-width: 100%;
          }
          .multiple-choice-options .choice-option-open label span {
              width: 100%;
          }
          .multiple-choice-options .choice-option-open input:disabled + label {
              opacity: 0.6;
          }
          .multiple-choice-options .choice-option-open label input {
              position: relative;
              opacity: 1;
              flex-grow: 1;
              border: 0;
              outline: 0;
          }
          .thank-you-message-body {
              margin-top: 6px;
              font-size: 14px;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
          }
          .thank-you-message-header {
              margin: 10px 0px 0px;
              background: `).concat(t?.backgroundColor||"#eeeded",`;
          }
          .thank-you-message-container .form-submit {
              margin-top: 20px;
              margin-bottom: 10px;
          }
          .thank-you-message-countdown {
              margin-left: 6px;
          }
          .bottom-section {
              margin-top: 14px;
          }
          `);function Ja(t){if(t[0]==="#"){var e=t.replace(/^#/,"");return"rgb("+parseInt(e.slice(0,2),16)+","+parseInt(e.slice(2,4),16)+","+parseInt(e.slice(4,6),16)+")"}return"rgb(255, 255, 255)"}function sr(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nh;e[0]==="#"&&(t=Ja(e)),e.startsWith("rgb")&&(t=e);var n=function(a){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[a.toLowerCase()]}(e);if(n&&(t=Ja(n)),!t)return"black";var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(r){var i=parseInt(r[1]),o=parseInt(r[2]),s=parseInt(r[3]);return Math.sqrt(i*i*.299+o*o*.587+s*s*.114)>127.5?"black":"white"}return"black"}var Wt={backgroundColor:"#eeeded",submitButtonColor:"black",submitButtonTextColor:"white",ratingButtonColor:"white",ratingButtonActiveColor:"black",borderColor:"#c9c6c6",placeholder:"Start typing...",whiteLabel:!1,displayThankYouMessage:!0,thankYouMessageHeader:"Thank you for your feedback!",position:"right"},Nh="#eeeded",Ka=function(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;r&&(localStorage.setItem(Cs(n),"true"),r.capture("survey sent",C(C({$survey_name:n.name,$survey_id:n.id,$survey_iteration:n.current_iteration,$survey_iteration_start_date:n.current_iteration_start_date,$survey_questions:n.questions.map(i=>i.question),sessionRecordingUrl:(t=r.get_session_replay_url)===null||t===void 0?void 0:t.call(r)},e),{},{$set:{[cu(n,"responded")]:!0}})),Ss.dispatchEvent(new Event("PHSurveySent")))},Fh=(t,e,n)=>{var r;!n&&e&&(e.capture("survey dismissed",{$survey_name:t.name,$survey_id:t.id,$survey_iteration:t.current_iteration,$survey_iteration_start_date:t.current_iteration_start_date,sessionRecordingUrl:(r=e.get_session_replay_url)===null||r===void 0?void 0:r.call(e),$set:{[cu(t,"dismissed")]:!0}}),localStorage.setItem(Cs(t),"true"),Ss.dispatchEvent(new Event("PHSurveyClosed")))},su=t=>t.map(e=>({sort:Math.floor(10*Math.random()),value:e})).sort((e,n)=>e.sort-n.sort).map(e=>e.value),au=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r])?e.reverse():e,Oh=t=>(t.questions.forEach((e,n)=>{e.originalQuestionIndex=n}),t.appearance&&t.appearance.shuffleQuestions?au(t.questions,su(t.questions)):t.questions),lu=t=>{var e,n;return!((e=t.conditions)===null||e===void 0||(n=e.events)===null||n===void 0||!n.repeatedActivation||!(r=>{var i,o,s,a,l,c;return((i=r.conditions)===null||i===void 0||(o=i.events)===null||o===void 0||(s=o.values)===null||s===void 0?void 0:s.length)!=null&&((a=r.conditions)===null||a===void 0||(l=a.events)===null||l===void 0||(c=l.values)===null||c===void 0?void 0:c.length)>0})(t))},Cs=t=>{var e="".concat($o).concat(t.id);return t.current_iteration&&t.current_iteration>0&&(e="".concat($o).concat(t.id,"_").concat(t.current_iteration)),e},cu=(t,e)=>{var n="$survey_".concat(e,"/").concat(t.id);return t.current_iteration&&t.current_iteration>0&&(n="$survey_".concat(e,"/").concat(t.id,"/").concat(t.current_iteration)),n},In=function(t,e){var n={__c:e="__cC"+eu++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,o;return this.getChildContext||(i=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&i.some(function(a){a.__e=!0,qo(a)})},this.sub=function(s){i.push(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){i.splice(i.indexOf(s),1),a&&a.call(s)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0}),uu=t=>{var{component:e,children:n,renderAsHtml:r,style:i}=t;return Ah(e,r?{dangerouslySetInnerHTML:{__html:n},style:i}:{children:n,style:i})},ji=G,bn,ve,zi,Qa,ci=0,du=[],qr=[],el=Q.__b,tl=Q.__r,nl=Q.diffed,rl=Q.__c,il=Q.unmount;function wi(t,e){Q.__h&&Q.__h(ve,t,ci||e),ci=0;var n=ve.__H||(ve.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:qr}),n.__[t]}function je(t){return ci=1,function(e,n,r){var i=wi(bn++,2);if(i.t=e,!i.__c&&(i.__=[sl(void 0,n),function(l){var c=i.__N?i.__N[0]:i.__[0],u=i.t(c,l);c!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=ve,!ve.u)){var o=function(l,c,u){if(!i.__c.__H)return!0;var d=i.__c.__H.__.filter(function(h){return h.__c});if(d.every(function(h){return!h.__N}))return!s||s.call(this,l,c,u);var p=!1;return d.forEach(function(h){if(h.__N){var g=h.__[0];h.__=h.__N,h.__N=void 0,g!==h.__[0]&&(p=!0)}}),!(!p&&i.__c.props===l)&&(!s||s.call(this,l,c,u))};ve.u=!0;var s=ve.shouldComponentUpdate,a=ve.componentWillUpdate;ve.componentWillUpdate=function(l,c,u){if(this.__e){var d=s;s=void 0,o(l,c,u),s=d}a&&a.call(this,l,c,u)},ve.shouldComponentUpdate=o}return i.__N||i.__}(sl,t)}function Si(t,e){var n=wi(bn++,3);!Q.__s&&hu(n.__H,e)&&(n.__=t,n.i=e,ve.__H.__h.push(n))}function Ci(t){return ci=5,Is(function(){return{current:t}},[])}function Is(t,e){var n=wi(bn++,7);return hu(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function ar(t){var e=ve.context[t.__c],n=wi(bn++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(ve)),e.props.value):t.__}function Lh(){for(var t;t=du.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Hr),t.__H.__h.forEach(Wo),t.__H.__h=[]}catch(e){t.__H.__h=[],Q.__e(e,t.__v)}}Q.__b=function(t){ve=null,el&&el(t)},Q.__r=function(t){tl&&tl(t),bn=0;var e=(ve=t.__c).__H;e&&(zi===ve?(e.__h=[],ve.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=qr,n.__N=n.i=void 0})):(e.__h.forEach(Hr),e.__h.forEach(Wo),e.__h=[],bn=0)),zi=ve},Q.diffed=function(t){nl&&nl(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(du.push(e)!==1&&Qa===Q.requestAnimationFrame||((Qa=Q.requestAnimationFrame)||Ph)(Lh)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==qr&&(n.__=n.__V),n.i=void 0,n.__V=qr})),zi=ve=null},Q.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Hr),n.__h=n.__h.filter(function(r){return!r.__||Wo(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Q.__e(r,n.__v)}}),rl&&rl(t,e)},Q.unmount=function(t){il&&il(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Hr(r)}catch(i){e=i}}),n.__H=void 0,e&&Q.__e(e,n.__v))};var ol=typeof requestAnimationFrame=="function";function Ph(t){var e,n=function(){clearTimeout(r),ol&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);ol&&(e=requestAnimationFrame(n))}function Hr(t){var e=ve,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),ve=e}function Wo(t){var e=ve;t.__c=t.__(),ve=e}function hu(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function sl(t,e){return typeof e=="function"?e(t):e}var Dh=0;function F(t,e,n,r,i,o){var s,a,l={};for(a in e)a=="ref"?s=e[a]:l[a]=e[a];var c={type:t,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Dh,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return Q.vnode&&Q.vnode(c),c}var pu=F("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:F("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),gu=F("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:F("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),vu=F("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:F("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Bh=F("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:F("path",{d:"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z"})}),qh=F("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:F("path",{d:"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Hh=F("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z",fill:"black"})}),$h=F("svg",{width:"77",height:"14",viewBox:"0 0 77 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[F("g",{"clip-path":"url(#clip0_2415_6911)",children:[F("mask",{id:"mask0_2415_6911",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"77",height:"14",children:F("path",{d:"M0.5 0H76.5V14H0.5V0Z",fill:"white"})}),F("g",{mask:"url(#mask0_2415_6911)",children:[F("path",{d:"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z",fill:"#1D4AFF"}),F("path",{d:"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z",fill:"#F9BD2B"}),F("path",{d:"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z",fill:"currentColor"}),F("path",{d:"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z",fill:"#1D4AFF"}),F("path",{d:"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z",fill:"#F54E00"}),F("path",{d:"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z",fill:"currentColor"})]})]}),F("defs",{children:F("clipPath",{id:"clip0_2415_6911",children:F("rect",{width:"76",height:"14",fill:"white",transform:"translate(0.5)"})})})]}),Wh=F("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:F("path",{d:"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z",fill:"currentColor"})});function Vh(){return F("a",{href:"https://posthog.com",target:"_blank",rel:"noopener",className:"footer-branding",children:["Survey by ",$h]})}function lr(t){var{text:e,submitDisabled:n,appearance:r,onSubmit:i,link:o}=t,{isPreviewMode:s,isPopup:a}=ar(In),l=r.submitButtonTextColor||sr(r.submitButtonColor||Wt.submitButtonColor);return F("div",{className:"bottom-section",children:[F("div",{className:"buttons",children:F("button",{className:"form-submit",disabled:n&&!s,type:"button",style:a?{color:l}:{},onClick:()=>{s||(o&&y?.open(o),i())},children:e})}),!r.whiteLabel&&F(Vh,{})]})}function Ii(t){var{question:e,description:n,descriptionContentType:r,backgroundColor:i,forceDisableHtml:o}=t,{isPopup:s}=ar(In);return F("div",{style:s?{backgroundColor:i||Wt.backgroundColor}:{},children:[F("div",{className:"survey-question",children:e}),n&&uu({component:ys("div",{className:"survey-question-description"}),children:n,renderAsHtml:!o&&r!=="text"})]})}function fu(t){var{onClick:e}=t,{isPreviewMode:n}=ar(In);return F("div",{className:"cancel-btn-wrapper",onClick:e,disabled:n,children:F("button",{className:"form-cancel",onClick:e,disabled:n,children:Hh})})}function Zh(t){var{header:e,description:n,contentType:r,forceDisableHtml:i,appearance:o,onClose:s,styleOverrides:a}=t,l=sr(o.backgroundColor||Wt.backgroundColor),{isPopup:c}=ar(In);return F(ot,{children:F("div",{className:"thank-you-message",style:C({},a),children:F("div",{className:"thank-you-message-container",children:[c&&F(fu,{onClick:()=>s()}),F("h3",{className:"thank-you-message-header",style:{color:l},children:e}),n&&uu({component:ys("div",{className:"thank-you-message-body"}),children:n,renderAsHtml:!i&&r!=="text",style:{color:l}}),c&&F(lr,{text:o.thankYouMessageCloseButtonText||"Close",submitDisabled:!1,appearance:o,onSubmit:()=>s()})]})})})}function Gh(t){var e,n=Ci(null),[r,i]=je((e=t.defaultTextColor)!==null&&e!==void 0?e:"black");return Si(()=>{if(n.current){var o=function(s){var a=Ss.getComputedStyle(s).backgroundColor;if(a==="rgba(0, 0, 0, 0)")return"black";var l=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(!l)return"black";var c=parseInt(l[1]),u=parseInt(l[2]),d=parseInt(l[3]);return Math.sqrt(c*c*.299+u*u*.587+d*d*.114)>127.5?"black":"white"}(n.current);i(o)}},[t.appearance,t.forceUpdate]),{ref:n,textColor:r}}function Uh(t){var{question:e,forceDisableHtml:n,appearance:r,onSubmit:i}=t,o=Ci(null),[s,a]=je("");return F("div",{ref:o,children:[F(Ii,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,backgroundColor:r.backgroundColor,forceDisableHtml:n}),F("textarea",{rows:4,placeholder:r?.placeholder,onInput:l=>a(l.currentTarget.value)}),F(lr,{text:e.buttonText||"Submit",submitDisabled:!s&&!e.optional,appearance:r,onSubmit:()=>i(s)})]})}function jh(t){var{question:e,forceDisableHtml:n,appearance:r,onSubmit:i}=t;return F(ot,{children:[F(Ii,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,forceDisableHtml:n}),F(lr,{text:e.buttonText||"Submit",submitDisabled:!1,link:e.link,appearance:r,onSubmit:()=>i("link clicked")})]})}function zh(t){var{question:e,forceDisableHtml:n,displayQuestionIndex:r,appearance:i,onSubmit:o}=t,s=e.scale,a=e.scale===10?0:1,[l,c]=je(null);return F(ot,{children:[F(Ii,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,forceDisableHtml:n,backgroundColor:i.backgroundColor}),F("div",{className:"rating-section",children:[F("div",{className:"rating-options",children:[e.display==="emoji"&&F("div",{className:"rating-options-emoji",children:(e.scale===3?Xh:Jh).map((u,d)=>{var p=d+1===l;return F("button",{className:"ratings-emoji question-".concat(r,"-rating-").concat(d," ").concat(p?"rating-active":null),value:d+1,type:"button",onClick:()=>{c(d+1)},style:{fill:p?i.ratingButtonActiveColor:i.ratingButtonColor,borderColor:i.borderColor},children:u},d)})}),e.display==="number"&&F("div",{className:"rating-options-number",style:{gridTemplateColumns:"repeat(".concat(s-a+1,", minmax(0, 1fr))")},children:tp(e.scale).map((u,d)=>F(Yh,{displayQuestionIndex:r,active:l===u,appearance:i,num:u,setActiveNumber:p=>{c(p)}},d))})]}),F("div",{className:"rating-text",children:[F("div",{children:e.lowerBoundLabel}),F("div",{children:e.upperBoundLabel})]})]}),F(lr,{text:e.buttonText||i?.submitButtonText||"Submit",submitDisabled:Ne(l)&&!e.optional,appearance:i,onSubmit:()=>o(l)})]})}function Yh(t){var{num:e,active:n,displayQuestionIndex:r,appearance:i,setActiveNumber:o}=t,{textColor:s,ref:a}=Gh({appearance:i,defaultTextColor:"black",forceUpdate:n});return F("button",{ref:a,className:"ratings-number question-".concat(r,"-rating-").concat(e," ").concat(n?"rating-active":null),type:"button",onClick:()=>{o(e)},style:{color:s,backgroundColor:n?i.ratingButtonActiveColor:i.ratingButtonColor,borderColor:i.borderColor},children:e})}function al(t){var{question:e,forceDisableHtml:n,displayQuestionIndex:r,appearance:i,onSubmit:o}=t,s=Ci(null),a=Is(()=>(v=>{if(!v.shuffleOptions)return v.choices;var b=v.choices,_="";v.hasOpenChoice&&(_=b.pop());var f=au(b,su(b));return v.hasOpenChoice&&(v.choices.push(_),f.push(_)),f})(e),[e]),[l,c]=je(e.type===ye.MultipleChoice?[]:null),[u,d]=je(!1),[p,h]=je(""),g=e.type===ye.SingleChoice?"radio":"checkbox";return F("div",{ref:s,children:[F(Ii,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,forceDisableHtml:n,backgroundColor:i.backgroundColor}),F("div",{className:"multiple-choice-options",children:a.map((v,b)=>{var _="choice-option",f=v,m=v;return e.hasOpenChoice&&b===e.choices.length-1&&(_+=" choice-option-open"),F("div",{className:_,children:[F("input",{type:g,id:"surveyQuestion".concat(r,"Choice").concat(b),name:"question".concat(r),value:f,disabled:!f,onInput:()=>e.hasOpenChoice&&b===e.choices.length-1?d(!u):e.type===ye.SingleChoice?c(f):e.type===ye.MultipleChoice&&pe(l)?l.includes(f)?c(l.filter(w=>w!==f)):c([...l,f]):void 0}),F("label",{htmlFor:"surveyQuestion".concat(r,"Choice").concat(b),style:{color:"black"},children:e.hasOpenChoice&&b===e.choices.length-1?F(ot,{children:[F("span",{children:[m,":"]}),F("input",{type:"text",id:"surveyQuestion".concat(r,"Choice").concat(b,"Open"),name:"question".concat(r),onInput:w=>{var S=w.currentTarget.value;return e.type===ye.SingleChoice?c(S):e.type===ye.MultipleChoice&&pe(l)?h(S):void 0}})]}):m}),F("span",{className:"choice-check",style:{color:"black"},children:Wh})]})})}),F(lr,{text:e.buttonText||"Submit",submitDisabled:(Ne(l)||pe(l)&&!u&&l.length===0||pe(l)&&u&&!p&&l.length===0&&!e.optional)&&!e.optional,appearance:i,onSubmit:()=>{u&&e.type===ye.MultipleChoice?pe(l)&&o([...l,p]):o(l)}})]})}var Xh=[vu,gu,pu],Jh=[Bh,vu,gu,pu,qh],Kh=[1,2,3,4,5],Qh=[1,2,3,4,5,6,7],ep=[0,1,2,3,4,5,6,7,8,9,10];function tp(t){switch(t){case 5:default:return Kh;case 7:return Qh;case 10:return ep}}var ll=Re("[Surveys]"),kt=y,dt=G;class np{constructor(e){var n=this;A(this,"canShowNextEventBasedSurvey",()=>{var r,i=dt.querySelectorAll("div[class^=PostHogSurvey]");return!(i.length>0)||((r=i[i.length-1].shadowRoot)===null||r===void 0?void 0:r.childElementCount)===1}),A(this,"handlePopoverSurvey",r=>{var i,o=(i=r.conditions)===null||i===void 0?void 0:i.seenSurveyWaitPeriodInDays,s=localStorage.getItem("lastSeenSurveyDate");if(o&&s){var a=new Date,l=Math.abs(a.getTime()-new Date(s).getTime());if(Math.ceil(l/864e5)<o)return}var c=(d=>!!localStorage.getItem(Cs(d))&&!lu(d))(r);if(!c){this.addSurveyToFocus(r.id);var u=((d,p,h)=>{var g=Ui.createElement("div");g.className="PostHogSurvey".concat(p);var v=g.attachShadow({mode:"open"});if(d){var b=Object.assign(Ui.createElement("style"),{innerText:d});v.appendChild(b)}return Ui.body.appendChild(g),v})(Xa(r?.appearance),r.id);Gi(F(Vo,{posthog:this.posthog,survey:r,removeSurveyFromFocus:this.removeSurveyFromFocus,isPopup:!0},"popover-survey"),u)}}),A(this,"handleWidget",r=>{var i=function(s){var a,l=ji.createElement("div");l.className="PostHogWidget".concat(s.id);var c,u=l.attachShadow({mode:"open"}),d=(c=(a=s.appearance)===null||a===void 0?void 0:a.widgetColor,`
        .ph-survey-widget-tab {
            position: fixed;
            top: 50%;
            right: 0;
            background: `.concat(c||"#e0a045",`;
            color: white;
            transform: rotate(-90deg) translate(0, -100%);
            transform-origin: right top;
            min-width: 40px;
            padding: 8px 12px;
            font-weight: 500;
            border-radius: 3px 3px 0 0;
            text-align: center;
            cursor: pointer;
            z-index: 9999999;
        }
        .ph-survey-widget-tab:hover {
            padding-bottom: 13px;
        }
        .ph-survey-widget-button {
            position: fixed;
        }
    `));return u.append(Object.assign(ji.createElement("style"),{innerText:d})),ji.body.appendChild(l),u}(r),o=Xa(r.appearance);i.appendChild(Object.assign(dt.createElement("style"),{innerText:o})),Gi(F(ip,{posthog:this.posthog,survey:r,removeSurveyFromFocus:this.removeSurveyFromFocus},"feedback-survey"),i)}),A(this,"handleWidgetSelector",r=>{var i,o=((i=r.appearance)===null||i===void 0?void 0:i.widgetSelector)&&dt.querySelector(r.appearance.widgetSelector);if(o){if(dt.querySelectorAll(".PostHogWidget".concat(r.id)).length===0)this.handleWidget(r);else if(dt.querySelectorAll(".PostHogWidget".concat(r.id)).length===1&&!o.getAttribute("PHWidgetSurveyClickListener")){var s,a,l=(s=dt.querySelector(".PostHogWidget".concat(r.id)))===null||s===void 0||(a=s.shadowRoot)===null||a===void 0?void 0:a.querySelector(".survey-form");o.addEventListener("click",()=>{l&&(l.style.display=l.style.display==="none"?"block":"none",l.addEventListener("PHSurveyClosed",()=>{this.removeSurveyFromFocus(r.id),l.style.display="none"}))}),o.setAttribute("PHWidgetSurveyClickListener","true")}}}),A(this,"canRenderSurvey",r=>{var i={visible:!1};return r.end_date?(i.disabledReason="survey was completed on ".concat(r.end_date),i):r.type!=Vn.Popover?(i.disabledReason="Only Popover survey types can be rendered",i):!r.linked_flag_key||this.posthog.featureFlags.isFeatureEnabled(r.linked_flag_key)?!r.targeting_flag_key||this.posthog.featureFlags.isFeatureEnabled(r.targeting_flag_key)?!r.internal_targeting_flag_key||this.posthog.featureFlags.isFeatureEnabled(r.internal_targeting_flag_key)?(i.visible=!0,i):(i.disabledReason="internal targeting feature flag ".concat(r.internal_targeting_flag_key," is false"),i):(i.disabledReason="targeting feature flag ".concat(r.targeting_flag_key," is false"),i):(i.disabledReason="linked feature flag ".concat(r.linked_flag_key," is false"),i)}),A(this,"renderSurvey",(r,i)=>{Gi(F(Vo,{posthog:this.posthog,survey:r,removeSurveyFromFocus:this.removeSurveyFromFocus,isPopup:!1},"popover-survey"),i)}),A(this,"callSurveysAndEvaluateDisplayLogic",function(){var r,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(r=n.posthog)===null||r===void 0||r.getActiveMatchingSurveys(o=>{var s=o.filter(a=>a.type!=="api");n.sortSurveysByAppearanceDelay(s).forEach(a=>{if(Ne(n.surveyInFocus)){var l,c,u;a.type===Vn.Widget&&(((l=a.appearance)===null||l===void 0?void 0:l.widgetType)==="tab"&&dt.querySelectorAll(".PostHogWidget".concat(a.id)).length===0&&n.handleWidget(a),((c=a.appearance)===null||c===void 0?void 0:c.widgetType)==="selector"&&(u=a.appearance)!==null&&u!==void 0&&u.widgetSelector&&n.handleWidgetSelector(a)),a.type===Vn.Popover&&n.canShowNextEventBasedSurvey()&&n.handlePopoverSurvey(a)}})},i)}),A(this,"addSurveyToFocus",r=>{Ne(this.surveyInFocus)||ll.error("Survey ".concat([...this.surveyInFocus]," already in focus. Cannot add survey ").concat(r,".")),this.surveyInFocus=r}),A(this,"removeSurveyFromFocus",r=>{this.surveyInFocus!==r&&ll.error("Survey ".concat(r," is not in focus. Cannot remove survey ").concat(r,".")),this.surveyInFocus=null}),this.posthog=e,this.surveyInFocus=null}sortSurveysByAppearanceDelay(e){return e.sort((n,r)=>{var i,o;return(((i=n.appearance)===null||i===void 0?void 0:i.surveyPopupDelaySeconds)||0)-(((o=r.appearance)===null||o===void 0?void 0:o.surveyPopupDelaySeconds)||0)})}getTestAPI(){return{addSurveyToFocus:this.addSurveyToFocus,removeSurveyFromFocus:this.removeSurveyFromFocus,surveyInFocus:this.surveyInFocus,canShowNextEventBasedSurvey:this.canShowNextEventBasedSurvey,handleWidget:this.handleWidget,handlePopoverSurvey:this.handlePopoverSurvey,handleWidgetSelector:this.handleWidgetSelector,sortSurveysByAppearanceDelay:this.sortSurveysByAppearanceDelay}}}function cl(t){if(dt&&kt){var e=new np(t);return e.callSurveysAndEvaluateDisplayLogic(!0),setInterval(()=>{e.callSurveysAndEvaluateDisplayLogic(!1)},1e3),e}}function Vo(t){var e,n,r,i,o,s,{survey:a,forceDisableHtml:l,posthog:c,style:u,previewPageIndex:d,removeSurveyFromFocus:p,isPopup:h}=t,g=Number.isInteger(d),v=(e=a.appearance)!==null&&e!==void 0&&e.surveyPopupDelaySeconds?1e3*a.appearance.surveyPopupDelaySeconds:0,{isPopupVisible:b,isSurveySent:_,setIsPopupVisible:f}=function(S,I,E,k,x){var[T,D]=je(k||E===0),[M,W]=je(!1);return Si(()=>{if(!k&&I){var $,P=()=>{x(S.id),D(!1)},V=()=>{var O,N;(O=S.appearance)!==null&&O!==void 0&&O.displayThankYouMessage?(W(!0),x(S.id),(N=S.appearance)!==null&&N!==void 0&&N.autoDisappear&&setTimeout(()=>{D(!1)},5e3)):(x(S.id),D(!1))},L=()=>{var O;D(!0),kt.dispatchEvent(new Event("PHSurveyShown")),I.capture("survey shown",{$survey_name:S.name,$survey_id:S.id,$survey_iteration:S.current_iteration,$survey_iteration_start_date:S.current_iteration_start_date,sessionRecordingUrl:(O=I.get_session_replay_url)===null||O===void 0?void 0:O.call(I)}),localStorage.setItem("lastSeenSurveyDate",new Date().toISOString())};return kt.addEventListener("PHSurveyClosed",P),kt.addEventListener("PHSurveySent",V),E>0?($=setTimeout(()=>{L()},E),()=>{clearTimeout($),kt.removeEventListener("PHSurveyClosed",P),kt.removeEventListener("PHSurveySent",V)}):(L(),()=>{kt.removeEventListener("PHSurveyClosed",P),kt.removeEventListener("PHSurveySent",V)})}},[]),{isPopupVisible:T,isSurveySent:M,setIsPopupVisible:D}}(a,c,v,g,p),m=_||d===a.questions.length,w=(n=u)!==null&&n!==void 0&&n.left&&be((r=u)===null||r===void 0?void 0:r.left)?{left:u.left-40}:{};return g&&((u=u||{}).left="unset",u.right="unset",u.transform="unset"),b?F(In.Provider,{value:{isPreviewMode:g,previewPageIndex:d,handleCloseSurveyPopup:()=>Fh(a,c,g),isPopup:h||!1},children:m?F(Zh,{header:((i=a.appearance)===null||i===void 0?void 0:i.thankYouMessageHeader)||"Thank you!",description:((o=a.appearance)===null||o===void 0?void 0:o.thankYouMessageDescription)||"",forceDisableHtml:!!l,contentType:(s=a.appearance)===null||s===void 0?void 0:s.thankYouMessageDescriptionContentType,appearance:a.appearance||Wt,styleOverrides:C(C({},u),w),onClose:()=>f(!1)}):F(rp,{survey:a,forceDisableHtml:!!l,posthog:c,styleOverrides:u})}):F(ot,{})}function rp(t){var e,n,{survey:r,forceDisableHtml:i,posthog:o,styleOverrides:s}=t,a=sr(((e=r.appearance)===null||e===void 0?void 0:e.backgroundColor)||Wt.backgroundColor),[l,c]=je({}),{isPreviewMode:u,previewPageIndex:d,handleCloseSurveyPopup:p,isPopup:h}=ar(In),[g,v]=je(d||0),b=Is(()=>Oh(r),[r]);return Si(()=>{v(d??0)},[d]),F("form",{className:"survey-form",style:h?C({color:a,borderColor:(n=r.appearance)===null||n===void 0?void 0:n.borderColor},s):{},children:b.map((_,f)=>{var m,{originalQuestionIndex:w}=_;return(u?g===w:g===f)&&F("div",{className:"survey-box",style:h?{backgroundColor:((m=r.appearance)===null||m===void 0?void 0:m.backgroundColor)||Wt.backgroundColor}:{},children:[h&&F(fu,{onClick:()=>p()}),op({question:_,forceDisableHtml:i,displayQuestionIndex:f,appearance:r.appearance||Wt,onSubmit:S=>(I=>{var{res:E,originalQuestionIndex:k,displayQuestionIndex:x}=I;if(o){var T=k===0?"$survey_response":"$survey_response_".concat(k);if(c(C(C({},l),{},{[T]:E})),o.getNextSurveyStep){var D=o.getNextSurveyStep(r,x,E);D===Ge.End?Ka(C(C({},l),{},{[T]:E}),r,o):v(D)}else x===r.questions.length-1?Ka(C(C({},l),{},{[T]:E}),r,o):v(x+1)}})({res:S,originalQuestionIndex:w,displayQuestionIndex:f})})]})})})}function ip(t){var e,n,{survey:r,forceDisableHtml:i,posthog:o,readOnly:s,removeSurveyFromFocus:a}=t,[l,c]=je(!1),[u,d]=je({}),p=Ci(null);return Si(()=>{var h,g;if(!s&&o){if(((h=r.appearance)===null||h===void 0?void 0:h.widgetType)==="tab"&&p.current){var v,b=p.current.getBoundingClientRect(),_={top:"50%",left:parseInt("".concat(b.right-360)),bottom:"auto",borderRadius:10,borderBottom:"1.5px solid ".concat(((v=r.appearance)===null||v===void 0?void 0:v.borderColor)||"#c9c6c6")};d(_)}if(((g=r.appearance)===null||g===void 0?void 0:g.widgetType)==="selector"){var f=dt.querySelector(r.appearance.widgetSelector||"");f?.addEventListener("click",()=>{c(!l)}),f?.setAttribute("PHWidgetSurveyClickListener","true")}}},[]),F(ot,{children:[((e=r.appearance)===null||e===void 0?void 0:e.widgetType)==="tab"&&F("div",{className:"ph-survey-widget-tab",ref:p,onClick:()=>!s&&c(!l),style:{color:sr(r.appearance.widgetColor)},children:[F("div",{className:"ph-survey-widget-tab-icon"}),((n=r.appearance)===null||n===void 0?void 0:n.widgetLabel)||""]}),l&&F(Vo,{posthog:o,survey:r,forceDisableHtml:i,style:u,removeSurveyFromFocus:a,isPopup:!0},"feedback-widget-survey")]})}var op=t=>{var{question:e,forceDisableHtml:n,displayQuestionIndex:r,appearance:i,onSubmit:o}=t,s={[ye.Open]:Uh,[ye.Link]:jh,[ye.Rating]:zh,[ye.SingleChoice]:al,[ye.MultipleChoice]:al},a={question:e,forceDisableHtml:n,appearance:i,onSubmit:o},l={[ye.Open]:{},[ye.Link]:{},[ye.Rating]:{displayQuestionIndex:r},[ye.SingleChoice]:{displayQuestionIndex:r},[ye.MultipleChoice]:{displayQuestionIndex:r}},c=s[e.type],u=C(C({},a),l[e.type]);return F(c,C({},u))};function mu(t){return!Z(Event)&&_u(t,Event)}function _u(t,e){try{return t instanceof e}catch{return!1}}function ul(t){return Ne(t)||!fe(t)&&!Me(t)}function $r(t,e){return Object.prototype.toString.call(t)==="[object ".concat(e,"]")}function Yi(t){return $r(t,"DOMError")}B.__PosthogExtensions__=B.__PosthogExtensions__||{},B.__PosthogExtensions__.canActivateRepeatedly=lu,B.__PosthogExtensions__.generateSurveys=cl,B.extendPostHogWithSurveys=cl;var dl=/\(error: (.*)\)/,hl=50,an="?";function Xi(t,e,n,r){var i={platform:"web:javascript",filename:t,function:e==="<anonymous>"?an:e,in_app:!0};return Z(n)||(i.lineno=n),Z(r)||(i.colno=r),i}var sp=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ap=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,lp=/\((\S*)(?::(\d+))(?::(\d+))\)/,cp=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,up=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,dp=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.sort((i,o)=>i[0]-o[0]).map(i=>i[1]);return function(i){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],a=i.split(`
`),l=o;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=dl.test(c)?c.replace(dl,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of r){var p=d(u);if(p){s.push(p);break}}if(s.length>=hl)break}}}return function(h){if(!h.length)return[];var g=Array.from(h);return g.reverse(),g.slice(0,hl).map(v=>C(C({},v),{},{filename:v.filename||hp(g).filename,function:v.function||an}))}(s)}}([30,t=>{var e=sp.exec(t);if(e){var[,n,r,i]=e;return Xi(n,an,+r,+i)}var o=ap.exec(t);if(o){if(o[2]&&o[2].indexOf("eval")===0){var s=lp.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var[a,l]=pl(o[1]||an,o[2]);return Xi(l,a,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,t=>{var e=cp.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=up.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var r=e[3],i=e[1]||an;return[i,r]=pl(i,r),Xi(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function hp(t){return t[t.length-1]||{}}var pl=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:an,n?"safari-extension:".concat(e):"safari-web-extension:".concat(e)]:[t,e]},pp=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function ks(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t.stacktrace||t.stack||"",r=function(o){return o&&gp.test(o.message)?1:0}(t);try{var i=dp(n,r);return i.slice(0,i.length-e)}catch{}return[]}var gp=/Minified React error #\d+;/i;function Ji(t,e){var n,r,i=ks(t),o=(n=e?.handled)===null||n===void 0||n,s=(r=e?.synthetic)!==null&&r!==void 0&&r;return{$exception_list:[{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:e!=null&&e.overrideExceptionMessage?e.overrideExceptionMessage:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?l.error.message:l}(t),stacktrace:{frames:i,type:"raw"},mechanism:{handled:o,synthetic:s}}],$exception_level:"error"}}function Wr(t,e){var n,r,i,o=(n=e?.handled)===null||n===void 0||n,s=(r=e?.synthetic)===null||r===void 0||r,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(i=e?.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:e!=null&&e.overrideExceptionMessage?e.overrideExceptionMessage:t||e?.defaultExceptionMessage,mechanism:{handled:o,synthetic:s}};if(e!=null&&e.syntheticException){var l=ks(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function vp(t){return we(t)&&!bo(t)&&nh.indexOf(t)>=0}function fp(t,e){var n,r,i=(n=e?.handled)===null||n===void 0||n,o=(r=e?.synthetic)===null||r===void 0||r,s=e!=null&&e.overrideExceptionType?e.overrideExceptionType:mu(t)?t.constructor.name:"Error",a=e!=null&&e.overrideExceptionMessage?e.overrideExceptionMessage:"Non-Error ".concat("exception"," captured with keys: ",function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:40,p=Object.keys(u);if(p.sort(),!p.length)return"[object has no keys]";for(var h=p.length;h>0;h--){var g=p.slice(0,h).join(", ");if(!(g.length>d))return h===p.length||g.length<=d?g:"".concat(g.slice(0,d),"...")}return""}(t)),l={type:s,value:a,mechanism:{handled:i,synthetic:o}};if(e!=null&&e.syntheticException){var c=ks(e?.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:vp(t.level)?t.level:"error"}}function ui(t,e){var[n,r,i,o,s]=t,a={$exception_list:[]},l=s||n;if(Yi(l)||function(b){return $r(b,"DOMException")}(l)){var c=l;if(function(b){return"stack"in b}(l))a=Ji(l,e);else{var u=c.name||(Yi(c)?"DOMError":"DOMException"),d=c.message?"".concat(u,": ").concat(c.message):u,p=Yi(c)?"DOMError":"DOMException";a=Wr(d,C(C({},e),{},{overrideExceptionType:p,defaultExceptionMessage:d}))}return"code"in c&&(a.$exception_DOMException_code="".concat(c.code)),a}if(function(b){return $r(b,"ErrorEvent")}(l)&&l.error)return Ji(l.error,e);if(function(b){switch(Object.prototype.toString.call(b)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return _u(b,Error)}}(l))return Ji(l,e);if(function(b){return $r(b,"Object")}(l)||mu(l))return fp(l,e);if(Z(s)&&we(n)){var h="Error",g=n,v=n.match(pp);return v&&(h=v[1],g=v[2]),Wr(g,C(C({},e),{},{overrideExceptionType:h,defaultExceptionMessage:g}))}return Wr(l,e)}function mp(t){var[e]=t,n=function(r){if(ul(r))return r;try{if("reason"in r)return r.reason;if("detail"in r&&"reason"in r.detail)return r.detail.reason}catch{}return r}(e);return ul(n)?Wr("Non-Error promise rejection captured with value: ".concat(String(n)),{handled:!1,synthetic:!1,overrideExceptionType:"UnhandledRejection"}):ui([n],{handled:!1,overrideExceptionType:"UnhandledRejection",defaultExceptionMessage:String(n)})}var gl=Re("[ExceptionAutocapture]"),vl={wrapOnError:t=>{var e=y;e||gl.info("window not available, cannot wrap onerror");var n=e.onerror;return e.onerror=function(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a=ui(o);return t(a),(r=n?.(...o))!==null&&r!==void 0&&r},e.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;(r=e.onerror)===null||r===void 0||delete r.__POSTHOG_INSTRUMENTED__,e.onerror=n}},wrapUnhandledRejection:t=>{var e=y;e||gl.info("window not available, cannot wrap onUnhandledRejection");var n=e.onunhandledrejection;return e.onunhandledrejection=function(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a=mp(o);return t(a),(r=n?.apply(e,o))!==null&&r!==void 0&&r},e.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;(r=e.onunhandledrejection)===null||r===void 0||delete r.__POSTHOG_INSTRUMENTED__,e.onunhandledrejection=n}}};B.__PosthogExtensions__=B.__PosthogExtensions__||{},B.__PosthogExtensions__.errorWrappingFunctions=vl,B.__PosthogExtensions__.parseErrorAsProperties=ui,B.posthogErrorWrappingFunctions=vl,B.parseErrorAsProperties=ui;var fl=(t,e)=>{if(t){var{sessionId:n,windowId:r}=t.checkAndGetSessionAndWindowId(!0);e.headers.set("X-POSTHOG-SESSION-ID",n),e.headers.set("X-POSTHOG-WINDOW-ID",r)}};B.__PosthogExtensions__=B.__PosthogExtensions__||{};var ml={_patchFetch:t=>ii(y,"fetch",e=>function(){var n=Cn(function*(r,i){var o=new Request(r,i);return fl(t,o),e(o)});return function(r,i){return n.apply(this,arguments)}}()),_patchXHR:t=>ii(y.XMLHttpRequest.prototype,"open",e=>function(n,r){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=new Request(r);return fl(t,a),e.call(this,n,a.url,i,o,s)})};B.__PosthogExtensions__.tracingHeadersPatchFns=ml,B.postHogTracingHeadersPatchFns=ml;var Zo,_l,Go,Kn=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Sr=function(t){if(document.readyState==="loading")return"loading";var e=Kn();if(e){if(t<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||t<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||t<e.domComplete)return"dom-content-loaded"}return"complete"},_p=function(t){var e=t.nodeName;return t.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Ki=function(t,e){var n="";try{for(;t&&t.nodeType!==9;){var r=t,i=r.id?"#"+r.id:_p(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(e||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;t=r.parentNode}}catch{}return n},yu=-1,bu=function(){return yu},Gn=function(t){addEventListener("pageshow",function(e){e.persisted&&(yu=e.timeStamp,t(e))},!0)},Es=function(){var t=Kn();return t&&t.activationStart||0},Et=function(t,e){var n=Kn(),r="navigate";return bu()>=0?r="back-forward-cache":n&&(document.prerendering||Es()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},ln=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){e(i.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},xt=function(t,e,n,r){var i,o;return function(s){e.value>=0&&(s||r)&&((o=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=o,e.rating=function(a,l){return a>l[1]?"poor":a>l[0]?"needs-improvement":"good"}(e.value,n),t(e))}},Uo=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Vr=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},jo=function(t){var e=!1;return function(){e||(t(),e=!0)}},cn=-1,yl=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},di=function(t){document.visibilityState==="hidden"&&cn>-1&&(cn=t.type==="visibilitychange"?t.timeStamp:0,yp())},bl=function(){addEventListener("visibilitychange",di,!0),addEventListener("prerenderingchange",di,!0)},yp=function(){removeEventListener("visibilitychange",di,!0),removeEventListener("prerenderingchange",di,!0)},wu=function(){return cn<0&&(cn=yl(),bl(),Gn(function(){setTimeout(function(){cn=yl(),bl()},0)})),{get firstHiddenTime(){return cn}}},zo=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},wl=[1800,3e3],Sl=function(t,e){e=e||{},zo(function(){var n,r=wu(),i=Et("FCP"),o=ln("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-Es(),0),i.entries.push(a),n(!0)))})});o&&(n=xt(t,i,wl,e.reportAllChanges),Gn(function(s){i=Et("FCP"),n=xt(t,i,wl,e.reportAllChanges),Uo(function(){i.value=performance.now()-s.timeStamp,n(!0)})}))})},Cl=[.1,.25],Su=0,Qi=1/0,Cr=0,bp=function(t){t.forEach(function(e){e.interactionId&&(Qi=Math.min(Qi,e.interactionId),Cr=Math.max(Cr,e.interactionId),Su=Cr?(Cr-Qi)/7+1:0)})},wp=function(){"interactionCount"in performance||Zo||(Zo=ln("event",bp,{type:"event",buffered:!0,durationThreshold:0}))},et=[],Un=new Map,Cu=0,Sp=function(){return(Zo?Su:performance.interactionCount||0)-Cu},Iu=[],Cp=function(t){if(Iu.forEach(function(i){return i(t)}),t.interactionId||t.entryType==="first-input"){var e=et[et.length-1],n=Un.get(t.interactionId);if(n||et.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};Un.set(r.id,r),et.push(r)}et.sort(function(i,o){return o.latency-i.latency}),et.length>10&&et.splice(10).forEach(function(i){return Un.delete(i.id)})}}},Yo=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=jo(t),document.visibilityState==="hidden"?t():(n=e(t),Vr(t)),n},Il=[200,500],hn=[],Mt=[],xs=new WeakMap,pn=new Map,Xo=-1,Ip=function(t){hn=hn.concat(t),ku()},ku=function(){Xo<0&&(Xo=Yo(kp))},kp=function(){pn.size>10&&pn.forEach(function(a,l){Un.has(l)||pn.delete(l)});var t=et.map(function(a){return xs.get(a.entries[0])}),e=Mt.length-50;Mt=Mt.filter(function(a,l){return l>=e||t.includes(a)});for(var n=new Set,r=0;r<Mt.length;r++){var i=Mt[r];Eu(i.startTime,i.processingEnd).forEach(function(a){n.add(a)})}for(var o=0;o<50;o++){var s=hn[hn.length-1-o];if(!s||s.startTime<Go)break;n.add(s)}hn=Array.from(n),Xo=-1};Iu.push(function(t){t.interactionId&&t.target&&!pn.has(t.interactionId)&&pn.set(t.interactionId,t.target)},function(t){var e,n=t.startTime+t.duration;Go=Math.max(Go,t.processingEnd);for(var r=Mt.length-1;r>=0;r--){var i=Mt[r];if(Math.abs(n-i.renderTime)<=8){(e=i).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:n,entries:[t]},Mt.push(e)),(t.interactionId||t.entryType==="first-input")&&xs.set(t,e),ku()});var Eu=function(t,e){for(var n,r=[],i=0;n=hn[i];i++)if(!(n.startTime+n.duration<t)){if(n.startTime>e)break;r.push(n)}return r},kl=[2500,4e3],eo={},El={onLCP:function(t,e){(function(n,r){r=r||{},zo(function(){var i,o=wu(),s=Et("LCP"),a=function(u){r.reportAllChanges||(u=u.slice(-1)),u.forEach(function(d){d.startTime<o.firstHiddenTime&&(s.value=Math.max(d.startTime-Es(),0),s.entries=[d],i())})},l=ln("largest-contentful-paint",a);if(l){i=xt(n,s,kl,r.reportAllChanges);var c=jo(function(){eo[s.id]||(a(l.takeRecords()),l.disconnect(),eo[s.id]=!0,i(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return Yo(c)},!0)}),Vr(c),Gn(function(u){s=Et("LCP"),i=xt(n,s,kl,r.reportAllChanges),Uo(function(){s.value=performance.now()-u.timeStamp,eo[s.id]=!0,i(!0)})})}})})(function(n){var r=function(i){var o={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var s=Kn();if(s){var a=s.activationStart||0,l=i.entries[i.entries.length-1],c=l.url&&performance.getEntriesByType("resource").filter(function(g){return g.name===l.url})[0],u=Math.max(0,s.responseStart-a),d=Math.max(u,c?(c.requestStart||c.startTime)-a:0),p=Math.max(d,c?c.responseEnd-a:0),h=Math.max(p,l.startTime-a);o={element:Ki(l.element),timeToFirstByte:u,resourceLoadDelay:d-u,resourceLoadDuration:p-d,elementRenderDelay:h-p,navigationEntry:s,lcpEntry:l},l.url&&(o.url=l.url),c&&(o.lcpResourceEntry=c)}}return Object.assign(i,{attribution:o})}(n);t(r)},e)},onCLS:function(t,e){(function(n,r){r=r||{},Sl(jo(function(){var i,o=Et("CLS",0),s=0,a=[],l=function(u){u.forEach(function(d){if(!d.hadRecentInput){var p=a[0],h=a[a.length-1];s&&d.startTime-h.startTime<1e3&&d.startTime-p.startTime<5e3?(s+=d.value,a.push(d)):(s=d.value,a=[d])}}),s>o.value&&(o.value=s,o.entries=a,i())},c=ln("layout-shift",l);c&&(i=xt(n,o,Cl,r.reportAllChanges),Vr(function(){l(c.takeRecords()),i(!0)}),Gn(function(){s=0,o=Et("CLS",0),i=xt(n,o,Cl,r.reportAllChanges),Uo(function(){return i()})}),setTimeout(i,0))}))})(function(n){var r=function(i){var o,s={};if(i.entries.length){var a=i.entries.reduce(function(c,u){return c&&c.value>u.value?c:u});if(a&&a.sources&&a.sources.length){var l=(o=a.sources).find(function(c){return c.node&&c.node.nodeType===1})||o[0];l&&(s={largestShiftTarget:Ki(l.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:l,largestShiftEntry:a,loadState:Sr(a.startTime)})}}return Object.assign(i,{attribution:s})}(n);t(r)},e)},onFCP:function(t,e){Sl(function(n){var r=function(i){var o={timeToFirstByte:0,firstByteToFCP:i.value,loadState:Sr(bu())};if(i.entries.length){var s=Kn(),a=i.entries[i.entries.length-1];if(s){var l=s.activationStart||0,c=Math.max(0,s.responseStart-l);o={timeToFirstByte:c,firstByteToFCP:i.value-c,loadState:Sr(i.entries[0].startTime),navigationEntry:s,fcpEntry:a}}}return Object.assign(i,{attribution:o})}(n);t(r)},e)},onINP:function(t,e){_l||(_l=ln("long-animation-frame",Ip)),function(n,r){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(r=r||{},zo(function(){var i;wp();var o,s=Et("INP"),a=function(c){Yo(function(){c.forEach(Cp);var u,d=(u=Math.min(et.length-1,Math.floor(Sp()/50)),et[u]);d&&d.latency!==s.value&&(s.value=d.latency,s.entries=d.entries,o())})},l=ln("event",a,{durationThreshold:(i=r.durationThreshold)!==null&&i!==void 0?i:40});o=xt(n,s,Il,r.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),Vr(function(){a(l.takeRecords()),o(!0)}),Gn(function(){Cu=0,et.length=0,Un.clear(),s=Et("INP"),o=xt(n,s,Il,r.reportAllChanges)}))}))}(function(n){var r=function(i){var o=i.entries[0],s=xs.get(o),a=o.processingStart,l=s.processingEnd,c=s.entries.sort(function(b,_){return b.processingStart-_.processingStart}),u=Eu(o.startTime,l),d=i.entries.find(function(b){return b.target}),p=d&&d.target||pn.get(o.interactionId),h=[o.startTime+o.duration,l].concat(u.map(function(b){return b.startTime+b.duration})),g=Math.max.apply(Math,h),v={interactionTarget:Ki(p),interactionTargetElement:p,interactionType:o.name.startsWith("key")?"keyboard":"pointer",interactionTime:o.startTime,nextPaintTime:g,processedEventEntries:c,longAnimationFrameEntries:u,inputDelay:a-o.startTime,processingDuration:l-a,presentationDelay:Math.max(g-l,0),loadState:Sr(o.startTime)};return Object.assign(i,{attribution:v})}(n);t(r)},e)}};B.__PosthogExtensions__=B.__PosthogExtensions__||{},B.__PosthogExtensions__.postHogWebVitalsCallbacks=El,B.postHogWebVitalsCallbacks=El;class xu{constructor(){this.clicks=[]}isRageClick(e,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}var xl=Re("[AutoCapture]");function to(t,e){return e.length>t?e.slice(0,t)+"...":e}function Ep(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!ir(e));return e}function xp(t,e,n,r){var i=t.tagName.toLowerCase(),o={tag_name:i};ri.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?o.$el_text=to(1024,zc(t)):o.$el_text=to(1024,bi(t)));var s=ni(t);s.length>0&&(o.classes=s.filter(function(u){return u!==""})),ue(t.attributes,function(u){var d;if((!Gc(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(r==null||!r.includes(u.name))&&!e&&_n(u.value)&&(d=u.name,!we(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var p=u.value;u.name==="class"&&(p=vs(p).join(" ")),o["attr__"+u.name]=to(1024,p)}});for(var a=1,l=1,c=t;c=Ep(c);)a++,c.tagName===t.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}function Tu(t,e){for(var n,r,{e:i,maskAllElementAttributes:o,maskAllText:s,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!mt(u,"body");)Wc(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,p=[],h={},g=!1,v=!1;if(ue(c,w=>{var S=Ro(w);w.tagName.toLowerCase()==="a"&&(g=w.getAttribute("href"),g=S&&g&&_n(g)&&g),ee(ni(w),"ph-no-capture")&&(v=!0),p.push(xp(w,o,s,a));var I=function(E){if(!Ro(E))return{};var k={};return ue(E.attributes,function(x){if(x.name&&x.name.indexOf("data-ph-capture-attribute")===0){var T=x.name.replace("data-ph-capture-attribute-",""),D=x.value;T&&D&&_n(D)&&(k[T]=D)}}),k}(w);Le(h,I)}),v)return{props:{},explicitNoCapture:v};if(s||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?p[0].$el_text=zc(t):p[0].$el_text=bi(t)),g){var b,_;p[0].attr__href=g;var f=(b=dn(g))===null||b===void 0?void 0:b.host,m=y==null||(_=y.location)===null||_===void 0?void 0:_.host;f&&m&&f!==m&&(d=g)}return{props:Le({$event_type:i.type,$ce_version:1},l?{}:{$elements:p},{$elements_chain:mh(p)},(n=p[0])!==null&&n!==void 0&&n.$el_text?{$el_text:(r=p[0])===null||r===void 0?void 0:r.$el_text}:{},d&&i.type==="click"?{$external_click_url:d}:{},h)}}class Tp{constructor(e){A(this,"_initialized",!1),A(this,"_isDisabledServerSide",null),A(this,"rageclicks",new xu),A(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,n,r=fe(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)===null||e===void 0?void 0:e.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)===null||n===void 0?void 0:n.map(i=>new RegExp(i)),r}_addDomEventHandlers(){if(this.isBrowserSupported()){if(y&&G){var e=r=>{r=r||y?.event;try{this._captureEvent(r)}catch(i){xl.error("Failed to capture event",i)}},n=r=>{r=r||y?.event,this._captureEvent(r,Wi)};vt(G,"submit",e,!1,!0),vt(G,"change",e,!1,!0),vt(G,"click",e,!1,!0),this.config.capture_copied_text&&(vt(G,"copy",n,!1,!0),vt(G,"cut",n,!1,!0))}}else xl.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Ea]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var n,r=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach(i=>{var o=G?.querySelectorAll(i);o?.forEach(s=>{e===s&&r.push(i)})}),r}get isEnabled(){var e,n,r=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[Ea],i=this._isDisabledServerSide;if(Ne(i)&&!nt(r)&&!this.instance.config.advanced_disable_decide)return!1;var o=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!o}_captureEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var r,i=fs(e);$c(i)&&(i=i.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!==null&&r!==void 0&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var o=n===Wi;if(i&&hh(i,e,this.config,o,o?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:a}=Tu(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(s.$element_selectors=l),n===Wi){var c,u=Vc(y==null||(c=y.getSelection())===null||c===void 0?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;s.$selected_content=u,s.$copy_type=d}return this.instance.capture(n,s),!0}}}isBrowserSupported(){return Me(G?.querySelectorAll)}}var no={};function Mp(t){return function(e,n){var r=no[e];if(r)return r;var i=n[e];if(ih(i)&&!oh())return no[e]=i.bind(n);var o=n.document;if(o&&Me(o.createElement))try{var s=o.createElement("iframe");s.hidden=!0,o.head.appendChild(s);var a=s.contentWindow;a&&a[e]&&(i=a[e]),o.head.removeChild(s)}catch(l){U.warn("Could not create sandbox iframe for ".concat(e," check, bailing to assignableWindow.").concat(e,": "),l)}return i&&Me(i)?no[e]=i.bind(n):i}("MutationObserver",t)}function Ir(t,e){return be(t)&&t>=e}class Rp{asRequiredConfig(e){var n,r,i,o,s=this._defaultConfig(e?.__onCapture||this._captureDeadClick.bind(this));return{element_attribute_ignorelist:(n=e?.element_attribute_ignorelist)!==null&&n!==void 0?n:s.element_attribute_ignorelist,scroll_threshold_ms:(r=e?.scroll_threshold_ms)!==null&&r!==void 0?r:s.scroll_threshold_ms,selection_change_threshold_ms:(i=e?.selection_change_threshold_ms)!==null&&i!==void 0?i:s.selection_change_threshold_ms,mutation_threshold_ms:(o=e?.mutation_threshold_ms)!==null&&o!==void 0?o:s.mutation_threshold_ms,__onCapture:s.__onCapture}}constructor(e,n){A(this,"_clicks",[]),A(this,"_defaultConfig",r=>({element_attribute_ignorelist:[],scroll_threshold_ms:100,selection_change_threshold_ms:100,mutation_threshold_ms:2500,__onCapture:r})),A(this,"_onClick",r=>{var i=function(o){var s=fs(o);return s?{node:s,originalEvent:o,timestamp:Date.now()}:null}(r);Ne(i)||this._ignoreClick(i)||this._clicks.push(i),this._clicks.length&&Z(this._checkClickTimer)&&(this._checkClickTimer=B.setTimeout(()=>{this._checkClicks()},1e3))}),A(this,"_onScroll",()=>{var r=Date.now();r%50==0&&this._clicks.forEach(i=>{Z(i.scrollDelayMs)&&(i.scrollDelayMs=r-i.timestamp)})}),A(this,"_onSelectionChange",()=>{this._lastSelectionChanged=Date.now()}),this.instance=e,this._config=this.asRequiredConfig(n),this._onCapture=this._config.__onCapture}start(e){this._startClickObserver(),this._startScrollObserver(),this._startSelectionChangedObserver(),this._startMutationObserver(e)}_startMutationObserver(e){if(!this._mutationObserver){var n=Mp(B);this._mutationObserver=new n(r=>{this.onMutation(r)}),this._mutationObserver.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}}stop(){var e;(e=this._mutationObserver)===null||e===void 0||e.disconnect(),this._mutationObserver=void 0,B.removeEventListener("click",this._onClick),B.removeEventListener("scroll",this._onScroll,!0),B.removeEventListener("selectionchange",this._onSelectionChange)}onMutation(e){this._lastMutation=Date.now()}_startClickObserver(){B.addEventListener("click",this._onClick)}_startScrollObserver(){B.addEventListener("scroll",this._onScroll,!0)}_startSelectionChangedObserver(){B.addEventListener("selectionchange",this._onSelectionChange)}_ignoreClick(e){if(!e||Mo(e.node))return!0;var n=this._clicks.some(r=>r.node===e.node&&Math.abs(r.timestamp-e.timestamp)<1e3);return!!n||!(!mt(e.node,"html")&&ir(e.node)&&!ri.includes(e.node.tagName.toLowerCase()))}_checkClicks(){if(this._clicks.length){clearTimeout(this._checkClickTimer),this._checkClickTimer=void 0;var e=this._clicks;for(var n of(this._clicks=[],e)){var r;n.mutationDelayMs=(r=n.mutationDelayMs)!==null&&r!==void 0?r:this._lastMutation&&n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0,n.absoluteDelayMs=Date.now()-n.timestamp,n.selectionChangedDelayMs=this._lastSelectionChanged&&n.timestamp<=this._lastSelectionChanged?this._lastSelectionChanged-n.timestamp:void 0;var i=Ir(n.scrollDelayMs,this._config.scroll_threshold_ms),o=Ir(n.selectionChangedDelayMs,this._config.selection_change_threshold_ms),s=Ir(n.mutationDelayMs,this._config.mutation_threshold_ms),a=Ir(n.absoluteDelayMs,1.1*this._config.mutation_threshold_ms),l=be(n.scrollDelayMs)&&n.scrollDelayMs<this._config.scroll_threshold_ms,c=be(n.mutationDelayMs)&&n.mutationDelayMs<this._config.mutation_threshold_ms,u=be(n.selectionChangedDelayMs)&&n.selectionChangedDelayMs<this._config.selection_change_threshold_ms;l||c||u||(i||s||a||o?this._onCapture(n,{$dead_click_last_mutation_timestamp:this._lastMutation,$dead_click_event_timestamp:n.timestamp,$dead_click_scroll_timeout:i,$dead_click_mutation_timeout:s,$dead_click_absolute_timeout:a,$dead_click_selection_changed_timeout:o}):n.absoluteDelayMs<this._config.mutation_threshold_ms&&this._clicks.push(n))}this._clicks.length&&Z(this._checkClickTimer)&&(this._checkClickTimer=B.setTimeout(()=>{this._checkClicks()},1e3))}}_captureDeadClick(e,n){this.instance.capture("$dead_click",C(C(C({},n),Tu(e.node,{e:e.originalEvent,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this._config.element_attribute_ignorelist,elementsChainAsString:!1}).props),{},{$dead_click_scroll_delay_ms:e.scrollDelayMs,$dead_click_mutation_delay_ms:e.mutationDelayMs,$dead_click_absolute_delay_ms:e.absoluteDelayMs,$dead_click_selection_changed_delay_ms:e.selectionChangedDelayMs}),{timestamp:new Date(e.timestamp)})}}B.__PosthogExtensions__=B.__PosthogExtensions__||{},B.__PosthogExtensions__.initDeadClicksAutocapture=(t,e)=>new Rp(t,e);var kr=Re("[FeatureFlags]"),ro="$active_feature_flags",Er="$override_feature_flags",Tl="$feature_flag_payloads",Ml=t=>{var e={};for(var[n,r]of Pr(t||{}))r&&(e[n]=r);return e};class Ap{constructor(e){A(this,"_override_warning",!1),A(this,"_hasLoadedFlags",!1),A(this,"_requestInFlight",!1),A(this,"_reloadingDisabled",!1),A(this,"_additionalReloadRequested",!1),A(this,"_decideCalled",!1),A(this,"_flagsLoadedFromRemote",!1),this.instance=e,this.featureFlagEventHandlers=[]}decide(){if(this.instance.config.__preview_remote_config)this._decideCalled=!0;else{var e=!this._reloadDebouncer&&(this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load);this._callDecideEndpoint({disableFlags:e})}}get hasLoadedFlags(){return this._hasLoadedFlags}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(on),n=this.instance.get_property(Er);if(!n)return e||{};for(var r=Le({},e),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this._override_warning||(kr.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}getFlagPayloads(){return this.instance.get_property(Tl)||{}}reloadFeatureFlags(){this._reloadingDisabled||this.instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout(()=>{this._callDecideEndpoint()},5))}clearDebouncer(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0}ensureFlagsLoaded(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this._reloadingDisabled=e}_callDecideEndpoint(e){if(this.clearDebouncer(),!this.instance.config.advanced_disable_decide)if(this._requestInFlight)this._additionalReloadRequested=!0;else{var n={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:this.instance.get_property(Pn),group_properties:this.instance.get_property(Dt)};(e!=null&&e.disableFlags||this.instance.config.advanced_disable_feature_flags)&&(n.disable_flags=!0),this._requestInFlight=!0,this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:n,compression:this.instance.config.disable_compression?void 0:tt.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:r=>{var i,o,s=!0;r.statusCode===200&&(this.$anon_distinct_id=void 0,s=!1),this._requestInFlight=!1,this._decideCalled||(this._decideCalled=!0,this.instance._onRemoteConfig((o=r.json)!==null&&o!==void 0?o:{})),n.disable_flags||(this._flagsLoadedFromRemote=!s,this.receivedFeatureFlags((i=r.json)!==null&&i!==void 0?i:{},s),this._additionalReloadRequested&&(this._additionalReloadRequested=!1,this._callDecideEndpoint()))}})}}getFeatureFlag(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var r,i,o,s,a,l=this.getFlagVariants()[e],c="".concat(l),u=this.instance.get_property(ei)||{};return(n.send_event||!("send_event"in n))&&(!(e in u)||!u[e].includes(c))&&(pe(u[e])?u[e].push(c):u[e]=[c],(r=this.instance.persistence)===null||r===void 0||r.register({[ei]:u}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:l,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_bootstrapped_response:((i=this.instance.config.bootstrap)===null||i===void 0||(o=i.featureFlags)===null||o===void 0?void 0:o[e])||null,$feature_flag_bootstrapped_payload:((s=this.instance.config.bootstrap)===null||s===void 0||(a=s.featureFlagPayloads)===null||a===void 0?void 0:a[e])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote})),l}kr.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);kr.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this.instance.persistence){this._hasLoadedFlags=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads();(function(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=o.featureFlags,u=o.featureFlagPayloads;if(c)if(pe(c)){var d={};if(c)for(var p=0;p<c.length;p++)d[c[p]]=!0;s&&s.register({[ro]:c,[on]:d})}else{var h=c,g=u;o.errorsWhileComputingFlags&&(h=C(C({},a),h),g=C(C({},l),g)),s&&s.register({[ro]:Object.keys(Ml(h)),[on]:h||{},[Tl]:g||{}})}})(e,this.instance.persistence,r,i),this._fireFeatureFlagsCallbacks(n)}}override(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return kr.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,e===!1)this.instance.persistence.unregister(Er);else if(pe(e)){for(var r={},i=0;i<e.length;i++)r[e[i]]=!0;this.instance.persistence.register({[Er]:r})}else this.instance.persistence.register({[Er]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._hasLoadedFlags){var{flags:n,flagVariants:r}=this._prepareFeatureFlagsForCallbacks();e(n,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var r,i=(this.instance.get_property(Dr)||[]).find(l=>l.flagKey===e),o={["$feature_enrollment/".concat(e)]:n},s={$feature_flag:e,$feature_enrollment:n,$set:o};i&&(s.$early_access_feature_name=i.name),this.instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(o,!1);var a=C(C({},this.getFlagVariants()),{},{[e]:n});(r=this.instance.persistence)===null||r===void 0||r.register({[ro]:Object.keys(Ml(a)),[on]:a}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=this.instance.get_property(Dr);if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:i=>{var o;if(i.json){var s=i.json.earlyAccessFeatures;return(o=this.instance.persistence)===null||o===void 0||o.register({[Dr]:s}),e(s)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}_fireFeatureFlagsCallbacks(e){var{flags:n,flagVariants:r}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(Pn)||{};this.instance.register({[Pn]:C(C({},r),e)}),n&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(Pn)}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(Dt)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=C(C({},r[i]),e[i]),delete e[i]}),this.instance.register({[Dt]:C(C({},r),e)}),n&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this.instance.get_property(Dt)||{};this.instance.register({[Dt]:C(C({},n),{},{[e]:{}})})}else this.instance.unregister(Dt)}}Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return be(t)&&isFinite(t)&&Math.floor(t)===t});var Rl="0123456789abcdef";class hi{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=e/Math.pow(2,40),o[1]=e/Math.pow(2,32),o[2]=e/Math.pow(2,24),o[3]=e/Math.pow(2,16),o[4]=e/Math.pow(2,8),o[5]=e,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new hi(o)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+Rl.charAt(this.bytes[n]>>>4)+Rl.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new hi(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class Np{constructor(){A(this,"timestamp",0),A(this,"counter",0),A(this,"random",new Fp)}generate(){var e=this.generateOrAbort();if(Z(e)){this.timestamp=0;var n=this.generateOrAbort();if(Z(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return hi.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}var Al,Mu=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};y&&!Z(y.crypto)&&crypto.getRandomValues&&(Mu=t=>crypto.getRandomValues(t));class Fp{constructor(){A(this,"buffer",new Uint32Array(8)),A(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(Mu(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}var Rt=()=>Op().toString(),Op=()=>(Al||(Al=new Np)).generate(),Lp="Thu, 01 Jan 1970 00:00:00 GMT",xn="",Pp=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Dp(t,e){if(e){var n=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G;if(xn)return xn;if(!o||["localhost","127.0.0.1"].includes(i))return"";for(var s=i.split("."),a=Math.min(s.length,8),l="dmn_chk_"+Rt(),c=new RegExp("(^|;)\\s*"+l+"=1");!xn&&a--;){var u=s.slice(a).join("."),d=l+"=1;domain=."+u;o.cookie=d,c.test(o.cookie)&&(o.cookie=d+";expires="+Lp,xn=u)}return xn}(t);if(!n){var r=(i=>{var o=i.match(Pp);return o?o[0]:""})(t);r!==n&&U.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var _t={is_supported:()=>!!G,error:function(t){U.error("cookieStore error: "+t)},get:function(t){if(G){try{for(var e=t+"=",n=G.cookie.split(";").filter(o=>o.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(_t.get(t))||{}}catch{}return e},set:function(t,e,n,r,i){if(G)try{var o="",s="",a=Dp(G.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),o="; expires="+l.toUTCString()}i&&(s="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+o+"; SameSite=Lax; path=/"+a+s;return c.length>3686.4&&U.warn("cookieStore warning: large cookie, len="+c.length),G.cookie=c,c}catch{return}},remove:function(t,e){try{_t.set(t,"",-1,e)}catch{return}}},io=null,Ce={is_supported:function(){if(!Ne(io))return io;var t=!0;if(Z(y))t=!1;else try{var e="__mplssupport__";Ce.set(e,"xyz"),Ce.get(e)!=='"xyz"'&&(t=!1),Ce.remove(e)}catch{t=!1}return t||U.error("localStorage unsupported; falling back to cookie store"),io=t,t},error:function(t){U.error("localStorage error: "+t)},get:function(t){try{return y?.localStorage.getItem(t)}catch(e){Ce.error(e)}return null},parse:function(t){try{return JSON.parse(Ce.get(t))||{}}catch{}return null},set:function(t,e){try{y?.localStorage.setItem(t,JSON.stringify(e))}catch(n){Ce.error(n)}},remove:function(t){try{y?.localStorage.removeItem(t)}catch(e){Ce.error(e)}}},Bp=["distinct_id",Qr,Ln,ti,To],xr=C(C({},Ce),{},{parse:function(t){try{var e={};try{e=_t.parse(t)||{}}catch{}var n=Le(e,JSON.parse(Ce.get(t)||"{}"));return Ce.set(t,n),n}catch{}return null},set:function(t,e,n,r,i,o){try{Ce.set(t,e,void 0,void 0,o);var s={};Bp.forEach(a=>{e[a]&&(s[a]=e[a])}),Object.keys(s).length&&_t.set(t,s,n,r,i,o)}catch(a){Ce.error(a)}},remove:function(t,e){try{y?.localStorage.removeItem(t),_t.remove(t,e)}catch(n){Ce.error(n)}}}),Tr={},qp={is_supported:function(){return!0},error:function(t){U.error("memoryStorage error: "+t)},get:function(t){return Tr[t]||null},parse:function(t){return Tr[t]||null},set:function(t,e){Tr[t]=e},remove:function(t){delete Tr[t]}},At=null,xe={is_supported:function(){if(!Ne(At))return At;if(At=!0,Z(y))At=!1;else try{var t="__support__";xe.set(t,"xyz"),xe.get(t)!=='"xyz"'&&(At=!1),xe.remove(t)}catch{At=!1}return At},error:function(t){U.error("sessionStorage error: ",t)},get:function(t){try{return y?.sessionStorage.getItem(t)}catch(e){xe.error(e)}return null},parse:function(t){try{return JSON.parse(xe.get(t))||null}catch{}return null},set:function(t,e){try{y?.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){xe.error(n)}},remove:function(t){try{y?.sessionStorage.removeItem(t)}catch(e){xe.error(e)}}},ze="Mobile",pi="iOS",rt="Android",Qn="Tablet",Ru=rt+" "+Qn,Au="iPad",Nu="Apple",Fu=Nu+" Watch",er="Safari",wn="BlackBerry",Ou="Samsung",Lu=Ou+"Browser",Pu=Ou+" Internet",Zt="Chrome",Hp=Zt+" OS",Du=Zt+" "+pi,Ts="Internet Explorer",Bu=Ts+" "+ze,Ms="Opera",$p=Ms+" Mini",Rs="Edge",qu="Microsoft "+Rs,gn="Firefox",Hu=gn+" "+pi,tr="Nintendo",nr="PlayStation",vn="Xbox",$u=rt+" "+ze,Wu=ze+" "+er,Dn="Windows",Jo=Dn+" Phone",Nl="Nokia",Ko="Ouya",Vu="Generic",Wp=Vu+" "+ze.toLowerCase(),Zu=Vu+" "+Qn.toLowerCase(),Qo="Konqueror",Fe="(\\d+(\\.\\d+)?)",oo=new RegExp("Version/"+Fe),Vp=new RegExp(vn,"i"),Zp=new RegExp(nr+" \\w+","i"),Gp=new RegExp(tr+" \\w+","i"),As=new RegExp(wn+"|PlayBook|BB10","i"),Up={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},jp=(t,e)=>e&&ee(e,Nu)||function(n){return ee(n,er)&&!ee(n,Zt)&&!ee(n,rt)}(t),Fl=function(t,e){return e=e||"",ee(t," OPR/")&&ee(t,"Mini")?$p:ee(t," OPR/")?Ms:As.test(t)?wn:ee(t,"IE"+ze)||ee(t,"WPDesktop")?Bu:ee(t,Lu)?Pu:ee(t,Rs)||ee(t,"Edg/")?qu:ee(t,"FBIOS")?"Facebook "+ze:ee(t,"UCWEB")||ee(t,"UCBrowser")?"UC Browser":ee(t,"CriOS")?Du:ee(t,"CrMo")||ee(t,Zt)?Zt:ee(t,rt)&&ee(t,er)?$u:ee(t,"FxiOS")?Hu:ee(t.toLowerCase(),Qo.toLowerCase())?Qo:jp(t,e)?ee(t,ze)?Wu:er:ee(t,gn)?gn:ee(t,"MSIE")||ee(t,"Trident/")?Ts:ee(t,"Gecko")?gn:""},zp={[Bu]:[new RegExp("rv:"+Fe)],[qu]:[new RegExp(Rs+"?\\/"+Fe)],[Zt]:[new RegExp("("+Zt+"|CrMo)\\/"+Fe)],[Du]:[new RegExp("CriOS\\/"+Fe)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Fe)],[er]:[oo],[Wu]:[oo],[Ms]:[new RegExp("(Opera|OPR)\\/"+Fe)],[gn]:[new RegExp(gn+"\\/"+Fe)],[Hu]:[new RegExp("FxiOS\\/"+Fe)],[Qo]:[new RegExp("Konqueror[:/]?"+Fe,"i")],[wn]:[new RegExp(wn+" "+Fe),oo],[$u]:[new RegExp("android\\s"+Fe,"i")],[Pu]:[new RegExp(Lu+"\\/"+Fe)],[Ts]:[new RegExp("(rv:|MSIE )"+Fe)],Mozilla:[new RegExp("rv:"+Fe)]},Ol=[[new RegExp(vn+"; "+vn+" (.*?)[);]","i"),t=>[vn,t&&t[1]||""]],[new RegExp(tr,"i"),[tr,""]],[new RegExp(nr,"i"),[nr,""]],[As,[wn,""]],[new RegExp(Dn,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Jo,""];if(new RegExp(ze).test(e)&&!/IEMobile\b/.test(e))return[Dn+" "+ze,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],i=Up[r]||"";return/arm/i.test(e)&&(i="RT"),[Dn,i]}return[Dn,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[pi,e.join(".")]}return[pi,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=Z(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+rt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+rt+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[rt,e.join(".")]}return[rt,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Hp,""]],[/Linux|debian/i,["Linux",""]]],Ll=function(t){return Gp.test(t)?tr:Zp.test(t)?nr:Vp.test(t)?vn:new RegExp(Ko,"i").test(t)?Ko:new RegExp("("+Jo+"|WPDesktop)","i").test(t)?Jo:/iPad/.test(t)?Au:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?Fu:As.test(t)?wn:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(Nl,"i").test(t)?Nl:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(ze).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?rt:Ru:rt:new RegExp("(pda|"+ze+")","i").test(t)?Wp:new RegExp(Qn,"i").test(t)&&!new RegExp(Qn+" pc","i").test(t)?Zu:""},Mr="https?://(.*)",Yp=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],_e={campaignParams:function(t){return G?this._campaignParamsFromUrl(G.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=Yp.concat(e||[]),r={};return ue(n,function(i){var o=Jr(t,i);r[i]=o||null}),r},_searchEngine:function(t){return t?t.search(Mr+"google.([^/?]*)")===0?"google":t.search(Mr+"bing.com")===0?"bing":t.search(Mr+"yahoo.com")===0?"yahoo":t.search(Mr+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=_e._searchEngine(t),n=e!="yahoo"?"q":"p",r={};if(!Ne(e)){r.$search_engine=e;var i=G?Jr(G.referrer,n):"";i.length&&(r.ph_keyword=i)}return r},searchInfo:function(){var t=G?.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:Fl,browserVersion:function(t,e){var n=Fl(t,e),r=zp[n];if(Z(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=t.match(o);if(s)return parseFloat(s[s.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},browserLanguagePrefix:function(){var t=this.browserLanguage();return typeof t=="string"?t.split("-")[0]:void 0},os:function(t){for(var e=0;e<Ol.length;e++){var[n,r]=Ol[e],i=n.exec(t),o=i&&(Me(r)?r(i,t):r);if(o)return o}return["",""]},device:Ll,deviceType:function(t){var e=Ll(t);return e===Au||e===Ru||e==="Kobo"||e==="Kindle Fire"||e===Zu?Qn:e===tr||e===vn||e===nr||e===Ko?"Console":e===Fu?"Wearable":e?ze:"Desktop"},referrer:function(){return G?.referrer||"$direct"},referringDomain:function(){var t;return G!=null&&G.referrer&&((t=dn(G.referrer))===null||t===void 0?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:He?.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(t){var e,{r:n,u:r}=t,i={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=dn(n))===null||e===void 0?void 0:e.host};if(r){i.$initial_current_url=r;var o=dn(r);i.$initial_host=o?.host,i.$initial_pathname=o?.pathname,ue(this._campaignParamsFromUrl(r),function(s,a){i["$initial_"+yo(a)]=s})}return n&&ue(this._searchInfoFromReferrer(n),function(s,a){i["$initial_"+yo(a)]=s}),i},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},timezoneOffset:function(){try{return new Date().getTimezoneOffset()}catch{return}},properties:function(){if(!Ee)return{};var[t,e]=_e.os(Ee);return Le(Xr({$os:t,$os_version:e,$browser:_e.browser(Ee,navigator.vendor),$device:_e.device(Ee),$device_type:_e.deviceType(Ee),$timezone:_e.timezone(),$timezone_offset:_e.timezoneOffset()}),{$current_url:He?.href,$host:He?.host,$pathname:He?.pathname,$raw_user_agent:Ee.length>1e3?Ee.substring(0,997)+"...":Ee,$browser_version:_e.browserVersion(Ee,navigator.vendor),$browser_language:_e.browserLanguage(),$browser_language_prefix:_e.browserLanguagePrefix(),$screen_height:y?.screen.height,$screen_width:y?.screen.width,$viewport_height:y?.innerHeight,$viewport_width:y?.innerWidth,$lib:"web",$lib_version:gt.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!Ee)return{};var[t,e]=_e.os(Ee);return Le(Xr({$os:t,$os_version:e,$browser:_e.browser(Ee,navigator.vendor)}),{$browser_version:_e.browserVersion(Ee,navigator.vendor)})}},Xp=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class so{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&U.info("Persistence loaded",e.persistence,C({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){Xp.indexOf(e.persistence.toLowerCase())===-1&&(U.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Ce.is_supported()?Ce:n==="localstorage+cookie"&&xr.is_supported()?xr:n==="sessionstorage"&&xe.is_supported()?xe:n==="memory"?qp:n==="cookie"?_t:xr.is_supported()?xr:_t}properties(){var e={};return ue(this.props,function(n,r){if(r===on&&fe(n))for(var i=Object.keys(n),o=0;o<i.length;o++)e["$feature/".concat(i[o])]=n[i[o]];else a=r,l=!1,(Ne(s=dh)?l:Ca&&s.indexOf===Ca?s.indexOf(a)!=-1:(ue(s,function(c){if(l||(l=c===a))return Yr}),l))||(e[r]=n);var s,a,l}),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=Le({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,n,r){if(fe(e)){Z(n)&&(n="None"),this.expire_days=Z(r)?this.default_expiry:r;var i=!1;if(ue(e,(o,s)=>{this.props.hasOwnProperty(s)&&this.props[s]!==n||(this.props[s]=o,i=!0)}),i)return this.save(),!0}return!1}register(e,n){if(fe(e)){this.expire_days=Z(n)?this.default_expiry:n;var r=!1;if(ue(e,(i,o)=>{e.hasOwnProperty(o)&&this.props[o]!==i&&(this.props[o]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=_e.campaignParams(this.config.custom_campaign_params);rn(Xr(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(_e.searchInfo())}update_referrer_info(){this.register_once(_e.referrerInfo(),void 0)}set_initial_person_info(){this.props[Eo]||this.props[xo]||this.register_once({[To]:_e.initialPersonInfo()},void 0)}get_referrer_info(){return Xr({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};ue([xo,Eo],i=>{var o=this.props[i];o&&ue(o,function(s,a){e["$initial_"+yo(a)]=s})});var n=this.props[To];if(n){var r=_e.initialPersonPropsFromInfo(n);Le(e,r)}return e}safe_merge(e){return ue(this.props,function(n,r){r in e||(e[r]=n)}),e}update_config(e,n){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var r=this.buildStorage(e),i=this.props;this.clear(),this.storage=r,this.props=i,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,n){var r=this.props[On]||{};r[e]=n,this.props[On]=r,this.save()}remove_event_timer(e){var n=(this.props[On]||{})[e];return Z(n)||(delete this.props[On][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}function gi(t){var e,n;return((e=JSON.stringify(t,(n=[],function(r,i){if(fe(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))===null||e===void 0?void 0:e.length)||0}function es(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),r=t.data.slice(0,n),i=t.data.slice(n);return[es({size:gi(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),es({size:gi(i),data:i,sessionId:t.sessionId,windowId:t.windowId})].flatMap(o=>o)}return[t]}var ht=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(ht||{}),Qe=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Qe||{});function it(t,e,n,r,i){return e>n&&(U.warn("min cannot be greater than max."),e=n),be(t)?t>n?(r&&U.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(r&&U.warn(r+" cannot be less than min: "+e+". Using min value instead."),e):t:(r&&U.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),it(i||n,e,n,r))}class Jp{constructor(e){var n,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A(this,"bucketSize",100),A(this,"refillRate",10),A(this,"mutationBuckets",{}),A(this,"loggedTracker",{}),A(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(o=>{this.mutationBuckets[o]=this.mutationBuckets[o]+this.refillRate,this.mutationBuckets[o]>=this.bucketSize&&delete this.mutationBuckets[o]})}),A(this,"getNodeOrRelevantParent",o=>{var s=this.rrweb.mirror.getNode(o);if(s?.nodeName!=="svg"&&s instanceof Element){var a=s.closest("svg");if(a)return[this.rrweb.mirror.getId(a),a]}return[o,s]}),A(this,"numberOfChanges",o=>{var s,a,l,c,u,d,p,h;return((s=(a=o.removes)===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0)+((l=(c=o.attributes)===null||c===void 0?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=o.texts)===null||d===void 0?void 0:d.length)!==null&&u!==void 0?u:0)+((p=(h=o.adds)===null||h===void 0?void 0:h.length)!==null&&p!==void 0?p:0)}),A(this,"throttleMutations",o=>{if(o.type!==3||o.data.source!==0)return o;var s=o.data,a=this.numberOfChanges(s);s.attributes&&(s.attributes=s.attributes.filter(c=>{var u,d,p,[h,g]=this.getNodeOrRelevantParent(c.id);return this.mutationBuckets[h]===0?!1:(this.mutationBuckets[h]=(u=this.mutationBuckets[h])!==null&&u!==void 0?u:this.bucketSize,this.mutationBuckets[h]=Math.max(this.mutationBuckets[h]-1,0),this.mutationBuckets[h]===0&&(this.loggedTracker[h]||(this.loggedTracker[h]=!0,(d=(p=this.options).onBlockedNode)===null||d===void 0||d.call(p,h,g))),c)}));var l=this.numberOfChanges(s);return l!==0||a===l?o:void 0}),this.rrweb=e,this.options=i,this.refillRate=it((n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=it((r=this.options.bucketSize)!==null&&r!==void 0?r:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Ye=Uint8Array,We=Uint16Array,Sn=Uint32Array,Ns=new Ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fs=new Ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pl=new Ye([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gu=function(t,e){for(var n=new We(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new Sn(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},Uu=Gu(Ns,2),Kp=Uu[0],ts=Uu[1];Kp[28]=258,ts[258]=28;for(var Dl=Gu(Fs,0)[1],ju=new We(32768),ge=0;ge<32768;++ge){var Nt=(43690&ge)>>>1|(21845&ge)<<1;Nt=(61680&(Nt=(52428&Nt)>>>2|(13107&Nt)<<2))>>>4|(3855&Nt)<<4,ju[ge]=((65280&Nt)>>>8|(255&Nt)<<8)>>>1}var jn=function(t,e,n){for(var r=t.length,i=0,o=new We(e);i<r;++i)++o[t[i]-1];var s,a=new We(e);for(i=0;i<e;++i)a[i]=a[i-1]+o[i-1]<<1;for(s=new We(r),i=0;i<r;++i)s[i]=ju[a[t[i]-1]++]>>>15-t[i];return s},Gt=new Ye(288);for(ge=0;ge<144;++ge)Gt[ge]=8;for(ge=144;ge<256;++ge)Gt[ge]=9;for(ge=256;ge<280;++ge)Gt[ge]=7;for(ge=280;ge<288;++ge)Gt[ge]=8;var vi=new Ye(32);for(ge=0;ge<32;++ge)vi[ge]=5;var Qp=jn(Gt,9),eg=jn(vi,5),zu=function(t){return(t/8>>0)+(7&t&&1)},Yu=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof We?We:t instanceof Sn?Sn:Ye)(n-e);return r.set(t.subarray(e,n)),r},lt=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Tn=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},ao=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return[new Ye(0),0];if(i==1){var s=new Ye(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(S,I){return S.f-I.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var p=o[0].s;for(r=1;r<i;++r)o[r].s>p&&(p=o[r].s);var h=new We(p+1),g=ns(n[u-1],h,0);if(g>e){r=0;var v=0,b=g-e,_=1<<b;for(o.sort(function(S,I){return h[I.s]-h[S.s]||S.f-I.f});r<i;++r){var f=o[r].s;if(!(h[f]>e))break;v+=_-(1<<g-h[f]),h[f]=e}for(v>>>=b;v>0;){var m=o[r].s;h[m]<e?v-=1<<e-h[m]++-1:++r}for(;r>=0&&v;--r){var w=o[r].s;h[w]==e&&(--h[w],++v)}g=e}return[new Ye(h),g]},ns=function(t,e,n){return t.s==-1?Math.max(ns(t.l,e,n+1),ns(t.r,e,n+1)):e[t.s]=n},Bl=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new We(++e),r=0,i=t[0],o=1,s=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return[n.subarray(0,r),e]},Mn=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},rs=function(t,e,n){var r=n.length,i=zu(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},ql=function(t,e,n,r,i,o,s,a,l,c,u){lt(e,u++,n),++i[256];for(var d=ao(i,15),p=d[0],h=d[1],g=ao(o,15),v=g[0],b=g[1],_=Bl(p),f=_[0],m=_[1],w=Bl(v),S=w[0],I=w[1],E=new We(19),k=0;k<f.length;++k)E[31&f[k]]++;for(k=0;k<S.length;++k)E[31&S[k]]++;for(var x=ao(E,7),T=x[0],D=x[1],M=19;M>4&&!T[Pl[M-1]];--M);var W,$,P,V,L=c+5<<3,O=Mn(i,Gt)+Mn(o,vi)+s,N=Mn(i,p)+Mn(o,v)+s+14+3*M+Mn(E,T)+(2*E[16]+3*E[17]+7*E[18]);if(L<=O&&L<=N)return rs(e,u,t.subarray(l,l+c));if(lt(e,u,1+(N<O)),u+=2,N<O){W=jn(p,h),$=p,P=jn(v,b),V=v;var Y=jn(T,D);for(lt(e,u,m-257),lt(e,u+5,I-1),lt(e,u+10,M-4),u+=14,k=0;k<M;++k)lt(e,u+3*k,T[Pl[k]]);u+=3*M;for(var j=[f,S],R=0;R<2;++R){var H=j[R];for(k=0;k<H.length;++k){var te=31&H[k];lt(e,u,Y[te]),u+=T[te],te>15&&(lt(e,u,H[k]>>>5&127),u+=H[k]>>>12)}}}else W=Qp,$=Gt,P=eg,V=vi;for(k=0;k<a;++k)if(r[k]>255){te=r[k]>>>18&31,Tn(e,u,W[te+257]),u+=$[te+257],te>7&&(lt(e,u,r[k]>>>23&31),u+=Ns[te]);var ae=31&r[k];Tn(e,u,P[ae]),u+=V[ae],ae>3&&(Tn(e,u,r[k]>>>5&8191),u+=Fs[ae])}else Tn(e,u,W[r[k]]),u+=$[r[k]];return Tn(e,u,W[256]),u+$[256]},tg=new Sn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ng=function(){for(var t=new Sn(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),rg=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=ng[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},ig=function(t,e,n,r,i){return function(o,s,a,l,c,u){var d=o.length,p=new Ye(l+d+5*(1+Math.floor(d/7e3))+c),h=p.subarray(l,p.length-c),g=0;if(!s||d<8)for(var v=0;v<=d;v+=65535){var b=v+65535;b<d?g=rs(h,g,o.subarray(v,b)):(h[v]=u,g=rs(h,g,o.subarray(v,d)))}else{for(var _=tg[s-1],f=_>>>13,m=8191&_,w=(1<<a)-1,S=new We(32768),I=new We(w+1),E=Math.ceil(a/3),k=2*E,x=function(K){return(o[K]^o[K+1]<<E^o[K+2]<<k)&w},T=new Sn(25e3),D=new We(288),M=new We(32),W=0,$=0,P=(v=0,0),V=0,L=0;v<d;++v){var O=x(v),N=32767&v,Y=I[O];if(S[N]=Y,I[O]=N,V<=v){var j=d-v;if((W>7e3||P>24576)&&j>423){g=ql(o,h,0,T,D,M,$,P,L,v-L,g),P=W=$=0,L=v;for(var R=0;R<286;++R)D[R]=0;for(R=0;R<30;++R)M[R]=0}var H=2,te=0,ae=m,X=N-Y&32767;if(j>2&&O==x(v-X))for(var le=Math.min(f,j)-1,ce=Math.min(32767,v),De=Math.min(258,j);X<=ce&&--ae&&N!=Y;){if(o[v+H]==o[v+H-X]){for(var se=0;se<De&&o[v+se]==o[v+se-X];++se);if(se>H){if(H=se,te=X,se>le)break;var st=Math.min(X,se-2),yt=0;for(R=0;R<st;++R){var Ve=v-X+R+32768&32767,J=Ve-S[Ve]+32768&32767;J>yt&&(yt=J,Y=Ve)}}}X+=(N=Y)-(Y=S[N])+32768&32767}if(te){T[P++]=268435456|ts[H]<<18|Dl[te];var Ie=31&ts[H],z=31&Dl[te];$+=Ns[Ie]+Fs[z],++D[257+Ie],++M[z],V=v+H,++W}else T[P++]=o[v],++D[o[v]]}}g=ql(o,h,u,T,D,M,$,P,L,v-L,g)}return Yu(p,0,l+zu(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)},is=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},og=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&is(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},sg=function(t){return 10+(t.filename&&t.filename.length+1||0)};function Xu(t,e){e===void 0&&(e={});var n=rg(),r=t.length;n.p(t);var i=ig(t,e,sg(e),8),o=i.length;return og(i,e),is(i,o-8,n.d()),is(i,o-4,r),i}function Ju(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Ye(t.length+(t.length>>>1)),i=0,o=function(c){r[i++]=c},s=0;s<n;++s){if(i+5>r.length){var a=new Ye(i+8+(n-s<<1));a.set(r),r=a}var l=t.charCodeAt(s);l<128||e?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return Yu(r,0,i)}var Bn="[SessionRecording]",Ae=Re(Bn),ag=3e5,lg=[Qe.MouseMove,Qe.MouseInteraction,Qe.Scroll,Qe.ViewportResize,Qe.Input,Qe.TouchMove,Qe.MediaInteraction,Qe.Drag],Hl=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Ft(t){return function(e,n){for(var r="",i=0;i<e.length;){var o=e[i++];o<128||n?r+=String.fromCharCode(o):o<224?r+=String.fromCharCode((31&o)<<6|63&e[i++]):o<240?r+=String.fromCharCode((15&o)<<12|(63&e[i++])<<6|63&e[i++]):(o=((15&o)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}return r}(Xu(Ju(JSON.stringify(t))),!0)}function $l(t){return t.type===ht.Custom&&t.data.tag==="sessionIdle"}function Wl(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class cg{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,n;return B==null||(e=B.__PosthogExtensions__)===null||e===void 0||(n=e.rrweb)===null||n===void 0?void 0:n.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(Bn+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,n;return this.triggerStatus==="trigger_pending"?6e4:(e=(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:ag}get isSampled(){var e=this.instance.get_property(Ln);return nt(e)?e:null}get sessionDuration(){var e,n,r=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get isRecordingEnabled(){var e=!!this.instance.get_property(So),n=!this.instance.config.disable_session_recording;return y&&e&&n}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(Ra),n=this.instance.config.enable_recording_console_log;return n??e}get canvasRecording(){var e,n,r,i,o,s,a=this.instance.config.session_recording.captureCanvas,l=this.instance.get_property(Na),c=(e=(n=a?.recordCanvas)!==null&&n!==void 0?n:l?.enabled)!==null&&e!==void 0&&e,u=(r=(i=a?.canvasFps)!==null&&i!==void 0?i:l?.fps)!==null&&r!==void 0?r:0,d=(o=(s=a?.canvasQuality)!==null&&s!==void 0?s:l?.quality)!==null&&o!==void 0?o:0;return{enabled:c,fps:it(u,0,12,"canvas recording fps"),quality:it(d,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,n,r=this.instance.get_property(Aa),i={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},o=i?.recordHeaders||r?.recordHeaders,s=i?.recordBody||r?.recordBody,a=fe(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,l=!!(nt(a)?a:r?.capturePerformance);return o||s||l?{recordHeaders:o,recordBody:s,recordPerformance:l}:void 0}get sampleRate(){var e=this.instance.get_property(Fa);return be(e)?e:null}get minimumDuration(){var e=this.instance.get_property(Oa);return be(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?this._urlBlocked?"paused":de(this._linkedFlag)||this._linkedFlagSeen?this.triggerStatus==="trigger_pending"?"buffering":nt(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return this._urlTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Vi))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return this._eventTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Zi))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e=this.eventTriggerStatus==="trigger_activated"||this.urlTriggerStatus==="trigger_activated",n=this.eventTriggerStatus==="trigger_pending"||this.urlTriggerStatus==="trigger_pending";return e?"trigger_activated":n?"trigger_pending":"trigger_disabled"}constructor(e){if(A(this,"queuedRRWebEvents",[]),A(this,"isIdle",!1),A(this,"_linkedFlagSeen",!1),A(this,"_lastActivityTimestamp",Date.now()),A(this,"_linkedFlag",null),A(this,"_removePageViewCaptureHook",void 0),A(this,"_onSessionIdListener",void 0),A(this,"_persistDecideOnSessionListener",void 0),A(this,"_samplingSessionListener",void 0),A(this,"_urlTriggers",[]),A(this,"_urlBlocklist",[]),A(this,"_urlBlocked",!1),A(this,"_eventTriggers",[]),A(this,"_removeEventTriggerCaptureHook",void 0),A(this,"_forceAllowLocalhostNetworkCapture",!1),A(this,"_onBeforeUnload",()=>{this._flushBuffer()}),A(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),A(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),A(this,"_onVisibilityChange",()=>{if(G!=null&&G.visibilityState){var i="window "+G.visibilityState;this._tryAddCustomEvent(i,{})}}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw Ae.error("started without valid sessionManager"),new Error(Bn+" started without valid sessionManager. This is a bug.");if(this.instance.config.__preview_experimental_cookieless_mode)throw new Error(Bn+" cannot be used with __preview_experimental_cookieless_mode.");var{sessionId:n,windowId:r}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=n,this.windowId=r,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&Ae.warn("session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),y?.addEventListener("beforeunload",this._onBeforeUnload),y?.addEventListener("offline",this._onOffline),y?.addEventListener("online",this._onOnline),y?.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),de(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this._maskUrl(n?.properties.$current_url):"";if(!r)return;this._tryAddCustomEvent("$pageview",{href:r})}}catch(i){Ae.error("Could not add $pageview to rrweb session",i)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((n,r,i)=>{var o,s,a,l;i&&(this._tryAddCustomEvent("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(o=this.instance)===null||o===void 0||(s=o.persistence)===null||s===void 0||s.unregister(Zi),(a=this.instance)===null||a===void 0||(l=a.persistence)===null||l===void 0||l.unregister(Vi))}))):this.stopRecording()}stopRecording(){var e,n,r,i;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,y?.removeEventListener("beforeunload",this._onBeforeUnload),y?.removeEventListener("offline",this._onOffline),y?.removeEventListener("online",this._onOnline),y?.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),(e=this._removePageViewCaptureHook)===null||e===void 0||e.call(this),this._removePageViewCaptureHook=void 0,(n=this._removeEventTriggerCaptureHook)===null||n===void 0||n.call(this),this._removeEventTriggerCaptureHook=void 0,(r=this._onSessionIdListener)===null||r===void 0||r.call(this),this._onSessionIdListener=void 0,(i=this._samplingSessionListener)===null||i===void 0||i.call(this),this._samplingSessionListener=void 0,Ae.info("stopped"))}makeSamplingDecision(e){var n,r=this.sessionId!==e,i=this.sampleRate;if(be(i)){var o,s=this.isSampled,a=r||!nt(s);a?o=Math.random()<i:o=s,a&&(o?this._reportStarted("sampled"):Ae.warn("Sample rate (".concat(i,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:i,isSampled:o})),(n=this.instance.persistence)===null||n===void 0||n.register({[Ln]:o})}else{var l;(l=this.instance.persistence)===null||l===void 0||l.register({[Ln]:null})}}onRemoteConfig(e){var n,r,i,o,s,a;if(this._tryAddCustomEvent("$remote_config_received",e),this._persistRemoteConfig(e),this._linkedFlag=((n=e.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(r=e.sessionRecording)!==null&&r!==void 0&&r.endpoint&&(this._endpoint=(a=e.sessionRecording)===null||a===void 0?void 0:a.endpoint),this._setupSampling(),!de(this._linkedFlag)&&!this._linkedFlagSeen){var l=we(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,c=we(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((u,d)=>{var p=fe(d)&&l in d,h=c?d[l]===c:p;h&&this._reportStarted("linked_flag_matched",{linkedFlag:l,linkedVariant:c}),this._linkedFlagSeen=h})}(i=e.sessionRecording)!==null&&i!==void 0&&i.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),(o=e.sessionRecording)!==null&&o!==void 0&&o.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),(s=e.sessionRecording)!==null&&s!==void 0&&s.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){be(this.sampleRate)&&de(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistRemoteConfig(e){if(this.instance.persistence){var n,r=this.instance.persistence,i=()=>{var o,s,a,l,c,u,d,p,h=(o=e.sessionRecording)===null||o===void 0?void 0:o.sampleRate,g=de(h)?null:parseFloat(h),v=(s=e.sessionRecording)===null||s===void 0?void 0:s.minimumDurationMilliseconds;r.register({[So]:!!e.sessionRecording,[Ra]:(a=e.sessionRecording)===null||a===void 0?void 0:a.consoleLogRecordingEnabled,[Aa]:C({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture),[Na]:{enabled:(c=e.sessionRecording)===null||c===void 0?void 0:c.recordCanvas,fps:(u=e.sessionRecording)===null||u===void 0?void 0:u.canvasFps,quality:(d=e.sessionRecording)===null||d===void 0?void 0:d.canvasQuality},[Fa]:g,[Oa]:Z(v)?null:v,[La]:(p=e.sessionRecording)===null||p===void 0?void 0:p.scriptConfig})};i(),(n=this._persistDecideOnSessionListener)===null||n===void 0||n.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(i)}}log(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:r,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!Z(Object.assign)&&!Z(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var n,r;this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():(n=B.__PosthogExtensions__)===null||n===void 0||(r=n.loadExternalDependency)===null||r===void 0||r.call(n,this.instance,this.scriptName,i=>{if(i)return Ae.error("could not load recorder",i);this._onScriptLoaded()}),Ae.info("starting"),this.status==="active"&&this._reportStarted(e||"recording_initialized")}}get scriptName(){var e,n,r;return((e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0||(r=n.get_property(La))===null||r===void 0?void 0:r.script)||"recorder"}isInteractiveEvent(e){var n;return e.type===3&&lg.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}_updateWindowAndSessionIds(e){var n=this.isInteractiveEvent(e);n||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var r=!1;if(n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),r=!0)),!this.isIdle){var{windowId:i,sessionId:o}=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),s=this.sessionId!==o,a=this.windowId!==i;this.windowId=i,this.sessionId=o,s||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Ae.warn("could not emit queued rrweb event.",n,e),!1}}_tryAddCustomEvent(e,n){return this._tryRRWebMethod(Hl(()=>this.rrwebRecord.addCustomEvent(e,n)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(Hl(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},r=this.instance.config.session_recording;for(var[i,o]of Object.entries(r||{}))i in n&&(i==="maskInputOptions"?n.maskInputOptions=C({password:!0},o):n[i]=o);if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new Jp(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(a,l)=>{var c="Too many mutations on node '".concat(a,"'. Rate limiting. This could be due to SVG animations or something similar");Ae.info(c,{node:l}),this.log(Bn+" "+c,"warn")}});var s=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(C({emit:a=>{this.onRRwebEmit(a)},plugins:s},n)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:s.map(a=>a?.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else Ae.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,n,r,i,o=[],s=(e=B.__PosthogExtensions__)===null||e===void 0||(n=e.rrwebPlugins)===null||n===void 0?void 0:n.getRecordConsolePlugin;s&&this.isConsoleLogCaptureEnabled&&o.push(s());var a=(r=B.__PosthogExtensions__)===null||r===void 0||(i=r.rrwebPlugins)===null||i===void 0?void 0:i.getRecordNetworkPlugin;return this.networkPayloadCapture&&Me(a)&&(!uh.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(a(Sh(this.instance.config,this.networkPayloadCapture))):Ae.info("NetworkCapture not started because we are on localhost.")),o}onRRwebEmit(e){var n;if(this._processQueuedEvents(),e&&fe(e)){if(e.type===ht.Meta){var r=this._maskUrl(e.data.href);if(this._lastHref=r,!r)return;e.data.href=r}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),this.status!=="paused"||function(d){return d.type===ht.Custom&&d.data.tag==="recording paused"}(e)){e.type===ht.FullSnapshot&&this._scheduleFullSnapshot(),e.type===ht.FullSnapshot&&this.triggerStatus==="trigger_pending"&&this.clearBuffer();var i=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(i){var o=function(d){var p=d;if(p&&fe(p)&&p.type===6&&fe(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var h=[],g=0;g<p.data.payload.payload.length;g++)p.data.payload.payload[g]&&p.data.payload.payload[g].length>2e3?h.push(p.data.payload.payload[g].slice(0,2e3)+"...[truncated]"):h.push(p.data.payload.payload[g]);return p.data.payload.payload=h,d}return d}(i);if(this._updateWindowAndSessionIds(o),!this.isIdle||$l(o)){if($l(o)){var s=o.data.payload;if(s){var a=s.lastActivityTimestamp,l=s.threshold;o.timestamp=a+l}}var c=(n=this.instance.config.session_recording.compress_events)===null||n===void 0||n?function(d){if(gi(d)<1024)return d;try{if(d.type===ht.FullSnapshot)return C(C({},d),{},{data:Ft(d.data),cv:"2024-10"});if(d.type===ht.IncrementalSnapshot&&d.data.source===Qe.Mutation)return C(C({},d),{},{cv:"2024-10",data:C(C({},d.data),{},{texts:Ft(d.data.texts),attributes:Ft(d.data.attributes),removes:Ft(d.data.removes),adds:Ft(d.data.adds)})});if(d.type===ht.IncrementalSnapshot&&d.data.source===Qe.StyleSheetRule)return C(C({},d),{},{cv:"2024-10",data:C(C({},d.data),{},{adds:Ft(d.data.adds),removes:Ft(d.data.removes)})})}catch(p){Ae.error("could not compress event - will use uncompressed event",p)}return d}(o):o,u={$snapshot_bytes:gi(c),$snapshot_data:c,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(u):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&y){var e=this._maskUrl(y.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this._tryRRWebMethod(n)})}}_maskUrl(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))===null||r===void 0?void 0:r.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,n=this.sessionDuration,r=be(n)&&n>=0,i=be(e)&&r&&n<e;return this.status==="buffering"||this.status==="paused"||i?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&es(this.buffer).forEach(o=>{this._captureSnapshot({$snapshot_bytes:o.size,$snapshot_data:o.data,$session_id:o.sessionId,$window_id:o.windowId,$lib:"web",$lib_version:gt.LIB_VERSION})}),this.clearBuffer())}_captureSnapshotBuffered(e){var n,r=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+r>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(y!==void 0&&y.location.href){var e=y.location.href,n=this.status==="paused",r=Wl(e,this._urlBlocklist);r&&!n?this._pauseRecording():!r&&n&&this._resumeRecording(),Wl(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var n,r;this.triggerStatus==="trigger_pending"&&((n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0||r.register({[e==="url"?Vi:Zi]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){this.status!=="paused"&&(this._urlBlocked=!0,clearInterval(this._fullSnapshotTimer),Ae.info("recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){this.status==="paused"&&(this._urlBlocked=!1,this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),Ae.info("recording resumed"))}_addEventTriggerListener(){this._eventTriggers.length!==0&&de(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(n){Ae.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;(e=this.instance.persistence)===null||e===void 0||e.register({[Ln]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,n){this.instance.register_for_session({$session_recording_start_reason:e}),Ae.info(e.replace("_"," "),n),ee(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,n)}}var Ot=Re("[RemoteConfig]");class ug{constructor(e){this.instance=e}get remoteConfig(){var e,n;return(e=B._POSTHOG_REMOTE_CONFIG)===null||e===void 0||(n=e[this.instance.config.token])===null||n===void 0?void 0:n.config}_loadRemoteConfigJs(e){var n,r,i;(n=B.__PosthogExtensions__)!==null&&n!==void 0&&n.loadExternalDependency?(r=B.__PosthogExtensions__)===null||r===void 0||(i=r.loadExternalDependency)===null||i===void 0||i.call(r,this.instance,"remote-config",()=>e(this.remoteConfig)):(Ot.error("PostHog Extensions not found. Cannot load remote config."),e())}_loadRemoteConfigJSON(e){this.instance._send_request({method:"GET",url:this.instance.requestRouter.endpointFor("assets","/array/".concat(this.instance.config.token,"/config")),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Ot.info("Using preloaded remote config",this.remoteConfig),void this.onRemoteConfig(this.remoteConfig);if(this.instance.config.advanced_disable_decide)return void Ot.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs(e=>{if(!e)return Ot.info("No config found after loading remote JS config. Falling back to JSON."),void this._loadRemoteConfigJSON(n=>{this.onRemoteConfig(n)});this.onRemoteConfig(e)})}catch(e){Ot.error("Error loading remote config",e)}}onRemoteConfig(e){e?this.instance.config.__preview_remote_config?(this.instance._onRemoteConfig(e),e.hasFeatureFlags!==!1&&this.instance.featureFlags.ensureFlagsLoaded()):Ot.info("__preview_remote_config is disabled. Logging config instead",e):Ot.error("Failed to fetch remote config from PostHog.")}}var pt,dg=y!=null&&y.location?Kr(y.location.hash,"__posthog")||Kr(location.hash,"state"):null,Vl="_postHogToolbarParams";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(pt||(pt={}));class hg{constructor(e){this.instance=e}setToolbarState(e){B.ph_toolbar_state=e}getToolbarState(){var e;return(e=B.ph_toolbar_state)!==null&&e!==void 0?e:pt.UNINITIALIZED}maybeLoadToolbar(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!y||!G)return!1;r=(e=r)!==null&&e!==void 0?e:y.location,o=(n=o)!==null&&n!==void 0?n:y.history;try{if(!i){try{y.localStorage.setItem("test","test"),y.localStorage.removeItem("test")}catch{return!1}i=y?.localStorage}var s,a=dg||Kr(r.hash,"__posthog")||Kr(r.hash,"state"),l=a?ka(()=>JSON.parse(atob(decodeURIComponent(a))))||ka(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((s=l).source="url",s&&Object.keys(s).length>0&&(l.desiredHash?r.hash=l.desiredHash:o?o.replaceState(o.state,"",r.pathname+r.search):r.hash="")):((s=JSON.parse(i.getItem(Vl)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch{return!1}}_callLoadToolbar(e){(B.ph_load_toolbar||B.ph_load_editor)(e,this.instance)}loadToolbar(e){var n=!(G==null||!G.getElementById(Hc));if(!y||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=C(C({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(y.localStorage.setItem(Vl,JSON.stringify(C(C({},i),{},{source:void 0}))),this.getToolbarState()===pt.LOADED)this._callLoadToolbar(i);else if(this.getToolbarState()===pt.UNINITIALIZED){var o,s;this.setToolbarState(pt.LOADING),(o=B.__PosthogExtensions__)===null||o===void 0||(s=o.loadExternalDependency)===null||s===void 0||s.call(o,this.instance,"toolbar",a=>{if(a)return U.error("[Toolbar] Failed to load",a),void this.setToolbarState(pt.UNINITIALIZED);this.setToolbarState(pt.LOADED),this._callLoadToolbar(i)}),vt(y,"turbolinks:load",()=>{this.setToolbarState(pt.UNINITIALIZED),this.loadToolbar(i)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,r)}}class pg{constructor(e){A(this,"isPaused",!0),A(this,"queue",[]),A(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},n=Object.values(e),r=[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)];r.map(i=>{this.sendRequest(C(C({},i),{},{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){var n=this.formatQueue(),r=function(o){var s=n[o],a=new Date().getTime();s.data&&pe(s.data)&&ue(s.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),e.sendRequest(s)};for(var i in n)r(i)}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return ue(this.queue,n=>{var r,i=n,o=(i?i.batchKey:null)||i.url;Z(e[o])&&(e[o]=C(C({},i),{},{data:[]})),(r=e[o].data)===null||r===void 0||r.push(i.data)}),this.queue=[],e}}var gg=function(t){var e,n,r,i,o="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var s=t.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),Ne(a)||(n>e&&(o+=t.substring(e,n)),o+=a,e=n=i+1)}return n>e&&(o+=t.substring(e,t.length)),o},vg=!!_o||!!mo,Zl="text/plain",fi=(t,e)=>{var[n,r]=t.split("?"),i=C({},e);r?.split("&").forEach(s=>{var[a]=s.split("=");delete i[a]});var o=Dc(i);return o=o?(r?r+"&":"")+o:r,"".concat(n,"?").concat(o)},Rr=(t,e)=>JSON.stringify(t,(n,r)=>typeof r=="bigint"?r.toString():r,e),lo=t=>{var{data:e,compression:n}=t;if(e){if(n===tt.GZipJS){var r=Xu(Ju(Rr(e)),{mtime:0}),i=new Blob([r],{type:Zl});return{contentType:Zl,body:i,estimatedSize:i.size}}if(n===tt.Base64){var o=function(l){var c,u,d,p,h,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=0,b=0,_="",f=[];if(!l)return l;l=gg(l);do c=(h=l.charCodeAt(v++)<<16|l.charCodeAt(v++)<<8|l.charCodeAt(v++))>>18&63,u=h>>12&63,d=h>>6&63,p=63&h,f[b++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(p);while(v<l.length);switch(_=f.join(""),l.length%3){case 1:_=_.slice(0,-2)+"==";break;case 2:_=_.slice(0,-1)+"="}return _}(Rr(e)),s=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Rr(l)))(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=Rr(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},zn=[];mo&&zn.push({transport:"fetch",method:t=>{var e,n,{contentType:r,body:i,estimatedSize:o}=(e=lo(t))!==null&&e!==void 0?e:{},s=new Headers;ue(t.headers,function(u,d){s.append(d,u)}),r&&s.append("Content-Type",r);var a=t.url,l=null;if(Ia){var c=new Ia;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}mo(a,C({method:t?.method||"GET",headers:s,keepalive:t.method==="POST"&&(o||0)<52428.8,body:i,signal:(n=l)===null||n===void 0?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var p,h={statusCode:u.status,text:d};if(u.status===200)try{h.json=JSON.parse(d)}catch(g){U.error(g)}(p=t.callback)===null||p===void 0||p.call(t,h)})).catch(u=>{var d;U.error(u),(d=t.callback)===null||d===void 0||d.call(t,{statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),_o&&zn.push({transport:"XHR",method:t=>{var e,n=new _o;n.open(t.method||"GET",t.url,!0);var{contentType:r,body:i}=(e=lo(t))!==null&&e!==void 0?e:{};ue(t.headers,function(o,s){n.setRequestHeader(s,o)}),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var o,s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}(o=t.callback)===null||o===void 0||o.call(t,s)}},n.send(i)}}),Ze!=null&&Ze.sendBeacon&&zn.push({transport:"sendBeacon",method:t=>{var e=fi(t.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=lo(t))!==null&&n!==void 0?n:{},o=typeof i=="string"?new Blob([i],{type:r}):i;Ze.sendBeacon(e,o)}catch{}}});var fg=["retriesPerformedSoFar"];class mg{constructor(e){A(this,"isPolling",!1),A(this,"pollIntervalMs",3e3),A(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!Z(y)&&"onLine"in y.navigator&&(this.areWeOnline=y.navigator.onLine,y.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),y.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){var{retriesPerformedSoFar:n}=e,r=ss(e,fg);be(n)&&n>0&&(r.url=fi(r.url,{retry_count:n})),this.instance._send_request(C(C({},r),{},{callback:i=>{var o;i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n??0)<10?this.enqueue(C({retriesPerformedSoFar:n},r)):(o=r.callback)===null||o===void 0||o.call(r,i)}}))}enqueue(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=function(s){var a=3e3*Math.pow(2,s),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),i=Date.now()+r;this.queue.push({retryAt:i,requestOptions:e});var o="Enqueued failed request for retry in ".concat(r);navigator.onLine||(o+=" (Browser is offline)"),U.warn(o),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){var e=Date.now(),n=[],r=this.queue.filter(o=>o.retryAt<e||(n.push(o),!1));if(this.queue=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(C(C({},e),{},{transport:"sendBeacon"}))}catch(n){U.error(n)}this.queue=[]}}var $t,Gl=Re("[SessionId]");class _g{constructor(e,n,r){var i;if(A(this,"_sessionIdChangedHandlers",[]),!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.config=e.config,this.persistence=e.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=n||Rt,this._windowIdGenerator=r||Rt;var o=this.config.persistence_name||this.config.token,s=this.config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*it(s,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.resetIdleTimer(),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var a=xe.parse(this._window_id_storage_key),l=xe.parse(this._primary_window_exists_storage_key);a&&!l?this._windowId=a:xe.remove(this._window_id_storage_key),xe.set(this._primary_window_exists_storage_key,!0)}if((i=this.config.bootstrap)!==null&&i!==void 0&&i.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),c)}catch(u){Gl.error("Invalid sessionID in bootstrap",u)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Z(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(n=>n!==e)}}_canUseSessionStorage(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&xe.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&xe.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?xe.parse(this._window_id_storage_key):null}_setSessionId(e,n,r){e===this._sessionId&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register({[Qr]:[n,e,r]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Qr];return pe(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){y?.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&xe.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.config.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,o,s]=this._getSessionId(),a=this._getWindowId(),l=be(s)&&s>0&&Math.abs(r-s)>864e5,c=!1,u=!o,d=!e&&Math.abs(r-i)>this.sessionTimeoutMs;u||d||l?(o=this._sessionIdGenerator(),a=this._windowIdGenerator(),Gl.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),s=r,c=!0):a||(a=this._windowIdGenerator(),c=!0);var p=i===0||!e||l?r:i,h=s===0?new Date().getTime():s;return this._setWindowId(a),this._setSessionId(o,p,h),e||this.resetIdleTimer(),c&&this._sessionIdChangedHandlers.forEach(g=>g(o,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:o,windowId:a,sessionStartTimestamp:h,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}resetIdleTimer(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}(function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"})($t||($t={}));var Ul="i.posthog.com";class yg{constructor(e){A(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(Ul),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=$t.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=$t.EU:this._regionCache[this.apiHost]=$t.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),e==="ui")return this.uiHost+n;if(this.region===$t.CUSTOM)return this.apiHost+n;var r=Ul+n;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(r);case"api":return"https://".concat(this.region,".").concat(r)}}}var Ku="posthog-js";function Qu(t){var{organization:e,projectId:n,prefix:r,severityAllowList:i=["error"]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o=>{var s,a,l,c,u;if(!(i==="*"||i.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));o.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((s=o.exception)===null||s===void 0?void 0:s.values)||[];p.map(g=>{g.stacktrace&&(g.stacktrace.type="raw")});var h={$exception_message:((a=p[0])===null||a===void 0?void 0:a.value)||o.message,$exception_type:(l=p[0])===null||l===void 0?void 0:l.type,$exception_personURL:d,$exception_level:o.level,$exception_list:p,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((c=p[0])===null||c===void 0?void 0:c.value)||o.message,$sentry_exception_type:(u=p[0])===null||u===void 0?void 0:u.type,$sentry_tags:o.tags};return e&&n&&(h.$sentry_url=(r||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+o.event_id),t.exceptions.sendExceptionEvent(h),o}}class bg{constructor(e,n,r,i,o){this.name=Ku,this.setupOnce=function(s){s(Qu(e,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}}var co=Re("[SegmentIntegration]");function wg(t,e){var n=t.config.segment;if(!n)return e();(function(r,i){var o=r.config.segment;if(!o)return i();var s=l=>{var c=()=>l.anonymousId()||Rt();r.config.get_device_id=c,l.id()&&(r.register({distinct_id:l.id(),$device_id:c()}),r.persistence.set_property(ut,"identified")),i()},a=o.user();"then"in a&&Me(a.then)?a.then(l=>s(l)):s(a)})(t,()=>{n.register((r=>{Promise&&Promise.resolve||co.warn("This browser does not have Promise support, and can not use the segment integration");var i=(o,s)=>{var a;if(!s)return o;o.event.userId||o.event.anonymousId===r.get_distinct_id()||(co.info("No userId set, resetting PostHog"),r.reset()),o.event.userId&&o.event.userId!==r.get_distinct_id()&&(co.info("UserId set, identifying with PostHog"),r.identify(o.event.userId));var l=r._calculate_event_properties(s,(a=o.event.properties)!==null&&a!==void 0?a:{},new Date);return o.event.properties=Object.assign({},l,o.event.properties),o};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:o=>i(o,o.event.event),page:o=>i(o,"$pageview"),identify:o=>i(o,"$identify"),screen:o=>i(o,"$screen")}})(t)).then(()=>{e()})})}class Sg{constructor(e){this._instance=e}doPageView(e){var n,r=this._previousPageViewProperties(e);return this._currentPath=(n=y?.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,r}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){var n=this._currentPath,r=this._prevPageviewTimestamp,i=this._instance.scrollManager.getContext();if(!r)return{};var o={};if(i){var{maxScrollHeight:s,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=i;Z(s)||Z(a)||Z(l)||Z(c)||Z(u)||Z(d)||(s=Math.ceil(s),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d),o={$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:s<=1?1:it(a/s,0,1),$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:s<=1?1:it(l/s,0,1),$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:c<=1?1:it(u/c,0,1),$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:c<=1?1:it(d/c,0,1)})}return n&&(o.$prev_pageview_pathname=n),r&&(o.$prev_pageview_duration=(e.getTime()-r.getTime())/1e3),o}}class ed{constructor(){A(this,"events",{}),this.events={}}on(e,n){return this.events[e]||(this.events[e]=[]),this.events[e].push(n),()=>{this.events[e]=this.events[e].filter(r=>r!==n)}}emit(e,n){for(var r of this.events[e]||[])r(n);for(var i of this.events["*"]||[])i(e,n)}}class qt{constructor(e){A(this,"_debugEventEmitter",new ed),A(this,"checkStep",(n,r)=>this.checkStepEvent(n,r)&&this.checkStepUrl(n,r)&&this.checkStepElement(n,r)),A(this,"checkStepEvent",(n,r)=>r==null||!r.event||n?.event===r?.event),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!Z((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var n;(n=this.instance)===null||n===void 0||n._addCaptureHook((r,i)=>{this.on(r,i)})}}register(e){var n,r;if(!Z((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(e.forEach(s=>{var a,l;(a=this.actionRegistry)===null||a===void 0||a.add(s),(l=s.steps)===null||l===void 0||l.forEach(c=>{var u;(u=this.actionEvents)===null||u===void 0||u.add(c?.event||"")})}),(r=this.instance)!==null&&r!==void 0&&r.autocapture)){var i,o=new Set;e.forEach(s=>{var a;(a=s.steps)===null||a===void 0||a.forEach(l=>{l!=null&&l.selector&&o.add(l?.selector)})}),(i=this.instance)===null||i===void 0||i.autocapture.setElementSelectors(o)}}on(e,n){var r;n!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(n?.event))&&this.actionRegistry&&((r=this.actionRegistry)===null||r===void 0?void 0:r.size)>0&&this.actionRegistry.forEach(i=>{this.checkAction(n,i)&&this._debugEventEmitter.emit("actionCaptured",i.name)})}_addActionHook(e){this.onAction("actionCaptured",n=>e(n))}checkAction(e,n){if(n?.steps==null)return!1;for(var r of n.steps)if(this.checkStep(e,r))return!0;return!1}onAction(e,n){return this._debugEventEmitter.on(e,n)}checkStepUrl(e,n){if(n!=null&&n.url){var r,i=e==null||(r=e.properties)===null||r===void 0?void 0:r.$current_url;if(!i||typeof i!="string"||!qt.matchString(i,n?.url,n?.url_matching||"contains"))return!1}return!0}static matchString(e,n,r){switch(r){case"regex":return!!y&&mn(e,n);case"exact":return n===e;case"contains":var i=qt.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return mn(e,i);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(e).some(o=>!(n!=null&&n.href&&!qt.matchString(o.href||"",n?.href,n?.href_matching||"exact"))&&(n==null||!n.tag_name||o.tag_name===n?.tag_name)&&!(n!=null&&n.text&&!qt.matchString(o.text||"",n?.text,n?.text_matching||"exact")&&!qt.matchString(o.$el_text||"",n?.text,n?.text_matching||"exact"))))return!1;if(n!=null&&n.selector){var r,i=e==null||(r=e.properties)===null||r===void 0?void 0:r.$element_selectors;if(!i||!i.includes(n?.selector))return!1}return!0}getElementsList(e){return e?.properties.$elements==null?[]:e?.properties.$elements}}class rr{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var n;Z((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var n=e.filter(r=>{var i,o,s,a;return((i=r.conditions)===null||i===void 0?void 0:i.actions)&&((o=r.conditions)===null||o===void 0||(s=o.actions)===null||s===void 0||(a=s.values)===null||a===void 0?void 0:a.length)>0});n.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new qt(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(r=>{this.onAction(r)})),n.forEach(r=>{var i,o,s,a,l,c,u,d,p,h;r.conditions&&(i=r.conditions)!==null&&i!==void 0&&i.actions&&(o=r.conditions)!==null&&o!==void 0&&(s=o.actions)!==null&&s!==void 0&&s.values&&((a=r.conditions)===null||a===void 0||(l=a.actions)===null||l===void 0||(c=l.values)===null||c===void 0?void 0:c.length)>0&&((u=this.actionMatcher)===null||u===void 0||u.register(r.conditions.actions.values),(d=r.conditions)===null||d===void 0||(p=d.actions)===null||p===void 0||(h=p.values)===null||h===void 0||h.forEach(g=>{if(g&&g.name){var v=this.actionToSurveys.get(g.name);v&&v.push(r.id),this.actionToSurveys.set(g.name,v||[r.id])}}))}))}setupEventBasedSurveys(e){var n;e.filter(r=>{var i,o,s,a;return((i=r.conditions)===null||i===void 0?void 0:i.events)&&((o=r.conditions)===null||o===void 0||(s=o.events)===null||s===void 0||(a=s.values)===null||a===void 0?void 0:a.length)>0}).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook((r,i)=>{this.onEvent(r,i)}),e.forEach(r=>{var i,o,s;(i=r.conditions)===null||i===void 0||(o=i.events)===null||o===void 0||(s=o.values)===null||s===void 0||s.forEach(a=>{if(a&&a.name){var l=this.eventToSurveys.get(a.name);l&&l.push(r.id),this.eventToSurveys.set(a.name,l||[r.id])}})}))}onEvent(e,n){var r,i,o=((r=this.instance)===null||r===void 0||(i=r.persistence)===null||i===void 0?void 0:i.props[br])||[];if(rr.SURVEY_SHOWN_EVENT_NAME==e&&n&&o.length>0){var s,a=n==null||(s=n.properties)===null||s===void 0?void 0:s.$survey_id;if(a){var l=o.indexOf(a);l>=0&&(o.splice(l,1),this._updateActivatedSurveys(o))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(o.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var n,r,i=((n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0?void 0:r.props[br])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(i.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var n,r;(n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0||r.register({[br]:[...new Set(e)]})}getSurveys(){var e,n,r=(e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0?void 0:n.props[br];return r||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}A(rr,"SURVEY_SHOWN_EVENT_NAME","survey shown");var Rn=Re("[Surveys]"),Cg={icontains:t=>!!y&&y.location.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:t=>!!y&&y.location.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:t=>!!y&&mn(y.location.href,t),not_regex:t=>!!y&&!mn(y.location.href,t),exact:t=>y?.location.href===t,is_not:t=>y?.location.href!==t};class Ig{constructor(e){this.instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var n=[],r=0;r<localStorage.length;r++){var i=localStorage.key(r);i!=null&&i.startsWith($o)&&n.push(i)}return n})();e.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){var e,n,r,i=B==null||(e=B.__PosthogExtensions__)===null||e===void 0?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||i||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new rr(this.instance)),(n=B.__PosthogExtensions__)===null||n===void 0||(r=n.loadExternalDependency)===null||r===void 0||r.call(n,this.instance,"surveys",o=>{var s,a;if(o)return Rn.error("Could not load surveys script",o);this._surveyManager=(s=B.__PosthogExtensions__)===null||s===void 0||(a=s.generateSurveys)===null||a===void 0?void 0:a.call(s,this.instance)}))}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new rr(this.instance));var r=this.instance.get_property(Co);if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",callback:i=>{var o;if(i.statusCode!==200||!i.json)return e([]);var s,a=i.json.surveys||[],l=a.filter(c=>{var u,d,p,h,g,v,b,_,f,m,w,S;return((u=c.conditions)===null||u===void 0?void 0:u.events)&&((d=c.conditions)===null||d===void 0||(p=d.events)===null||p===void 0?void 0:p.values)&&((h=c.conditions)===null||h===void 0||(g=h.events)===null||g===void 0||(v=g.values)===null||v===void 0?void 0:v.length)>0||((b=c.conditions)===null||b===void 0?void 0:b.actions)&&((_=c.conditions)===null||_===void 0||(f=_.actions)===null||f===void 0?void 0:f.values)&&((m=c.conditions)===null||m===void 0||(w=m.actions)===null||w===void 0||(S=w.values)===null||S===void 0?void 0:S.length)>0});return l.length>0&&((s=this._surveyEventReceiver)===null||s===void 0||s.register(l)),(o=this.instance.persistence)===null||o===void 0||o.register({[Co]:a}),e(a)}})}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(r=>{var i,o=r.filter(l=>!(!l.start_date||l.end_date)).filter(l=>{var c,u,d,p;if(!l.conditions)return!0;var h=(c=l.conditions)===null||c===void 0||!c.url||Cg[(u=(d=l.conditions)===null||d===void 0?void 0:d.urlMatchType)!==null&&u!==void 0?u:"icontains"](l.conditions.url),g=(p=l.conditions)===null||p===void 0||!p.selector||G?.querySelector(l.conditions.selector);return h&&g}),s=(i=this._surveyEventReceiver)===null||i===void 0?void 0:i.getSurveys(),a=o.filter(l=>{var c,u,d,p,h,g,v,b,_,f,m;if(!(l.linked_flag_key||l.targeting_flag_key||l.internal_targeting_flag_key||(c=l.feature_flag_keys)!==null&&c!==void 0&&c.length))return!0;var w=!l.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(l.linked_flag_key),S=!l.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(l.targeting_flag_key),I=((u=l.conditions)===null||u===void 0?void 0:u.events)&&((d=l.conditions)===null||d===void 0||(p=d.events)===null||p===void 0?void 0:p.values)&&((h=l.conditions)===null||h===void 0||(g=h.events)===null||g===void 0?void 0:g.values.length)>0,E=((v=l.conditions)===null||v===void 0?void 0:v.actions)&&((b=l.conditions)===null||b===void 0||(_=b.actions)===null||_===void 0?void 0:_.values)&&((f=l.conditions)===null||f===void 0||(m=f.actions)===null||m===void 0?void 0:m.values.length)>0,k=!I&&!E||s?.includes(l.id),x=this._canActivateRepeatedly(l),T=!(l.internal_targeting_flag_key&&!x)||this.instance.featureFlags.isFeatureEnabled(l.internal_targeting_flag_key),D=this.checkFlags(l);return w&&S&&T&&k&&D});return e(a)},n)}checkFlags(e){var n;return(n=e.feature_flag_keys)===null||n===void 0||!n.length||e.feature_flag_keys.every(r=>{var{key:i,value:o}=r;return!i||!o||this.instance.featureFlags.isFeatureEnabled(o)})}getNextSurveyStep(e,n,r){var i,o=e.questions[n],s=n+1;if((i=o.branching)===null||i===void 0||!i.type)return n===e.questions.length-1?Ge.End:s;if(o.branching.type===Ge.End)return Ge.End;if(o.branching.type===Ge.SpecificQuestion){if(Number.isInteger(o.branching.index))return o.branching.index}else if(o.branching.type===Ge.ResponseBased){if(o.type===ye.SingleChoice){var a,l,c=o.choices.indexOf("".concat(r));if((a=o.branching)!==null&&a!==void 0&&(l=a.responseValues)!==null&&l!==void 0&&l.hasOwnProperty(c)){var u=o.branching.responseValues[c];return Number.isInteger(u)?u:u===Ge.End?Ge.End:s}}else if(o.type===ye.Rating){var d,p;if(typeof r!="number"||!Number.isInteger(r))throw new Error("The response type must be an integer");var h=function(v,b){if(b===3){if(v<1||v>3)throw new Error("The response must be in range 1-3");return v===1?"negative":v===2?"neutral":"positive"}if(b===5){if(v<1||v>5)throw new Error("The response must be in range 1-5");return v<=2?"negative":v===3?"neutral":"positive"}if(b===7){if(v<1||v>7)throw new Error("The response must be in range 1-7");return v<=3?"negative":v===4?"neutral":"positive"}if(b===10){if(v<0||v>10)throw new Error("The response must be in range 0-10");return v<=6?"detractors":v<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(r,o.scale);if((d=o.branching)!==null&&d!==void 0&&(p=d.responseValues)!==null&&p!==void 0&&p.hasOwnProperty(h)){var g=o.branching.responseValues[h];return Number.isInteger(g)?g:g===Ge.End?Ge.End:s}}return s}return Rn.warn("Falling back to next question index due to unexpected branching type"),s}_canActivateRepeatedly(e){var n;return de((n=B.__PosthogExtensions__)===null||n===void 0?void 0:n.canActivateRepeatedly)?(Rn.warn("init was not called"),!1):B.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){de(this._surveyManager)?Rn.warn("init was not called"):this.getSurveys(n=>{var r=n.filter(i=>i.id===e)[0];this._surveyManager.canRenderSurvey(r)})}renderSurvey(e,n){de(this._surveyManager)?Rn.warn("init was not called"):this.getSurveys(r=>{var i=r.filter(o=>o.id===e)[0];this._surveyManager.renderSurvey(i,G?.querySelector(n))})}}var jl=Re("[RateLimiter]");class kg{constructor(e){var n,r;A(this,"serverLimits",{}),A(this,"lastEventRateLimited",!1),A(this,"checkForLimiting",i=>{var o=i.text;if(o&&o.length)try{(JSON.parse(o).quota_limited||[]).forEach(s=>{jl.info("".concat(s||"events"," is quota limited.")),this.serverLimits[s]=new Date().getTime()+6e4})}catch(s){return void jl.warn('could not rate limit - continuing. Error: "'.concat(s?.message,'"'),{text:o})}}),this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)===null||r===void 0?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,n,r,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=new Date().getTime(),s=(e=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property(ko))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:o};s.tokens+=(o-s.last)/1e3*this.captureEventsPerSecond,s.last=o,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||i||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||i||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)===null||r===void 0||r.set_property(ko,s),{isRateLimited:a,remainingTokens:s.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var Eg=()=>C({initialPathName:He?.pathname||"",referringDomain:_e.referringDomain()},_e.campaignParams());class xg{constructor(e,n,r){A(this,"_onSessionIdCallback",i=>{var o=this._getStoredProps();if(!o||o.sessionId!==i){var s={sessionId:i,props:this._sessionSourceParamGenerator()};this._persistence.register({[Io]:s})}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=r||Eg,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[Io]}getSessionProps(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}var Tg=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],zl=function(t,e){if(!t)return!1;var n=t.toLowerCase();return Tg.concat(e||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},td=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&zl(n,e))return!0;try{var r=t?.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>zl(i?.brand,e)))return!0}catch{}return!!t.webdriver},Ar=Re("[Dead Clicks]"),Mg=()=>!0,Rg=t=>{var e,n=!((e=t.instance.persistence)===null||e===void 0||!e.get_property(qc)),r=t.instance.config.capture_dead_clicks;return nt(r)?r:n};class nd{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,n,r){this.instance=e,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[qc]:e?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var n,r,i;(n=B.__PosthogExtensions__)!==null&&n!==void 0&&n.initDeadClicksAutocapture&&e(),(r=B.__PosthogExtensions__)===null||r===void 0||(i=r.loadExternalDependency)===null||i===void 0||i.call(r,this.instance,"dead-clicks-autocapture",o=>{o?Ar.error("failed to load script",o):e()})}start(){var e;if(G){if(!this._lazyLoadedDeadClicksAutocapture&&(e=B.__PosthogExtensions__)!==null&&e!==void 0&&e.initDeadClicksAutocapture){var n=fe(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=B.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this._lazyLoadedDeadClicksAutocapture.start(G),Ar.info("starting...")}}else Ar.error("`document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,Ar.info("stopping..."))}}var Ag=Re("[Heatmaps]");function Yl(t){return fe(t)&&"clientX"in t&&"clientY"in t&&be(t.clientX)&&be(t.clientY)}class Ng{constructor(e){var n;A(this,"rageclicks",new xu),A(this,"_enabledServerSide",!1),A(this,"_initialized",!1),A(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[wo]),y?.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){var e=5e3;return fe(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Z(this.instance.config.capture_heatmaps)?Z(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;Ag.info("starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),(n=this.deadClicksCapture)===null||n===void 0||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[wo]:n}),this._enabledServerSide=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){y&&G&&(vt(G,"click",e=>this._onClick(e||y?.event),!1,!0),vt(G,"mousemove",e=>this._onMouseMove(e||y?.event),!1,!0),this.deadClicksCapture=new nd(this.instance,Mg,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),s=function(a,l,c){for(var u=a;u&&ir(u)&&!mt(u,"body");){if(u===c)return!1;if(ee(l,y?.getComputedStyle(u).position))return!0;u=Zc(u)}return!1}(fs(e),["fixed","sticky"],o);return{x:e.clientX+(s?0:i),y:e.clientY+(s?0:r),target_fixed:s,type:n}}_onClick(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click";if(!Mo(e.target)&&Yl(e)){var i=this._getProperties(e,r);(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(C(C({},i),{},{type:"rageclick"})),this._capture(i)}}_onMouseMove(e){!Mo(e.target)&&Yl(e)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(y){var n=y.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(e)}}flush(){this.buffer&&!rn(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Fg{constructor(e){A(this,"_updateScrollData",()=>{var n,r,i,o;this.context||(this.context={});var s=this.scrollElement(),a=this.scrollY(),l=s?Math.max(0,s.scrollHeight-s.clientHeight):0,c=a+(s?.clientHeight||0),u=s?.scrollHeight||0;this.context.lastScrollY=Math.ceil(a),this.context.maxScrollY=Math.max(a,(n=this.context.maxScrollY)!==null&&n!==void 0?n:0),this.context.maxScrollHeight=Math.max(l,(r=this.context.maxScrollHeight)!==null&&r!==void 0?r:0),this.context.lastContentY=c,this.context.maxContentY=Math.max(c,(i=this.context.maxContentY)!==null&&i!==void 0?i:0),this.context.maxContentHeight=Math.max(u,(o=this.context.maxContentHeight)!==null&&o!==void 0?o:0)}),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){y?.addEventListener("scroll",this._updateScrollData,!0),y?.addEventListener("scrollend",this._updateScrollData,!0),y?.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return y?.document.documentElement;var e=pe(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var n of e){var r=y?.document.querySelector(n);if(r)return r}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return y&&(y.scrollY||y.pageYOffset||y.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return y&&(y.scrollX||y.pageXOffset||y.document.documentElement.scrollLeft)||0}}var Og=Re("[TracingHeaders]");class Lg{constructor(e){A(this,"_restoreXHRPatch",void 0),A(this,"_restoreFetchPatch",void 0),A(this,"_startCapturing",()=>{var n,r,i,o;Z(this._restoreXHRPatch)&&((n=B.__PosthogExtensions__)===null||n===void 0||(r=n.tracingHeadersPatchFns)===null||r===void 0||r._patchXHR(this.instance.sessionManager)),Z(this._restoreFetchPatch)&&((i=B.__PosthogExtensions__)===null||i===void 0||(o=i.tracingHeadersPatchFns)===null||o===void 0||o._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var n,r,i;(n=B.__PosthogExtensions__)!==null&&n!==void 0&&n.tracingHeadersPatchFns&&e(),(r=B.__PosthogExtensions__)===null||r===void 0||(i=r.loadExternalDependency)===null||i===void 0||i.call(r,this.instance,"tracing-headers",o=>{if(o)return Og.error("failed to load script",o);e()})}startIfEnabledOrStop(){var e,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var Tt;(function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"})(Tt||(Tt={}));class Pg{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?Tt.DENIED:this.storedConsent}isOptedOut(){return this.consent===Tt.DENIED||this.consent===Tt.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:n}=this.instance.config;return(n||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return e==="1"?Tt.GRANTED:e==="0"?Tt.DENIED:Tt.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?Ce:_t;var n=e==="localStorage"?_t:Ce;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!Pc([Ze?.doNotTrack,Ze?.msDoNotTrack,B.doNotTrack],e=>ee([!0,1,"1","yes"],e))}}var Nr=Re("[ExceptionAutocapture]");class Dg{constructor(e){var n;A(this,"originalOnUnhandledRejectionHandler",void 0),A(this,"startCapturing",()=>{var r,i,o,s;if(y&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var a=(r=B.__PosthogExtensions__)===null||r===void 0||(i=r.errorWrappingFunctions)===null||i===void 0?void 0:i.wrapOnError,l=(o=B.__PosthogExtensions__)===null||o===void 0||(s=o.errorWrappingFunctions)===null||s===void 0?void 0:s.wrapUnhandledRejection;if(a&&l)try{this.unwrapOnError=a(this.captureException.bind(this)),this.unwrapUnhandledRejection=l(this.captureException.bind(this))}catch(c){Nr.error("failed to start",c),this.stopCapturing()}else Nr.error("failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[xa]),this.startIfEnabled()}get isEnabled(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}get isCapturing(){var e;return!(y==null||(e=y.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(Nr.info("enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var n,r;this.hasHandlers&&e(),(n=B.__PosthogExtensions__)===null||n===void 0||(r=n.loadExternalDependency)===null||r===void 0||r.call(n,this.instance,"exception-autocapture",i=>{if(i)return Nr.error("failed to load script",i);e()})}stopCapturing(){var e,n;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}onRemoteConfig(e){var n=e.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register({[xa]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var n=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var Lt=Re("[Web Vitals]"),Xl=9e5;class Bg{constructor(e){var n;A(this,"_enabledServerSide",!1),A(this,"_initialized",!1),A(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),A(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),this.buffer.metrics.length!==0&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((r,i)=>C(C({},r),{},{["$web_vitals_".concat(i.name,"_event")]:C({},i),["$web_vitals_".concat(i.name,"_value")]:i.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),A(this,"_addToBuffer",r=>{var i,o=(i=this.instance.sessionManager)===null||i===void 0?void 0:i.checkAndGetSessionAndWindowId(!0);if(Z(o))Lt.error("Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var s=this._currentURL();Z(s)||(de(r?.name)||de(r?.value)?Lt.error("Invalid metric received",r):this._maxAllowedValue&&r.value>=this._maxAllowedValue?Lt.error("Ignoring metric with value >= "+this._maxAllowedValue,r):(this.buffer.url!==s&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),Z(this.buffer.url)&&(this.buffer.url=s),this.buffer.firstMetricTimestamp=Z(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(C(C({},r),{},{$current_url:s,$session_id:o.sessionId,$window_id:o.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}}),A(this,"_startCapturing",()=>{var r,i,o,s,a=B.__PosthogExtensions__;Z(a)||Z(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:o,onINP:s}=a.postHogWebVitalsCallbacks),r&&i&&o&&s?(this.allowedMetrics.indexOf("LCP")>-1&&r(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&o(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&s(this._addToBuffer.bind(this)),this._initialized=!0):Lt.error("web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[Ta]),this.startIfEnabled()}get allowedMetrics(){var e,n,r=fe(this.instance.config.capture_performance)?(e=this.instance.config.capture_performance)===null||e===void 0?void 0:e.web_vitals_allowed_metrics:void 0;return Z(r)?((n=this.instance.persistence)===null||n===void 0?void 0:n.props[Ma])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(fe(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=fe(this.instance.config.capture_performance)&&be(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:Xl;return 0<e&&e<=6e4?Xl:e}get isEnabled(){var e=fe(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return nt(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(Lt.info("enabled, starting..."),this.loadScript(this._startCapturing))}onRemoteConfig(e){var n=fe(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=fe(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[Ta]:n}),this.instance.persistence.register({[Ma]:r})),this._enabledServerSide=n,this.startIfEnabled()}loadScript(e){var n,r,i;(n=B.__PosthogExtensions__)!==null&&n!==void 0&&n.postHogWebVitalsCallbacks&&e(),(r=B.__PosthogExtensions__)===null||r===void 0||(i=r.loadExternalDependency)===null||i===void 0||i.call(r,this.instance,"web-vitals",o=>{o?Lt.error("failed to load script",o):e()})}_currentURL(){var e=y?y.location.href:void 0;return e||Lt.error("Could not determine current URL"),e}}var qg={icontains:(t,e)=>!!y&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!y&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!y&&mn(e.href,t),not_regex:(t,e)=>!!y&&!mn(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class ke{constructor(e){var n=this;A(this,"getWebExperimentsAndEvaluateDisplayLogic",function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];n.getWebExperiments(i=>{ke.logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,i.forEach(o=>{if(o.feature_flag_key){var s;n._flagToExperiments&&(ke.logInfo("setting flag key ",o.feature_flag_key," to web experiment ",o),(s=n._flagToExperiments)===null||s===void 0||s.set(o.feature_flag_key,o));var a=n.instance.getFeatureFlag(o.feature_flag_key);we(a)&&o.variants[a]&&n.applyTransforms(o.name,a,o.variants[a].transforms)}else if(o.variants)for(var l in o.variants){var c=o.variants[l];ke.matchesTestVariant(c)&&n.applyTransforms(o.name,l,c.transforms)}})},r)}),this.instance=e,this.instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(e){if(this._is_bot())ke.logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this.instance.config.disable_web_experiments){if(de(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();ke.logInfo("applying feature flags",e),e.forEach(n=>{var r;if(this._flagToExperiments&&(r=this._flagToExperiments)!==null&&r!==void 0&&r.has(n)){var i,o=this.instance.getFeatureFlag(n),s=(i=this._flagToExperiments)===null||i===void 0?void 0:i.get(n);o&&s!=null&&s.variants[o]&&this.applyTransforms(s.name,o,s.variants[o].transforms)}})}}previewWebExperiment(){var e=ke.getWindowLocation();if(e!=null&&e.search){var n=Jr(e?.search,"__experiment_id"),r=Jr(e?.search,"__experiment_variant");n&&r&&(ke.logInfo("previewing web experiments ".concat(n," && ").concat(r)),this.getWebExperiments(i=>{this.showPreviewWebExperiment(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,r){if(this.instance.config.disable_web_experiments&&!r)return e([]);var i=this.instance.get_property("$web_experiments");if(i&&!n)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",callback:o=>{if(o.statusCode!==200||!o.json)return e([]);var s=o.json.experiments||[];return e(s)}})}showPreviewWebExperiment(e,n,r){var i=r.filter(o=>o.id===e);i&&i.length>0&&(ke.logInfo("Previewing web experiment [".concat(i[0].name,"] with variant [").concat(n,"]")),this.applyTransforms(i[0].name,n,i[0].variants[n].transforms,!0))}static matchesTestVariant(e){return!de(e.conditions)&&ke.matchUrlConditions(e)&&ke.matchUTMConditions(e)}static matchUrlConditions(e){var n;if(de(e.conditions)||de((n=e.conditions)===null||n===void 0?void 0:n.url))return!0;var r,i,o,s=ke.getWindowLocation();return!!s&&((r=e.conditions)===null||r===void 0||!r.url||qg[(i=(o=e.conditions)===null||o===void 0?void 0:o.urlMatchType)!==null&&i!==void 0?i:"icontains"](e.conditions.url,s))}static getWindowLocation(){return y?.location}static matchUTMConditions(e){var n;if(de(e.conditions)||de((n=e.conditions)===null||n===void 0?void 0:n.utm))return!0;var r=_e.campaignParams();if(r.utm_source){var i,o,s,a,l,c,u,d,p,h,g,v,b,_,f,m,w=(i=e.conditions)===null||i===void 0||(o=i.utm)===null||o===void 0||!o.utm_campaign||((s=e.conditions)===null||s===void 0||(a=s.utm)===null||a===void 0?void 0:a.utm_campaign)==r.utm_campaign,S=(l=e.conditions)===null||l===void 0||(c=l.utm)===null||c===void 0||!c.utm_source||((u=e.conditions)===null||u===void 0||(d=u.utm)===null||d===void 0?void 0:d.utm_source)==r.utm_source,I=(p=e.conditions)===null||p===void 0||(h=p.utm)===null||h===void 0||!h.utm_medium||((g=e.conditions)===null||g===void 0||(v=g.utm)===null||v===void 0?void 0:v.utm_medium)==r.utm_medium,E=(b=e.conditions)===null||b===void 0||(_=b.utm)===null||_===void 0||!_.utm_term||((f=e.conditions)===null||f===void 0||(m=f.utm)===null||m===void 0?void 0:m.utm_term)==r.utm_term;return w&&I&&E&&S}return!1}static logInfo(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];U.info("[WebExperiments] ".concat(e),r)}applyTransforms(e,n,r,i){var o;this._is_bot()?ke.logInfo("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(s=>{if(s.selector){var a;ke.logInfo("applying transform of variant ".concat(n," for experiment ").concat(e," "),s);var l,c=0,u=(a=document)===null||a===void 0?void 0:a.querySelectorAll(s.selector);u?.forEach(d=>{var p=d;c+=1,s.attributes&&s.attributes.forEach(h=>{switch(h.name){case"text":p.innerText=h.value;break;case"html":p.innerHTML=h.value;break;case"cssClass":p.className=h.value;break;default:p.setAttribute(h.name,h.value)}}),s.text&&(p.innerText=s.text),s.html&&(p.parentElement?p.parentElement.innerHTML=s.html:p.innerHTML=s.html),s.css&&p.setAttribute("style",s.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:n,$web_experiment_preview:i,$web_experiment_document_url:(l=ke.getWindowLocation())===null||l===void 0?void 0:l.href,$web_experiment_elements_modified:c})}}):(ke.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:i,$web_experiment_variant:n,$web_experiment_document_url:(o=ke.getWindowLocation())===null||o===void 0?void 0:o.href,$web_experiment_elements_modified:0}))}_is_bot(){return Ze&&this.instance?td(Ze,this.instance.config.custom_blocked_useragents):void 0}}class Hg{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var $g=["$set_once","$set"],Pt=Re("[SiteApps]");class Wg{constructor(e){this.instance=e,this.bufferedInvocations=[],this.apps={}}get isEnabled(){return!!this.instance.config.opt_in_site_apps}eventCollector(e,n){if(n){var r=this.globalsForEvent(n);this.bufferedInvocations.push(r),this.bufferedInvocations.length>1e3&&(this.bufferedInvocations=this.bufferedInvocations.slice(10))}}get siteAppLoaders(){var e,n;return(e=B._POSTHOG_REMOTE_CONFIG)===null||e===void 0||(n=e[this.instance.config.token])===null||n===void 0?void 0:n.siteApps}init(){if(this.isEnabled){var e=this.instance._addCaptureHook(this.eventCollector.bind(this));this.stopBuffering=()=>{e(),this.bufferedInvocations=[],this.stopBuffering=void 0}}}globalsForEvent(e){var n,r,i,o,s,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this.instance.get_property("$groups")||[],d=this.instance.get_property("$stored_group_properties")||{};for(var[p,h]of Object.entries(d))c[p]={id:u[p],type:p,properties:h};var{$set_once:g,$set:v}=e;return{event:C(C({},ss(e,$g)),{},{properties:C(C(C({},e.properties),v?{$set:C(C({},(n=(r=e.properties)===null||r===void 0?void 0:r.$set)!==null&&n!==void 0?n:{}),v)}:{}),g?{$set_once:C(C({},(i=(o=e.properties)===null||o===void 0?void 0:o.$set_once)!==null&&i!==void 0?i:{}),g)}:{}),elements_chain:(s=(a=e.properties)===null||a===void 0?void 0:a.$elements_chain)!==null&&s!==void 0?s:"",distinct_id:(l=e.properties)===null||l===void 0?void 0:l.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n={id:e.id,loaded:!1,errored:!1};this.apps[e.id]=n;var r=o=>{var s;for(var a of(this.apps[e.id].errored=!o,this.apps[e.id].loaded=!0,Pt.info("Site app with id ".concat(e.id," ").concat(o?"loaded":"errored")),o&&this.bufferedInvocations.length&&(Pt.info("Processing ".concat(this.bufferedInvocations.length," events for site app with id ").concat(e.id)),this.bufferedInvocations.forEach(l=>{var c;return(c=n.processEvent)===null||c===void 0?void 0:c.call(n,l)})),Object.values(this.apps)))if(!a.loaded)return;(s=this.stopBuffering)===null||s===void 0||s.call(this)};try{var{processEvent:i}=e.init({posthog:this.instance,callback:o=>{r(o)}});i&&(n.processEvent=i)}catch(o){Pt.error("Error while initializing PostHog app with config id ".concat(e.id),o),r(!1)}}onCapturedEvent(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{var i;(i=r.processEvent)===null||i===void 0||i.call(r,n)}catch(o){Pt.error("Error while processing event ".concat(e.event," for site app ").concat(r.id),o)}}}onRemoteConfig(e){var n,r,i,o=this;if((n=this.siteAppLoaders)!==null&&n!==void 0&&n.length){if(!this.isEnabled)return void Pt.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');for(var s of this.siteAppLoaders)this.setupSiteApp(s);this.instance.on("eventCaptured",u=>this.onCapturedEvent(u))}else if((r=this.stopBuffering)===null||r===void 0||r.call(this),(i=e.siteApps)!==null&&i!==void 0&&i.length)if(this.isEnabled){var a=function(u,d){var p,h;B["__$$ph_site_app_".concat(u)]=o.instance,(p=B.__PosthogExtensions__)===null||p===void 0||(h=p.loadSiteApp)===null||h===void 0||h.call(p,o.instance,d,g=>{if(g)return Pt.error("Error while initializing PostHog app with config id ".concat(u),g)})};for(var{id:l,url:c}of e.siteApps)a(l,c)}else Pt.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var Yn={},os=()=>{},en="posthog",rd=!vg&&Ee?.indexOf("MSIE")===-1&&Ee?.indexOf("Mozilla")===-1,Jl=()=>{var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=G?.location,n=e?.hostname,!!we(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:os,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:He&&we(He?.search)&&He.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(y==null||(t=y.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:r=>{var i="Bad HTTP status: "+r.statusCode+" "+r.text;U.error(i)},get_device_id:r=>r,_onCapture:os,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1,before_send:void 0}},Kl=t=>{var e={};Z(t.process_person)||(e.person_profiles=t.process_person),Z(t.xhr_headers)||(e.request_headers=t.xhr_headers),Z(t.cookie_name)||(e.persistence_name=t.cookie_name),Z(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=Le({},e,t);return pe(t.property_blacklist)&&(Z(t.property_denylist)?n.property_denylist=t.property_blacklist:pe(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:U.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class Vg{constructor(){A(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){U.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class ki{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)===null||n===void 0?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){A(this,"webPerformance",new Vg),A(this,"version",gt.LIB_VERSION),A(this,"_internalEventEmitter",new ed),this.config=Jl(),this.SentryIntegration=bg,this.sentryIntegration=e=>function(n,r){var i=Qu(n,r);return{name:Ku,processEvent:o=>i(o)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new Ap(this),this.toolbar=new hg(this),this.scrollManager=new Fg(this),this.pageViewManager=new Sg(this),this.surveys=new Ig(this),this.experiments=new ke(this),this.exceptions=new Hg(this),this.rateLimiter=new kg(this),this.requestRouter=new yg(this),this.consent=new Pg(this),this.people={set:(e,n,r)=>{var i=we(e)?{[e]:n}:e;this.setPersonProperties(i),r?.({})},set_once:(e,n,r)=>{var i=we(e)?{[e]:n}:e;this.setPersonProperties(void 0,i),r?.({})}},this.on("eventCaptured",e=>U.info('send "'.concat(e?.event,'"'),e))}init(e,n,r){if(r&&r!==en){var i,o=(i=Yn[r])!==null&&i!==void 0?i:new ki;return o._init(e,n,r),Yn[r]=o,Yn[en][r]=o,o}return this._init(e,n,r)}_init(e){var n,r,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(Z(e)||bo(e))return U.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return U.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],o.person_profiles&&(this._initialPersonProfilesConfig=o.person_profiles),this.set_config(Le({},Jl(),Kl(o),{name:s,token:e})),this.config.on_xhr_error&&U.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=o.disable_compression?void 0:tt.GZipJS,this.persistence=new so(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new so(C(C({},this.config),{},{persistence:"sessionStorage"}));var a=C({},this.persistence.props),l=C({},this.sessionPersistence.props);if(this._requestQueue=new pg(f=>this._send_retriable_request(f)),this._retryQueue=new mg(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new _g(this),this.sessionPropsManager=new xg(this.sessionManager,this.persistence)),new Lg(this).startIfEnabledOrStop(),this.siteApps=new Wg(this),(n=this.siteApps)===null||n===void 0||n.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new cg(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Tp(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Ng(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new Bg(this),this.exceptionObserver=new Dg(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new nd(this,Rg),this.deadClicksAutocapture.startIfEnabled(),gt.DEBUG=gt.DEBUG||this.config.debug,gt.DEBUG&&U.info("Starting in debug mode",{this:this,config:o,thisC:C({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),((r=o.bootstrap)===null||r===void 0?void 0:r.distinctID)!==void 0){var c,u,d=this.config.get_device_id(Rt()),p=(c=o.bootstrap)!==null&&c!==void 0&&c.isIdentifiedID?d:o.bootstrap.distinctID;this.persistence.set_property(ut,(u=o.bootstrap)!==null&&u!==void 0&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:p})}if(this._hasBootstrappedFeatureFlags()){var h,g,v=Object.keys(((h=o.bootstrap)===null||h===void 0?void 0:h.featureFlags)||{}).filter(f=>{var m,w;return!((m=o.bootstrap)===null||m===void 0||(w=m.featureFlags)===null||w===void 0||!w[f])}).reduce((f,m)=>{var w,S;return f[m]=((w=o.bootstrap)===null||w===void 0||(S=w.featureFlags)===null||S===void 0?void 0:S[m])||!1,f},{}),b=Object.keys(((g=o.bootstrap)===null||g===void 0?void 0:g.featureFlagPayloads)||{}).filter(f=>v[f]).reduce((f,m)=>{var w,S,I,E;return(w=o.bootstrap)!==null&&w!==void 0&&(S=w.featureFlagPayloads)!==null&&S!==void 0&&S[m]&&(f[m]=(I=o.bootstrap)===null||I===void 0||(E=I.featureFlagPayloads)===null||E===void 0?void 0:E[m]),f},{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:b})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Pa,$device_id:null},"");else if(!this.get_distinct_id()){var _=this.config.get_device_id(Rt());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_property(ut,"anonymous")}return y==null||(i=y.addEventListener)===null||i===void 0||i.call(y,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),o.segment?wg(this,()=>this._loaded()):this._loaded(),Me(this.config._onCapture)&&this.config._onCapture!==os&&(U.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",f=>this.config._onCapture(f.event,f))),this}_onRemoteConfig(e){var n,r,i,o,s,a,l,c,u;if(!G||!G.body)return U.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this._onRemoteConfig(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=ee(e.supportedCompression,tt.GZipJS)?tt.GZipJS:ee(e.supportedCompression,tt.Base64)?tt.Base64:void 0),(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),(r=this.siteApps)===null||r===void 0||r.onRemoteConfig(e),(i=this.sessionRecording)===null||i===void 0||i.onRemoteConfig(e),(o=this.autocapture)===null||o===void 0||o.onRemoteConfig(e),(s=this.heatmaps)===null||s===void 0||s.onRemoteConfig(e),(a=this.surveys)===null||a===void 0||a.onRemoteConfig(e),(l=this.webVitalsAutocapture)===null||l===void 0||l.onRemoteConfig(e),(c=this.exceptionObserver)===null||c===void 0||c.onRemoteConfig(e),(u=this.deadClicksAutocapture)===null||u===void 0||u.onRemoteConfig(e)}_loaded(){try{this.config.loaded(this)}catch(e){U.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),new ug(this).load(),this.featureFlags.decide()}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||un(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(rd?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=fi(e.url,{ip:this.config.ip?1:0}),e.headers=C({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var r,i,o,s=C({},n);s.timeout=s.timeout||6e4,s.url=fi(s.url,{_:new Date().getTime().toString(),ver:gt.LIB_VERSION,compression:s.compression});var a=(r=s.transport)!==null&&r!==void 0?r:"fetch",l=(i=(o=Pc(zn,c=>c.transport===a))===null||o===void 0?void 0:o.method)!==null&&i!==void 0?i:zn[0].method;if(!l)throw new Error("No available transport method");l(s)})(C(C({},e),{},{callback:n=>{var r,i,o;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(o=this.config).on_request_error)===null||i===void 0||i.call(o,n)),(r=e.callback)===null||r===void 0||r.call(e,n)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var n,r=[],i=[],o=[];un(e,a=>{a&&(n=a[0],pe(n)?o.push(a):Me(a)?a.call(this):pe(a)&&n==="alias"?r.push(a):pe(a)&&n.indexOf("capture")!==-1&&Me(this[n])?o.push(a):i.push(a))});var s=function(a,l){un(a,function(c){if(pe(c[0])){var u=l;ue(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};s(r,this),s(i,this),s(o,this)}_hasBootstrappedFeatureFlags(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!Z(e)&&we(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=r?.timestamp||s,l={uuid:Rt(),event:e,properties:this._calculate_event_properties(e,n||{},a)};o&&(l.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r?.$set&&(l.$set=r?.$set);var c=this._calculate_set_once_properties(r?.$set_once);c&&(l.$set_once=c),(l=ch(l,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,Z(r?.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=s);var u=C(C({},l.properties.$set),l.$set);if(rn(u)||this.setPersonPropertiesForFlags(u),!de(this.config.before_send)){var d=this._runBeforeSend(l);if(!d)return;l=d}this._internalEventEmitter.emit("eventCaptured",l);var p={method:"POST",url:(i=r?._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:r?._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this._send_retriable_request(p):this._requestQueue.enqueue(p),l}U.critical("This capture call is ignored due to client rate limiting.")}}else U.error("No event name provided to posthog.capture")}else U.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",n=>e(n.event,n))}_calculate_event_properties(e,n,r){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var i=this.persistence.remove_event_timer(e),o=C({},n);if(o.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(o.$cklsh_mode=!0),e==="$snapshot"){var s=C(C({},this.persistence.properties()),this.sessionPersistence.properties());return o.distinct_id=s.distinct_id,(!we(o.distinct_id)&&!be(o.distinct_id)||bo(o.distinct_id))&&U.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}var a=_e.properties();if(this.sessionManager){var{sessionId:l,windowId:c}=this.sessionManager.checkAndGetSessionAndWindowId();o.$session_id=l,o.$window_id=c}if(this.sessionRecording&&(o.$recording_status=this.sessionRecording.status),this.requestRouter.region===$t.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var u=this.sessionPropsManager.getSessionProps();o=Le(o,u)}if(!this.config.disable_scroll_properties){var d={};e==="$pageview"?d=this.pageViewManager.doPageView(r):e==="$pageleave"&&(d=this.pageViewManager.doPageLeave(r)),o=Le(o,d)}if(e==="$pageview"&&G&&(o.title=G.title),!Z(i)){var p=r.getTime()-i;o.$duration=parseFloat((p/1e3).toFixed(3))}Ee&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=Le({},a,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),pe(this.config.property_denylist)?ue(this.config.property_denylist,function(v){delete o[v]}):U.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var h=this.config.sanitize_properties;h&&(o=h(o,e));var g=this._hasPersonProcessing();return o.$process_person_profile=g,g&&this._requirePersonProcessing("_calculate_event_properties"),o}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var n=Le({},this.persistence.get_initial_props(),e||{}),r=this.config.sanitize_properties;return r&&(n=r(n,"$set_once")),rn(n)?void 0:n}register(e,n){var r;(r=this.persistence)===null||r===void 0||r.register(e,n)}register_once(e,n,r){var i;(i=this.persistence)===null||i===void 0||i.register_once(e,n,r)}register_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}unregister(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}_register_single(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}on(e,n){return this._internalEventEmitter.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var n,r;return(n=(r=this.sessionManager)===null||r===void 0?void 0:r.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,n,r){return this.surveys.getNextSurveyStep(e,n,r)}identify(e,n,r){if(!this.__loaded||!this.persistence)return U.uninitializedWarning("posthog.identify");if(be(e)&&(e=e.toString(),U.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))U.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var o=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}e!==i&&e!==this.get_property(Fn)&&(this.unregister(Fn),this.register({distinct_id:e}));var s=(this.persistence.get_property(ut)||"anonymous")==="anonymous";e!==i&&s?(this.persistence.set_property(ut,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(ei))}}else U.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){(e||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}group(e,n,r){if(e&&n){if(this._requirePersonProcessing("posthog.group")){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:C(C({},i),{},{[e]:n})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),i[e]===n||r||this.reloadFeatureFlags()}}else U.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,r,i,o,s;if(U.info("reset"),!this.__loaded)return U.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(r=this.sessionPersistence)===null||r===void 0||r.clear(),(i=this.surveys)===null||i===void 0||i.reset(),(o=this.persistence)===null||o===void 0||o.set_property(ut,"anonymous"),(s=this.sessionManager)===null||s===void 0||s.resetSessionId(),this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Pa,$device_id:null},"");else{var l=this.config.get_device_id(Rt());this.register_once({distinct_id:l,$device_id:e?l:a},"")}}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(e!=null&&e.withTimestamp&&r){var o,s=(o=e.timestampLookBack)!==null&&o!==void 0?o:10;if(!r)return i;var a=Math.max(Math.floor((new Date().getTime()-r)/1e3)-s,0);i+="?t=".concat(a)}return i}alias(e,n){return e===this.get_property(Bc)?(U.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Z(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Fn,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(U.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,r,i,o,s=C({},this.config);fe(e)&&(Le(this.config,Kl(e)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new so(C(C({},this.config),{},{persistence:"sessionStorage"})),Ce.is_supported()&&Ce.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(gt.DEBUG=!0,U.info("set_config",{config:e,oldConfig:s,newConfig:C({},this.config)})),(r=this.sessionRecording)===null||r===void 0||r.startIfEnabledOrStop(),(i=this.autocapture)===null||i===void 0||i.startIfEnabled(),(o=this.heatmaps)===null||o===void 0||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var n=e===!0,r={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var i,o,s,a,l;(i=this.sessionManager)===null||i===void 0||i.checkAndGetSessionAndWindowId(),r.sampling&&((o=this.sessionRecording)===null||o===void 0||o.overrideSampling()),r.linked_flag&&((s=this.sessionRecording)===null||s===void 0||s.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)===null||a===void 0||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)===null||l===void 0||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}captureException(e,n){var r,i=new Error("PostHog syntheticException"),o=Me((r=B.__PosthogExtensions__)===null||r===void 0?void 0:r.parseErrorAsProperties)?B.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:i}):C({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},n);this.exceptions.sendExceptionEvent(o)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:en;return n!==en&&(n=en+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(ut))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(ut))==="identified"}_hasPersonProcessing(){var e,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&rn(this.getGroups())&&((e=this.persistence)===null||e===void 0||(n=e.props)===null||n===void 0||!n[Fn])&&((r=this.persistence)===null||r===void 0||(i=r.props)===null||i===void 0||!i[ti]))}_shouldCapturePageleave(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return this.config.person_profiles==="never"?(U.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(ti,!0),!0)}_sync_opt_out_with_persistence(){var e,n,r,i,o=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!s;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==a&&((r=this.persistence)===null||r===void 0||r.set_disabled(a)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==a&&((i=this.sessionPersistence)===null||i===void 0||i.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(Z(e?.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e?.captureEventName)!==null&&n!==void 0?n:"$opt_in",e?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return Ze?td(Ze,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){G&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:G.title},{send_instantly:!0}))}debug(e){e===!1?(y?.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(y?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(de(this.config.before_send))return e;var n=pe(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var i of n){if(r=i(r),de(r)){var o="Event '".concat(e.event,"' was rejected in beforeSend function");return ah(e.event)?U.warn("".concat(o,". This can cause unexpected behavior.")):U.info(o),null}r.properties&&!rn(r.properties)||U.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return r}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=lh(t.prototype[e[n]])})(ki,["identify"]);var Ql,Zg=(Ql=Yn[en]=new ki,function(){function t(){t.done||(t.done=!0,rd=!1,ue(Yn,function(e){e._dom_loaded()}))}G!=null&&G.addEventListener&&(G.readyState==="complete"?t():G.addEventListener("DOMContentLoaded",t,!1)),y&&vt(y,"load",t,!0)}(),Ql);export{Wi as COPY_AUTOCAPTURE_EVENT,tt as Compression,ki as PostHog,Ge as SurveyQuestionBranchingType,ye as SurveyQuestionType,Vn as SurveyType,Zg as default,th as knownUnsafeEditableEvent,Zg as posthog,nh as severityLevels};
