import{Q as S}from"./QuestionStore.DoXL2Hea.js";import"./hoisted.BiHFBGlT.js";import"./hoisted.R1O2RFGc.js";import"./_commonjsHelpers.Cpj98o6Y.js";let s=null,m=0;window.__updateCounts=()=>{const e=document.querySelectorAll(".quiz-ui"),t=document.querySelectorAll("main .challenge");if(!(e.length>0)||t.length<=0)return!1;const l=document.querySelectorAll(".score"),u=l[0],h=document.querySelector(".score-wrapper"),d=document.querySelector(".score label"),n=document.querySelectorAll("main .challenge.correct"),g=document.querySelector(".congrats-message"),f=p(),r=f?f.sumOfTries():Array.from(document.querySelectorAll("[data-answer-count")).reduce((a,o)=>{const q=parseInt(o.getAttribute("data-answer-count")||"0",10);return a+q},0),i=t.length===n.length&&r===t.length;if(i&&(u?.classList.add("perfect"),e[0].classList.add("perfect")),l.length>=2&&console.error("Multiple score elements found"),!d)return console.error("Expected score label, not found"),!1;if(n.length>0&&l[0].classList.add("active"),t.length===n.length){if(u.classList.add("all-correct"),g){const a=i?"WOW! Perfect!":"All correct!",o=i?"h2":"h3";g.innerHTML=`<${o}>${a} ${n.length} / ${t.length} ${r>0?`<sup>(${r} tries)</sup>`:""}</${o}>`}h?.classList.toggle("pulse"),u?.classList.add("success")}else d.innerHTML=`${n.length} / ${t.length} ${r>0?`<sup>(${r} tries)</sup>`:""}`;return!0};function p(){const e=S(window.location.pathname);return e||null}document.addEventListener("astro:page-load",function(){const e=document.querySelector(".quiz-ui");if(e){const t=p(),c=document.querySelector("button.reset-quiz");c&&c.addEventListener("click",()=>{console.log("Resetting quiz state for",location.pathname),t?.reset(),location.reload()}),s=setInterval(()=>{if(m++,window.__updateCounts(),m>12){clearInterval(s);return}},100),e.addEventListener("mousedown",()=>{clearInterval(s)}),e.addEventListener("click",()=>{clearInterval(s),window.__updateCounts()})}});
