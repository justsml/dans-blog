import{j as e}from"./jsx-runtime.vlAWDSmm.js";import{B as v}from"./index.C14RpapU.js";import{P as E,a as O,b as w}from"./popover.x9D3fW6f.js";import{r as l}from"./index.BwNzhqGF.js";import{s as x}from"./pathHelpers.kwYD5byA.js";import{c as z}from"./clsx.B-dksMZM.js";import{Q as B}from"./QuestionStore.Dp9S3Fqa.js";import"./index.DmAWNlUL.js";import"./_commonjsHelpers.Cpj98o6Y.js";function D(r){const[t,c]=l.useState([]);l.useEffect(()=>{r?.onSearchChange?.(t)},[t]);const o=a=>{if(a=x(a),t.includes(a)){c(t.filter(s=>s!==a)),r?.onSearchChange?.(t);return}c([...t,a]),r?.onSearchChange?.(t)},n=({children:a,className:s=""})=>{const i=x(a),u=t.includes(i)||t.includes(a),f=(u?"open-":"closed-")+i;return e.jsx("div",{className:z({selectedItem:u},s,f," flex-wrap items-center justify-between"),children:e.jsx(v,{onClick:()=>o(i),variant:u?"default":"secondary",children:a})})};return e.jsxs(E,{children:[e.jsx(O,{asChild:!0,className:"toggle-filters",children:e.jsx(v,{variant:"outline",children:"Filters "})}),e.jsx(w,{className:"w-80",children:e.jsx("div",{className:"grid gap-2",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mt-4 space-y-2 inline-flex justify-start align-top place-self-start",children:[e.jsxs("section",{className:"tag-filters skill-level inline-grid mx-4 gap-4 self-end justify-center",children:[e.jsx(n,{children:"Beginner"}),e.jsx(n,{children:"Intermediate"}),e.jsx(n,{children:"Advanced"})]}),e.jsxs("section",{className:"hidden status-filters mx-4 gap-4 self-end justify-center",children:[e.jsx(n,{children:"Not Started"}),e.jsx(n,{children:"Started"}),e.jsx(n,{children:"Complete"})]})]})})})})]})}const P=({article:r,className:t})=>{const c=r.slug,{index:o,title:n,subCategory:a,label:s,draft:i,date:u,modified:f,tags:j}=r.data,[d,b]=l.useState(0),[q,y]=l.useState(0),[p,Q]=l.useState(0);let g=`cat-${x(a)}`;i&&(g+=" draft");const T="quiz-card",m=r.data.questionCount??q;l.useEffect(()=>{const h=B(c);b(h.correct()),y(h.total()),Q(h.sumOfTries())},[c,d]);const C=d===m,N=d/m,S=p>0||d>0;return e.jsx("div",{style:{"--quiz-index":o,"--percent-completed":Number.isNaN(N)?0:N},className:z(T,g,t,{completed:C,started:S}),children:e.jsxs("a",{href:`/${c}/`,className:"quiz-card-inner","data-created":u,"data-modified":f,children:[e.jsx("label",{className:"small-label",title:j&&j.join(", "),children:e.jsx("b",{children:a})}),e.jsx("h2",{className:"post-title","aria-description":n.replace("Quiz: ",""),children:s}),C?e.jsxs("div",{className:"quiz-status",children:[e.jsx("span",{className:"status-icon",children:"✅ "}),e.jsx("span",{className:"status-text",children:" Completed"})]}):S?e.jsxs("p",{title:"in "+(p??0)+" tries",children:[(d??0)<1?"Zero":d," correct of"," ",m]}):e.jsxs("p",{children:[m," questions - click to begin!"]})]})})},H=({quizList:r})=>{const[t,c]=l.useState(r),[o,n]=l.useState([]),a=s=>{n(s)};return t.forEach(s=>{s.data.tags=s.data.tags.map(i=>i.toLowerCase())}),l.useEffect(()=>{o.length>0?c(t.filter(({data:{tags:s}})=>o.some(i=>s.includes(i)))):c(r)},[o]),e.jsxs("section",{className:"quiz-grid",children:[e.jsx("div",{className:"filter-toolbar",children:e.jsx(D,{onOpenChange:console.log,onSearchChange:a})}),e.jsx("div",{className:"quiz-list",children:t.filter(({data:{hidden:s}})=>s!==!0).map((s,i)=>e.jsx(P,{className:"tilt-effect",article:s},i))})]})};export{H as QuizGrid};
