import{j as e}from"./jsx-runtime.vlAWDSmm.js";import{B as v}from"./index.C14RpapU.js";import{P as T,a as E,b as O}from"./popover.x9D3fW6f.js";import{r as c}from"./index.BwNzhqGF.js";import{s as x}from"./pathHelpers.kwYD5byA.js";import{c as b}from"./clsx.B-dksMZM.js";import{Q as w}from"./QuestionStore.Dp9S3Fqa.js";import"./index.DmAWNlUL.js";import"./_commonjsHelpers.Cpj98o6Y.js";function B(n){const[a,l]=c.useState([]);c.useEffect(()=>{n?.onSearchChange?.(a)},[a]);const o=s=>{if(s=x(s),a.includes(s)){l(a.filter(d=>d!==s)),n?.onSearchChange?.(a);return}l([...a,s]),n?.onSearchChange?.(a)},i=({children:s,className:d=""})=>{const u=x(s),t=a.includes(u)||a.includes(s),r=(t?"open-":"closed-")+u;return e.jsx("div",{className:b({selectedItem:t},d,r," flex-wrap items-center justify-between"),children:e.jsx(v,{onClick:()=>o(u),variant:t?"default":"secondary",children:s})})};return e.jsxs(T,{children:[e.jsx(E,{asChild:!0,className:"toggle-filters",children:e.jsx(v,{variant:"outline",children:"Filters "})}),e.jsx(O,{className:"w-80",children:e.jsx("div",{className:"grid gap-2",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mt-4 space-y-2 inline-flex justify-start align-top place-self-start",children:[e.jsxs("section",{className:"tag-filters skill-level inline-grid mx-4 gap-4 self-end justify-center",children:[e.jsx(i,{children:"Beginner"}),e.jsx(i,{children:"Intermediate"}),e.jsx(i,{children:"Advanced"})]}),e.jsxs("section",{className:"hidden status-filters mx-4 gap-4 self-end justify-center",children:[e.jsx(i,{children:"Not Started"}),e.jsx(i,{children:"Started"}),e.jsx(i,{children:"Complete"})]})]})})})})]})}const D=({article:n,className:a})=>{const l=n.slug,{index:o,title:i,subCategory:s,label:d,draft:u,date:t,modified:r,tags:j}=n.data,[m,z]=c.useState(0),[L,y]=c.useState(0),[p,q]=c.useState(0);let g=`cat-${x(s)}`;u&&(g+=" draft");const Q="quiz-card",f=n.data.questionCount;c.useEffect(()=>{const h=w(l);z(h.correct()),y(h.total()),q(h.sumOfTries())},[l,m]);const C=m===f,N=m/f,S=p>0||m>0;return e.jsx("div",{style:{"--quiz-index":o,"--percent-completed":Number.isNaN(N)?0:N},className:b(Q,g,a,{completed:C,started:S}),children:e.jsxs("a",{href:`/${l}/`,className:"quiz-card-inner","data-created":t,"data-modified":r,children:[e.jsx("label",{className:"small-label",title:j&&j.join(", "),children:e.jsx("b",{children:s})}),e.jsx("h2",{className:"post-title","aria-description":i.replace("Quiz: ",""),children:d}),C?e.jsxs("div",{className:"quiz-status",children:[e.jsx("span",{className:"status-icon",children:"✅ "}),e.jsx("span",{className:"status-text",children:" Completed"})]}):S?e.jsxs("p",{title:"in "+(p??0)+" tries",children:[(m??0)<1?"Zero":m," correct of"," ",f]}):e.jsxs("p",{children:[f," questions - click to begin!"]})]})})},H=({quizList:n,subCategoryList:a,subCategoryCounts:l})=>{const[o,i]=c.useState(n),[s,d]=c.useState([]),u=t=>{d(t)};return o.forEach(t=>{t.data.tags=t.data.tags.map(r=>r.toLowerCase())}),c.useEffect(()=>{s.length>0?i(o.filter(({data:{tags:t}})=>s.some(r=>t.includes(r)))):i(n)},[s]),e.jsxs("section",{className:"quiz-grid",children:[e.jsx("div",{className:"filter-toolbar",children:e.jsx(B,{onOpenChange:console.log,onSearchChange:u})}),e.jsx("div",{className:"quiz-list",children:o.filter(({data:{unlisted:t,hidden:r}})=>r!==!0).map((t,r)=>e.jsx(D,{className:"tilt-effect",article:t},r))})]})};export{H as QuizGrid};
