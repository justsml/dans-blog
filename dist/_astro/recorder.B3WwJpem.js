(function(We){function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(n){jn(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function ur(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(u){return void r(u)}s.done?t(l):Promise.resolve(l).then(n,o)}function Ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(l){ur(a,n,o,i,s,"next",l)}function s(l){ur(a,n,o,i,s,"throw",l)}i(void 0)}))}}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zn(e,t){if(e==null)return{};var r,n,o=(function(i,s){if(i==null)return{};var l,u,c={},p=Object.keys(i);for(u=0;u<p.length;u++)l=p[u],s.indexOf(l)>=0||(c[l]=i[l]);return c})(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var cr,Kn=["type"],Jn=Object.defineProperty,I=(e,t,r)=>((n,o,a)=>o in n?Jn(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),Un=Object.defineProperty,dr=(e,t,r)=>((n,o,a)=>o in n?Un(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),$=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))($||{}),hr={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},pr={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},mr=()=>{try{return!!globalThis.Zone}catch{return!1}},$e={};function wt(e){if($e[e])return $e[e];var t=globalThis[e],r=t.prototype,n=e in hr?hr[e]:void 0,o=!!(n&&n.every((c=>{var p,b;return!!((b=(p=Object.getOwnPropertyDescriptor(r,c))==null?void 0:p.get)!=null&&b.toString().includes("[native code]"))}))),a=e in pr?pr[e]:void 0,i=!!(a&&a.every((c=>{var p;return typeof r[c]=="function"&&((p=r[c])==null?void 0:p.toString().includes("[native code]"))})));if(o&&i&&!mr())return $e[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?$e[e]=u:t.prototype}catch{return t.prototype}}var Nt={};function be(e,t,r){var n,o="".concat(e,".").concat(String(r));if(Nt[o])return Nt[o].call(t);var a=wt(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Nt[o]=i,i.call(t)):t[r]}var Mt={};function fr(e,t,r){var n="".concat(e,".").concat(String(r));if(Mt[n])return Mt[n].bind(t);var o=wt(e)[r];return typeof o!="function"?t[r]:(Mt[n]=o,o.bind(t))}var re={childNodes:function(e){return be("Node",e,"childNodes")},parentNode:function(e){return be("Node",e,"parentNode")},parentElement:function(e){return be("Node",e,"parentElement")},textContent:function(e){return be("Node",e,"textContent")},contains:function(e,t){return fr("Node",e,"contains")(t)},getRootNode:function(e){return fr("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?be("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?be("Element",e,"shadowRoot"):null},querySelector:function(e,t){return be("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return be("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return wt("MutationObserver").constructor}};function gr(e){return e.nodeType===e.ELEMENT_NODE}function Pe(e){var t=e&&"host"in e&&"mode"in e&&re.host(e)||null;return!!(t&&"shadowRoot"in t&&re.shadowRoot(t)===e)}function He(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function et(e){try{var t=e.rules||e.cssRules;if(!t)return null;var r=Array.from(t,(o=>yr(o,e.href))).join("");return(n=r).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}catch{return null}var n}function yr(e,t){if((function(a){return"styleSheet"in a})(e)){var r;try{r=et(e.styleSheet)||(function(a){var{cssText:i}=a;if(i.split('"').length<3)return i;var s=["@import","url(".concat(JSON.stringify(a.href),")")];return a.layerName===""?s.push("layer"):a.layerName&&s.push("layer(".concat(a.layerName,")")),a.supportsText&&s.push("supports(".concat(a.supportsText,")")),a.media.length&&s.push(a.media.mediaText),s.join(" ")+";"})(e)}catch{r=e.cssText}return e.styleSheet.href?tt(r,e.styleSheet.href):r}var n,o=e.cssText;return(function(a){return"selectorText"in a})(e)&&e.selectorText.includes(":")&&(n=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,o=o.replace(n,"$1\\$2")),t?tt(o,t):o}function vr(e,t){return Array.from(e.styleSheets).find((r=>r.href===t))}let Ir=class{constructor(){dr(this,"idNodeMap",new Map),dr(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;var r=(t=this.getMeta(e))==null?void 0:t.id;return r??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){var t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((r=>this.removeNodeFromMap(r)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){var r=this.getNode(e);if(r){var n=this.nodeMetaMap.get(r);n&&this.nodeMetaMap.set(t,n)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function At(e){var{element:t,maskInputOptions:r,tagName:n,type:o,value:a,maskInputFn:i}=e,s=a||"",l=o&&ke(o);return(r[n.toLowerCase()]||l&&r[l])&&(s=i?i(s,t):"*".repeat(s.length)),s}function ke(e){return e.toLowerCase()}var br="__rrweb_original__";function kt(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ke(t):null}function Cr(e,t){var r,n;try{n=new URL(e,t??window.location.href)}catch{return null}var o=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(r=o?.[1])!==null&&r!==void 0?r:null}var qn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Qn=/^(?:[a-z+]+:)?\/\//i,$n=/^www\..*/i,eo=/^(data:)([^,]*),(.*)/i;function tt(e,t){return(e||"").replace(qn,((r,n,o,a,i,s)=>{var l,u=o||i||s,c=n||a||"";if(!u)return r;if(Qn.test(u)||$n.test(u)||eo.test(u))return"url(".concat(c).concat(u).concat(c,")");if(u[0]==="/")return"url(".concat(c).concat((l=t,(l.indexOf("//")>-1?l.split("/").slice(0,3).join("/"):l.split("/")[0]).split("?")[0]+u)).concat(c,")");var p=t.split("/"),b=u.split("/");for(var f of(p.pop(),b))f!=="."&&(f===".."?p.pop():p.push(f));return"url(".concat(c).concat(p.join("/")).concat(c,")")}))}var Oe,Sr,to=1,ro=new RegExp("[^a-z0-9-_:]"),Xe=-2;function wr(){return to++}var no=/^[^ \t\n\r\u000c]+/,oo=/^[, \t\n\r\u000c]+/,Nr=new WeakMap;function je(e,t){return t&&t.trim()!==""?Rt(e,t):t}function ao(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Rt(e,t){var r=Nr.get(e);if(r||(r=e.createElement("a"),Nr.set(e,r)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return r.setAttribute("href",t),r.href}function Mr(e,t,r,n){return n&&(r==="src"||r==="href"&&(t!=="use"||n[0]!=="#")||r==="xlink:href"&&n[0]!=="#"?je(e,n):r!=="background"||t!=="table"&&t!=="td"&&t!=="th"?r==="srcset"?(function(o,a){if(a.trim()==="")return a;var i=0;function s(f){var A,E=f.exec(a.substring(i));return E?(A=E[0],i+=A.length,A):""}for(var l=[];s(oo),!(i>=a.length);){var u=s(no);if(u.slice(-1)===",")u=je(o,u.substring(0,u.length-1)),l.push(u);else{var c="";u=je(o,u);for(var p=!1;;){var b=a.charAt(i);if(b===""){l.push((u+c).trim());break}if(p)b===")"&&(p=!1);else{if(b===","){i+=1,l.push((u+c).trim());break}b==="("&&(p=!0)}c+=b,i+=1}}}return l.join(", ")})(e,n):r==="style"?tt(n,Rt(e)):t==="object"&&r==="data"?je(e,n):n:je(e,n))}function Ar(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function rt(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&rt(re.parentNode(e),t,r);for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return!!r&&rt(re.parentNode(e),t,r)}function kr(e,t,r,n){var o;if(gr(e)){if(o=e,!re.childNodes(o).length)return!1}else{if(re.parentElement(e)===null)return!1;o=re.parentElement(e)}try{if(typeof t=="string"){if(n){if(o.closest(".".concat(t)))return!0}else if(o.classList.contains(t))return!0}else if(rt(o,t,n))return!0;if(r){if(n){if(o.closest(r))return!0}else if(o.matches(r))return!0}}catch{}return!1}function io(e,t){var{doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:i,inlineStylesheet:s,maskInputOptions:l={},maskTextFn:u,maskInputFn:c,dataURLOptions:p={},inlineImages:b,recordCanvas:f,keepIframeSrcFn:A,newlyAddedElement:E=!1}=t,k=(function(m,h){if(h.hasNode(m)){var d=h.getId(m);return d===1?void 0:d}})(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:$.Document,childNodes:[],compatMode:e.compatMode}:{type:$.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:$.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:k};case e.ELEMENT_NODE:return(function(m,h){for(var d,{doc:g,blockClass:C,blockSelector:S,inlineStylesheet:w,maskInputOptions:M={},maskInputFn:T,dataURLOptions:O={},inlineImages:B,recordCanvas:v,keepIframeSrcFn:_,newlyAddedElement:L=!1,rootId:D}=h,x=(function(W,ue,me){try{if(typeof ue=="string"){if(W.classList.contains(ue))return!0}else for(var fe=W.classList.length;fe--;){var Ie=W.classList[fe];if(ue.test(Ie))return!0}if(me)return W.matches(me)}catch{}return!1})(m,C,S),R=(function(W){if(W instanceof HTMLFormElement)return"form";var ue=ke(W.tagName);return ro.test(ue)?"div":ue})(m),N={},H=m.attributes.length,X=0;X<H;X++){var Y=m.attributes[X];Ar(R,Y.name,Y.value)||(N[Y.name]=Mr(g,R,ke(Y.name),Y.value))}if(R==="link"&&w){var y=m.href,Z=vr(g,y);!Z&&y.includes(".css")&&(Z=vr(g,window.location.origin+"/"+y.replace(window.location.href,"")));var ae=null;Z&&(ae=et(Z)),ae&&(delete N.rel,delete N.href,N._cssText=ae)}if(R==="style"&&m.sheet&&!(m.innerText||re.textContent(m)||"").trim().length){var ee=et(m.sheet);ee&&(N._cssText=ee)}if(R==="input"||R==="textarea"||R==="select"){var U=m.value,te=m.checked;N.type!=="radio"&&N.type!=="checkbox"&&N.type!=="submit"&&N.type!=="button"&&U?N.value=At({element:m,type:kt(m),tagName:R,value:U,maskInputOptions:M,maskInputFn:T}):te&&(N.checked=te)}if(R==="option"&&(m.selected&&!M.select?N.selected=!0:delete N.selected),R==="dialog"&&m.open)try{N.rr_open_mode=m.matches("dialog:modal")?"modal":"non-modal"}catch{N.rr_open_mode="modal",N.ph_rr_could_not_detect_modal=!0}if(R==="canvas"&&v){if(m.__context==="2d")(function(W){var ue=W.getContext("2d");if(!ue)return!0;for(var me=0;me<W.width;me+=50)for(var fe=0;fe<W.height;fe+=50){var Ie=ue.getImageData,St=br in Ie?Ie[br]:Ie;if(new Uint32Array(St.call(ue,me,fe,Math.min(50,W.width-me),Math.min(50,W.height-fe)).data.buffer).some((ir=>ir!==0)))return!1}return!0})(m)||(N.rr_dataURL=m.toDataURL(O.type,O.quality));else if(!("__context"in m)){var ce=m.toDataURL(O.type,O.quality),he=g.createElement("canvas");he.width=m.width,he.height=m.height,ce!==he.toDataURL(O.type,O.quality)&&(N.rr_dataURL=ce)}}if(R==="img"&&B){Oe||(Oe=g.createElement("canvas"),Sr=Oe.getContext("2d"));var q=m,Ee=q.currentSrc||q.getAttribute("src")||"<unknown-src>",qe=q.crossOrigin,ve=()=>{q.removeEventListener("load",ve);try{Oe.width=q.naturalWidth,Oe.height=q.naturalHeight,Sr.drawImage(q,0,0),N.rr_dataURL=Oe.toDataURL(O.type,O.quality)}catch(W){if(q.crossOrigin!=="anonymous")return q.crossOrigin="anonymous",void(q.complete&&q.naturalWidth!==0?ve():q.addEventListener("load",ve));console.warn("Cannot inline img src=".concat(Ee,"! Error: ").concat(W))}q.crossOrigin==="anonymous"&&(qe?N.crossOrigin=qe:q.removeAttribute("crossorigin"))};q.complete&&q.naturalWidth!==0?ve():q.addEventListener("load",ve)}if(R==="audio"||R==="video"){var G=N;G.rr_mediaState=m.paused?"paused":"played",G.rr_mediaCurrentTime=m.currentTime,G.rr_mediaPlaybackRate=m.playbackRate,G.rr_mediaMuted=m.muted,G.rr_mediaLoop=m.loop,G.rr_mediaVolume=m.volume}if(L||(m.scrollLeft&&(N.rr_scrollLeft=m.scrollLeft),m.scrollTop&&(N.rr_scrollTop=m.scrollTop)),x){var{width:ie,height:F}=m.getBoundingClientRect();N={class:N.class,rr_width:"".concat(ie,"px"),rr_height:"".concat(F,"px")}}R!=="iframe"||_(N.src)||(m.contentDocument||(N.rr_src=N.src),delete N.src);try{customElements.get(R)&&(d=!0)}catch{}return{type:$.Element,tagName:R,attributes:N,childNodes:[],isSVG:ao(m)||void 0,needBlock:x,rootId:D,isCustom:d}})(e,{doc:r,blockClass:o,blockSelector:a,inlineStylesheet:s,maskInputOptions:l,maskInputFn:c,dataURLOptions:p,inlineImages:b,recordCanvas:f,keepIframeSrcFn:A,newlyAddedElement:E,rootId:k});case e.TEXT_NODE:return(function(m,h){var d,{needsMask:g,maskTextFn:C,rootId:S}=h,w=re.parentNode(m),M=w&&w.tagName,T=re.textContent(m),O=M==="STYLE"||void 0,B=M==="SCRIPT"||void 0;if(O&&T){try{m.nextSibling||m.previousSibling||(d=w.sheet)!=null&&d.cssRules&&(T=et(w.sheet))}catch(v){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(v),m)}T=tt(T,Rt(h.doc))}return B&&(T="SCRIPT_PLACEHOLDER"),!O&&!B&&T&&g&&(T=C?C(T,re.parentElement(m)):T.replace(/[\S]/g,"*")),{type:$.Text,textContent:T||"",isStyle:O,rootId:S}})(e,{doc:r,needsMask:i,maskTextFn:u,rootId:k});case e.CDATA_SECTION_NODE:return{type:$.CDATA,textContent:"",rootId:k};case e.COMMENT_NODE:return{type:$.Comment,textContent:re.textContent(e)||"",rootId:k};default:return!1}}function K(e){return e==null?"":e.toLowerCase()}function xe(e,t){var{doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:i,maskTextSelector:s,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:c={},maskTextFn:p,maskInputFn:b,slimDOMOptions:f,dataURLOptions:A={},inlineImages:E=!1,recordCanvas:k=!1,onSerialize:m,onIframeLoad:h,iframeLoadTimeout:d=5e3,onStylesheetLoad:g,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:S=(()=>!1),newlyAddedElement:w=!1}=t,{needsMask:M}=t,{preserveWhiteSpace:T=!0}=t;M||(M=kr(e,i,s,M===void 0));var O,B=io(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:M,inlineStylesheet:u,maskInputOptions:c,maskTextFn:p,maskInputFn:b,dataURLOptions:A,inlineImages:E,recordCanvas:k,keepIframeSrcFn:S,newlyAddedElement:w});if(!B)return console.warn(e,"not serialized"),null;O=n.hasNode(e)?n.getId(e):!(function(y,Z){return!!(Z.comment&&y.type===$.Comment||y.type===$.Element&&(Z.script&&(y.tagName==="script"||y.tagName==="link"&&(y.attributes.rel==="preload"||y.attributes.rel==="modulepreload")&&y.attributes.as==="script"||y.tagName==="link"&&y.attributes.rel==="prefetch"&&typeof y.attributes.href=="string"&&Cr(y.attributes.href)==="js")||Z.headFavicon&&(y.tagName==="link"&&y.attributes.rel==="shortcut icon"||y.tagName==="meta"&&(K(y.attributes.name).match(/^msapplication-tile(image|color)$/)||K(y.attributes.name)==="application-name"||K(y.attributes.rel)==="icon"||K(y.attributes.rel)==="apple-touch-icon"||K(y.attributes.rel)==="shortcut icon"))||y.tagName==="meta"&&(Z.headMetaDescKeywords&&K(y.attributes.name).match(/^description|keywords$/)||Z.headMetaSocial&&(K(y.attributes.property).match(/^(og|twitter|fb):/)||K(y.attributes.name).match(/^(og|twitter):/)||K(y.attributes.name)==="pinterest")||Z.headMetaRobots&&(K(y.attributes.name)==="robots"||K(y.attributes.name)==="googlebot"||K(y.attributes.name)==="bingbot")||Z.headMetaHttpEquiv&&y.attributes["http-equiv"]!==void 0||Z.headMetaAuthorship&&(K(y.attributes.name)==="author"||K(y.attributes.name)==="generator"||K(y.attributes.name)==="framework"||K(y.attributes.name)==="publisher"||K(y.attributes.name)==="progid"||K(y.attributes.property).match(/^article:/)||K(y.attributes.property).match(/^product:/))||Z.headMetaVerification&&(K(y.attributes.name)==="google-site-verification"||K(y.attributes.name)==="yandex-verification"||K(y.attributes.name)==="csrf-token"||K(y.attributes.name)==="p:domain_verify"||K(y.attributes.name)==="verify-v1"||K(y.attributes.name)==="verification"||K(y.attributes.name)==="shopify-checkout-api-token"))))})(B,f)&&(T||B.type!==$.Text||B.isStyle||B.textContent.replace(/^\s+|\s+$/gm,"").length)?wr():Xe;var v=Object.assign(B,{id:O});if(n.add(e,v),O===Xe)return null;m&&m(e);var _=!l;if(v.type===$.Element){_=_&&!v.needBlock,delete v.needBlock;var L=re.shadowRoot(e);L&&He(L)&&(v.isShadowHost=!0)}if((v.type===$.Document||v.type===$.Element)&&_){f.headWhitespace&&v.type===$.Element&&v.tagName==="head"&&(T=!1);var D={doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:M,maskTextClass:i,maskTextSelector:s,skipChild:l,inlineStylesheet:u,maskInputOptions:c,maskTextFn:p,maskInputFn:b,slimDOMOptions:f,dataURLOptions:A,inlineImages:E,recordCanvas:k,preserveWhiteSpace:T,onSerialize:m,onIframeLoad:h,iframeLoadTimeout:d,onStylesheetLoad:g,stylesheetLoadTimeout:C,keepIframeSrcFn:S};if(!(v.type===$.Element&&v.tagName==="textarea"&&v.attributes.value!==void 0))for(var x of Array.from(re.childNodes(e))){var R=xe(x,D);R&&v.childNodes.push(R)}var N=null;if(gr(e)&&(N=re.shadowRoot(e)))for(var H of Array.from(re.childNodes(N))){var X=xe(H,D);X&&(He(N)&&(X.isShadow=!0),v.childNodes.push(X))}}var Y=re.parentNode(e);return Y&&Pe(Y)&&He(Y)&&(v.isShadow=!0),v.type===$.Element&&v.tagName==="iframe"&&(function(y,Z,ae){var ee=y.contentWindow;if(ee){var U,te=!1;try{U=ee.document.readyState}catch{return}if(U==="complete"){var ce="about:blank";if(ee.location.href!==ce||y.src===ce||y.src==="")return setTimeout(Z,0),y.addEventListener("load",Z);y.addEventListener("load",Z)}else{var he=setTimeout((()=>{te||(Z(),te=!0)}),ae);y.addEventListener("load",(()=>{clearTimeout(he),te=!0,Z()}))}}})(e,(()=>{var y=e.contentDocument;if(y&&h){var Z=xe(y,{doc:y,mirror:n,blockClass:o,blockSelector:a,needsMask:M,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:p,maskInputFn:b,slimDOMOptions:f,dataURLOptions:A,inlineImages:E,recordCanvas:k,preserveWhiteSpace:T,onSerialize:m,onIframeLoad:h,iframeLoadTimeout:d,onStylesheetLoad:g,stylesheetLoadTimeout:C,keepIframeSrcFn:S});Z&&h(e,Z)}}),d),v.type===$.Element&&v.tagName==="link"&&typeof v.attributes.rel=="string"&&(v.attributes.rel==="stylesheet"||v.attributes.rel==="preload"&&typeof v.attributes.href=="string"&&Cr(v.attributes.href)==="css")&&(function(y,Z,ae){var ee,U=!1;try{ee=y.sheet}catch{return}if(!ee){var te=setTimeout((()=>{U||(Z(),U=!0)}),ae);y.addEventListener("load",(()=>{clearTimeout(te),U=!0,Z()}))}})(e,(()=>{if(g){var y=xe(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,needsMask:M,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:p,maskInputFn:b,slimDOMOptions:f,dataURLOptions:A,inlineImages:E,recordCanvas:k,preserveWhiteSpace:T,onSerialize:m,onIframeLoad:h,iframeLoadTimeout:d,onStylesheetLoad:g,stylesheetLoadTimeout:C,keepIframeSrcFn:S});y&&g(e,y)}}),C),v}let so=class Xn{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){for(var t=[],r=this.firstChild;r;)t.push(r),r=r.nextSibling;return t}contains(t){if(!(t instanceof Xn)||t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var Rr={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Tr={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},nt={};function Tt(e){if(nt[e])return nt[e];var t=globalThis[e],r=t.prototype,n=e in Rr?Rr[e]:void 0,o=!!(n&&n.every((c=>{var p,b;return!!((b=(p=Object.getOwnPropertyDescriptor(r,c))==null?void 0:p.get)!=null&&b.toString().includes("[native code]"))}))),a=e in Tr?Tr[e]:void 0,i=!!(a&&a.every((c=>{var p;return typeof r[c]=="function"&&((p=r[c])==null?void 0:p.toString().includes("[native code]"))})));if(o&&i&&!mr())return nt[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?nt[e]=u:r}catch{return r}}var Et={};function Ce(e,t,r){var n,o="".concat(e,".").concat(String(r));if(Et[o])return Et[o].call(t);var a=Tt(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Et[o]=i,i.call(t)):t[r]}var Ot={};function Er(e,t,r){var n="".concat(e,".").concat(String(r));if(Ot[n])return Ot[n].bind(t);var o=Tt(e)[r];return typeof o!="function"?t[r]:(Ot[n]=o,o.bind(t))}function Or(){return Tt("MutationObserver").constructor}var V={childNodes:function(e){return Ce("Node",e,"childNodes")},parentNode:function(e){return Ce("Node",e,"parentNode")},parentElement:function(e){return Ce("Node",e,"parentElement")},textContent:function(e){return Ce("Node",e,"textContent")},contains:function(e,t){return Er("Node",e,"contains")(t)},getRootNode:function(e){return Er("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Ce("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Ce("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Ce("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Ce("Element",e,"querySelectorAll")(t)},mutationObserver:Or};function ne(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}var Le=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,xr={map:{},getId:()=>(console.error(Le),-1),getNode:()=>(console.error(Le),null),removeNodeFromMap(){console.error(Le)},has:()=>(console.error(Le),!1),reset(){console.error(Le)}};function ze(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=null,o=0;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var l=Date.now();o||r.leading!==!1||(o=l);var u=t-(l-o),c=this;u<=0||u>t?(n&&(clearTimeout(n),n=null),o=l,e.apply(c,i)):n||r.trailing===!1||(n=setTimeout((()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(c,i)}),u))}}function ot(e,t,r,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:window,a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(i){setTimeout((()=>{r.set.call(this,i)}),0),a&&a.set&&a.set.call(this,i)}}),()=>ot(e,t,a||{},!0)}function De(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(xr=new Proxy(xr,{get:(e,t,r)=>(t==="map"&&console.error(Le),Reflect.get(e,t,r))}));var at=Date.now;function Lr(e){var t,r,n,o,a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:a.documentElement.scrollLeft||a?.body&&((t=V.parentElement(a.body))==null?void 0:t.scrollLeft)||((r=a?.body)==null?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:a?.documentElement.scrollTop||a?.body&&((n=V.parentElement(a.body))==null?void 0:n.scrollTop)||((o=a?.body)==null?void 0:o.scrollTop)||0}}function Dr(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Fr(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Br(e){return e?e.nodeType===e.ELEMENT_NODE?e:V.parentElement(e):null}function oe(e,t,r,n){if(!e)return!1;var o=Br(e);if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(rt(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function xt(e,t,r){return!(e.tagName!=="TITLE"||!r.headTitleMutations)||t.getId(e)===Xe}function _r(e,t){if(Pe(e))return!1;var r=t.getId(e);if(!t.has(r))return!0;var n=V.parentNode(e);return(!n||n.nodeType!==e.DOCUMENT_NODE)&&(!n||_r(n,t))}function Lt(e){return!!e.changedTouches}function Zr(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Yr(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Dt(e){return!!e&&(e instanceof so&&"shadowRoot"in e?!!e.shadowRoot:!!V.shadowRoot(e))}/[1-9][0-9]{12}/.test(Date.now().toString())||(at=()=>new Date().getTime());let lo=class{constructor(){I(this,"id",1),I(this,"styleIDMap",new WeakMap),I(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!==null&&t!==void 0?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){return this.has(e)?this.getId(e):(r=t===void 0?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r);var r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Gr(e){var t,r=null;return"getRootNode"in e&&((t=V.getRootNode(e))==null?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&V.host(V.getRootNode(e))&&(r=V.host(V.getRootNode(e))),r}function uo(e){var t=e.ownerDocument;if(!t)return!1;var r=(function(n){for(var o,a=n;o=Gr(a);)a=o;return a})(e);return V.contains(t,r)}function Wr(e){var t=e.ownerDocument;return!!t&&(V.contains(t,e)||uo(e))}var z=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(z||{}),P=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(P||{}),se=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(se||{}),ge=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ge||{}),Fe=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Fe||{}),Be=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Be||{});function Vr(e){return"__ln"in e}class co{constructor(){I(this,"length",0),I(this,"head",null),I(this,"tail",null)}get(t){if(t>=this.length)throw new Error("Position outside of list range");for(var r=this.head,n=0;n<t;n++)r=r?.next||null;return r}addNode(t){var r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&Vr(t.previousSibling)){var n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&Vr(t.nextSibling)&&t.nextSibling.__ln.previous){var o=t.nextSibling.__ln.previous;r.previous=o,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,o&&(o.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(t){var r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}var Ke,Pr=(e,t)=>"".concat(e,"@").concat(t);class ho{constructor(){I(this,"frozen",!1),I(this,"locked",!1),I(this,"texts",[]),I(this,"attributes",[]),I(this,"attributeMap",new WeakMap),I(this,"removes",[]),I(this,"mapRemoves",[]),I(this,"movedMap",{}),I(this,"addedSet",new Set),I(this,"movedSet",new Set),I(this,"droppedSet",new Set),I(this,"mutationCb"),I(this,"blockClass"),I(this,"blockSelector"),I(this,"maskTextClass"),I(this,"maskTextSelector"),I(this,"inlineStylesheet"),I(this,"maskInputOptions"),I(this,"maskTextFn"),I(this,"maskInputFn"),I(this,"keepIframeSrcFn"),I(this,"recordCanvas"),I(this,"inlineImages"),I(this,"slimDOMOptions"),I(this,"dataURLOptions"),I(this,"doc"),I(this,"mirror"),I(this,"iframeManager"),I(this,"stylesheetManager"),I(this,"shadowDomManager"),I(this,"canvasManager"),I(this,"processedNodeManager"),I(this,"unattachedDoc"),I(this,"processMutations",(t=>{t.forEach(this.processMutation),this.emit()})),I(this,"emit",(()=>{if(!this.frozen&&!this.locked){for(var t=[],r=new Set,n=new co,o=d=>{for(var g=d,C=Xe;C===Xe;)C=(g=g&&g.nextSibling)&&this.mirror.getId(g);return C},a=d=>{var g=V.parentNode(d);if(g&&Wr(d)&&g.tagName!=="TEXTAREA"){var C=Pe(g)?this.mirror.getId(Gr(d)):this.mirror.getId(g),S=o(d);if(C===-1||S===-1)return n.addNode(d);var w=xe(d,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:M=>{Zr(M,this.mirror)&&this.iframeManager.addIframe(M),Yr(M,this.mirror)&&this.stylesheetManager.trackLinkElement(M),Dt(d)&&this.shadowDomManager.addShadowRoot(V.shadowRoot(d),this.doc)},onIframeLoad:(M,T)=>{this.iframeManager.attachIframe(M,T),this.shadowDomManager.observeAttachShadow(M)},onStylesheetLoad:(M,T)=>{this.stylesheetManager.attachLinkElement(M,T)}});w&&(t.push({parentId:C,nextId:S,node:w}),r.add(w.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var i of this.movedSet)Hr(this.removes,i,this.mirror)&&!this.movedSet.has(V.parentNode(i))||a(i);for(var s of this.addedSet)Xr(this.droppedSet,s)||Hr(this.removes,s,this.mirror)?Xr(this.movedSet,s)?a(s):this.droppedSet.add(s):a(s);for(var l=null;n.length;){var u=null;if(l){var c=this.mirror.getId(V.parentNode(l.value)),p=o(l.value);c!==-1&&p!==-1&&(u=l)}if(!u)for(var b=n.tail;b;){var f=b;if(b=b.previous,f){var A=this.mirror.getId(V.parentNode(f.value));if(o(f.value)===-1)continue;if(A!==-1){u=f;break}var E=f.value,k=V.parentNode(E);if(k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var m=V.host(k);if(this.mirror.getId(m)!==-1){u=f;break}}}}if(!u){for(;n.head;)n.removeNode(n.head.value);break}l=u.previous,n.removeNode(u.value),a(u.value)}var h={texts:this.texts.map((d=>{var g=d.node,C=V.parentNode(g);return C&&C.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(C),{id:this.mirror.getId(g),value:d.value}})).filter((d=>!r.has(d.id))).filter((d=>this.mirror.has(d.id))),attributes:this.attributes.map((d=>{var{attributes:g}=d;if(typeof g.style=="string"){var C=JSON.stringify(d.styleDiff),S=JSON.stringify(d._unchangedStyles);C.length<g.style.length&&(C+S).split("var(").length===g.style.split("var(").length&&(g.style=d.styleDiff)}return{id:this.mirror.getId(d.node),attributes:g}})).filter((d=>!r.has(d.id))).filter((d=>this.mirror.has(d.id))),removes:this.removes,adds:t};(h.texts.length||h.attributes.length||h.removes.length||h.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(h))}})),I(this,"genTextAreaValueMutation",(t=>{var r=this.attributeMap.get(t);r||(r={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(t,r)),r.attributes.value=Array.from(V.childNodes(t),(n=>V.textContent(n)||"")).join("")})),I(this,"processMutation",(t=>{if(!xt(t.target,this.mirror,this.slimDOMOptions))switch(t.type){case"characterData":var r=V.textContent(t.target);oe(t.target,this.blockClass,this.blockSelector,!1)||r===t.oldValue||this.texts.push({value:kr(t.target,this.maskTextClass,this.maskTextSelector,!0)&&r?this.maskTextFn?this.maskTextFn(r,Br(t.target)):r.replace(/[\S]/g,"*"):r,node:t.target});break;case"attributes":var n=t.target,o=t.attributeName,a=t.target.getAttribute(o);if(o==="value"){var i=kt(n);a=At({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:i,value:a,maskInputFn:this.maskInputFn})}if(oe(t.target,this.blockClass,this.blockSelector,!1)||a===t.oldValue)return;var s=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&o==="src"&&!this.keepIframeSrcFn(a)){if(n.contentDocument)return;o="rr_src"}if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),o==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Ar(n.tagName,o))if(s.attributes[o]=Mr(this.doc,ke(n.tagName),ke(o),a),o==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}var l=this.unattachedDoc.createElement("span");for(var u of(t.oldValue&&l.setAttribute("style",t.oldValue),Array.from(n.style))){var c=n.style.getPropertyValue(u),p=n.style.getPropertyPriority(u);c!==l.style.getPropertyValue(u)||p!==l.style.getPropertyPriority(u)?s.styleDiff[u]=p===""?c:[c,p]:s._unchangedStyles[u]=[c,p]}for(var b of Array.from(l.style))n.style.getPropertyValue(b)===""&&(s.styleDiff[b]=!1)}else o==="open"&&n.tagName==="DIALOG"&&(n.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal");break;case"childList":if(oe(t.target,this.blockClass,this.blockSelector,!0))return;if(t.target.tagName==="TEXTAREA")return void this.genTextAreaValueMutation(t.target);t.addedNodes.forEach((f=>this.genAdds(f,t.target))),t.removedNodes.forEach((f=>{var A=this.mirror.getId(f),E=Pe(t.target)?this.mirror.getId(V.host(t.target)):this.mirror.getId(t.target);oe(t.target,this.blockClass,this.blockSelector,!1)||xt(f,this.mirror,this.slimDOMOptions)||!(function(k,m){return m.getId(k)!==-1})(f,this.mirror)||(this.addedSet.has(f)?(Ft(this.addedSet,f),this.droppedSet.add(f)):this.addedSet.has(t.target)&&A===-1||_r(t.target,this.mirror)||(this.movedSet.has(f)&&this.movedMap[Pr(A,E)]?Ft(this.movedSet,f):this.removes.push({parentId:E,id:A,isShadow:!(!Pe(t.target)||!He(t.target))||void 0})),this.mapRemoves.push(f))}))}})),I(this,"genAdds",((t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(xt(t,this.mirror,this.slimDOMOptions))return;this.movedSet.add(t);var n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[Pr(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);oe(t,this.blockClass,this.blockSelector,!1)||(V.childNodes(t).forEach((o=>this.genAdds(o))),Dt(t)&&V.childNodes(V.shadowRoot(t)).forEach((o=>{this.processedNodeManager.add(o,this),this.genAdds(o,t)})))}}))}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((r=>{this[r]=t[r]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ft(e,t){e.delete(t),V.childNodes(t).forEach((r=>Ft(e,r)))}function Hr(e,t,r){return e.length!==0&&(function(n,o,a){for(var i=V.parentNode(o),s=function(){var u=a.getId(i);if(n.some((c=>c.id===u)))return{v:!0};i=V.parentNode(i)};i;){var l=s();if(typeof l=="object")return l.v}return!1})(e,t,r)}function Xr(e,t){return e.size!==0&&jr(e,t)}function jr(e,t){var r=V.parentNode(t);return!!r&&(!!e.has(r)||jr(e,r))}var j=e=>Ke?function(){try{return e(...arguments)}catch(t){if(Ke&&Ke(t)===!0)return;throw t}}:e,Re=[];function Je(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function zr(e,t){var r=new ho;Re.push(r),r.init(e);var n=new(Or())(j(r.processMutations.bind(r)));return n.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function po(e){var{mouseInteractionCb:t,doc:r,mirror:n,blockClass:o,blockSelector:a,sampling:i}=e;if(i.mouseInteraction===!1)return()=>{};var s=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,l=[],u=null;return Object.keys(se).filter((c=>Number.isNaN(Number(c))&&!c.endsWith("_Departed")&&s[c]!==!1)).forEach((c=>{var p=ke(c),b=(f=>A=>{var E=Je(A);if(!oe(E,o,a,!0)){var k=null,m=f;if("pointerType"in A){switch(A.pointerType){case"mouse":k=ge.Mouse;break;case"touch":k=ge.Touch;break;case"pen":k=ge.Pen}k===ge.Touch?se[f]===se.MouseDown?m="TouchStart":se[f]===se.MouseUp&&(m="TouchEnd"):ge.Pen}else Lt(A)&&(k=ge.Touch);k!==null?(u=k,(m.startsWith("Touch")&&k===ge.Touch||m.startsWith("Mouse")&&k===ge.Mouse)&&(k=null)):se[f]===se.Click&&(k=u,u=null);var h=Lt(A)?A.changedTouches[0]:A;if(h){var d=n.getId(E),{clientX:g,clientY:C}=h;j(t)(J({type:se[m],id:d,x:g,y:C},k!==null&&{pointerType:k}))}}})(c);if(window.PointerEvent)switch(se[c]){case se.MouseDown:case se.MouseUp:p=p.replace("mouse","pointer");break;case se.TouchStart:case se.TouchEnd:return}l.push(ne(p,b,r))})),j((()=>{l.forEach((c=>c()))}))}function Kr(e){var{scrollCb:t,doc:r,mirror:n,blockClass:o,blockSelector:a,sampling:i}=e;return ne("scroll",j(ze(j((s=>{var l=Je(s);if(l&&!oe(l,o,a,!0)){var u=n.getId(l);if(l===r&&r.defaultView){var c=Lr(r.defaultView);t({id:u,x:c.left,y:c.top})}else t({id:u,x:l.scrollLeft,y:l.scrollTop})}})),i.scroll||100)),r)}var mo=["INPUT","TEXTAREA","SELECT"],Jr=new WeakMap;function it(e){return(function(t,r){if(st("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||st("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||st("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||st("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){var n=Array.from(t.parentRule.cssRules).indexOf(t);r.unshift(n)}else if(t.parentStyleSheet){var o=Array.from(t.parentStyleSheet.cssRules).indexOf(t);r.unshift(o)}return r})(e,[])}function Se(e,t,r){var n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function Ur(e,t){var r,n,o,{mirror:a,stylesheetManager:i}=e,s=null;s=t.nodeName==="#document"?a.getId(t):a.getId(V.host(t));var l=t.nodeName==="#document"?(r=t.defaultView)==null?void 0:r.Document:(o=(n=t.ownerDocument)==null?void 0:n.defaultView)==null?void 0:o.ShadowRoot,u=l?.prototype?Object.getOwnPropertyDescriptor(l?.prototype,"adoptedStyleSheets"):void 0;return s!==null&&s!==-1&&l&&u?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var c;return(c=u.get)==null?void 0:c.call(this)},set(c){var p,b=(p=u.set)==null?void 0:p.call(this,c);if(s!==null&&s!==-1)try{i.adoptStyleSheets(c,s)}catch{}return b}}),j((()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})}))):()=>{}}function fo(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.doc.defaultView;if(!n)return()=>{};(function(h,d){var{mutationCb:g,mousemoveCb:C,mouseInteractionCb:S,scrollCb:w,viewportResizeCb:M,inputCb:T,mediaInteractionCb:O,styleSheetRuleCb:B,styleDeclarationCb:v,canvasMutationCb:_,fontCb:L,selectionCb:D,customElementCb:x}=h;h.mutationCb=function(){d.mutation&&d.mutation(...arguments),g(...arguments)},h.mousemoveCb=function(){d.mousemove&&d.mousemove(...arguments),C(...arguments)},h.mouseInteractionCb=function(){d.mouseInteraction&&d.mouseInteraction(...arguments),S(...arguments)},h.scrollCb=function(){d.scroll&&d.scroll(...arguments),w(...arguments)},h.viewportResizeCb=function(){d.viewportResize&&d.viewportResize(...arguments),M(...arguments)},h.inputCb=function(){d.input&&d.input(...arguments),T(...arguments)},h.mediaInteractionCb=function(){d.mediaInteaction&&d.mediaInteaction(...arguments),O(...arguments)},h.styleSheetRuleCb=function(){d.styleSheetRule&&d.styleSheetRule(...arguments),B(...arguments)},h.styleDeclarationCb=function(){d.styleDeclaration&&d.styleDeclaration(...arguments),v(...arguments)},h.canvasMutationCb=function(){d.canvasMutation&&d.canvasMutation(...arguments),_(...arguments)},h.fontCb=function(){d.font&&d.font(...arguments),L(...arguments)},h.selectionCb=function(){d.selection&&d.selection(...arguments),D(...arguments)},h.customElementCb=function(){d.customElement&&d.customElement(...arguments),x(...arguments)}})(e,r),e.recordDOM&&(t=zr(e,e.doc));var o=(function(h){var{mousemoveCb:d,sampling:g,doc:C,mirror:S}=h;if(g.mousemove===!1)return()=>{};var w,M=typeof g.mousemove=="number"?g.mousemove:50,T=typeof g.mousemoveCallback=="number"?g.mousemoveCallback:500,O=[],B=ze(j((L=>{var D=Date.now()-w;d(O.map((x=>(x.timeOffset-=D,x))),L),O=[],w=null})),T),v=j(ze(j((L=>{var D=Je(L),{clientX:x,clientY:R}=Lt(L)?L.changedTouches[0]:L;w||(w=at()),O.push({x,y:R,id:S.getId(D),timeOffset:at()-w}),B(typeof DragEvent<"u"&&L instanceof DragEvent?P.Drag:L instanceof MouseEvent?P.MouseMove:P.TouchMove)})),M,{trailing:!1})),_=[ne("mousemove",v,C),ne("touchmove",v,C),ne("drag",v,C)];return j((()=>{_.forEach((L=>L()))}))})(e),a=po(e),i=Kr(e),s=(function(h,d){var{viewportResizeCb:g}=h,{win:C}=d,S=-1,w=-1;return ne("resize",j(ze(j((()=>{var M=Dr(),T=Fr();S===M&&w===T||(g({width:Number(T),height:Number(M)}),S=M,w=T)})),200)),C)})(e,{win:n}),l=(function(h){var{inputCb:d,doc:g,mirror:C,blockClass:S,blockSelector:w,ignoreClass:M,ignoreSelector:T,maskInputOptions:O,maskInputFn:B,sampling:v,userTriggeredOnInput:_}=h;function L(X){var Y=Je(X),y=X.isTrusted,Z=Y&&Y.tagName;if(Y&&Z==="OPTION"&&(Y=V.parentElement(Y)),Y&&Z&&!(mo.indexOf(Z)<0)&&!oe(Y,S,w,!0)&&!(Y.classList.contains(M)||T&&Y.matches(T))){var ae=Y.value,ee=!1,U=kt(Y)||"";U==="radio"||U==="checkbox"?ee=Y.checked:(O[Z.toLowerCase()]||O[U])&&(ae=At({element:Y,maskInputOptions:O,tagName:Z,type:U,value:ae,maskInputFn:B})),D(Y,_?{text:ae,isChecked:ee,userTriggered:y}:{text:ae,isChecked:ee});var te=Y.name;U==="radio"&&te&&ee&&g.querySelectorAll('input[type="radio"][name="'.concat(te,'"]')).forEach((ce=>{if(ce!==Y){var he=ce.value;D(ce,_?{text:he,isChecked:!ee,userTriggered:!1}:{text:he,isChecked:!ee})}}))}}function D(X,Y){var y=Jr.get(X);if(!y||y.text!==Y.text||y.isChecked!==Y.isChecked){Jr.set(X,Y);var Z=C.getId(X);j(d)(J(J({},Y),{},{id:Z}))}}var x=(v.input==="last"?["change"]:["input","change"]).map((X=>ne(X,j(L),g))),R=g.defaultView;if(!R)return()=>{x.forEach((X=>X()))};var N=R.Object.getOwnPropertyDescriptor(R.HTMLInputElement.prototype,"value"),H=[[R.HTMLInputElement.prototype,"value"],[R.HTMLInputElement.prototype,"checked"],[R.HTMLSelectElement.prototype,"value"],[R.HTMLTextAreaElement.prototype,"value"],[R.HTMLSelectElement.prototype,"selectedIndex"],[R.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&x.push(...H.map((X=>ot(X[0],X[1],{set(){j(L)({target:this,isTrusted:!1})}},!1,R)))),j((()=>{x.forEach((X=>X()))}))})(e),u=(function(h){var{mediaInteractionCb:d,blockClass:g,blockSelector:C,mirror:S,sampling:w,doc:M}=h,T=j((B=>ze(j((v=>{var _=Je(v);if(_&&!oe(_,g,C,!0)){var{currentTime:L,volume:D,muted:x,playbackRate:R,loop:N}=_;d({type:B,id:S.getId(_),currentTime:L,volume:D,muted:x,playbackRate:R,loop:N})}})),w.media||500))),O=[ne("play",T(Be.Play),M),ne("pause",T(Be.Pause),M),ne("seeked",T(Be.Seeked),M),ne("volumechange",T(Be.VolumeChange),M),ne("ratechange",T(Be.RateChange),M)];return j((()=>{O.forEach((B=>B()))}))})(e),c=()=>{},p=()=>{},b=()=>{},f=()=>{};e.recordDOM&&(c=(function(h,d){var{styleSheetRuleCb:g,mirror:C,stylesheetManager:S}=h,{win:w}=d;if(!w.CSSStyleSheet||!w.CSSStyleSheet.prototype)return()=>{};var M=w.CSSStyleSheet.prototype.insertRule;w.CSSStyleSheet.prototype.insertRule=new Proxy(M,{apply:j(((L,D,x)=>{var[R,N]=x,{id:H,styleId:X}=Se(D,C,S.styleMirror);return(H&&H!==-1||X&&X!==-1)&&g({id:H,styleId:X,adds:[{rule:R,index:N}]}),L.apply(D,x)}))}),w.CSSStyleSheet.prototype.addRule=function(L,D){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.cssRules.length,R="".concat(L," { ").concat(D," }");return w.CSSStyleSheet.prototype.insertRule.apply(this,[R,x])};var T,O,B=w.CSSStyleSheet.prototype.deleteRule;w.CSSStyleSheet.prototype.deleteRule=new Proxy(B,{apply:j(((L,D,x)=>{var[R]=x,{id:N,styleId:H}=Se(D,C,S.styleMirror);return(N&&N!==-1||H&&H!==-1)&&g({id:N,styleId:H,removes:[{index:R}]}),L.apply(D,x)}))}),w.CSSStyleSheet.prototype.removeRule=function(L){return w.CSSStyleSheet.prototype.deleteRule.apply(this,[L])},w.CSSStyleSheet.prototype.replace&&(T=w.CSSStyleSheet.prototype.replace,w.CSSStyleSheet.prototype.replace=new Proxy(T,{apply:j(((L,D,x)=>{var[R]=x,{id:N,styleId:H}=Se(D,C,S.styleMirror);return(N&&N!==-1||H&&H!==-1)&&g({id:N,styleId:H,replace:R}),L.apply(D,x)}))})),w.CSSStyleSheet.prototype.replaceSync&&(O=w.CSSStyleSheet.prototype.replaceSync,w.CSSStyleSheet.prototype.replaceSync=new Proxy(O,{apply:j(((L,D,x)=>{var[R]=x,{id:N,styleId:H}=Se(D,C,S.styleMirror);return(N&&N!==-1||H&&H!==-1)&&g({id:N,styleId:H,replaceSync:R}),L.apply(D,x)}))}));var v={};lt("CSSGroupingRule")?v.CSSGroupingRule=w.CSSGroupingRule:(lt("CSSMediaRule")&&(v.CSSMediaRule=w.CSSMediaRule),lt("CSSConditionRule")&&(v.CSSConditionRule=w.CSSConditionRule),lt("CSSSupportsRule")&&(v.CSSSupportsRule=w.CSSSupportsRule));var _={};return Object.entries(v).forEach((L=>{var[D,x]=L;_[D]={insertRule:x.prototype.insertRule,deleteRule:x.prototype.deleteRule},x.prototype.insertRule=new Proxy(_[D].insertRule,{apply:j(((R,N,H)=>{var[X,Y]=H,{id:y,styleId:Z}=Se(N.parentStyleSheet,C,S.styleMirror);return(y&&y!==-1||Z&&Z!==-1)&&g({id:y,styleId:Z,adds:[{rule:X,index:[...it(N),Y||0]}]}),R.apply(N,H)}))}),x.prototype.deleteRule=new Proxy(_[D].deleteRule,{apply:j(((R,N,H)=>{var[X]=H,{id:Y,styleId:y}=Se(N.parentStyleSheet,C,S.styleMirror);return(Y&&Y!==-1||y&&y!==-1)&&g({id:Y,styleId:y,removes:[{index:[...it(N),X]}]}),R.apply(N,H)}))})})),j((()=>{w.CSSStyleSheet.prototype.insertRule=M,w.CSSStyleSheet.prototype.deleteRule=B,T&&(w.CSSStyleSheet.prototype.replace=T),O&&(w.CSSStyleSheet.prototype.replaceSync=O),Object.entries(v).forEach((L=>{var[D,x]=L;x.prototype.insertRule=_[D].insertRule,x.prototype.deleteRule=_[D].deleteRule}))}))})(e,{win:n}),p=Ur(e,e.doc),b=(function(h,d){var{styleDeclarationCb:g,mirror:C,ignoreCSSAttributes:S,stylesheetManager:w}=h,{win:M}=d,T=M.CSSStyleDeclaration.prototype.setProperty;M.CSSStyleDeclaration.prototype.setProperty=new Proxy(T,{apply:j(((B,v,_)=>{var L,[D,x,R]=_;if(S.has(D))return T.apply(v,[D,x,R]);var{id:N,styleId:H}=Se((L=v.parentRule)==null?void 0:L.parentStyleSheet,C,w.styleMirror);return(N&&N!==-1||H&&H!==-1)&&g({id:N,styleId:H,set:{property:D,value:x,priority:R},index:it(v.parentRule)}),B.apply(v,_)}))});var O=M.CSSStyleDeclaration.prototype.removeProperty;return M.CSSStyleDeclaration.prototype.removeProperty=new Proxy(O,{apply:j(((B,v,_)=>{var L,[D]=_;if(S.has(D))return O.apply(v,[D]);var{id:x,styleId:R}=Se((L=v.parentRule)==null?void 0:L.parentStyleSheet,C,w.styleMirror);return(x&&x!==-1||R&&R!==-1)&&g({id:x,styleId:R,remove:{property:D},index:it(v.parentRule)}),B.apply(v,_)}))}),j((()=>{M.CSSStyleDeclaration.prototype.setProperty=T,M.CSSStyleDeclaration.prototype.removeProperty=O}))})(e,{win:n}),e.collectFonts&&(f=(function(h){var{fontCb:d,doc:g}=h,C=g.defaultView;if(!C)return()=>{};var S=[],w=new WeakMap,M=C.FontFace;C.FontFace=function(O,B,v){var _=new M(O,B,v);return w.set(_,{family:O,buffer:typeof B!="string",descriptors:v,fontSource:typeof B=="string"?B:JSON.stringify(Array.from(new Uint8Array(B)))}),_};var T=De(g.fonts,"add",(function(O){return function(B){return setTimeout(j((()=>{var v=w.get(B);v&&(d(v),w.delete(B))})),0),O.apply(this,[B])}}));return S.push((()=>{C.FontFace=M})),S.push(T),j((()=>{S.forEach((O=>O()))}))})(e)));var A=(function(h){var{doc:d,mirror:g,blockClass:C,blockSelector:S,selectionCb:w}=h,M=!0,T=j((()=>{var O=d.getSelection();if(!(!O||M&&O?.isCollapsed)){M=O.isCollapsed||!1;for(var B=[],v=O.rangeCount||0,_=0;_<v;_++){var L=O.getRangeAt(_),{startContainer:D,startOffset:x,endContainer:R,endOffset:N}=L;oe(D,C,S,!0)||oe(R,C,S,!0)||B.push({start:g.getId(D),startOffset:x,end:g.getId(R),endOffset:N})}w({ranges:B})}}));return T(),ne("selectionchange",T)})(e),E=(function(h){var{doc:d,customElementCb:g}=h,C=d.defaultView;return C&&C.customElements?De(C.customElements,"define",(function(S){return function(w,M,T){try{g({define:{name:w}})}catch{console.warn("Custom element callback failed for ".concat(w))}return S.apply(this,[w,M,T])}})):()=>{}})(e),k=[];for(var m of e.plugins)k.push(m.observer(m.callback,n,m.options));return j((()=>{Re.forEach((h=>h.reset())),t?.disconnect(),o(),a(),i(),s(),l(),u(),c(),p(),b(),f(),A(),E(),k.forEach((h=>h()))}))}function st(e){return window[e]!==void 0}function lt(e){return!!(window[e]!==void 0&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class qr{constructor(t){I(this,"iframeIdToRemoteIdMap",new WeakMap),I(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t}getId(t,r,n,o){var a=n||this.getIdToRemoteIdMap(t),i=o||this.getRemoteIdToIdMap(t),s=a.get(r);return s||(s=this.generateIdFn(),a.set(r,s),i.set(s,r)),s}getIds(t,r){var n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map((a=>this.getId(t,a,n,o)))}getRemoteId(t,r,n){var o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;var a=o.get(r);return a||-1}getRemoteIds(t,r){var n=this.getRemoteIdToIdMap(t);return r.map((o=>this.getRemoteId(t,o,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){var r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){var r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class go{constructor(t){I(this,"iframes",new WeakMap),I(this,"crossOriginIframeMap",new WeakMap),I(this,"crossOriginIframeMirror",new qr(wr)),I(this,"crossOriginIframeStyleMirror"),I(this,"crossOriginIframeRootIdMap",new WeakMap),I(this,"mirror"),I(this,"mutationCb"),I(this,"wrappedEmit"),I(this,"loadListener"),I(this,"stylesheetManager"),I(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n,o;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((n=t.contentWindow)==null||n.addEventListener("message",this.handleMessage.bind(this))),(o=this.loadListener)==null||o.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){var r=t;if(r.data.type==="rrweb"&&r.origin===r.data.origin&&t.source){var n=this.crossOriginIframeMap.get(t.source);if(n){var o=this.transformCrossOriginEvent(n,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}}}transformCrossOriginEvent(t,r){var n;switch(r.type){case z.FullSnapshot:this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);var o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:z.IncrementalSnapshot,data:{source:P.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case z.Meta:case z.Load:case z.DomContentLoaded:return!1;case z.Plugin:return r;case z.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case z.IncrementalSnapshot:switch(r.data.source){case P.Mutation:return r.data.adds.forEach((a=>{this.replaceIds(a,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(a.node,t);var i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(a.node,i)})),r.data.removes.forEach((a=>{this.replaceIds(a,t,["parentId","id"])})),r.data.attributes.forEach((a=>{this.replaceIds(a,t,["id"])})),r.data.texts.forEach((a=>{this.replaceIds(a,t,["id"])})),r;case P.Drag:case P.TouchMove:case P.MouseMove:return r.data.positions.forEach((a=>{this.replaceIds(a,t,["id"])})),r;case P.ViewportResize:return!1;case P.MediaInteraction:case P.MouseInteraction:case P.Scroll:case P.CanvasMutation:case P.Input:return this.replaceIds(r.data,t,["id"]),r;case P.StyleSheetRule:case P.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case P.Font:return r;case P.Selection:return r.data.ranges.forEach((a=>{this.replaceIds(a,t,["start","end"])})),r;case P.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)==null||n.forEach((a=>{this.replaceStyleIds(a,t,["styleId"])})),r}}return!1}replace(t,r,n,o){for(var a of o)(Array.isArray(r[a])||typeof r[a]=="number")&&(Array.isArray(r[a])?r[a]=t.getIds(n,r[a]):r[a]=t.getId(n,r[a]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((n=>{this.replaceIdOnNode(n,r)}))}patchRootIdOnNode(t,r){t.type===$.Document||t.rootId||(t.rootId=r),"childNodes"in t&&t.childNodes.forEach((n=>{this.patchRootIdOnNode(n,r)}))}}class yo{constructor(t){I(this,"shadowDoms",new WeakSet),I(this,"mutationCb"),I(this,"scrollCb"),I(this,"bypassOptions"),I(this,"mirror"),I(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(He(t)&&!this.shadowDoms.has(t)){this.shadowDoms.add(t);var n=zr(J(J({},this.bypassOptions),{},{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Kr(J(J({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(V.host(t))),this.restoreHandlers.push(Ur({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,r){var n=this;this.restoreHandlers.push(De(t.prototype,"attachShadow",(function(o){return function(a){var i=o.call(this,a),s=V.shadowRoot(this);return s&&Wr(this)&&n.addShadowRoot(s,r),i}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch{}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vo=typeof Uint8Array>"u"?[]:new Uint8Array(256),ut=0;ut<64;ut++)vo[Ue.charCodeAt(ut)]=ut;var Qr=new Map,$r=(e,t,r)=>{if(e&&(tn(e,t)||typeof e=="object")){var n=(function(a,i){var s=Qr.get(a);return s||(s=new Map,Qr.set(a,s)),s.has(i)||s.set(i,[]),s.get(i)})(r,e.constructor.name),o=n.indexOf(e);return o===-1&&(o=n.length,n.push(e)),o}};function ct(e,t,r){if(e instanceof Array)return e.map((a=>ct(a,t,r)));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer)return{rr_type:e.constructor.name,base64:(function(a){var i,s=new Uint8Array(a),l=s.length,u="";for(i=0;i<l;i+=3)u+=Ue[s[i]>>2],u+=Ue[(3&s[i])<<4|s[i+1]>>4],u+=Ue[(15&s[i+1])<<2|s[i+2]>>6],u+=Ue[63&s[i+2]];return l%3==2?u=u.substring(0,u.length-1)+"=":l%3==1&&(u=u.substring(0,u.length-2)+"=="),u})(e)};if(e instanceof DataView)return{rr_type:e.constructor.name,args:[ct(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){var n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}return e instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:e.toDataURL()}:e instanceof ImageData?{rr_type:e.constructor.name,args:[ct(e.data,t,r),e.width,e.height]}:tn(e,t)||typeof e=="object"?{rr_type:e.constructor.name,index:$r(e,t,r)}:e}var en=(e,t,r)=>e.map((n=>ct(n,t,r))),tn=(e,t)=>{var r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((n=>typeof t[n]=="function"));return!!r.find((n=>e instanceof t[n]))};function rn(e,t,r,n){var o=[];try{var a=De(e.HTMLCanvasElement.prototype,"getContext",(function(i){return function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];if(!oe(this,t,r,!0)){var p=(function(f){return f==="experimental-webgl"?"webgl":f})(s);if("__context"in this||(this.__context=p),n&&["webgl","webgl2"].includes(p))if(u[0]&&typeof u[0]=="object"){var b=u[0];b.preserveDrawingBuffer||(b.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return i.apply(this,[s,...u])}}));o.push(a)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((i=>i()))}}function nn(e,t,r,n,o,a){var i=[],s=Object.getOwnPropertyNames(e),l=function(c){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))return"continue";try{if(typeof e[c]!="function")return"continue";var p=De(e,c,(function(f){return function(){for(var A=arguments.length,E=new Array(A),k=0;k<A;k++)E[k]=arguments[k];var m=f.apply(this,E);if($r(m,a,this),"tagName"in this.canvas&&!oe(this.canvas,n,o,!0)){var h=en(E,a,this),d={type:t,property:c,args:h};r(this.canvas,d)}return m}}));i.push(p)}catch{var b=ot(e,c,{set(A){r(this.canvas,{type:t,property:c,args:[A],setter:!0})}});i.push(b)}};for(var u of s)l(u);return i}var on,Q,dt,Bt,an="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",sn=typeof window<"u"&&window.Blob&&new Blob([(on=an,Uint8Array.from(atob(on),(e=>e.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});function Io(e){var t;try{if(!(t=sn&&(window.URL||window.webkitURL).createObjectURL(sn)))throw"";var r=new Worker(t,{name:e?.name});return r.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),r}catch{return new Worker("data:text/javascript;base64,"+an,{name:e?.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class bo{constructor(t){I(this,"pendingCanvasMutations",new Map),I(this,"rafStamps",{latestId:0,invokeId:null}),I(this,"mirror"),I(this,"mutationCb"),I(this,"resetObservers"),I(this,"frozen",!1),I(this,"locked",!1),I(this,"processMutation",((l,u)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(u)}));var{sampling:r="all",win:n,blockClass:o,blockSelector:a,recordCanvas:i,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,i&&r==="all"&&this.initCanvasMutationObserver(n,o,a),i&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,a,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n,o,a){var i=this,s=rn(r,n,o,!0),l=new Map,u=new Io;u.onmessage=A=>{var{id:E}=A.data;if(l.set(E,!1),"base64"in A.data){var{base64:k,type:m,width:h,height:d}=A.data;this.mutationCb({id:E,type:Fe["2D"],commands:[{property:"clearRect",args:[0,0,h,d]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:k}],type:m}]},0,0]}]})}};var c,p=1e3/t,b=0,f=A=>{var E,k;b&&A-b<p||(b=A,(E=[],k=m=>{m.querySelectorAll("canvas").forEach((h=>{oe(h,n,o,!0)||E.push(h)})),m.querySelectorAll("*").forEach((h=>{h.shadowRoot&&k(h.shadowRoot)}))},k(r.document),E).forEach((function(){var m=Ve((function*(h){var d,g=i.mirror.getId(h);if(!l.get(g)&&h.width!==0&&h.height!==0){if(l.set(g,!0),["webgl","webgl2"].includes(h.__context)){var C=h.getContext(h.__context);((d=C?.getContextAttributes())==null?void 0:d.preserveDrawingBuffer)===!1&&C.clear(C.COLOR_BUFFER_BIT)}var S=h.clientWidth||h.width,w=h.clientHeight||h.height,M=yield createImageBitmap(h,{resizeWidth:S,resizeHeight:w});u.postMessage({id:g,bitmap:M,width:S,height:w,dataURLOptions:a.dataURLOptions},[M])}}));return function(h){return m.apply(this,arguments)}})())),c=requestAnimationFrame(f)};c=requestAnimationFrame(f),this.resetObservers=()=>{s(),cancelAnimationFrame(c)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var o=rn(t,r,n,!1),a=(function(s,l,u,c){var p=[],b=Object.getOwnPropertyNames(l.CanvasRenderingContext2D.prototype),f=function(E){try{if(typeof l.CanvasRenderingContext2D.prototype[E]!="function")return"continue";var k=De(l.CanvasRenderingContext2D.prototype,E,(function(h){return function(){for(var d=arguments.length,g=new Array(d),C=0;C<d;C++)g[C]=arguments[C];return oe(this.canvas,u,c,!0)||setTimeout((()=>{var S=en(g,l,this);s(this.canvas,{type:Fe["2D"],property:E,args:S})}),0),h.apply(this,g)}}));p.push(k)}catch{var m=ot(l.CanvasRenderingContext2D.prototype,E,{set(d){s(this.canvas,{type:Fe["2D"],property:E,args:[d],setter:!0})}});p.push(m)}};for(var A of b)f(A);return()=>{p.forEach((E=>E()))}})(this.processMutation.bind(this),t,r,n),i=(function(s,l,u,c){var p=[];return p.push(...nn(l.WebGLRenderingContext.prototype,Fe.WebGL,s,u,c,l)),l.WebGL2RenderingContext!==void 0&&p.push(...nn(l.WebGL2RenderingContext.prototype,Fe.WebGL2,s,u,c,l)),()=>{p.forEach((b=>b()))}})(this.processMutation.bind(this),t,r,n);this.resetObservers=()=>{o(),a(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){var t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,r)=>{var n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,r){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(t);if(n&&r!==-1){var o=n.map((i=>zn(i,Kn))),{type:a}=n[0];this.mutationCb({id:r,type:a,commands:o}),this.pendingCanvasMutations.delete(t)}}}}class Co{constructor(t){I(this,"trackedLinkElements",new WeakSet),I(this,"mutationCb"),I(this,"adoptedStyleSheetCb"),I(this,"styleMirror",new lo),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){var n=this;if(t.length!==0){var o={id:r,styleIds:[]},a=[],i=function(l){var u=void 0;n.styleMirror.has(l)?u=n.styleMirror.getId(l):(u=n.styleMirror.add(l),a.push({styleId:u,rules:Array.from(l.rules||CSSRule,((c,p)=>({rule:yr(c,l.href),index:p})))})),o.styleIds.push(u)};for(var s of t)i(s);a.length>0&&(o.styles=a),this.adoptedStyleSheetCb(o)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class So{constructor(){I(this,"nodeMap",new WeakMap),I(this,"active",!1)}inOtherBuffer(t,r){var n=this.nodeMap.get(t);return n&&Array.from(n).some((o=>o!==r))}add(t,r){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}destroy(){}}var ht=!1;try{if(Array.from([1],(e=>2*e))[0]!==2){var _t=document.createElement("iframe");document.body.appendChild(_t),Array.from=((cr=_t.contentWindow)==null?void 0:cr.Array.from)||Array.from,document.body.removeChild(_t)}}catch(e){console.debug("Unable to override Array.from",e)}var ln,_e,pe=new Ir;function Te(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:a=null,ignoreClass:i="rr-ignore",ignoreSelector:s=null,maskTextClass:l="rr-mask",maskTextSelector:u=null,inlineStylesheet:c=!0,maskAllInputs:p,maskInputOptions:b,slimDOMOptions:f,maskInputFn:A,maskTextFn:E,hooks:k,packFn:m,sampling:h={},dataURLOptions:d={},mousemoveWait:g,recordDOM:C=!0,recordCanvas:S=!1,recordCrossOriginIframes:w=!1,recordAfter:M=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:T=!1,collectFonts:O=!1,inlineImages:B=!1,plugins:v,keepIframeSrcFn:_=(()=>!1),ignoreCSSAttributes:L=new Set([]),errorHandler:D}=e;Ke=D;var x=!w||window.parent===window,R=!1;if(!x)try{window.parent.document&&(R=!1)}catch{R=!0}if(x&&!t)throw new Error("emit function is required");if(!x&&!R)return()=>{};g!==void 0&&h.mousemove===void 0&&(h.mousemove=g),pe.reset();var N,H=p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:b!==void 0?b:{password:!0},X=f===!0||f==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:f==="all",headMetaDescKeywords:f==="all",headTitleMutations:f==="all"}:f||{};(function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;"NodeList"in G&&!G.NodeList.prototype.forEach&&(G.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in G&&!G.DOMTokenList.prototype.forEach&&(G.DOMTokenList.prototype.forEach=Array.prototype.forEach)})();var Y=0,y=G=>{for(var ie of v||[])ie.eventProcessor&&(G=ie.eventProcessor(G));return m&&!R&&(G=m(G)),G};Q=(G,ie)=>{var F,W=G;if(W.timestamp=at(),!((F=Re[0])!=null&&F.isFrozen())||W.type===z.FullSnapshot||W.type===z.IncrementalSnapshot&&W.data.source===P.Mutation||Re.forEach((Ie=>Ie.unfreeze())),x)t?.(y(W),ie);else if(R){var ue={type:"rrweb",event:y(W),origin:window.location.origin,isCheckout:ie};window.parent.postMessage(ue,"*")}if(W.type===z.FullSnapshot)N=W,Y=0;else if(W.type===z.IncrementalSnapshot){if(W.data.source===P.Mutation&&W.data.isAttachIframe)return;Y++;var me=n&&Y>=n,fe=r&&W.timestamp-N.timestamp>r;(me||fe)&&dt(!0)}};var Z=G=>{Q({type:z.IncrementalSnapshot,data:J({source:P.Mutation},G)})},ae=G=>Q({type:z.IncrementalSnapshot,data:J({source:P.Scroll},G)}),ee=G=>Q({type:z.IncrementalSnapshot,data:J({source:P.CanvasMutation},G)}),U=new Co({mutationCb:Z,adoptedStyleSheetCb:G=>Q({type:z.IncrementalSnapshot,data:J({source:P.AdoptedStyleSheet},G)})}),te=new go({mirror:pe,mutationCb:Z,stylesheetManager:U,recordCrossOriginIframes:w,wrappedEmit:Q});for(var ce of v||[])ce.getMirror&&ce.getMirror({nodeMirror:pe,crossOriginIframeMirror:te.crossOriginIframeMirror,crossOriginIframeStyleMirror:te.crossOriginIframeStyleMirror});var he=new So;Bt=new bo({recordCanvas:S,mutationCb:ee,win:window,blockClass:o,blockSelector:a,mirror:pe,sampling:h.canvas,dataURLOptions:d});var q=new yo({mutationCb:Z,scrollCb:ae,bypassOptions:{blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:u,inlineStylesheet:c,maskInputOptions:H,dataURLOptions:d,maskTextFn:E,maskInputFn:A,recordCanvas:S,inlineImages:B,sampling:h,slimDOMOptions:X,iframeManager:te,stylesheetManager:U,canvasManager:Bt,keepIframeSrcFn:_,processedNodeManager:he},mirror:pe});dt=function(){var G=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(C){Q({type:z.Meta,data:{href:window.location.href,width:Fr(),height:Dr()}},G),U.reset(),q.init(),Re.forEach((F=>F.lock()));var ie=(function(F,W){var{mirror:ue=new Ir,blockClass:me="rr-block",blockSelector:fe=null,maskTextClass:Ie="rr-mask",maskTextSelector:St=null,inlineStylesheet:ir=!0,inlineImages:Ko=!1,recordCanvas:Jo=!1,maskAllInputs:sr=!1,maskTextFn:Uo,maskInputFn:qo,slimDOM:Qe=!1,dataURLOptions:Qo,preserveWhiteSpace:$o,onSerialize:ea,onIframeLoad:ta,iframeLoadTimeout:ra,onStylesheetLoad:na,stylesheetLoadTimeout:oa,keepIframeSrcFn:aa=(()=>!1)}=W||{};return xe(F,{doc:F,mirror:ue,blockClass:me,blockSelector:fe,maskTextClass:Ie,maskTextSelector:St,skipChild:!1,inlineStylesheet:ir,maskInputOptions:sr===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:sr===!1?{password:!0}:sr,maskTextFn:Uo,maskInputFn:qo,slimDOMOptions:Qe===!0||Qe==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Qe==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Qe===!1?{}:Qe,dataURLOptions:Qo,inlineImages:Ko,recordCanvas:Jo,preserveWhiteSpace:$o,onSerialize:ea,onIframeLoad:ta,iframeLoadTimeout:ra,onStylesheetLoad:na,stylesheetLoadTimeout:oa,keepIframeSrcFn:aa,newlyAddedElement:!1})})(document,{mirror:pe,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:u,inlineStylesheet:c,maskAllInputs:H,maskTextFn:E,maskInputFn:A,slimDOM:X,dataURLOptions:d,recordCanvas:S,inlineImages:B,onSerialize:F=>{Zr(F,pe)&&te.addIframe(F),Yr(F,pe)&&U.trackLinkElement(F),Dt(F)&&q.addShadowRoot(V.shadowRoot(F),document)},onIframeLoad:(F,W)=>{te.attachIframe(F,W),q.observeAttachShadow(F)},onStylesheetLoad:(F,W)=>{U.attachLinkElement(F,W)},keepIframeSrcFn:_});if(!ie)return console.warn("Failed to snapshot the document");Q({type:z.FullSnapshot,data:{node:ie,initialOffset:Lr(window)}},G),Re.forEach((F=>F.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&U.adoptStyleSheets(document.adoptedStyleSheets,pe.getId(document))}};try{var Ee=[],qe=G=>{var ie;return j(fo)({mutationCb:Z,mousemoveCb:(F,W)=>Q({type:z.IncrementalSnapshot,data:{source:W,positions:F}}),mouseInteractionCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.MouseInteraction},F)}),scrollCb:ae,viewportResizeCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.ViewportResize},F)}),inputCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.Input},F)}),mediaInteractionCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.MediaInteraction},F)}),styleSheetRuleCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.StyleSheetRule},F)}),styleDeclarationCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.StyleDeclaration},F)}),canvasMutationCb:ee,fontCb:F=>Q({type:z.IncrementalSnapshot,data:J({source:P.Font},F)}),selectionCb:F=>{Q({type:z.IncrementalSnapshot,data:J({source:P.Selection},F)})},customElementCb:F=>{Q({type:z.IncrementalSnapshot,data:J({source:P.CustomElement},F)})},blockClass:o,ignoreClass:i,ignoreSelector:s,maskTextClass:l,maskTextSelector:u,maskInputOptions:H,inlineStylesheet:c,sampling:h,recordDOM:C,recordCanvas:S,inlineImages:B,userTriggeredOnInput:T,collectFonts:O,doc:G,maskInputFn:A,maskTextFn:E,keepIframeSrcFn:_,blockSelector:a,slimDOMOptions:X,dataURLOptions:d,mirror:pe,iframeManager:te,stylesheetManager:U,shadowDomManager:q,processedNodeManager:he,canvasManager:Bt,ignoreCSSAttributes:L,plugins:((ie=v?.filter((F=>F.observer)))==null?void 0:ie.map((F=>({observer:F.observer,options:F.options,callback:W=>Q({type:z.Plugin,data:{plugin:F.name,payload:W}})}))))||[]},k)};te.addLoadListener((G=>{try{Ee.push(qe(G.contentDocument))}catch(ie){console.warn(ie)}}));var ve=()=>{dt(),Ee.push(qe(document)),ht=!0};return document.readyState==="interactive"||document.readyState==="complete"?ve():(Ee.push(ne("DOMContentLoaded",(()=>{Q({type:z.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&ve()}))),Ee.push(ne("load",(()=>{Q({type:z.Load,data:{}}),M==="load"&&ve()}),window))),()=>{Ee.forEach((G=>G())),he.destroy(),ht=!1,Ke=void 0}}catch(G){console.warn(G)}}Te.addCustomEvent=(e,t)=>{if(!ht)throw new Error("please add custom event after start recording");Q({type:z.Custom,data:{tag:e,payload:t}})},Te.freezePage=()=>{Re.forEach((e=>e.freeze()))},Te.takeFullSnapshot=e=>{if(!ht)throw new Error("please take full snapshot after start recording");dt(e)},Te.mirror=pe,(_e=ln||(ln={}))[_e.NotStarted=0]="NotStarted",_e[_e.Running=1]="Running",_e[_e.Stopped=2]="Stopped";var un,wo=Object.defineProperty,pt=(e,t,r)=>((n,o,a)=>o in n?wo(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),No=Object.defineProperty,Zt=(e,t,r)=>((n,o,a)=>o in n?No(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),Mo=Object.defineProperty,cn=(e,t,r)=>((n,o,a)=>o in n?Mo(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a)(e,typeof t!="symbol"?t+"":t,r),dn={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},hn={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},mt={};function Yt(e){if(mt[e])return mt[e];var t=globalThis[e],r=t.prototype,n=e in dn?dn[e]:void 0,o=!!(n&&n.every((c=>{var p,b;return!!((b=(p=Object.getOwnPropertyDescriptor(r,c))==null?void 0:p.get)!=null&&b.toString().includes("[native code]"))}))),a=e in hn?hn[e]:void 0,i=!!(a&&a.every((c=>{var p;return typeof r[c]=="function"&&((p=r[c])==null?void 0:p.toString().includes("[native code]"))})));if(o&&i)return mt[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?mt[e]=u:r}catch{return r}}var Gt={};function we(e,t,r){var n,o="".concat(e,".").concat(String(r));if(Gt[o])return Gt[o].call(t);var a=Yt(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Gt[o]=i,i.call(t)):t[r]}var Wt={};function pn(e,t,r){var n="".concat(e,".").concat(String(r));if(Wt[n])return Wt[n].bind(t);var o=Yt(e)[r];return typeof o!="function"?t[r]:(Wt[n]=o,o.bind(t))}var ft={childNodes:function(e){return we("Node",e,"childNodes")},parentNode:function(e){return we("Node",e,"parentNode")},parentElement:function(e){return we("Node",e,"parentElement")},textContent:function(e){return we("Node",e,"textContent")},contains:function(e,t){return pn("Node",e,"contains")(t)},getRootNode:function(e){return pn("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?we("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?we("Element",e,"shadowRoot"):null},querySelector:function(e,t){return we("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return we("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Yt("MutationObserver").constructor}};class Ao{constructor(){cn(this,"idNodeMap",new Map),cn(this,"nodeMetaMap",new WeakMap)}getId(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))==null?void 0:r.id;return n??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){var r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach((n=>this.removeNodeFromMap(n)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)}replace(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Vt(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&Vt(ft.parentNode(e),t,r);for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return!!r&&Vt(ft.parentNode(e),t,r)}class Pt{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){for(var t=[],r=this.firstChild;r;)t.push(r),r=r.nextSibling;return t}contains(t){if(!(t instanceof Pt)||t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var mn={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},fn={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},gt={};function Ht(e){if(gt[e])return gt[e];var t=globalThis[e],r=t.prototype,n=e in mn?mn[e]:void 0,o=!!(n&&n.every((c=>{var p,b;return!!((b=(p=Object.getOwnPropertyDescriptor(r,c))==null?void 0:p.get)!=null&&b.toString().includes("[native code]"))}))),a=e in fn?fn[e]:void 0,i=!!(a&&a.every((c=>{var p;return typeof r[c]=="function"&&((p=r[c])==null?void 0:p.toString().includes("[native code]"))})));if(o&&i)return gt[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?gt[e]=u:r}catch{return r}}var Xt={};function Ne(e,t,r){var n,o="".concat(e,".").concat(String(r));if(Xt[o])return Xt[o].call(t);var a=Ht(e),i=(n=Object.getOwnPropertyDescriptor(a,r))==null?void 0:n.get;return i?(Xt[o]=i,i.call(t)):t[r]}var jt={};function gn(e,t,r){var n="".concat(e,".").concat(String(r));if(jt[n])return jt[n].bind(t);var o=Ht(e)[r];return typeof o!="function"?t[r]:(jt[n]=o,o.bind(t))}var de={childNodes:function(e){return Ne("Node",e,"childNodes")},parentNode:function(e){return Ne("Node",e,"parentNode")},parentElement:function(e){return Ne("Node",e,"parentElement")},textContent:function(e){return Ne("Node",e,"textContent")},contains:function(e,t){return gn("Node",e,"contains")(t)},getRootNode:function(e){return gn("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Ne("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Ne("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Ne("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Ne("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Ht("MutationObserver").constructor}},Ze=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,zt={map:{},getId:()=>(console.error(Ze),-1),getNode:()=>(console.error(Ze),null),removeNodeFromMap(){console.error(Ze)},has:()=>(console.error(Ze),!1),reset(){console.error(Ze)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(zt=new Proxy(zt,{get:(e,t,r)=>(t==="map"&&console.error(Ze),Reflect.get(e,t,r))}));var yn=Date.now;function vn(e){return e?e.nodeType===e.ELEMENT_NODE?e:de.parentElement(e):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(yn=()=>new Date().getTime());function In(e){var t,r=null;return"getRootNode"in e&&((t=de.getRootNode(e))==null?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&de.host(de.getRootNode(e))&&(r=de.host(de.getRootNode(e))),r}function bn(e){for(var t,r=e;t=In(r);)r=t;return r}function Cn(e){var t=e.ownerDocument;if(!t)return!1;var r=bn(e);return de.contains(t,r)}for(var ko=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){Zt(this,"id",1),Zt(this,"styleIDMap",new WeakMap),Zt(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!==null&&t!==void 0?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){return this.has(e)?this.getId(e):(r=t===void 0?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r);var r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return zt},closestElementOfNode:vn,getBaseDimension:function e(t,r){var n,o,a=(o=(n=t.ownerDocument)==null?void 0:n.defaultView)==null?void 0:o.frameElement;if(!a||a===r)return{x:0,y:0,relativeScale:1,absoluteScale:1};var i=a.getBoundingClientRect(),s=e(a,r),l=i.height/a.clientHeight;return{x:i.x*s.relativeScale+s.x,y:i.y*s.relativeScale+s.y,relativeScale:l,absoluteScale:s.absoluteScale*l}},getNestedRule:function e(t,r){var n=t[r[0]];return r.length===1?n:e(n.cssRules[r[1]].cssRules,r.slice(2))},getPositionsAndIndex:function(e){var t=[...e],r=t.pop();return{positions:t,index:r}},getRootShadowHost:bn,getShadowHost:In,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(e){var t,r,n,o,a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:a.documentElement.scrollLeft||a?.body&&((t=de.parentElement(a.body))==null?void 0:t.scrollLeft)||((r=a?.body)==null?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:a?.documentElement.scrollTop||a?.body&&((n=de.parentElement(a.body))==null?void 0:n.scrollTop)||((o=a?.body)==null?void 0:o.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(e){return!!e&&(e instanceof Pt&&"shadowRoot"in e?!!e.shadowRoot:!!de.shadowRoot(e))},hookSetter:function e(t,r,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:window,i=a.Object.getOwnPropertyDescriptor(t,r);return a.Object.defineProperty(t,r,o?n:{set(s){setTimeout((()=>{n.set.call(this,s)}),0),i&&i.set&&i.set.call(this,s)}}),()=>e(t,r,i||{},!0)},inDom:function(e){var t=e.ownerDocument;return!!t&&(de.contains(t,e)||Cn(e))},isAncestorRemoved:function e(t,r){if(o=(n=t)&&"host"in n&&"mode"in n&&ft.host(n)||null,!!(o&&"shadowRoot"in o&&ft.shadowRoot(o)===n))return!1;var n,o,a=r.getId(t);if(!r.has(a))return!0;var i=de.parentNode(t);return(!i||i.nodeType!==t.DOCUMENT_NODE)&&(!i||e(i,r))},isBlocked:function(e,t,r,n){if(!e)return!1;var o=vn(e);if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Vt(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))},isIgnored:function(e,t,r){return!(e.tagName!=="TITLE"||!r.headTitleMutations)||t.getId(e)===-2},isSerialized:function(e,t){return t.getId(e)!==-1},isSerializedIframe:function(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))},isSerializedStylesheet:function(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))},iterateResolveTree:function e(t,r){r(t.value);for(var n=t.children.length-1;n>=0;n--)e(t.children[n],r)},legacy_isTouchEvent:function(e){return!!e.changedTouches},get nowTimestamp(){return yn},on:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)},patch:function(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}},polyfill:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(e){var t={},r=(p,b)=>{var f={value:p,parent:b,children:[]};return t[p.node.id]=f,f},n=[];for(var o of e){var{nextId:a,parentId:i}=o;if(a&&a in t){var s=t[a];if(s.parent){var l=s.parent.children.indexOf(s);s.parent.children.splice(l,0,r(o,s.parent))}else{var u=n.indexOf(s);n.splice(u,0,r(o,null))}}else if(i in t){var c=t[i];c.children.push(r(o,c))}else n.push(r(o,null))}return n},shadowHostInDom:Cn,throttle:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=null,o=0;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var l=Date.now();o||r.leading!==!1||(o=l);var u=t-(l-o),c=this;u<=0||u>t?(n&&(clearTimeout(n),n=null),o=l,e.apply(c,i)):n||r.trailing===!1||(n=setTimeout((()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(c,i)}),u))}},uniqueTextMutations:function(e){for(var t=new Set,r=[],n=e.length;n--;){var o=e[n];t.has(o.id)||(r.push(o),t.add(o.id))}return r}},Symbol.toStringTag,{value:"Module"})),Ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",To=typeof Uint8Array>"u"?[]:new Uint8Array(256),yt=0;yt<64;yt++)To[Ro.charCodeAt(yt)]=yt;var Sn;typeof window<"u"&&window.Blob&&new Blob([(e=>Uint8Array.from(atob(e),(t=>t.charCodeAt(0))))("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"});try{if(Array.from([1],(e=>2*e))[0]!==2){var Kt=document.createElement("iframe");document.body.appendChild(Kt),Array.from=((un=Kt.contentWindow)==null?void 0:un.Array.from)||Array.from,document.body.removeChild(Kt)}}catch(e){console.debug("Unable to override Array.from",e)}new Ao,(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Sn||(Sn={}));class Ye{constructor(t){pt(this,"fileName"),pt(this,"functionName"),pt(this,"lineNumber"),pt(this,"columnNumber"),this.fileName=t.fileName||"",this.functionName=t.functionName||"",this.lineNumber=t.lineNumber,this.columnNumber=t.columnNumber}toString(){var t=this.lineNumber||"",r=this.columnNumber||"";return this.functionName?"".concat(this.functionName," (").concat(this.fileName,":").concat(t,":").concat(r,")"):"".concat(this.fileName,":").concat(t,":").concat(r)}}var Eo=/(^|@)\S+:\d+/,wn=/^\s*at .*(\S+:\d+|\(native\))/m,Oo=/^(eval@)?(\[native code])?$/,Jt={parse:function(e){return e?e.stacktrace!==void 0||e["opera#sourceloc"]!==void 0?this.parseOpera(e):e.stack&&e.stack.match(wn)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error("Cannot parse given url: ".concat(e));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split(`
`).filter((function(t){return!!t.match(wn)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=r.match(/ (\((.+):(\d+):(\d+)\)$)/),o=(r=n?r.replace(n[0],""):r).split(/\s+/).slice(1),a=this.extractLocation(n?n[1]:o.pop()),i=o.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new Ye({functionName:i,fileName:s,lineNumber:a[1],columnNumber:a[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split(`
`).filter((function(t){return!t.match(Oo)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new Ye({functionName:t});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),o=n&&n[1]?n[1]:void 0,a=this.extractLocation(t.replace(r,""));return new Ye({functionName:o,fileName:a[0],lineNumber:a[1],columnNumber:a[2]})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(`
`)>-1&&e.message.split(`
`).length>e.stacktrace.split(`
`).length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split(`
`),n=[],o=2,a=r.length;o<a;o+=2){var i=t.exec(r[o]);i&&n.push(new Ye({fileName:i[2],lineNumber:parseFloat(i[1])}))}return n},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split(`
`),n=[],o=0,a=r.length;o<a;o+=2){var i=t.exec(r[o]);i&&n.push(new Ye({functionName:i[3]||void 0,fileName:i[2],lineNumber:parseFloat(i[1])}))}return n},parseOpera11:function(e){return e.stack.split(`
`).filter((function(t){return!!t.match(Eo)&&!t.match(/^Error created at/)}),this).map((function(t){var r=t.split("@"),n=this.extractLocation(r.pop()),o=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Ye({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}};function xo(e){if(!e||!e.outerHTML)return"";for(var t="";e.parentElement;){var r=e.localName;if(!r)break;r=r.toLowerCase();var n=e.parentElement,o=[];if(n.children&&n.children.length>0)for(var a=0;a<n.children.length;a++){var i=n.children[a];i.localName&&i.localName.toLowerCase&&i.localName.toLowerCase()===r&&o.push(i)}o.length>1&&(r+=":eq(".concat(o.indexOf(e),")")),t=r+(t?">"+t:""),e=n}return t}function Ut(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nn(e,t){if(t===0)return!0;var r=Object.keys(e);for(var n of r)if(Ut(e[n])&&Nn(e[n],t-1))return!0;return!1}function Ge(e,t){var r={numOfKeysLimit:50,depthOfLimit:4};Object.assign(r,t);var n=[],o=[];return JSON.stringify(e,(function(a,i){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?o.splice(s,1/0,a):o.push(a),~n.indexOf(i)&&(i=n[0]===i?"[Circular ~]":"[Circular ~."+o.slice(0,n.indexOf(i)).join(".")+"]")}else n.push(i);if(i===null)return i;if(i===void 0)return"undefined";if((function(p){return!!(Ut(p)&&Object.keys(p).length>r.numOfKeysLimit||typeof p=="function"||Ut(p)&&Nn(p,r.depthOfLimit))})(i))return(function(p){var b=p.toString();return r.stringLengthLimit&&b.length>r.stringLengthLimit&&(b="".concat(b.slice(0,r.stringLengthLimit),"...")),b})(i);if(typeof i=="bigint")return i.toString()+"n";if(i instanceof Event){var l={};for(var u in i){var c=i[u];Array.isArray(c)?l[u]=xo(c.length?c[0]:null):l[u]=c}return l}return i instanceof Node?i instanceof HTMLElement?i?i.outerHTML:"":i.nodeName:i instanceof Error?i.stack?i.stack+`
End of stack for Error object`:i.name+": "+i.message:i}))}var Mn={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Lo(e,t,r){var n,o=r?Object.assign({},Mn,r):Mn,a=o.logger;if(!a)return()=>{};n=typeof a=="string"?t[a]:a;var i=0,s=!1,l=[];if(o.level.includes("error")){var u=f=>{var A=f.message,E=f.error,k=Jt.parse(E).map((h=>h.toString())),m=[Ge(A,o.stringifyOptions)];e({level:"error",trace:k,payload:m})};t.addEventListener("error",u),l.push((()=>{t.removeEventListener("error",u)}));var c=f=>{var A,E;f.reason instanceof Error?(A=f.reason,E=[Ge("Uncaught (in promise) ".concat(A.name,": ").concat(A.message),o.stringifyOptions)]):(A=new Error,E=[Ge("Uncaught (in promise)",o.stringifyOptions),Ge(f.reason,o.stringifyOptions)]);var k=Jt.parse(A).map((m=>m.toString()));e({level:"error",trace:k,payload:E})};t.addEventListener("unhandledrejection",c),l.push((()=>{t.removeEventListener("unhandledrejection",c)}))}for(var p of o.level)l.push(b(n,p));return()=>{l.forEach((f=>f()))};function b(f,A){var E=this;return f[A]?ko.patch(f,A,(k=>function(){for(var m=arguments.length,h=new Array(m),d=0;d<m;d++)h[d]=arguments[d];if(k.apply(E,h),!(A==="assert"&&h[0]||s)){s=!0;try{var g=Jt.parse(new Error).map((S=>S.toString())).splice(1),C=(A==="assert"?h.slice(1):h).map((S=>Ge(S,o.stringifyOptions)));++i<o.lengthThreshold?e({level:A,trace:g,payload:C}):i===o.lengthThreshold&&e({level:"warn",trace:[],payload:[Ge("The number of log records reached the threshold.")]})}catch(S){k("rrweb logger error:",S,...h)}finally{s=!1}}})):()=>{}}}var An=e=>({name:"rrweb/console@1",observer:Lo,options:e}),ye=typeof window<"u"?window:void 0,le=typeof globalThis<"u"?globalThis:ye,kn=Array.prototype.forEach,Rn=le?.navigator;le?.document,le?.location,le?.fetch,le!=null&&le.XMLHttpRequest&&"withCredentials"in new le.XMLHttpRequest&&le.XMLHttpRequest,le?.AbortController,Rn?.userAgent;var Tn,Me=ye??{};(function(e){e.GZipJS="gzip-js",e.Base64="base64"})(Tn||(Tn={}));var Do=Array.isArray,En=Object.prototype,Fo=En.hasOwnProperty,qt=En.toString,vt=Do||function(e){return qt.call(e)==="[object Array]"},Bo=e=>typeof e=="function",_o=e=>e===Object(e)&&!vt(e),Ae=e=>e===void 0,Zo=e=>qt.call(e)=="[object String]",Qt=e=>e===null,On=e=>Ae(e)||Qt(e),$t=e=>qt.call(e)==="[object Boolean]",Yo=e=>e instanceof Document,xn=e=>e instanceof FormData,Ln=e=>{var t={_log:function(r){if(ye&&Me.POSTHOG_DEBUG&&!Ae(ye.console)&&ye.console){for(var n=("__rrweb_original__"in ye.console[r])?ye.console[r].__rrweb_original__:ye.console[r],o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];n(e,...a)}},info:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t._log("log",...n)},warn:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t._log("warn",...n)},error:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t._log("error",...n)},critical:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];console.error(e,...n)},uninitializedWarning:r=>{t.error("You must initialize PostHog before calling ".concat(r))},createLogger:r=>Ln("".concat(e," ").concat(r))};return t},Go=Ln("[PostHog.js]").createLogger,er={};function Wo(e,t,r){if(!On(e)){if(vt(e))return(function(a,i,s){if(vt(a)){if(kn&&a.forEach===kn)a.forEach(i,s);else if("length"in a&&a.length===+a.length){for(var l=0,u=a.length;l<u;l++)if(l in a&&i.call(s,a[l],l)===er)return}}})(e,t,r);if(xn(e)){for(var n of e.entries())if(t.call(r,n[1],n[0])===er)return}else for(var o in e)if(Fo.call(e,o)&&t.call(r,e[o],o)===er)return}}var Vo=function(e){var t,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",o=[];return Wo(e,(function(a,i){Ae(a)||Ae(i)||i==="undefined"||(t=encodeURIComponent(a instanceof File?a.name:a.toString()),r=encodeURIComponent(i),o[o.length]=r+"="+t)})),o.join(n)},Dn={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]};function Fn(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],o=r(n);return Bo(o)&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function tr(e,t){var r,n=(function(i){try{return typeof i=="string"?new URL(i).hostname:"url"in i?new URL(i.url).hostname:i.hostname}catch{return null}})(e),o={hostname:n,isHostDenied:!1};if((r=t.payloadHostDenyList)===null||r===void 0||!r.length||n==null||!n.trim().length)return o;for(var a of t.payloadHostDenyList)if(n.endsWith(a))return{hostname:n,isHostDenied:!0};return o}var Bn=Go("[Recorder]"),_n=e=>e.entryType==="navigation",rr=e=>e.entryType==="resource";function Zn(e,t){for(var r=e.length-1;r>=0;r-=1)if(t(e[r]))return e[r]}function Po(e,t,r){if(r.recordInitialRequests){var n=t.performance.getEntries().filter((i=>_n(i)||rr(i)&&r.initiatorTypes.includes(i.initiatorType)));e({requests:n.flatMap((i=>Ct({entry:i,method:void 0,status:void 0,networkRequest:{},isInitial:!0}))),isInitial:!0})}var o=new t.PerformanceObserver((i=>{var s=i.getEntries().filter((l=>_n(l)||rr(l)&&r.initiatorTypes.includes(l.initiatorType)&&(u=>!r.recordBody&&!r.recordHeaders||u.initiatorType!=="xmlhttprequest"&&u.initiatorType!=="fetch")(l)));e({requests:s.flatMap((l=>Ct({entry:l,method:void 0,status:void 0,networkRequest:{}})))})})),a=PerformanceObserver.supportedEntryTypes.filter((i=>r.performanceEntryTypeToObserve.includes(i)));return o.observe({entryTypes:a}),()=>{o.disconnect()}}function It(e,t){return!!t&&($t(t)||t[e])}function bt(e){var{type:t,recordBody:r,headers:n}=e;function o(i){var s=Object.keys(n).find((u=>u.toLowerCase()==="content-type")),l=s&&n[s];return i.some((u=>l?.includes(u)))}if(!r)return!1;if($t(r))return!0;if(vt(r))return o(r);var a=r[t];return $t(a)?a:o(a)}function nr(e,t,r,n,o){return or.apply(this,arguments)}function or(){return or=Ve((function*(e,t,r,n,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(a>10)return Bn.warn("Failed to get performance entry for request",{url:r,initiatorType:t}),null;var i=Zn(e.performance.getEntriesByName(r),(s=>rr(s)&&s.initiatorType===t&&(Ae(n)||s.startTime>=n)&&(Ae(o)||s.startTime<=o)));return i||(yield new Promise((s=>setTimeout(s,50*a))),nr(e,t,r,n,o,a+1))})),or.apply(this,arguments)}function Yn(e){var{body:t,options:r,url:n}=e;if(On(t))return null;var{hostname:o,isHostDenied:a}=tr(n,r);if(a)return o+" is in deny list";if(Zo(t))return t;if(Yo(t))return t.textContent;if(xn(t))return Vo(t);if(_o(t))try{return JSON.stringify(t)}catch{return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(t)}var Ho=e=>!Qt(e)&&(e.entryType==="navigation"||e.entryType==="resource");function Ct(e){var{entry:t,method:r,status:n,networkRequest:o,isInitial:a,start:i,end:s,url:l,initiatorType:u}=e;i=t?t.startTime:i,s=t?t.responseEnd:s;var c=Math.floor(Date.now()-performance.now()),p=Math.floor(c+(i||0)),b=[J(J({},t?t.toJSON():{name:l}),{},{startTime:Ae(i)?void 0:Math.round(i),endTime:Ae(s)?void 0:Math.round(s),timeOrigin:c,timestamp:p,method:r,initiatorType:u||(t?t.initiatorType:void 0),status:n,requestHeaders:o.requestHeaders,requestBody:o.requestBody,responseHeaders:o.responseHeaders,responseBody:o.responseBody,isInitial:a})];if(Ho(t))for(var f of t.serverTiming||[])b.push({timeOrigin:c,timestamp:p,startTime:Math.round(t.startTime),name:f.name,duration:f.duration,entryType:"serverTiming"});return b}var Xo=["video/","audio/"];function Gn(e){return new Promise(((t,r)=>{var n=setTimeout((()=>t("[SessionReplay] Timeout while trying to read body")),500);try{e.clone().text().then((o=>t(o)),(o=>r(o))).finally((()=>clearTimeout(n)))}catch{clearTimeout(n),t("[SessionReplay] Failed to read body")}}))}function Wn(){return(Wn=Ve((function*(e){var{r:t,options:r,url:n}=e,{hostname:o,isHostDenied:a}=tr(n,r);return a?Promise.resolve(o+" is in deny list"):Gn(t)}))).apply(this,arguments)}function Vn(){return(Vn=Ve((function*(e){var{r:t,options:r,url:n}=e,o=(function(a){var i,{r:s,options:l,url:u}=a;if(s.headers.get("Transfer-Encoding")==="chunked")return"Chunked Transfer-Encoding is not supported";var c=(i=s.headers.get("Content-Type"))===null||i===void 0?void 0:i.toLowerCase(),p=Xo.some((A=>c?.startsWith(A)));if(c&&p)return"Content-Type ".concat(c," is not supported");var{hostname:b,isHostDenied:f}=tr(u,l);return f?b+" is in deny list":null})({r:t,options:r,url:n});return Qt(o)?Gn(t):Promise.resolve(o)}))).apply(this,arguments)}function jo(e,t,r){if(!r.initiatorTypes.includes("fetch"))return()=>{};var n=It("request",r.recordHeaders),o=It("response",r.recordHeaders),a=Fn(t,"fetch",(i=>(function(){var s=Ve((function*(l,u){var c,p,b,f=new Request(l,u),A={};try{var E={};f.headers.forEach(((m,h)=>{E[h]=m})),n&&(A.requestHeaders=E),bt({type:"request",headers:E,url:l,recordBody:r.recordBody})&&(A.requestBody=yield(function(m){return Wn.apply(this,arguments)})({r:f,options:r,url:l})),p=t.performance.now(),c=yield i(f),b=t.performance.now();var k={};return c.headers.forEach(((m,h)=>{k[h]=m})),o&&(A.responseHeaders=k),bt({type:"response",headers:k,url:l,recordBody:r.recordBody})&&(A.responseBody=yield(function(m){return Vn.apply(this,arguments)})({r:c,options:r,url:l})),c}finally{nr(t,"fetch",f.url,p,b).then((m=>{var h,d=Ct({entry:m,method:f.method,status:(h=c)===null||h===void 0?void 0:h.status,networkRequest:A,start:p,end:b,url:f.url,initiatorType:"fetch"});e({requests:d})})).catch((()=>{}))}}));return function(l,u){return s.apply(this,arguments)}})()));return()=>{a()}}var Pn=null;function zo(e,t,r){if(!("performance"in t))return()=>{};if(Pn)return Bn.warn("Network observer already initialised, doing nothing"),()=>{};var n=r?Object.assign({},Dn,r):Dn,o=l=>{var u=[];l.requests.forEach((c=>{var p=n.maskRequestFn(c);p&&u.push(p)})),u.length>0&&e(J(J({},l),{},{requests:u}))},a=Po(o,t,n),i=()=>{},s=()=>{};return(n.recordHeaders||n.recordBody)&&(i=(function(l,u,c){if(!c.initiatorTypes.includes("xmlhttprequest"))return()=>{};var p=It("request",c.recordHeaders),b=It("response",c.recordHeaders),f=Fn(u.XMLHttpRequest.prototype,"open",(A=>function(E,k){var m,h,d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],g=arguments.length>3?arguments[3]:void 0,C=arguments.length>4?arguments[4]:void 0,S=this,w=new Request(k),M={},T={},O=S.setRequestHeader.bind(S);S.setRequestHeader=(v,_)=>(T[v]=_,O(v,_)),p&&(M.requestHeaders=T);var B=S.send.bind(S);S.send=v=>(bt({type:"request",headers:T,url:k,recordBody:c.recordBody})&&(M.requestBody=Yn({body:v,options:c,url:k})),m=u.performance.now(),B(v)),S.addEventListener("readystatechange",(()=>{if(S.readyState===S.DONE){h=u.performance.now();var v={};S.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((_=>{var L=_.split(": "),D=L.shift(),x=L.join(": ");D&&(v[D]=x)})),b&&(M.responseHeaders=v),bt({type:"response",headers:v,url:k,recordBody:c.recordBody})&&(M.responseBody=Yn({body:S.response,options:c,url:k})),nr(u,"xmlhttprequest",w.url,m,h).then((_=>{var L=Ct({entry:_,method:E,status:S?.status,networkRequest:M,start:m,end:h,url:k.toString(),initiatorType:"xmlhttprequest"});l({requests:L})})).catch((()=>{}))}})),A.call(S,E,k,d,g,C)}));return()=>{f()}})(o,t,n),s=jo(o,t,n)),Pn=()=>{a(),i(),s()}}var Hn="rrweb/network@1",ar=e=>({name:Hn,observer:zo,options:e});Me.__PosthogExtensions__=Me.__PosthogExtensions__||{},Me.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:An,getRecordNetworkPlugin:ar},Me.__PosthogExtensions__.rrweb={record:Te,version:"v2"},Me.rrweb={record:Te,version:"v2"},Me.rrwebConsoleRecord={getRecordConsolePlugin:An},Me.getRecordNetworkPlugin=ar,We.NETWORK_PLUGIN_NAME=Hn,We.default=Te,We.findLast=Zn,We.getRecordNetworkPlugin=ar,Object.defineProperty(We,"__esModule",{value:!0})})({});
